var VVVV_ENV="production",vvvvjs_jquery=$.noConflict();$=vvvvjs_jquery;
(function(h){h.ajaxPrefilter(function(g,d,c){if("script"==g.dataType||"script"==d.dataType)g.cache=!0});window.console||(window.console={log:function(g){}});VVVV={Nodes:{},PinTypes:{},Types:{},NodeLibrary:{},NodeNames:[],Patches:{},Editors:{},onLowFrameRate:function(){},onNotImplemented:function(g){console.log("Warning: "+g+" is not implemented.")},loadCounter:0,loadScript:function(g,d){var c=document.getElementsByTagName("head")[0],e=document.createElement("script");e.async=!1;e.src=VVVV.Root+"/"+
g;d&&e.addEventListener("load",d);VVVV.loadCounter++;c.appendChild(e)},init:function(g,d,c){function e(){var b=new VVVV.Core.Patch("");_(VVVV.Nodes).each(function(a){var f=new a(0,b);"development"==VVVV_ENV&&console.log("Registering "+f.nodename);VVVV.NodeLibrary[f.nodename.toLowerCase()]=a;VVVV.NodeNames.push(f.nodename)});"development"==VVVV_ENV&&console.log("done ...");VVVV.MainLoops=[];h("link[rel='VVVV'], script[language='VVVV']").each(function(a){var b="href";"SCRIPT"==h(this).get(0).tagName&&
("development"==VVVV_ENV&&console.warn('DEPRECATED: loading patches via <script language="VVVV" src="..."> tag is deprecated. Use <link rel="VVVV" href="..."> instead.'),b="src");b=new VVVV.Core.Patch(h(this).attr(b),function(){var a=new VVVV.Core.MainLoop(this);VVVV.MainLoops.push(a)});VVVV.Patches[a]=b});"function"===typeof c&&c.call()}VVVV.Root=g||"./";"development"==VVVV_ENV&&console.log("loading vvvv.js ...");if("development"==VVVV_ENV){document.getElementsByTagName("head");var f=function(b){b.target.removeEventListener("load",
f);0>=--VVVV.loadCounter&&e()};0==h("script[src*=thirdparty]").length&&VVVV.loadScript("thirdparty.js",f);0==h("script[src*=underscore]").length&&VVVV.loadScript("lib/underscore/underscore-min.js",f);0!=h('script[src*="d3.js"]').length||"full"!=d&&"vvvviewer"!=d||VVVV.loadScript("lib/d3-v3/d3.v3.min.js",f);0!=h("script[src*=glMatrix]").length||"full"!=d&&"run"!=d||VVVV.loadScript("lib/glMatrix-0.9.5.min.js",f);if(0==h('script[src*="vvvv.core.js"]').length){VVVV.loadScript("core/vvvv.core.js",f);if("run"==
d||"full"==d)VVVV.loadScript("mainloop/vvvv.mainloop.js",f),VVVV.loadScript("mainloop/vvvv.dominterface.js",f),VVVV.loadScript("types/vvvv.shared_types.js",f),VVVV.loadScript("nodes/vvvv.nodes.value.js",f),VVVV.loadScript("nodes/vvvv.nodes.string.js",f),VVVV.loadScript("nodes/vvvv.nodes.boolean.js",f),VVVV.loadScript("nodes/vvvv.nodes.color.js",f),VVVV.loadScript("nodes/vvvv.nodes.spreads.js",f),VVVV.loadScript("nodes/vvvv.nodes.spectral.js",f),VVVV.loadScript("nodes/vvvv.nodes.animation.js",f),VVVV.loadScript("nodes/vvvv.nodes.network.js",
f),VVVV.loadScript("nodes/vvvv.nodes.system.js",f),VVVV.loadScript("nodes/vvvv.nodes.canvas.js",f),VVVV.loadScript("nodes/vvvv.nodes.html5.js",f),VVVV.loadScript("nodes/vvvv.nodes.audio.js",f),VVVV.loadScript("nodes/vvvv.nodes.transform.js",f),VVVV.loadScript("nodes/vvvv.nodes.vectors.js",f),VVVV.loadScript("nodes/vvvv.nodes.webgl.js",f),VVVV.loadScript("nodes/vvvv.nodes.complex.js",f),VVVV.loadScript("nodes/vvvv.nodes.enumerations.js",f),VVVV.loadScript("nodes/vvvv.nodes.2d.js",f),VVVV.loadScript("nodes/vvvv.nodes.3d.js",
f),VVVV.loadScript("nodes/vvvv.nodes.node.js",f),VVVV.loadScript("nodes/vvvv.nodes.astronomy.js",f),VVVV.loadScript("nodes/vvvv.nodes.xml.js",f),VVVV.loadScript("nodes/vvvv.nodes.differential.js",f),VVVV.loadScript("nodes/vvvv.nodes.xelement.js",f),VVVV.loadScript("nodes/vvvv.nodes.html.js",f);VVVV.loadScript("editors/vvvv.editors.browser_editor.js",f)}}"production"==VVVV_ENV&&e()}}})(vvvvjs_jquery);(function(h){VVVV.MousePositions={_all:{x:0,y:0,wheel:0,lb:0,mb:0,rb:0}};VVVV.PinDirection={Input:0,Output:1,Configuration:2};VVVV.PinTypes.Generic={typeName:"Generic",reset_on_disconnect:!0,defaultValue:function(){return"0"},cloneValues:function(g){return g.data.values.slice()},increaseSize:function(g,d){}};VVVV.PinTypes.Value={typeName:"Value",reset_on_disconnect:!1,defaultValue:function(){return 0},primitive:!0,cloneValues:function(g){return new Float64Array(g.data.values)},increaseSize:function(g,
d){for(var c=new Float64Array(d+100),e=g.data.values.length;e--;)c[e]=g.data.values[e];g.data.values=c}};VVVV.PinTypes.String={typeName:"String",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0,cloneValues:function(g){return g.data.values.slice()},increaseSize:function(g,d){}};VVVV.PinTypes.Enum={typeName:"Enum",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0,cloneValues:function(g){return g.data.values.slice()},increaseSize:function(g,d){}};VVVV.Helpers=
{translateOperators:function(g){g=g.replace("Add","+");g=g.replace("Subtract","-");g=g.replace("Multiply","*");g=g.replace("Divide","/");g=g.replace("EQ","=");g=g.replace("GT",">");g=g.replace("GTE",">=");g=g.replace("LT","<");return g=g.replace("LTE","<=")},prepareFilePath:function(g,d){g=g.replace(/\\/g,"/");return g.match(/^%VVVV%/)?g.replace("%VVVV%",VVVV.Root):g.match(/^%PAGE%/)?g.replace("%PAGE%",location.pathname):g.match(/^(\/|.+:\/\/)/)?g:d?d.getAbsolutePath()+g:g},dynamicPins:function(g,
d,c,e){for(var f=d.length;f<c;f++)d[f]=e.call(g,f);for(f=c;f<d.length;f++)g.removeInputPin(d[f].pinname);d.length=c;g.parentPatch.afterUpdate()}};VVVV.Core={Pin:function(g,d,c,e,f){this.direction=d;this.pinname=g;this.links=[];this.data={values:[],changed:!0,sliceCount:0};this.node=e;this.reset_on_disconnect=this.active=!1;this.masterPin=this.slavePin=void 0;this.connectionChangedHandlers={};this.enumOptions=[];this.getValue=function(b,a){if(!a||1==a)return this.data.values[b%this.data.sliceCount];
for(var f=[],e=0;e<a;e++)f.push(this.data.values[(b*a+e)%this.data.sliceCount]);return f};this.setValue=function(b,a){this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(b>this.data.values.length-1&&VVVV.PinTypes[this.typeName].increaseSize(this,b),this.data.values[b]=a,b>this.data.sliceCount-1&&(this.data.sliceCount=b+1),this.primitive&&this.data.values[b]==a||this.markPinAsChanged());this.node.isIOBox&&("Descriptive Name"==this.pinname&&this.node.invisiblePins["Descriptive Name"])&&(this.node.parentPatch.domInterface?
this.node.parentPatch.domInterface.connect(this.node):this.node.parentPatch.parentPatch&&this.node.registerInterfacePin())};this.markPinAsChanged=function(){this.data.changed=!0};this.pinIsChanged=function(){return this.data.changed};this.connect=function(b){this.data=b.data;if(this.direction==VVVV.PinDirection.Output){b=this.links.length;for(var a=0;a<b;a++)this.links[a].toPin.data=this.data}this.slavePin&&(this.slavePin.data=this.data);this.markPinAsChanged()};this.disconnect=function(){this.data=
"V"==this.typeName[0]?{values:new Float64Array(this.data.values),changed:!0,sliceCount:this.data.sliceCount}:{values:this.data.values.slice(0),changed:!0,sliceCount:this.data.sliceCount}};this.isConnected=function(){return 0<this.links.length||this.masterPin&&this.masterPin.isConnected()};this.getSliceCount=function(){return this.data.sliceCount};this.setSliceCount=function(b){this.data.sliceCount!=b&&(this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.data.sliceCount=b),this.markPinAsChanged())};
this.setType=function(b){if(b.typeName!=this.typeName){var a=this;delete this.connectionChangedHandlers.nodepin;delete this.connectionChangedHandlers.webglresource;_(b.connectionChangedHandlers).each(function(f,k){a.connectionChangedHandlers[k]=b.connectionChangedHandlers[k]});this.typeName=b.typeName;this.defaultValue=b.defaultValue;this.direction==VVVV.PinDirection.Input&&(this.defaultValue&&!this.isConnected())&&(this.setValue(0,this.defaultValue()),this.setSliceCount(1));if("Value"==b.typeName){var f=
this.getSliceCount();this.data.values=new Float64Array(_(this.data.values).map(function(a){return parseFloat(a)}));this.setSliceCount(f)}void 0!=b.reset_on_disconnect&&(this.reset_on_disconnect=b.reset_on_disconnect)}};void 0==f&&(f=VVVV.PinTypes.Generic,this.unvalidated=!0);this.setType(f);if(c&&0<c.length)for(g=c.length;g--;)this.setValue(g,c[g]);this.reset=function(){this.data.values=[];this.slavePin&&(this.slavePin.data=this.data);this.defaultValue?(this.setValue(0,this.defaultValue()),this.setSliceCount(1)):
this.data={values:c.slice(0),changed:!0,sliceCount:c.length};this.markPinAsChanged()};this.connectionChanged=function(){var b=this;_(this.connectionChangedHandlers).each(function(a){b.f=a;b.f()})}},Node:function(g,d,c){this.nodename=d;this.id=g;this.height=this.width=this.y=this.x=0;this.isShader=this.isIOBox=!1;this.resourcesPending=0;this.auto_nil=!0;this.setupObject=function(){this.inputPins={};this.outputPins={};this.invisiblePins={};this.defaultPinValues={}};this.setupObject();this.delays_output=
this.auto_evaluate=!1;this.dirty=!0;(this.parentPatch=c)&&(this.parentPatch.nodeMap[g]=this);this.addDefault=function(e,f){this.defaultPinValues[e]=f};this.addInputPin=function(e,f,b){b=b||VVVV.PinTypes.Generic;f=new VVVV.Core.Pin(e,VVVV.PinDirection.Input,f,this,b);this.inputPins[e]=f;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_in_"+e]=f);this.applyPinValuesFromXML(e);return f};this.addOutputPin=function(e,f,b){b=b||VVVV.PinTypes.Generic;f=new VVVV.Core.Pin(e,VVVV.PinDirection.Output,f,
this,b);this.outputPins[e]=f;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_out_"+e]=f);return f};this.removeInputPin=function(e){if(this.inputPins[e]){var f=this.inputPins[e].links[0];f&&(f.fromPin.connectionChanged(),f.destroy());delete this.inputPins[e];this.dirty=!0}};this.removeOutputPin=function(e){if(this.outputPins[e]){for(var f=this.outputPins[e].links.length,b=0;b<f;b++){var a=this.outputPins[e].links[b];a.toPin.connectionChanged();a.destroy()}delete this.outputPins[e];this.dirty=
!0}};this.addInvisiblePin=function(e,f,b){b=b||VVVV.PinTypes.Generic;f=new VVVV.Core.Pin(e,VVVV.PinDirection.Configuration,f,this,b);this.invisiblePins[e]=f;this.parentPatch.pinMap[this.id+"_inv_"+e]=f;void 0!=this.defaultPinValues[e]&&(f.data.values=this.defaultPinValues[e],f.data.changed=!0);return f};this.IOBoxType=function(){var e=/^IOBox \((.*)\)/.exec(this.nodename);return e&&1<e.length?e[1]:""};this.IOBoxInputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.inputPins["Y Input Value"];
case "String":return this.inputPins["Input String"];case "Color":return this.inputPins["Color Input"];case "Node":return this.inputPins["Input Node"]}};this.IOBoxOutputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.outputPins["Y Output Value"];case "String":return this.outputPins["Output String"];case "Color":return this.outputPins["Color Output"];case "Node":return this.outputPins["Output Node"]}};this.IOBoxRows=function(){return this.invisiblePins.Rows?this.invisiblePins.Rows.getValue(0):
1};this.isComment=function(){return this.isIOBox&&0==_(this.outputPins).size()};this.label=function(){if(this.isIOBox)return this.IOBoxInputPin().getValue(0)?this.IOBoxInputPin().getValue(0).toString():"";if(this.isSubpatch)return"||"+this.nodename.match(/([^\/]+)\.v4p$/)[1];var e=this.nodename.replace(/\s\(.+\)/,"");return e=VVVV.Helpers.translateOperators(e)};this.getWidth=function(){var e;e=100==this.width||0==this.width?this.isIOBox?60:Math.max(18,6*(this.label().length+2)):this.width/15;return e=
Math.max(e,12*(_(this.inputPins).size()-1)+4)};this.getHeight=function(){return this.isIOBox&&100==this.height?18*this.IOBoxRows():100==this.height||this.isSubpatch?18:Math.max(18,this.height/15)};this.getUpstreamNodes=function(){var e=[];_(this.inputPins).each(function(f){0<f.links.length&&e.push(f.links[0].fromPin.node)});return e};this.getDownstreamNodes=function(){var e=[];_(this.outputPins).each(function(f){for(var b=0;b<f.links.length;b++)e.push(f.links[b].toPin.node)});return e};this.findDownstreamNodes=
function(e){var f=[];_(this.outputPins).each(function(b){for(var a=0;a<b.links.length;a++)b.links[a].toPin.node.nodename==e?f.push(b.links[a].toPin.node):f=b.links[a].toPin.slavePin?f.concat(b.links[a].toPin.slavePin.node.findDownstreamNodes(e)):b.links[a].toPin.node.isIOBox&&b.links[a].toPin.node.IOBoxOutputPin().slavePin?f.concat(b.links[a].toPin.node.IOBoxOutputPin().slavePin.node.findDownstreamNodes(e)):f.concat(b.links[a].toPin.node.findDownstreamNodes(e))});return f};this.hasNilInputs=function(){var e=
!1;_(this.inputPins).each(function(f){0==f.getSliceCount()&&(e=!0)});return e};this.isDirty=function(){if(this.dirty)return!0;for(var e in this.inputPins)if(this.inputPins[e].data.changed)return!0;for(e in this.invisiblePins)if(this.invisiblePins[e].data.changed)return!0;return!1};this.getMaxInputSliceCount=function(){var e=0,f;for(f in this.inputPins)this.inputPins[f].getSliceCount()>e&&(e=this.inputPins[f].data.sliceCount);return e};this.applyPinValuesFromXML=function(e){if(this.inputPins[e]){var f=
this.inputPins[e];e=this.defaultPinValues[e];if(void 0!=e&&(!f.reset_on_disconnect||1<e.length||""!=e[0])){for(var b=0;b<e.length;b++)f.data.values[b]!=e[b]&&("Color"==f.typeName?f.setValue(b,new VVVV.Types.Color(e[b])):"Value"==f.typeName?f.setValue(b,parseFloat(e[b])):f.setValue(b,e[b]));f.setSliceCount(e.length)}}};this.registerInterfacePin=function(){var e=this;if(this.isIOBox&&this.parentPatch.parentPatch&&""!=this.invisiblePins["Descriptive Name"].getValue(0)){var f=this.invisiblePins["Descriptive Name"].getValue(0);
this.IOBoxInputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.masterPin){"development"==VVVV_ENV&&console.log("deleting "+f+" input pin because node has input connection...");for(var b=0;b<this.masterPin.links.length;b++)this.masterPin.links[b].destroy();this.disconnect();e.parentPatch.removeInputPin(f);this.masterPin=void 0}0==e.IOBoxOutputPin().links.length&&(e.IOBoxOutputPin().slavePin?e.IOBoxOutputPin().slavePin.pinname!=f&&("development"==VVVV_ENV&&console.log("renaming "+
e.IOBoxOutputPin().slavePin.pinname+" to "+f),e.parentPatch.outputPins[f]=e.parentPatch.outputPins[e.IOBoxOutputPin().slavePin.pinname],e.parentPatch.removeOutputPin(e.IOBoxOutputPin().slavePin.pinname),e.IOBoxOutputPin().slavePin.pinname=f):("development"==VVVV_ENV&&console.log("interfacing output pin detected: "+f),b=e.parentPatch.outputPins[f],void 0==b&&(b=e.parentPatch.addOutputPin(f,e.IOBoxOutputPin().data.values)),b.setType(VVVV.PinTypes[e.IOBoxOutputPin().typeName]),e.IOBoxOutputPin().slavePin=
b,b.masterPin=e.IOBoxOutputPin(),b.connect(e.IOBoxOutputPin())));this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxInputPin().connectionChanged();this.IOBoxOutputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.slavePin){"development"==VVVV_ENV&&console.log("deleting "+f+" output pin because node "+e.id+" has output connection...");for(var b=0;b<this.slavePin.links.length;b++)this.slavePin.links[b].destroy();this.slavePin.disconnect();e.parentPatch.removeOutputPin(f);
this.slavePin=void 0}if(0==e.IOBoxInputPin().links.length)if(e.IOBoxInputPin().masterPin)e.IOBoxInputPin().masterPin.pinname!=f&&(console.log("renaming "+e.IOBoxInputPin().masterPin.pinname+" to "+f),e.parentPatch.inputPins[f]=e.parentPatch.inputPins[e.IOBoxInputPin().masterPin.pinname],e.parentPatch.removeInputPin(e.IOBoxInputPin().masterPin.pinname),e.IOBoxInputPin().masterPin.pinname=f);else{"development"==VVVV_ENV&&console.log("interfacing input pin detected: "+f);b=e.parentPatch.inputPins[f];
void 0==b&&("development"==VVVV_ENV&&console.log("creating new input pin at parent patch, using IOBox values"),b=e.parentPatch.addInputPin(f,e.IOBoxInputPin().data.values));var a=VVVV.PinTypes[e.IOBoxInputPin().typeName].cloneValues(b);b.setType(VVVV.PinTypes[e.IOBoxInputPin().typeName]);b.unvalidated&&VVVV.PinTypes[b.typeName].primitive&&!b.isConnected()&&(b.data.values=a,b.data.changed=!0);b.unvalidated=!1;b.slavePin=e.IOBoxInputPin();e.IOBoxInputPin().masterPin=b;e.IOBoxInputPin().connect(b)}this.node.parentPatch.parentPatch.afterUpdate()};
this.IOBoxOutputPin().connectionChanged()}};this.setup=function(){this.addInvisiblePin("Descriptive Name",[""],VVVV.PinTypes.String)};this.initialize=function(){};this.evaluate=function(){_(this.outputPins).each(function(e){e.setValue(0,"not calculated")})};this.destroy=function(){this.isIOBox&&(this.IOBoxInputPin().masterPin&&(this.parentPatch.removeInputPin(this.IOBoxInputPin().masterPin.pinname),this.parentPatch.parentPatch.afterUpdate()),this.IOBoxOutputPin().slavePin&&(this.parentPatch.removeOutputPin(this.IOBoxOutputPin().slavePin.pinname),
this.parentPatch.parentPatch.afterUpdate()))};this.serialize=function(){var e=h("<NODE>");e.attr("id",this.id);e.attr("nodename",this.nodename);e.attr("systemname",this.nodename);this.shaderFile&&e.attr("filename",this.shaderFile.replace(".vvvvjs.fx",".fx").replace("%VVVV%/effects","%VVVV%/lib/nodes/effects"));this.isSubpatch&&(e.attr("filename",this.nodename),e.attr("systemname",this.nodename.match("(.*).v4p$")[1]));this.isIOBox?e.attr("componentmode","InABox"):e.attr("componentmode","Hidden");var f=
h("<BOUNDS>");this.isIOBox?f.attr("type","Box"):f.attr("type","Node");f.attr("left",parseInt(15*this.x));f.attr("top",parseInt(15*this.y));f.attr("width",parseInt(this.width));f.attr("height",parseInt(this.height));e.append(f);var b=this;_(this.inputPins).each(function(a){var f=h("<PIN>");f.attr("pinname",a.pinname);f.attr("visible","1");(!a.isConnected()||a.masterPin)&&(VVVV.PinTypes[a.typeName].primitive&&b.defaultPinValues[a.pinname])&&f.attr("values",_(b.defaultPinValues[a.pinname]).map(function(a){return"|"+
a.toString().replace(/\|/g,"||")+"|"}).join(","));e.append(f)});_(this.invisiblePins).each(function(a){var b=h("<PIN>");b.attr("pinname",a.pinname);b.attr("visible","0");VVVV.PinTypes[a.typeName].primitive&&b.attr("values",_(a.data.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));e.append(b)});return e}},Link:function(g,d){this.fromPin=g;this.toPin=d;this.fromPin.links.push(this);this.toPin.links.push(this);this.destroy=function(){this.fromPin.links.splice(this.fromPin.links.indexOf(this),
1);this.toPin.links.splice(this.toPin.links.indexOf(this),1);this.fromPin.node.parentPatch.linkList.splice(this.fromPin.node.parentPatch.linkList.indexOf(this),1);this.toPin.disconnect();if(this.toPin.reset_on_disconnect)this.toPin.reset();else{this.toPin.node.defaultPinValues[this.toPin.pinname]=[];for(var c=this.toPin.getSliceCount();c--;)this.toPin.node.defaultPinValues[this.toPin.pinname][c]=this.toPin.data.values[c]}};this.serialize=function(){var c=h("<LONK>");c.attr("srcnodeid",this.fromPin.node.id);
c.attr("srcpinname",this.fromPin.pinname);c.attr("dstnodeid",this.toPin.node.id);c.attr("dstpinname",this.toPin.pinname);return c}},Patch:function(g,d,c,e,f){function b(a){if(void 0==a)return[];if("45_26">=this.vvvv_version)return separator=/\|/.test(a)?"|":",",a.split(separator).filter(function(a,b){return""!=a});for(var b=[],f="",k=!1,e=a.length,m=0;m<e;m++)","!=a[m]||k?"|"==a[m]?"|"!=a[m+1]||m+1==a.length-1?k=!k:f+=a[++m]:f+=a[m]:(b.push(f),f="");b.push(f);return b}function a(){var a=window.location.hash.match("#([^/]+)/"+
l.ressource+"$");a&&(console.log("launching editor ..."),(new VVVV.Editors[a[1]]).enable(l))}this.ressource=g;this.vvvv_version="45_26.1";this.boundingBox={width:0,height:0};this.windowHeight=this.windowWidth=500;this.pinMap={};this.nodeMap={};this.nodeList=[];this.linkList=[];this.pinList=[];this.evaluationRecipe=[];this.mainloop=void 0;this.success=d;this.error=c;this.editor=void 0;this.setupObject();e&&(this.parentPatch=e);f&&(this.id=f);var k=!1;this.getAbsolutePath=function(){var a=this.getRelativePath();
this.parentPatch&&(a=this.parentPatch.getAbsolutePath()+a);return a};this.getRelativePath=function(){return this.nodename.match(/(.*\/)?[^/]+\.v4p/)[1]||""};this.destroy=function(){for(var a=0;a<this.nodeList.length;a++)this.nodeList[a].destroy(),delete this.nodeMap[this.nodeList[a].id],delete this.nodeList[a]};if("45_26">=this.vvvv_version)var m={},r={},s={},n={};var l=this;this.doLoad=function(a,f){function k(a){"complete"==c&&(r={});h(a).find('link[deleteme="pronto"]').each(function(){for(var a=
!1,b=0;b<l.linkList.length;b++)l.linkList[b].fromPin.node.id==h(this).attr("srcnodeid")&&(l.linkList[b].fromPin.pinname==h(this).attr("srcpinname")&&l.linkList[b].toPin.node.id==h(this).attr("dstnodeid")&&l.linkList[b].toPin.pinname==h(this).attr("dstpinname"))&&(a=l.linkList[b]);if(a){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var b=a.fromPin,f=a.toPin;a.destroy();b.connectionChanged();f.connectionChanged();f.markPinAsChanged()}});h(a).find('link[deleteme!="pronto"]').each(function(){var a=
l.pinMap[h(this).attr("srcnodeid")+"_out_"+h(this).attr("srcpinname")],b=l.pinMap[h(this).attr("dstnodeid")+"_in_"+h(this).attr("dstpinname")];void 0==a&&l.nodeMap[h(this).attr("srcnodeid")]&&(a=l.nodeMap[h(this).attr("srcnodeid")].addOutputPin(h(this).attr("srcpinname"),void 0));void 0==b&&l.nodeMap[h(this).attr("dstnodeid")]&&(b=l.nodeMap[h(this).attr("dstnodeid")].addInputPin(h(this).attr("dstpinname"),void 0));if(a&&b){for(var f=!1,k=0;k<l.linkList.length;k++)l.linkList[k].fromPin.node.id==a.node.id&&
(l.linkList[k].fromPin.pinname==a.pinname&&l.linkList[k].toPin.node.id==b.node.id&&l.linkList[k].toPin.pinname==b.pinname)&&(f=l.linkList[k]);f||(f=new VVVV.Core.Link(a,b),a.connectionChanged(),b.connectionChanged(),l.linkList.push(f),b.connect(a));"complete"==c&&(r[a.node.id+"_"+a.pinname+"-"+b.node.id+"_"+b.pinname]=f)}});"complete"==c&&(_(m).each(function(a,b){if(void 0==r[b]){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var f=a.fromPin,k=a.toPin;a.destroy();
f.connectionChanged();k.connectionChanged();k.markPinAsChanged();k.reset_on_disconnect&&k.reset()}}),m={},_(r).each(function(a,b){m[b]=a}))}var e=this;do e.dirty=!0;while(e=e.parentPatch);if(e=/^<!DOCTYPE\s+PATCH\s+SYSTEM\s+"(.+)\\(.+)\.dtd/.exec(a))l.vvvv_version=e[2].replace(/[a-zA-Z]+/,"_");var c="diff";if(/\s<PATCH/.test(a)||"45_26">=l.vvvv_version)c="complete","development"==VVVV_ENV&&console.log("complete: "+this.nodename);e=h(a).find('bounds[type="Window"]').first();0<e.length&&(l.windowWidth=
e.attr("width")/15,l.windowHeight=e.attr("height")/15);"complete"==c&&(n={});h(a).find("node").each(function(){if("pronto"==h(this).attr("createme")&&void 0!=l.nodeMap[h(this).attr("id")]){var e=l.nodeMap[h(this).attr("id")];"development"==VVVV_ENV&&console.log("node renamed, so deleting node "+e.id+" / "+e.nodename);_(e.inputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.fromPin.connectionChanged()})});_(e.outputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.toPin.connectionChanged();
a.toPin.markPinAsChanged()})});l.nodeList.splice(l.nodeList.indexOf(e),1);delete l.nodeMap[e.id]}var m;m="InABox"==h(this).attr("componentmode")?h(this).find('bounds[type="Box"]').first():h(this).find('bounds[type="Node"]').first();var r=void 0!=l.nodeMap[h(this).attr("id")];if(r)e=l.nodeMap[h(this).attr("id")];else{var s=""!=h(this).attr("systemname")?h(this).attr("systemname"):h(this).attr("nodename");if(void 0==s)return;if(void 0!=VVVV.NodeLibrary[s.toLowerCase()])e=new (VVVV.NodeLibrary[s.toLowerCase()])(h(this).attr("id"),
l),VVVV.NodeLibrary[s.toLowerCase()].requirements&&(l.resourcesPending++,_(VVVV.NodeLibrary[s.toLowerCase()].requirements).each(function(a){void 0===VVVV.LoadedLibs[a]&&VVVV.loadScript(VVVV.ThirdPartyLibs[a],function(){l.resourcesPending--;VVVV.LoadedLibs[a]=VVVV.ThirdPartyLibs[a]})}));else if(/.fx$/.test(h(this).attr("filename")))e=new VVVV.Nodes.GenericShader(h(this).attr("id"),l),e.isShader=!0,e.shaderFile=h(this).attr("filename").replace(/\\/g,"/").replace(/\.fx$/,".vvvvjs.fx").replace("lib/nodes/",
""),e.nodename=s;else if(/.v4p$/.test(h(this).attr("filename"))){l.resourcesPending++;var d=this,e=new VVVV.Core.Patch(h(this).attr("filename"),function(){l.resourcesPending--;"development"==VVVV_ENV&&console.log(this.nodename+"invoking update links");k(a);l.editor&&l.editor.addPatch(this);if(this.auto_evaluate){var b=l;do b.auto_evaluate=!0;while(b=b.parentPatch)}this.setMainloop(l.mainloop);l.afterUpdate();l.updateEvaluationRecipe();0>=l.resourcesPending&&f&&(f(),f=void 0)},function(){l.resourcesPending--;
this.not_implemented=!0;VVVV.onNotImplemented(s);k(a);l.afterUpdate();l.updateEvaluationRecipe();0>=l.resourcesPending&&f&&(f(),f=void 0)},l,h(d).attr("id"));e.isSubpatch=!0;l.editor&&!e.editor&&l.editor.addPatch(e);l.nodeMap[e.id]=e}else e=new VVVV.Core.Node(h(this).attr("id"),s,l),e.not_implemented=!0,"diff"==c&&!0==VVVV.Config.auto_undo&&l.editor.sendUndo(),VVVV.onNotImplemented(s);"development"==VVVV_ENV&&"complete"!=c&&console.log(l.nodename+": inserted new node "+e.nodename)}if(e.auto_evaluate){d=
l;do d.auto_evaluate=!0;while(d=d.parentPatch)}if("pronto"==h(this).attr("deleteme")){"development"==VVVV_ENV&&console.log("removing node "+e.id);if(e.isSubpatch){e.editor&&e.editor.removePatch(e);d=e.getSubPatches();d.push(e);for(var g,p=0;p<d.length;p++)g=VVVV.Helpers.prepareFilePath(d[p].nodename,d[p].parentPatch),VVVV.Patches[g].splice(VVVV.Patches[g].indexOf(e),1),0==VVVV.Patches[g].length&&delete VVVV.Patches[g]}l.nodeList.splice(l.nodeList.indexOf(e),1);e.destroy();delete l.nodeMap[e.id]}0<
m.length&&(m.attr("left")&&(e.x=m.attr("left")/15,e.y=m.attr("top")/15,l.boundingBox.width=Math.max(l.boundingBox.width,e.x+100),l.boundingBox.height=Math.max(l.boundingBox.height,e.y+100)),m.attr("width")&&(e.width=m.attr("width"),e.height=m.attr("height")));/^iobox/.test(e.nodename.toLowerCase())&&(e.isIOBox=!0);r||e.setup();d=this;h(this).find("pin").each(function(){var f=h(this).attr("pinname"),k=b(h(this).attr("values"));void 0!=k&&0<k.length&&e.addDefault(f,k);if(void 0==e.outputPins[f])if(void 0!=
e.inputPins[f])e.inputPins[f].isConnected()||e.applyPinValuesFromXML(f);else if(void 0!=e.invisiblePins[f]){if(void 0!=k){for(var m=0;m<k.length;m++)e.invisiblePins[f].data.values[m]!=k[m]&&e.invisiblePins[f].setValue(m,k[m]);e.invisiblePins[f].setSliceCount(k.length)}}else 1==h(this).attr("visible")&&"Configuration"!=h(this).attr("pintype")||e.isSubpatch?"Output"==h(this).attr("pintype")||0<h(a).find("link[srcnodeid="+e.id+"]").filter("link[srcpinname='"+f.replace(/[\[\]]/,"")+"']").length?void 0==
e.outputPins[f]&&e.addOutputPin(f,k):void 0==e.inputPins[f]&&void 0==e.invisiblePins[f]&&e.addInputPin(f,k):void 0==e.inputPins[f]&&void 0==e.invisiblePins[f]&&e.addInvisiblePin(f,k)});r||(e.initialize(),l.nodeList.push(e));"complete"==c&&(n[e.id]=e)});"complete"==c&&(_(s).each(function(a,b){void 0==n[b]&&("development"==VVVV_ENV&&console.log("removing node "+a.id),l.nodeList.splice(l.nodeList.indexOf(a),1),delete l.nodeMap[a.id])}),s={},_(n).each(function(a,b){s[b]=a}));0===this.resourcesPending&&
k(a);this.updateEvaluationRecipe();0>=this.resourcesPending&&f&&(f(),f=void 0)};this.getSubPatches=function(){for(var a=[],b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&(a.push(this.nodeList[b]),a=a.concat(this.nodeList[b].getSubPatches()));return a};this.setMainloop=function(a){this.mainloop=a;for(var b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&this.nodeList[b].setMainloop(a)};this.afterEvaluate=function(){};this.afterUpdate=function(){};this.toXML=function(){var a=
h("<PATCH>"),b=h("<BOUNDS>");b.attr("type","Window");b.attr("width",parseInt(15*this.windowWidth));b.attr("height",parseInt(15*this.windowHeight));a.append(b);for(b=0;b<this.nodeList.length;b++)a.append(this.nodeList[b].serialize());for(b=0;b<this.linkList.length;b++)a.append(this.linkList[b].serialize());a='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n  '+a.wrapAll("<d></d>").parent().html();a=a.replace(/<patch/g,"<PATCH");a=a.replace(/<\/patch>/g,"\n  </PATCH>");a=
a.replace(/<node/g,"\n  <NODE");a=a.replace(/<\/node>/g,"\n  </NODE>");a=a.replace(/<bounds/g,"\n  <BOUNDS");a=a.replace(/<\/bounds>/g,"\n  </BOUNDS>");a=a.replace(/<pin/g,"\n  <PIN");a=a.replace(/<\/pin>/g,"\n  </PIN>");a=a.replace(/<lonk/g,"\n  <LINK");return a=a.replace(/<\/lonk>/g,"\n  </LINK>")};this.updateEvaluationRecipe=function(){function a(c){if(0>f.indexOf(c.id)){f.push(c.id);var r=c.getUpstreamNodes(),l=!1;_(r).each(function(f){void 0==b[f.id]&&(l=l||a(f))});f.pop()}l&&c.delays_output&&
e.push(c);if(!l&&0>f.indexOf(c.id)||c.delays_output){k.push(c);for(var n in c.inputPins)0==c.inputPins[n].links.length&&m.push(c.inputPins[n]);for(n in c.invisiblePins)m.push(c.invisiblePins[n]);for(n in c.outputPins)m.push(c.outputPins[n]);b[c.id]=c;return!1}return!0}this.evaluationRecipe=[];this.pinList=[];for(var b={},f=[],e=[],k=this.evaluationRecipe,m=this.pinList,c=0;c<this.nodeList.length;c++)(0==this.nodeList[c].getDownstreamNodes().length||this.nodeList[c].auto_evaluate||this.nodeList[c].delays_output)&&
void 0==b[this.nodeList[c].id]&&a(this.nodeList[c]);for(c=0;c<e.length;c++)a(e[c])};this.evaluate=function(){if(!(0<this.resourcesPending)){if(k)var a={},b=(new Date).getTime(),f=0;for(var e,m=0;m<this.evaluationRecipe.length;m++){var c=this.evaluationRecipe[m];k&&console.log(c.nodename);if(c.isDirty()||c.auto_evaluate||c.isSubpatch){k&&(b=(new Date).getTime());if(c.auto_nil&&!c.isSubpatch&&c.hasNilInputs())for(e in c.outputPins)c.outputPins[e].setSliceCount(0);else c.evaluate(),c.dirty=!1;k&&(a[c.nodename]||
(a[c.nodename]={count:0,dt:0}),f=(new Date).getTime()-b,a[c.nodename].count++,a[c.nodename].dt+=f,console.log(c.nodename+" / "+c.id+": "+f+"ms"))}}k&&(_(a).each(function(a,b){console.log(a.count+"x "+b+": "+a.dt+"ms")}),b=(new Date).getTime());this.afterEvaluate();k&&console.log("patch rendering: "+((new Date).getTime()-b)+"ms");k=!1}};this.clearChangedFlags=function(){for(var a=this.pinList.length;a--;)this.pinList[a].data.changed=!1};h(window).keydown(function(a){84==a.which&&(a.altKey&&a.ctrlKey)&&
(k=!0)});if(/\.v4p[^<>\s]*$/.test(g)){this.nodename=g;var p=this,t=g;this.parentPatch&&(t=VVVV.Helpers.prepareFilePath(g,this.parentPatch));VVVV.Patches[t]?p.doLoad(VVVV.Patches[t][0].toXML(),function(){VVVV.Patches[t].push(p);p.success&&p.success();p.afterUpdate()}):h.ajax({url:t,type:"get",dataType:"text",success:function(a){p.doLoad(a,function(){VVVV.Patches[t]=VVVV.Patches[t]||[];VVVV.Patches[t].push(p);p.success&&p.success();p.afterUpdate()})},error:function(){p.error&&p.error()}})}else this.doLoad(g,
function(){this.success&&this.success()});a();h(window).bind("hashchange",function(){a()})}};VVVV.Core.Patch.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.MousePositions={_all:{x:[0],y:[0],wheel:[0],lb:[0],mb:[0],rb:[0]}};VVVV.PinDirection={Input:0,Output:1,Configuration:2};VVVV.PinTypes.Generic={typeName:"Generic",reset_on_disconnect:!0,defaultValue:function(){return"0"}};VVVV.PinTypes.Value={typeName:"Value",reset_on_disconnect:!1,defaultValue:function(){return 0},primitive:!0};VVVV.PinTypes.String={typeName:"String",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0};VVVV.PinTypes.Enum={typeName:"Enum",reset_on_disconnect:!1,
defaultValue:function(){return""},primitive:!0};VVVV.Helpers={translateOperators:function(g){g=g.replace("Add","+");g=g.replace("Subtract","-");g=g.replace("Multiply","*");g=g.replace("Divide","/");g=g.replace("EQ","=");g=g.replace("GT",">");g=g.replace("GTE",">=");g=g.replace("LT","<");return g=g.replace("LTE","<=")},prepareFilePath:function(g,d){g=g.replace(/\\/g,"/");return g.match(/^%VVVV%/)?g.replace("%VVVV%",VVVV.Root):g.match(/^%PAGE%/)?g.replace("%PAGE%",location.pathname):g.match(/^(\/|.+:\/\/)/)?
g:d?d.getAbsolutePath()+g:g},dynamicPins:function(g,d,c,e){for(var f=d.length;f<c;f++)d[f]=e.call(g,f);for(f=c;f<d.length;f++)g.removeInputPin(d[f].pinname);d.length=c;g.parentPatch.afterUpdate()}};VVVV.Core={Pin:function(g,d,c,e,f){this.direction=d;this.pinname=g;this.links=[];this.values=[];this.values.changedAt=0;this.node=e;this.reset_on_disconnect=this.active=!1;this.masterPin=this.slavePin=void 0;this.connectionChangedHandlers={};this.enumOptions=[];this.getValue=function(b,a){if(!a||1==a)return this.values[b%
this.values.length];for(var f=[],e=0;e<a;e++)f.push(this.values[(b*a+e)%this.values.length]);return f};this.setValue=function(b,a){this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.values[b]=a,this.primitive&&this.values[b]==a||this.markPinAsChanged());this.node.isIOBox&&("Descriptive Name"==this.pinname&&this.node.invisiblePins["Descriptive Name"])&&(this.node.parentPatch.domInterface?this.node.parentPatch.domInterface.connect(this.node):this.node.parentPatch.parentPatch&&this.node.registerInterfacePin())};
this.markPinAsChanged=function(){this.node.parentPatch.mainloop&&(this.values.changedAt=this.node.parentPatch.mainloop.frameNum)};this.pinIsChanged=function(){return this.node.parentPatch.mainloop?this.values.changedAt==this.node.parentPatch.mainloop.frameNum:!0};this.connect=function(b){this.values=b.values;if(this.direction==VVVV.PinDirection.Output){b=this.links.length;for(var a=0;a<b;a++)this.links[a].toPin.values=this.values}this.slavePin&&(this.slavePin.values=this.values);this.markPinAsChanged()};
this.disconnect=function(){if("Color"==this.typeName){for(var b=[],a=0;a<this.values.length;a++)b[a]=new VVVV.Types.Color("0,0,0,0"),this.values[a].copy_to(b[a]);this.values=b}else this.values=this.values.slice(0);this.slavePin&&(this.slavePin.values=this.values);this.markPinAsChanged()};this.isConnected=function(){return 0<this.links.length||this.masterPin&&this.masterPin.isConnected()||this.slavePin&&0<this.slavePin.links.length};this.getSliceCount=function(){return this.values.length};this.setSliceCount=
function(b){0>b&&(b=0);this.values.length!=b&&(this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.values.length=b),this.markPinAsChanged())};this.setType=function(b){if(b.typeName!=this.typeName){var a=this;delete this.connectionChangedHandlers.webglresource;_(b.connectionChangedHandlers).each(function(f,e){a.connectionChangedHandlers[e]=b.connectionChangedHandlers[e]});this.typeName=b.typeName;this.defaultValue=b.defaultValue;this.direction==VVVV.PinDirection.Input&&(this.defaultValue&&
!this.isConnected())&&(this.setValue(0,this.defaultValue()),this.setSliceCount(1));void 0!=b.reset_on_disconnect&&(this.reset_on_disconnect=b.reset_on_disconnect)}};void 0==f&&(f=VVVV.PinTypes.Generic);f==VVVV.PinTypes.Generic&&(this.unvalidated=!0);this.setType(f);if(c&&0<c.length)for(g=c.length;g--;)this.setValue(g,c[g]);this.reset=function(){this.values=[];this.slavePin&&(this.slavePin.values=this.values);this.defaultValue?(this.setValue(0,this.defaultValue()),this.setSliceCount(1)):(this.values=
c.slice(0),this.markPinAsChanged());this.markPinAsChanged()};this.connectionChanged=function(){var b=this;_(this.connectionChangedHandlers).each(function(a){a.call(b)})};this.generateStaticCode=function(b){for(var a="",f="if (",e=0;e<this.values.incomingPins.length;e++)var c=this.values.incomingPins[e],f=f+("patch.nodeMap["+c.node.id+"].inputPins['"+c.pinname+"'].pinIsChanged() || "),a="Math.max(patch.nodeMap["+c.node.id+"].inputPins['"+c.pinname+"'].getSliceCount(), "+a;a+="0)";for(e=0;e<this.values.incomingPins.length-
1;e++)a+=")";e="";b&&(e=f+"false) {\n");e=e+"  var iii = "+(a+";\n");e+="  patch.nodeMap["+this.node.id+"].outputPins['Output'].setSliceCount(iii);";e+="  while (iii--) {\n";e+="    patch.nodeMap["+this.node.id+"].outputPins['Output'].setValue(iii, "+this.values.code+");\n";e+="  }\n";b&&(e+="}\n");return e}},Node:function(g,d,c){this.nodename=d;this.id=g;this.height=this.width=this.y=this.x=0;this.isShader=this.isIOBox=!1;this.resourcesPending=0;this.auto_nil=!0;this.setupObject=function(){this.inputPins=
{};this.outputPins={};this.invisiblePins={};this.defaultPinValues={}};this.setupObject();this.delays_output=this.auto_evaluate=!1;this.dirty=!0;(this.parentPatch=c)&&(this.parentPatch.nodeMap[g]=this);this.addDefault=function(e,f){this.defaultPinValues[e]=f};this.addInputPin=function(e,f,b){b=b||VVVV.PinTypes.Generic;f=new VVVV.Core.Pin(e,VVVV.PinDirection.Input,f,this,b);this.inputPins[e]=f;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_in_"+e]=f);this.applyPinValuesFromXML(e);return f};this.addOutputPin=
function(e,f,b){b=b||VVVV.PinTypes.Generic;f=new VVVV.Core.Pin(e,VVVV.PinDirection.Output,f,this,b);this.outputPins[e]=f;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_out_"+e]=f);return f};this.removeInputPin=function(e){if(this.inputPins[e]){var f=this.inputPins[e].links[0];f&&(f.fromPin.connectionChanged(),f.destroy());delete this.inputPins[e];this.dirty=!0}};this.removeOutputPin=function(e){if(this.outputPins[e]){for(var f=this.outputPins[e].links.length,b=0;b<f;b++){var a=this.outputPins[e].links[b];
a.toPin.connectionChanged();a.destroy()}delete this.outputPins[e];this.dirty=!0}};this.addInvisiblePin=function(e,f,b){b=b||VVVV.PinTypes.Generic;f=new VVVV.Core.Pin(e,VVVV.PinDirection.Configuration,f,this,b);this.invisiblePins[e]=f;this.parentPatch.pinMap[this.id+"_inv_"+e]=f;void 0!=this.defaultPinValues[e]&&(f.values=this.defaultPinValues[e],f.markPinAsChanged());return f};this.IOBoxType=function(){var e=/^IOBox \((.*)\)/.exec(this.nodename);return e&&1<e.length?e[1]:""};this.IOBoxInputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.inputPins["Y Input Value"];
case "String":return this.inputPins["Input String"];case "Color":return this.inputPins["Color Input"];case "Node":return this.inputPins["Input Node"]}};this.IOBoxOutputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.outputPins["Y Output Value"];case "String":return this.outputPins["Output String"];case "Color":return this.outputPins["Color Output"];case "Node":return this.outputPins["Output Node"]}};this.IOBoxRows=function(){return this.invisiblePins.Rows?this.invisiblePins.Rows.getValue(0):
1};this.isComment=function(){return this.isIOBox&&0==_(this.outputPins).size()};this.label=function(){if(this.isIOBox)return this.IOBoxInputPin().getValue(0)?this.IOBoxInputPin().getValue(0).toString():"";if(this.isSubpatch)return"||"+this.nodename.match(/([^\/]+)\.v4p$/)[1];var e=this.nodename.replace(/\s\(.+\)/,"");return e=VVVV.Helpers.translateOperators(e)};this.getWidth=function(){var e;e=100==this.width||0==this.width?this.isIOBox?60:Math.max(18,6*(this.label().length+2)):this.width/15;return e=
Math.max(e,12*(_(this.inputPins).size()-1)+4)};this.getHeight=function(){return this.isIOBox&&100==this.height?18*this.IOBoxRows():100==this.height||this.isSubpatch?18:Math.max(18,this.height/15)};this.getUpstreamNodes=function(){var e=[];_(this.inputPins).each(function(f){0<f.links.length&&e.push(f.links[0].fromPin.node)});return e};this.getDownstreamNodes=function(){var e=[];_(this.outputPins).each(function(f){for(var b=0;b<f.links.length;b++)e.push(f.links[b].toPin.node)});return e};this.findDownstreamNodes=
function(e){var f=[];_(this.outputPins).each(function(b){for(var a=0;a<b.links.length;a++)b.links[a].toPin.node.nodename==e?f.push(b.links[a].toPin.node):f=b.links[a].toPin.slavePin?f.concat(b.links[a].toPin.slavePin.node.findDownstreamNodes(e)):b.links[a].toPin.node.isIOBox&&b.links[a].toPin.node.IOBoxOutputPin().slavePin?f.concat(b.links[a].toPin.node.IOBoxOutputPin().slavePin.node.findDownstreamNodes(e)):f.concat(b.links[a].toPin.node.findDownstreamNodes(e))});return f};this.hasNilInputs=function(){var e=
!1;_(this.inputPins).each(function(f){0==f.getSliceCount()&&(e=!0)});return e};this.isDirty=function(){if(this.dirty)return!0;for(var e in this.inputPins)if(this.inputPins[e].pinIsChanged())return!0;for(e in this.invisiblePins)if(this.invisiblePins[e].pinIsChanged())return!0;return!1};this.getMaxInputSliceCount=function(){var e=0,f;for(f in this.inputPins)this.inputPins[f].getSliceCount()>e&&(e=this.inputPins[f].values.length);return e};this.applyPinValuesFromXML=function(e){if(this.inputPins[e]){var f=
this.inputPins[e];e=this.defaultPinValues[e];if(void 0!=e&&(!f.reset_on_disconnect||1<e.length||""!=e[0])){for(var b=0;b<e.length;b++)f.values[b]!=e[b]&&("Color"==f.typeName?f.setValue(b,new VVVV.Types.Color(e[b])):"Value"==f.typeName?f.setValue(b,parseFloat(e[b])):f.setValue(b,e[b]));f.setSliceCount(e.length)}}};this.registerInterfacePin=function(){var e=this;if(this.isIOBox&&this.parentPatch.parentPatch&&""!=this.invisiblePins["Descriptive Name"].getValue(0)){var f=this.invisiblePins["Descriptive Name"].getValue(0);
this.IOBoxInputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.masterPin){"development"==VVVV_ENV&&console.log("deleting "+f+" input pin because node has input connection...");for(var b=0;b<this.masterPin.links.length;b++)this.masterPin.links[b].destroy();this.disconnect();e.parentPatch.removeInputPin(f);this.masterPin=void 0}0==e.IOBoxOutputPin().links.length&&(e.IOBoxOutputPin().slavePin?e.IOBoxOutputPin().slavePin.pinname!=f&&("development"==VVVV_ENV&&console.log("renaming "+
e.IOBoxOutputPin().slavePin.pinname+" to "+f),e.parentPatch.outputPins[f]=e.parentPatch.outputPins[e.IOBoxOutputPin().slavePin.pinname],e.parentPatch.removeOutputPin(e.IOBoxOutputPin().slavePin.pinname),e.IOBoxOutputPin().slavePin.pinname=f):("development"==VVVV_ENV&&console.log("interfacing output pin detected: "+f),b=e.parentPatch.outputPins[f],void 0==b&&(b=e.parentPatch.addOutputPin(f,e.IOBoxOutputPin().values)),b.setType(VVVV.PinTypes[e.IOBoxOutputPin().typeName]),e.IOBoxOutputPin().slavePin=
b,b.masterPin=e.IOBoxOutputPin(),b.connect(e.IOBoxOutputPin())));this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxInputPin().connectionChanged();this.IOBoxOutputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.slavePin){"development"==VVVV_ENV&&console.log("deleting "+f+" output pin because node "+e.id+" has output connection...");for(var b=0;b<this.slavePin.links.length;b++)this.slavePin.links[b].destroy();this.slavePin.disconnect();e.parentPatch.removeOutputPin(f);
this.slavePin=void 0}if(0==e.IOBoxInputPin().links.length)if(e.IOBoxInputPin().masterPin)e.IOBoxInputPin().masterPin.pinname!=f&&(console.log("renaming "+e.IOBoxInputPin().masterPin.pinname+" to "+f),e.parentPatch.inputPins[f]=e.parentPatch.inputPins[e.IOBoxInputPin().masterPin.pinname],e.parentPatch.removeInputPin(e.IOBoxInputPin().masterPin.pinname),e.IOBoxInputPin().masterPin.pinname=f);else{"development"==VVVV_ENV&&console.log("interfacing input pin detected: "+f);var a=e.parentPatch.inputPins[f];
void 0==a&&("development"==VVVV_ENV&&console.log("creating new input pin at parent patch, using IOBox values"),a=e.parentPatch.addInputPin(f,e.IOBoxInputPin().values));var k=a.values.slice();a.setType(VVVV.PinTypes[e.IOBoxInputPin().typeName]);if(a.unvalidated&&VVVV.PinTypes[a.typeName].primitive&&!a.isConnected()){if("V"==a.typeName[0])for(b=0;b<k.length;b++)a.values[b]=parseFloat(k[b]);else a.values=k;a.markPinAsChanged()}a.unvalidated=!1;a.slavePin=e.IOBoxInputPin();e.IOBoxInputPin().masterPin=
a;e.IOBoxInputPin().connect(a)}this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxOutputPin().connectionChanged()}};this.setup=function(){this.addInvisiblePin("Descriptive Name",[""],VVVV.PinTypes.String)};this.initialize=function(){};this.evaluate=function(){_(this.outputPins).each(function(e){e.setValue(0,"not calculated")})};this.dealWithNilInput=function(){if(this.auto_nil&&!this.isSubpatch&&this.hasNilInputs()){for(pinname in this.outputPins)this.outputPins[pinname].setSliceCount(0);
return!0}return!1};this.destroy=function(){this.isIOBox&&(this.IOBoxInputPin().masterPin&&(this.parentPatch.removeInputPin(this.IOBoxInputPin().masterPin.pinname),this.parentPatch.parentPatch.afterUpdate()),this.IOBoxOutputPin().slavePin&&(this.parentPatch.removeOutputPin(this.IOBoxOutputPin().slavePin.pinname),this.parentPatch.parentPatch.afterUpdate()))};this.serialize=function(){var e=h("<NODE>");e.attr("id",this.id);e.attr("nodename",this.nodename);e.attr("systemname",this.nodename);this.shaderFile&&
e.attr("filename",this.shaderFile.replace(".vvvvjs.fx",".fx").replace("%VVVV%/effects","%VVVV%/lib/nodes/effects"));this.isSubpatch&&(e.attr("filename",this.nodename),e.attr("systemname",this.nodename.match("(.*).v4p$")[1]));this.isIOBox?e.attr("componentmode","InABox"):e.attr("componentmode","Hidden");var f=h("<BOUNDS>");this.isIOBox?f.attr("type","Box"):f.attr("type","Node");f.attr("left",parseInt(15*this.x));f.attr("top",parseInt(15*this.y));f.attr("width",parseInt(this.width));f.attr("height",
parseInt(this.height));e.append(f);var b=this;_(this.inputPins).each(function(a){var f=h("<PIN>");f.attr("pinname",a.pinname);f.attr("visible","1");(!a.isConnected()||a.masterPin)&&(VVVV.PinTypes[a.typeName].primitive&&b.defaultPinValues[a.pinname])&&f.attr("values",_(b.defaultPinValues[a.pinname]).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));e.append(f)});_(this.invisiblePins).each(function(a){var b=h("<PIN>");b.attr("pinname",a.pinname);b.attr("visible","0");VVVV.PinTypes[a.typeName].primitive&&
b.attr("values",_(a.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));e.append(b)});return e}},Link:function(g,d){this.fromPin=g;this.toPin=d;this.fromPin.links.push(this);this.toPin.links.push(this);this.destroy=function(){this.fromPin.links.splice(this.fromPin.links.indexOf(this),1);this.toPin.links.splice(this.toPin.links.indexOf(this),1);this.fromPin.node.parentPatch.linkList.splice(this.fromPin.node.parentPatch.linkList.indexOf(this),1);this.toPin.disconnect();
if(this.toPin.reset_on_disconnect)this.toPin.reset();else{this.toPin.node.defaultPinValues[this.toPin.pinname]=[];for(var c=this.toPin.getSliceCount();c--;)this.toPin.node.defaultPinValues[this.toPin.pinname][c]=this.toPin.values[c]}};this.serialize=function(){var c=h("<LONK>");c.attr("srcnodeid",this.fromPin.node.id);c.attr("srcpinname",this.fromPin.pinname);c.attr("dstnodeid",this.toPin.node.id);c.attr("dstpinname",this.toPin.pinname);return c}},Patch:function(g,d,c,e,f){function b(a){if(void 0==
a)return[];if("45_26">=this.vvvv_version)return separator=/\|/.test(a)?"|":",",a.split(separator).filter(function(a,b){return""!=a});for(var b=[],f="",e=!1,k=a.length,m=0;m<k;m++)","!=a[m]||e?"|"==a[m]?"|"!=a[m+1]||m+1==a.length-1?e=!e:f+=a[++m]:f+=a[m]:(b.push(f),f="");b.push(f);return b}function a(){var a=window.location.hash.match("#([^/]+)/"+l.ressource+"$");a&&(console.log("launching editor ..."),(new VVVV.Editors[a[1]]).enable(l))}this.ressource=g;this.vvvv_version="45_26.1";this.boundingBox=
{width:0,height:0};this.windowHeight=this.windowWidth=500;this.pinMap={};this.nodeMap={};this.nodeList=[];this.linkList=[];this.pinList=[];this.mainloop=this.compiledFunc=void 0;this.success=d;this.error=c;this.editor=void 0;this.setupObject();e&&(this.parentPatch=e);f&&(this.id=f);var k=!1;this.getAbsolutePath=function(){var a=this.getRelativePath();this.parentPatch&&(a=this.parentPatch.getAbsolutePath()+a);return a};this.getRelativePath=function(){return this.nodename.match(/(.*\/)?[^/]+\.v4p/)[1]||
""};this.destroy=function(){for(var a=0;a<this.nodeList.length;a++)this.nodeList[a].destroy(),delete this.nodeMap[this.nodeList[a].id],delete this.nodeList[a]};if("45_26">=this.vvvv_version)var m={},r={},s={},n={};var l=this;this.doLoad=function(a,f){function e(a){"complete"==c&&(r={});h(a).find('link[deleteme="pronto"]').each(function(){for(var a=!1,b=0;b<l.linkList.length;b++)l.linkList[b].fromPin.node.id==h(this).attr("srcnodeid")&&(l.linkList[b].fromPin.pinname==h(this).attr("srcpinname")&&l.linkList[b].toPin.node.id==
h(this).attr("dstnodeid")&&l.linkList[b].toPin.pinname==h(this).attr("dstpinname"))&&(a=l.linkList[b]);if(a){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var b=a.fromPin,f=a.toPin;a.destroy();b.connectionChanged();f.connectionChanged();f.markPinAsChanged()}});h(a).find('link[deleteme!="pronto"]').each(function(){var a=l.pinMap[h(this).attr("srcnodeid")+"_out_"+h(this).attr("srcpinname")],b=l.pinMap[h(this).attr("dstnodeid")+"_in_"+h(this).attr("dstpinname")];
void 0==a&&l.nodeMap[h(this).attr("srcnodeid")]&&(a=l.nodeMap[h(this).attr("srcnodeid")].addOutputPin(h(this).attr("srcpinname"),void 0));void 0==b&&l.nodeMap[h(this).attr("dstnodeid")]&&(b=l.nodeMap[h(this).attr("dstnodeid")].addInputPin(h(this).attr("dstpinname"),void 0));if(a&&b){for(var f=!1,e=0;e<l.linkList.length;e++)l.linkList[e].fromPin.node.id==a.node.id&&(l.linkList[e].fromPin.pinname==a.pinname&&l.linkList[e].toPin.node.id==b.node.id&&l.linkList[e].toPin.pinname==b.pinname)&&(f=l.linkList[e]);
f||(f=new VVVV.Core.Link(a,b),a.connectionChanged(),b.connectionChanged(),l.linkList.push(f),b.connect(a));"complete"==c&&(r[a.node.id+"_"+a.pinname+"-"+b.node.id+"_"+b.pinname]=f)}});"complete"==c&&(_(m).each(function(a,b){if(void 0==r[b]){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var f=a.fromPin,e=a.toPin;a.destroy();f.connectionChanged();e.connectionChanged();e.markPinAsChanged();e.reset_on_disconnect&&e.reset()}}),m={},_(r).each(function(a,b){m[b]=
a}))}var k=this;do k.dirty=!0;while(k=k.parentPatch);if(k=/^<!DOCTYPE\s+PATCH\s+SYSTEM\s+"(.+)\\(.+)\.dtd/.exec(a))l.vvvv_version=k[2].replace(/[a-zA-Z]+/,"_");var c="diff";if(/\s<PATCH/.test(a)||"45_26">=l.vvvv_version)c="complete","development"==VVVV_ENV&&console.log("complete: "+this.nodename);k=h(a).find('bounds[type="Window"]').first();0<k.length&&(l.windowWidth=k.attr("width")/15,l.windowHeight=k.attr("height")/15);"complete"==c&&(n={});h(a).find("node").each(function(){if("pronto"==h(this).attr("createme")&&
void 0!=l.nodeMap[h(this).attr("id")]){var k=l.nodeMap[h(this).attr("id")];"development"==VVVV_ENV&&console.log("node renamed, so deleting node "+k.id+" / "+k.nodename);_(k.inputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.fromPin.connectionChanged()})});_(k.outputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.toPin.connectionChanged();a.toPin.markPinAsChanged()})});l.nodeList.splice(l.nodeList.indexOf(k),1);delete l.nodeMap[k.id]}var m;m="InABox"==h(this).attr("componentmode")?
h(this).find('bounds[type="Box"]').first():h(this).find('bounds[type="Node"]').first();var r=void 0!=l.nodeMap[h(this).attr("id")];if(r)k=l.nodeMap[h(this).attr("id")];else{var s=""!=h(this).attr("systemname")?h(this).attr("systemname"):h(this).attr("nodename");if(void 0==s)return;if(void 0!=VVVV.NodeLibrary[s.toLowerCase()])k=new (VVVV.NodeLibrary[s.toLowerCase()])(h(this).attr("id"),l),VVVV.NodeLibrary[s.toLowerCase()].requirements&&(l.resourcesPending++,_(VVVV.NodeLibrary[s.toLowerCase()].requirements).each(function(a){void 0===
VVVV.LoadedLibs[a]&&VVVV.loadScript(VVVV.ThirdPartyLibs[a],function(){l.resourcesPending--;VVVV.LoadedLibs[a]=VVVV.ThirdPartyLibs[a]})}));else if(/.fx$/.test(h(this).attr("filename")))k=new VVVV.Nodes.GenericShader(h(this).attr("id"),l),k.isShader=!0,k.shaderFile=h(this).attr("filename").replace(/\\/g,"/").replace(/\.fx$/,".vvvvjs.fx").replace("lib/nodes/",""),k.nodename=s;else if(/.v4p$/.test(h(this).attr("filename"))){l.resourcesPending++;var d=this,k=new VVVV.Core.Patch(h(this).attr("filename"),
function(){l.resourcesPending--;"development"==VVVV_ENV&&console.log(this.nodename+"invoking update links");e(a);l.editor&&l.editor.addPatch(this);if(this.auto_evaluate){var b=l;do b.auto_evaluate=!0;while(b=b.parentPatch)}this.setMainloop(l.mainloop);l.afterUpdate();l.compile();0>=l.resourcesPending&&f&&(f(),f=void 0)},function(){l.resourcesPending--;this.not_implemented=!0;VVVV.onNotImplemented(s);e(a);l.afterUpdate();l.compile();0>=l.resourcesPending&&f&&(f(),f=void 0)},l,h(d).attr("id"));k.isSubpatch=
!0;l.editor&&!k.editor&&l.editor.addPatch(k);l.nodeMap[k.id]=k}else k=new VVVV.Core.Node(h(this).attr("id"),s,l),k.not_implemented=!0,"diff"==c&&!0==VVVV.Config.auto_undo&&l.editor.sendUndo(),VVVV.onNotImplemented(s);"development"==VVVV_ENV&&"complete"!=c&&console.log(l.nodename+": inserted new node "+k.nodename)}if(k.auto_evaluate){d=l;do d.auto_evaluate=!0;while(d=d.parentPatch)}if("pronto"==h(this).attr("deleteme")){"development"==VVVV_ENV&&console.log("removing node "+k.id);if(k.isSubpatch&&!k.not_implemented){k.editor&&
k.editor.removePatch(k);d=k.getSubPatches();d.push(k);for(var g,p=0;p<d.length;p++)g=VVVV.Helpers.prepareFilePath(d[p].nodename,d[p].parentPatch),VVVV.Patches[g].splice(VVVV.Patches[g].indexOf(k),1),0==VVVV.Patches[g].length&&delete VVVV.Patches[g]}l.nodeList.splice(l.nodeList.indexOf(k),1);k.destroy();delete l.nodeMap[k.id]}0<m.length&&(m.attr("left")&&(k.x=m.attr("left")/15,k.y=m.attr("top")/15,l.boundingBox.width=Math.max(l.boundingBox.width,k.x+100),l.boundingBox.height=Math.max(l.boundingBox.height,
k.y+100)),m.attr("width")&&(k.width=m.attr("width"),k.height=m.attr("height")));/^iobox/.test(k.nodename.toLowerCase())&&(k.isIOBox=!0);r||k.setup();d=this;h(this).find("pin").each(function(){var f=h(this).attr("pinname"),e=b(h(this).attr("values"));void 0!=e&&0<e.length&&k.addDefault(f,e);if(void 0==k.outputPins[f])if(void 0!=k.inputPins[f])k.inputPins[f].isConnected()||k.applyPinValuesFromXML(f);else if(void 0!=k.invisiblePins[f]){if(void 0!=e){for(var m=0;m<e.length;m++)k.invisiblePins[f].values[m]!=
e[m]&&k.invisiblePins[f].setValue(m,e[m]);k.invisiblePins[f].setSliceCount(e.length)}}else 1==h(this).attr("visible")&&"Configuration"!=h(this).attr("pintype")||k.isSubpatch?"Output"==h(this).attr("pintype")||0<h(a).find("link[srcnodeid="+k.id+"]").filter("link[srcpinname='"+f.replace(/[\[\]]/,"")+"']").length?void 0==k.outputPins[f]&&k.addOutputPin(f,e):void 0==k.inputPins[f]&&void 0==k.invisiblePins[f]&&k.addInputPin(f,e):void 0==k.inputPins[f]&&void 0==k.invisiblePins[f]&&k.addInvisiblePin(f,e)});
r||(k.initialize(),l.nodeList.push(k));"complete"==c&&(n[k.id]=k)});"complete"==c&&(_(s).each(function(a,b){void 0==n[b]&&("development"==VVVV_ENV&&console.log("removing node "+a.id),l.nodeList.splice(l.nodeList.indexOf(a),1),delete l.nodeMap[a.id])}),s={},_(n).each(function(a,b){s[b]=a}));0===this.resourcesPending&&e(a);this.compile();0>=this.resourcesPending&&f&&(f(),f=void 0)};this.getSubPatches=function(){for(var a=[],b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&(a.push(this.nodeList[b]),
a=a.concat(this.nodeList[b].getSubPatches()));return a};this.setMainloop=function(a){this.mainloop=a;for(var b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&this.nodeList[b].setMainloop(a)};this.afterEvaluate=function(){};this.afterUpdate=function(){};this.toXML=function(){var a=h("<PATCH>"),b=h("<BOUNDS>");b.attr("type","Window");b.attr("width",parseInt(15*this.windowWidth));b.attr("height",parseInt(15*this.windowHeight));a.append(b);for(b=0;b<this.nodeList.length;b++)a.append(this.nodeList[b].serialize());
for(b=0;b<this.linkList.length;b++)a.append(this.linkList[b].serialize());a='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n  '+a.wrapAll("<d></d>").parent().html();a=a.replace(/<patch/g,"<PATCH");a=a.replace(/<\/patch>/g,"\n  </PATCH>");a=a.replace(/<node/g,"\n  <NODE");a=a.replace(/<\/node>/g,"\n  </NODE>");a=a.replace(/<bounds/g,"\n  <BOUNDS");a=a.replace(/<\/bounds>/g,"\n  </BOUNDS>");a=a.replace(/<pin/g,"\n  <PIN");a=a.replace(/<\/pin>/g,"\n  </PIN>");a=a.replace(/<lonk/g,
"\n  <LINK");return a=a.replace(/<\/lonk>/g,"\n  </LINK>")};this.compile=function(){function a(l){if(0>f.indexOf(l.id)){f.push(l.id);var n=l.getUpstreamNodes(),s=!1;_(n).each(function(f){void 0==b[f.id]&&(s=s||a(f))});f.pop()}s&&l.delays_output&&e.push(l);if(!s&&0>f.indexOf(l.id)||l.delays_output){if(l.getCode){l.outputPins.Output.values.incomingPins=[];for(var d=n="("+l.getCode()+")",g;g=c.exec(n);){var p;l.inputPins[g[1]].values.code?(p=l.inputPins[g[1]].values.code,l.outputPins.Output.values.incomingPins=
l.outputPins.Output.values.incomingPins.concat(l.inputPins[g[1]].values.incomingPins)):(p=l.inputPins[g[1]].isConnected()||1!=l.inputPins[g[1]].getSliceCount()?"patch.nodeMap["+l.id+"].inputPins['"+g[1]+"'].getValue(iii)":l.inputPins[g[1]].getValue(0),l.outputPins.Output.values.incomingPins.push(l.inputPins[g[1]]));d=d.replace("{"+g[1]+"}",p)}l.outputPins.Output.values.code=d;for(n=0;n<l.outputPins.Output.links.length;n++)if(!l.outputPins.Output.links[n].toPin.node.getCode){r+=l.outputPins.Output.generateStaticCode(!0);
break}}else l.not_implemented||(k.push(l),r+="var n = patch.nodeMap["+l.id+"];",r+="if ((n.isDirty() || n.auto_evaluate || n.isSubpatch) && !n.dealWithNilInput()) { n.evaluate(); n.dirty = false; }\n");for(var t in l.inputPins)0==l.inputPins[t].links.length&&m.push(l.inputPins[t]);for(t in l.invisiblePins)m.push(l.invisiblePins[t]);for(t in l.outputPins)m.push(l.outputPins[t]);b[l.id]=l;return!1}return!0}this.evaluationRecipe=[];this.pinList=[];for(var b={},f=[],e=[],k=this.evaluationRecipe,m=this.pinList,
c=RegExp(/\{([^\}]+)\}/g),r="",l=0;l<this.nodeList.length;l++)(0==this.nodeList[l].getDownstreamNodes().length||this.nodeList[l].auto_evaluate||this.nodeList[l].delays_output)&&void 0==b[this.nodeList[l].id]&&a(this.nodeList[l]);for(l=0;l<e.length;l++)a(e[l]);this.compiledFunc=new Function("patch",r)};this.evaluate=function(){if(!(0<this.resourcesPending)){if(k)var a={},b=(new Date).getTime();this.compiledFunc(this);k&&(_(a).each(function(a,b){console.log(a.count+"x "+b+": "+a.dt+"ms")}),b=(new Date).getTime());
this.afterEvaluate();k&&console.log("patch rendering: "+((new Date).getTime()-b)+"ms");k=!1}};h(window).keydown(function(a){84==a.which&&(a.altKey&&a.ctrlKey)&&(k=!0)});if(/\.v4p[^<>\s]*$/.test(g)){this.nodename=g;var p=this,t=g;this.parentPatch&&(t=VVVV.Helpers.prepareFilePath(g,this.parentPatch));VVVV.Patches[t]?p.doLoad(VVVV.Patches[t][0].toXML(),function(){VVVV.Patches[t].push(p);p.success&&p.success();p.afterUpdate()}):h.ajax({url:t,type:"get",dataType:"text",success:function(a){p.doLoad(a,function(){VVVV.Patches[t]=
VVVV.Patches[t]||[];VVVV.Patches[t].push(p);p.success&&p.success();p.afterUpdate()})},error:function(){p.error&&p.error()}})}else this.doLoad(g,function(){this.success&&this.success()});a();h(window).bind("hashchange",function(){a()})}};VVVV.Core.Patch.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Core.DOMInterface=function(g){function d(b){if("event"==b.property_class){var a=b.selector;"window"==a&&(a=window);"document"==a&&(a=document);h(a).each(function(a){b.values[a]=0;h(this).bind(b.property,function(){b.values[a]=1;return!1})})}}var c={},e={};g.domInterface=this;this.connect=function(b){_(c).each(function(a,f){a.node.id==b.id&&("event"==a.property_class&&h(a.selector).unbind(a.property),delete c[f])});_(e).each(function(a,f){a.node.id==b.id&&delete e[f]});var a=/([^\/]+)(\/(event|attribute|style)\/(.+))?/.exec(b.invisiblePins["Descriptive Name"].getValue(0));
if(null!=a){var f={selector:a[1],property_class:a[3],property:a[4],values:[],node:b};0!=h(f.selector).length&&(0==b.getUpstreamNodes().length?c[a[0]]=f:0==b.getDownstreamNodes().length&&(e[a[0]]=f),d(f))}};var f=this;_(g.nodeList).each(function(b){b.isIOBox&&void 0!=b.invisiblePins["Descriptive Name"]&&(f.connect(b),b.IOBoxInputPin().connectionChanged=function(){f.connect(b)})});this.populateInputConnectors=function(){var b,a;for(b in c)switch(a=c[b],a.property_class){case "event":a.values.length!=
a.node.IOBoxInputPin().values.length&&a.node.IOBoxInputPin().setSliceCount(a.values.length);for(var f=0;f<a.values.length;f++)void 0!=a.node.IOBoxInputPin().values[f]&&a.values[f]==a.node.IOBoxInputPin().values[f]||a.node.IOBoxInputPin().setValue(f,a.values[f]);break;default:for(this.fetchValuesFromDOM(a),a.values.length!=a.node.IOBoxInputPin().values.length&&a.node.IOBoxInputPin().setSliceCount(a.values.length),f=0;f<a.values.length;f++)a.node.IOBoxInputPin().getValue(f)!=a.values[f]&&a.node.IOBoxInputPin().setValue(f,
a.values[f])}};this.processOutputConnectors=function(){for(var b in e)switch(e[b].property_class){default:this.setDOMByIOBox(e[b])}for(b in c)if("event"==c[b].property_class)for(var a=0;a<c[b].values.length;a++)c[b].values[a]=0};this.fetchValuesFromDOM=function(b){b.values.length=0;h(b.selector).each(function(a){var f;if(void 0==b.property_class)switch(this.nodeName){case "INPUT":"text"==h(this).attr("type")&&(f=h(this).val());"checkbox"==h(this).attr("type")&&(f=h(this).attr("checked")?1:0);break;
default:f=h(this).text()}"attribute"==b.property_class&&(f=h(this).attr(b.property));"style"==b.property_class&&(f=h(this).css(b.property));b.values[a]=f})};this.setDOMByIOBox=function(b){var a=b.node.IOBoxOutputPin();if(a.pinIsChanged()){var a=a.getValue(0,a.getSliceCount()),f=h(b.selector).length;void 0==b.property_class&&(h(b.selector).empty(),h(b.selector).val(""));for(var e=0;e<Math.max(a.length,f);e++){var c=e%f,s=e%a.length,n=h(b.selector).eq(c);if(0!=n.length){if(void 0==b.property_class)switch(n[0].nodeName){case "INPUT":n.val(h(b.selector).eq(c).val()+
a[s]);break;default:n.html(h(b.selector).eq(c).html()+a[s])}"attribute"==b.property_class&&n.attr(b.property,a[s]);"style"==b.property_class&&n.css(b.property,a[s])}}}}}})(vvvvjs_jquery);(function(h){VVVV.fps=60;VVVV.Core.MainLoop=function(g,d){function c(){if(0==g.resourcesPending){e++;var s=(new Date).getTime();a&&(r.deltaT=s-a);a=s;f.populateInputConnectors();g.evaluate();f.processOutputConnectors();s=(new Date).getTime()-a;0==e%10&&(m&&(console.log(1/((a-k)/1E4)+"fps"),m=!1),k=a);r.frameNum++;if(66<s&&50<r.lowFrameRateCount++)VVVV.onLowFrameRate();else lowFrameRateCount=0}b&&window.setTimeout(function(){window.requestAnimationFrame(c)},Math.max(0,Math.round(1E3/VVVV.fps-s)))}
VVVV.fps=d||60;var e=0,f=new VVVV.Core.DOMInterface(g),b=!0,a=void 0,k=this.lowFrameRateCount=0,m=!1;this.deltaT=1E3/VVVV.fps;this.frameNum=0;g.setMainloop(this);var r=this;this.stop=function(){b=!1};this.start=function(){b||(b=!0,c())};this.isRunning=function(){return b};c();h(window).keydown(function(a){(102==a.which||70==a.which)&&(a.altKey&&a.ctrlKey)&&(m=!0)})}})(vvvvjs_jquery);(function(h){VVVV.Types.Color=function(g){this.rgba=new Float32Array(_(g.split(",")).map(function(d){return parseFloat(d)}));this.toString=function(){return this.rgba[0]+", "+this.rgba[1]+", "+this.rgba[2]+", "+this.rgba[3]};this.setHSV=function(d,c,e){d=360*((d%1+1)%1);var f=Math.floor(d/60),b=d/60-f;d=e*(1-c);var a=e*(1-c*b);c=e*(1-c*(1-b));switch(f){case 1:this.rgba[0]=a;this.rgba[1]=e;this.rgba[2]=d;break;case 2:this.rgba[0]=d;this.rgba[1]=e;this.rgba[2]=c;break;case 3:this.rgba[0]=d;this.rgba[1]=
a;this.rgba[2]=e;break;case 4:this.rgba[0]=c;this.rgba[1]=d;this.rgba[2]=e;break;case 5:this.rgba[0]=e;this.rgba[1]=d;this.rgba[2]=a;break;default:this.rgba[0]=e,this.rgba[1]=c,this.rgba[2]=d}};this.getHSV=function(){var d=this.rgba[0],c=this.rgba[1],e=this.rgba[2],f=Math.max(d,Math.max(c,e)),b=Math.min(d,Math.min(c,e)),a;f==b?a=0:f==d?a=60*(0+(c-e)/(f-b)):f==c?a=60*(2+(e-d)/(f-b)):f==e&&(a=60*(4+(d-c)/(f-b)));0>a&&(a+=360);d=0;0!=f&&(d=(f-b)/f);return[a/360,d,f]};this.copy_to=function(d){d.rgba[0]=
this.rgba[0];d.rgba[1]=this.rgba[1];d.rgba[2]=this.rgba[2];d.rgba[3]=this.rgba[3]}}})(vvvvjs_jquery);(function(h){VVVV.Nodes.Cross2d=function(g,d){this.constructor(g,"Cross (2d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X In",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y In",[0],VVVV.PinTypes.Value),f=this.addInputPin("Include Upper",[1],VVVV.PinTypes.Value),b=this.addInputPin("Include Lower",[1],VVVV.PinTypes.Value),a=this.addInputPin("Include Equal",[1],VVVV.PinTypes.Value),k=this.addOutputPin("X Out",
[0],VVVV.PinTypes.Value),m=this.addOutputPin("Y Out",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var r=0,s=0;s<e.getSliceCount();s++)for(var n=0;n<c.getSliceCount();n++)0.5>f.getValue(0)&&s>n||(0.5>b.getValue(0)&&s<n||0.5>a.getValue(0)&&s==n)||(k.setValue(r,c.getValue(n)),m.setValue(r,e.getValue(s)),r++);k.setSliceCount(r);m.setSliceCount(r)}};VVVV.Nodes.Cross2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Polar2d=function(g,d){this.constructor(g,"Polar (2d)",d);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",[1],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),k=0;k<a;k++){var m=c.getValue(k),r=e.getValue(k);f.setValue(k,Math.atan2(r,m)/(2*Math.PI));b.setValue(k,Math.sqrt(m*
m+r*r))}f.setSliceCount(a);b.setSliceCount(a)}};VVVV.Nodes.Polar2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Cartesian2d=function(g,d){this.constructor(g,"Cartesian (2d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),e=this.addInputPin("Length",[1],VVVV.PinTypes.Value),f=this.addOutputPin("X",[1],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),k=0;k<a;k++){var m=c.getValue(k),r=e.getValue(k);f.setValue(k,r*Math.cos(2*m*Math.PI));b.setValue(k,r*Math.sin(2*m*Math.PI))}f.setSliceCount(a);b.setSliceCount(a)}};VVVV.Nodes.Cartesian2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Points2Vector2d=function(g,d){this.constructor(g,"Points2Vector (2d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X1",
[0],VVVV.PinTypes.Value),e=this.addInputPin("Y1",[0],VVVV.PinTypes.Value),f=this.addInputPin("X2",[1],VVVV.PinTypes.Value),b=this.addInputPin("Y2",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Length",[1],VVVV.PinTypes.Value),r=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var s=this.getMaxInputSliceCount(),n=0;n<s;n++){var l=c.getValue(n),d=e.getValue(n),g=f.getValue(n),
h=b.getValue(n),g=g-l,h=h-d;a.setValue(n,l+g/2);k.setValue(n,d+h/2);m.setValue(n,Math.sqrt(g*g+h*h));r.setValue(n,Math.atan2(h,g)/(2*Math.PI))}a.setSliceCount(s);k.setSliceCount(s);m.setSliceCount(s);r.setSliceCount(s)}};VVVV.Nodes.Points2Vector2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Vector2Points2d=function(g,d){this.constructor(g,"Vector2Points (2d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",
[0],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addInputPin("Length",[1],VVVV.PinTypes.Value),b=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X1",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Y1",[0],VVVV.PinTypes.Value),m=this.addOutputPin("X2",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Y2",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var s=this.getMaxInputSliceCount(),n=0;n<s;n++){var l=c.getValue(n),d=e.getValue(n),g=f.getValue(n),
h=b.getValue(n)-0.5*Math.PI,x=g/2*Math.sin(h),g=-g/2*Math.cos(h);a.setValue(n,l+x);k.setValue(n,d+g);m.setValue(n,l-x);r.setValue(n,d-g)}a.setSliceCount(s);k.setSliceCount(s);m.setSliceCount(s);r.setSliceCount(s)}};VVVV.Nodes.Vector2Points2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Attractor2d=function(g,d){this.constructor(g,"Attractor (2d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",
[0],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addInputPin("Attractor X",[0],VVVV.PinTypes.Value),b=this.addInputPin("Attractor Y",[0],VVVV.PinTypes.Value),a=this.addInputPin("Attractor Strength",[1],VVVV.PinTypes.Value),k=this.addInputPin("Attractor Power",[1],VVVV.PinTypes.Value),m=this.addInputPin("Attractor Radius",[0.1],VVVV.PinTypes.Value),r=this.addOutputPin("Output X",[0],VVVV.PinTypes.Value),s=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=
function(){for(var n=Math.max(c.getSliceCount(),e.getSliceCount()),l=Math.max(f.getSliceCount(),b.getSliceCount()),d,g,h,x,w,y,u=0;u<n;u++){d=c.getValue(u);g=e.getValue(u);for(var A=0;A<l;A++)if(h=f.getValue(A),x=b.getValue(A),attractorstrength=a.getValue(A),w=k.getValue(A),y=m.getValue(A),h=d-h,x=g-x,0!=h||0!=x){var q=Math.sqrt(Math.pow(h,2)+Math.pow(x,2)),z=0;q<=y&&(y=q/y,z=attractorstrength*(Math.pow(y,w)*(0>y?-1:0<y?1:0)/y-1));d+=h*z;g+=x*z}r.setValue(u,d);s.setValue(u,g)}r.setSliceCount(n);s.setSliceCount(n)}};
VVVV.Nodes.Attractor2d.prototype=new VVVV.Core.Node;VVVV.Nodes.ConnectAll2d=function(g,d){this.constructor(g,"ConnectAll (2d)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X In",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y In",[0],VVVV.PinTypes.Value),f=this.addOutputPin("X1 Out",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y1 Out",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X2 Out",[0],VVVV.PinTypes.Value),
k=this.addOutputPin("Y2 Out",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),r=0,s=0;s<m;s++)for(var n=s+1;n<m;n++)f.setValue(r,c.getValue(s)),b.setValue(r,e.getValue(s)),a.setValue(r,c.getValue(n)),k.setValue(r,e.getValue(n)),r++;f.setSliceCount(r);b.setSliceCount(r);a.setSliceCount(r);k.setSliceCount(r)}};VVVV.Nodes.ConnectAll2d.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.Polar3d=function(g,d){this.constructor(g,"Polar (3d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addInputPin("Z",[-1],VVVV.PinTypes.Value),b=this.addOutputPin("Pitch",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Yaw",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);
this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),r=0;r<m;r++){var s=c.getValue(r),n=e.getValue(r),l=f.getValue(r),d=Math.sqrt(s*s+n*n+l*l);a.setValue(r,Math.atan2(-s,-l)/(2*Math.PI));b.setValue(r,0==d?0:Math.acos(-n/d)/(2*Math.PI)-0.25);k.setValue(r,d)}a.setSliceCount(m);b.setSliceCount(m);k.setSliceCount(m)}};VVVV.Nodes.Polar3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Cartesian3d=function(g,d){this.constructor(g,"Cartesian (3d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Pitch",[0],VVVV.PinTypes.Value),e=this.addInputPin("Yaw",[0],VVVV.PinTypes.Value),f=this.addInputPin("Length",[1],VVVV.PinTypes.Value),b=this.addOutputPin("X",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Z",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),r=0;r<m;r++){var s=2*(c.getValue(r)+0.25)*Math.PI,n=2*e.getValue(r)*Math.PI,
l=f.getValue(r);k.setValue(r,-l*Math.cos(n)*Math.sin(s));b.setValue(r,-l*Math.sin(n)*Math.sin(s));a.setValue(r,-l*Math.cos(s))}b.setSliceCount(m);a.setSliceCount(m);k.setSliceCount(m)}};VVVV.Nodes.Cartesian3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Normalize3d=function(g,d){this.constructor(g,"Normalize (3d)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",[1],VVVV.PinTypes.Value),e=this.addInputPin("Y",
[0],VVVV.PinTypes.Value),f=this.addInputPin("Z",[0],VVVV.PinTypes.Value),b=this.addOutputPin("NormalizedX",[1],VVVV.PinTypes.Value),a=this.addOutputPin("NormalizedY",[0],VVVV.PinTypes.Value),k=this.addOutputPin("NormalizedZ",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var r=this.getMaxInputSliceCount(),s=0;s<r;s++){var n=c.getValue(s),l=e.getValue(s),d=f.getValue(s),g=Math.sqrt(n*n+l*l+d*d);b.setValue(s,0==g?0:n/g);a.setValue(s,
0==g?0:l/g);k.setValue(s,0==g?0:d/g);m.setValue(s,g)}b.setSliceCount(r);a.setSliceCount(r);k.setSliceCount(r);m.setSliceCount(r)}};VVVV.Nodes.Normalize3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Normalize3dVector=function(g,d){this.constructor(g,"Normalize (3d Vector)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("XYZ",[],VVVV.PinTypes.Value),e=this.addOutputPin("NormalizedXYZ",[],VVVV.PinTypes.Value),
f=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b/3;a++){var k=c.getValue(a,3),m=Math.sqrt(k[0]*k[0]+k[1]*k[1]+k[2]*k[2]);e.setValue(3*a,0==m?0:k[0]/m);e.setValue(3*a+1,0==m?0:k[1]/m);e.setValue(3*a+2,0==m?0:k[2]/m);f.setValue(a,m)}e.setSliceCount(3*Math.ceil(b/3));f.setSliceCount(Math.ceil(b/3))}};VVVV.Nodes.Normalize3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dCross=function(g,d){this.constructor(g,"Multiply (3d Cross)",
d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),e=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),f=this.addOutputPin("Output XYZ",[],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b/3;a++){var k=c.getValue(a,3),m=e.getValue(a,3);f.setValue(3*a+0,k[1]*m[2]-k[2]*m[1]);f.setValue(3*a+1,-(k[0]*m[2]-k[2]*m[0]));
f.setValue(3*a+2,k[0]*m[1]-k[1]*m[0])}f.setSliceCount(3*Math.ceil(b/3))}};VVVV.Nodes.Multiply3dCross.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dDot=function(g,d){this.constructor(g,"Multiply (3d Dot)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),e=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b/3;a++){var k=c.getValue(a,3),m=e.getValue(a,3);f.setValue(a,k[0]*m[0]+k[1]*m[1]+k[2]*m[2])}f.setSliceCount(Math.ceil(b/3))}};VVVV.Nodes.Multiply3dDot.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dVector=function(g,d){this.constructor(g,"Multiply (3d Vector)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform",
[],VVVV.PinTypes.Transform),e=this.addInputPin("XYZ UnTransformed",[0,0,0],VVVV.PinTypes.Value),f=this.addOutputPin("XYZ Transformed",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=Math.max(c.getSliceCount(),e.getSliceCount()/3),a=0;a<b;a++){var k=e.getValue(a,3),m=c.getValue(a);mat4.multiplyVec3(m,k);f.setValue(3*a+0,k[0]);f.setValue(3*a+1,k[1]);f.setValue(3*a+2,k[2])}f.setSliceCount(Math.ceil(3*b))}};VVVV.Nodes.Multiply3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply4dVector=
function(g,d){this.constructor(g,"Multiply (4d Vector)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),e=this.addInputPin("XYZW UnTransformed",[0,0,0,1],VVVV.PinTypes.Value),f=this.addOutputPin("XYZW Transformed",[0,0,0,1],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=Math.max(c.getSliceCount(),e.getSliceCount()/4),a=0;a<b;a++){var k=e.getValue(a,
4),m=c.getValue(a);mat4.multiplyVec4(m,k);f.setValue(4*a+0,k[0]);f.setValue(4*a+1,k[1]);f.setValue(4*a+2,k[2]);f.setValue(4*a+3,k[3])}f.setSliceCount(Math.ceil(4*b))}};VVVV.Nodes.Multiply4dVector.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.LFO=function(g,d){this.constructor(g,"LFO (Animation)",d);this.meta={authors:["Matthias Zauner, sebl, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable yet"]};this.auto_evaluate=!0;var c=this.addInputPin("Period",[1],VVVV.PinTypes.Value),e=this.addInputPin("Pause",[0],VVVV.PinTypes.Value),f=this.addInputPin("Reverse",[0],VVVV.PinTypes.Value),b=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),a=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),
k=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Change",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Cycles",[0],VVVV.PinTypes.Value),s=[],n=[],l=(new Date).getTime(),p=(new Date).getTime();this.evaluate=function(){var d=this.getMaxInputSliceCount();l=(new Date).getTime()-p;for(var g=0;g<d;g++){var h=c.getValue(g),w=e.getValue(g),y=f.getValue(g),u=b.getValue(g),A=a.getValue(g),q=0;void 0==s[g]&&(s[g]=0);void 0==n[g]&&(n[g]=0);0.5>w&&(0!=h&&isFinite(h))&&(dv=1/(1E3*h)*l,
0<y&&(dv*=-1),s[g]+=dv,0>s[g]&&(n[g]-=Math.ceil(-s[g]),s[g]=1+s[g],q=1),1<s[g]&&(n[g]+=Math.floor(s[g]),q=1));p=(new Date).getTime();0.5<=u&&(s[g]=0,n[g]=0,q=1);if(0.5>w||0.5<=u)k.setValue(g,(s[g]+A)%1),m.setValue(g,q),r.setValue(g,n[g]);s[g]%=1}k.setSliceCount(d);m.setSliceCount(d);r.setSliceCount(d);s.splice(d);n.splice(d)}};VVVV.Nodes.LFO.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearFilter=function(g,d){this.constructor(g,"LinearFilter (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var c=this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),e=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);this.addOutputPin("Acceleration Out",[0],VVVV.PinTypes.Value);var a=[],k=[],m=[],r=[],s=[],n=[];this.evaluate=function(){for(var l=this.getMaxInputSliceCount(),
g=c.pinIsChanged()||e.pinIsChanged(),d=0;d<l;d++){void 0==a[d]&&(a[d]=(new Date).getTime());var h=this.parentPatch.mainloop.deltaT,x=c.getValue(d),w=e.getValue(d);void 0==r[d]&&(r[d]=x);if(x!=k[d]||w!=m[d])n[d]=void 0,k[d]=x,m[d]=w,s[d]=0<m[d]?(k[d]-r[d])/(1E3*m[d]):0;Math.abs(s[d]*h)>Math.abs(k[d]-r[d])?r[d]=k[d]:r[d]+=s[d]*h;0!=n[d]&&(f.setValue(d,r[d]),b.setValue(d,s[d]));n[d]=k[d]-r[d];a[d]=(new Date).getTime()}g&&f.getSliceCount()!=l&&(k.splice(l),m.splice(l),a.splice(l),r.splice(l),s.splice(l),
n.splice(l),f.setSliceCount(l))}};VVVV.Nodes.LinearFilter.prototype=new VVVV.Core.Node;VVVV.Nodes.Damper=function(g,d){this.constructor(g,"Damper (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var c=this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),e=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Position Out",
[0],VVVV.PinTypes.Value),b=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);this.addOutputPin("Acceleration Out",[0],VVVV.PinTypes.Value);var a=[],k=[],m=[],r=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),n=c.pinIsChanged()||e.pinIsChanged(),l=0;l<d;l++){void 0==a[l]&&(a[l]=(new Date).getTime());var g=this.parentPatch.mainloop.deltaT,h=c.getValue(l),v=e.getValue(l);void 0==k[l]&&(k[l]=h);m[l]=0<v?(h-k[l])/(1E3*v):0;Math.abs(m[l]*g)>Math.abs(h-k[l])?k[l]=h:k[l]+=m[l]*
g;0!=r[l]&&(f.setValue(l,k[l]),b.setValue(l,m[l]));r[l]=h-k[l];a[l]=(new Date).getTime()}n&&f.getSliceCount()!=d&&(a.splice(d),k.splice(d),m.splice(d),r.splice(d),f.setSliceCount(d))}};VVVV.Nodes.Damper.prototype=new VVVV.Core.Node;VVVV.Nodes.Delay=function(g,d){this.constructor(g,"Delay (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Reset not implemented","Linear Mode not implemented"]};this.auto_evaluate=!0;var c=this.addInputPin("Input",
[0],VVVV.PinTypes.Value),e=this.addInputPin("Time",[1],VVVV.PinTypes.Value),f=this.addInputPin("Insert",[1],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=[],k=Array(1024);this.evaluate=function(){var m=this.getMaxInputSliceCount();now=(new Date).getTime();var r=c.pinIsChanged();if(void 0==c.getValue(0))r&&b.setValue(0,void 0);else{if(1==f.getValue(0)&&(r||e.pinIsChanged()))for(k.pop(),k.unshift(now),r=0;r<m;r++){if(void 0==a[r]){a[r]=Array(1024);for(var d=1024;d--;)a[r][d]=
0}1024<=a[r].length&&a[r].pop();a[r].unshift(c.getValue(r))}for(r=0;r<m;r++){for(var n=now-1E3*e.getValue(r),l=!1,d=0;1024>d;d++)if(k[d]<=n){b.values[r]!=a[r][d]&&b.setValue(r,a[r][d]);l=!0;break}l||0==b.values[r]||b.setValue(r,0)}b.setSliceCount(m);a.splice(m)}}};VVVV.Nodes.Delay.prototype=new VVVV.Core.Node;VVVV.Nodes.Change=function(g,d){this.constructor(g,"Change (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!0;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("OnChange",[0],VVVV.PinTypes.Value),f=[];this.evaluate=function(){var b=this.getMaxInputSliceCount();if(c.pinIsChanged()){for(var a=0;a<b;a++)f[a]!=c.getValue(a)?e.setValue(a,1):1==e.getValue(a)&&e.setValue(a,0),f[a]=c.getValue(a);e.setSliceCount(b)}else{for(a=0;a<b;a++)1==e.getValue(a)&&(e.setValue(a,0),e.setSliceCount(b));f[a]=c.getValue(a)}}};VVVV.Nodes.Change.prototype=new VVVV.Core.Node;VVVV.Nodes.TogEdge=function(g,
d){this.constructor(g,"TogEdge (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Up Edge",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Down Edge",[0],VVVV.PinTypes.Value),b=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),k=0;k<a;k++)(0>=Math.round(b[k])||void 0==b[k])&&1<=Math.round(c.getValue(k))?e.setValue(k,
1):0!=e.values[k]&&e.setValue(k,0),1<=Math.round(b[k])&&0>=Math.round(c.getValue(k))?f.setValue(k,1):0!=f.values[k]&&f.setValue(k,0),b[k]=c.getValue(k);e.setSliceCount(a);f.setSliceCount(a)}};VVVV.Nodes.TogEdge.prototype=new VVVV.Core.Node;VVVV.Nodes.FlipFlop=function(g,d){this.constructor(g,"FlipFlop (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Set",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",
[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),a=!1;this.evaluate=function(){var k=this.getMaxInputSliceCount(),m=f.getSliceCount();if(k>m)for(;m<k;m++)f.setValue(m,0),b.setValue(m,1);for(m=0;m<k;m++){var r=void 0;1<=Math.round(e.getValue(m))&&(r=0);1<=Math.round(c.getValue(m))&&(r=1);void 0!=r?(f.setValue(m,r),b.setValue(m,1-r)):a||(f.setValue(m,0),b.setValue(m,1))}f.setSliceCount(k);b.setSliceCount(k);
a=!0}};VVVV.Nodes.FlipFlop.prototype=new VVVV.Core.Node;VVVV.Nodes.MonoFlop=function(g,d){this.constructor(g,"MonoFlop (Animation)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Set",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),f=this.addInputPin("Time",[0],VVVV.PinTypes.Value),b=this.addInputPin("Retriggerable",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[0],
VVVV.PinTypes.Value),k=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),m=[];this.evaluate=function(){var r=this.getMaxInputSliceCount(),d=a.getSliceCount();if(r>d)for(;d<r;d++)a.setValue(d,0),k.setValue(d,1);for(d=0;d<r;d++)if(void 0==m[d]&&(m[d]=0),void 0==a.getValue(d)&&a.setValue(d,0),1==a.getValue(d)){if(m[d]+=this.parentPatch.mainloop.deltaT/1E3,1==c.getValue(d)&&1==b.getValue(d)&&(m[d]=0),m[d]>=f.getValue(d)||1==e.getValue(d))m[d]=0,a.setValue(d,0),k.setValue(d,1)}else 1==c.getValue(d)&&
(a.setValue(d,1),k.setValue(d,0));a.setSliceCount(r);k.setSliceCount(r);m.splice(r)}};VVVV.Nodes.MonoFlop.prototype=new VVVV.Core.Node;VVVV.Nodes.SampleAndHold=function(g,d){this.constructor(g,"S+H (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["different output slice count in pure VVVV, if Set pin has only one slice"]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Set",[0],VVVV.PinTypes.Value),
f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var b=this.getMaxInputSliceCount();if(e.pinIsChanged()||c.pinIsChanged()){for(var a=0;a<b;a++)void 0==f.values[a]&&f.setValue(a,0),1<=Math.round(e.getValue(a))&&f.setValue(a,c.getValue(a));f.setSliceCount(b)}}};VVVV.Nodes.SampleAndHold.prototype=new VVVV.Core.Node;VVVV.Nodes.FrameDelay=function(g,d){this.constructor(g,"FrameDelay (Animation)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],
compatibility_issues:["no dynamice pin count"]};this.auto_evaluate=this.delays_output=!0;var c=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),e=this.addInputPin("Default 1",[0],VVVV.PinTypes.Value),f=this.addInputPin("Initialize",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output 1",[0],VVVV.PinTypes.Value),a=[];this.evaluate=function(){for(var k=this.getMaxInputSliceCount(),m=0;m<k;m++)0.5<f.getValue(m)||void 0==a[m]?b.setValue(m,e.getValue(m)):b.setValue(m,a[m]);for(m=0;m<k;m++)a[m]=c.getValue(m);
b.setSliceCount(k)}};VVVV.Nodes.FrameDelay.prototype=new VVVV.Core.Node;VVVV.Nodes.Toggle=function(g,d){this.constructor(g,"Toggle (Animation)",d);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Inverse Output",
[1],VVVV.PinTypes.Value),a=!1;this.evaluate=function(){var k=this.getMaxInputSliceCount(),m=f.getSliceCount();if(k>m)for(;m<k;m++)f.setValue(m,0),b.setValue(m,1);for(m=0;m<k;m++){var d=void 0;1<=Math.round(e.getValue(m))&&(d=0);1<=Math.round(c.getValue(m))&&(d=1-f.getValue(m));void 0!=d&&f.getValue(m)!=d?(f.setValue(m,d),b.setValue(m,1-d)):a||(f.setValue(m,0),b.setValue(m,1))}f.setSliceCount(k);b.setSliceCount(k);a=!0}};VVVV.Nodes.Toggle.prototype=new VVVV.Core.Node;VVVV.Nodes.Counter=function(g,
d){this.constructor(g,"Counter (Animation)",d);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Up",[0],VVVV.PinTypes.Value),e=this.addInputPin("Down",[0],VVVV.PinTypes.Value),f=this.addInputPin("Minimum",[0],VVVV.PinTypes.Value),b=this.addInputPin("Maximum",[15],VVVV.PinTypes.Value),a=this.addInputPin("Increment",[1],VVVV.PinTypes.Value),k=this.addInputPin("Default",
[0],VVVV.PinTypes.Value),m=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),r=this.addInputPin("Mode",["Wrap"],VVVV.PinTypes.Enum);r.enumOptions=["Wrap","Unlimited","Clamp"];var s=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),n=this.addOutputPin("Underflow",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Overflow",[0],VVVV.PinTypes.Value),p=!1;this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=f.pinIsChanged()||b.pinIsChanged()||k.pinIsChanged()||m.pinIsChanged()||r.pinIsChanged(),
h=0;h<d;h++)1!=l.getValue(h)&&p||l.setValue(h,0),1!=n.getValue(h)&&p||n.setValue(h,0),p||s.setValue(h,0),g=g||0.5<=c.getValue(h)||0.5<=e.getValue(h);if(g){for(h=0;h<d;h++){var g=a.getValue(h),w=h>=s.getSliceCount()?0:s.getValue(h),y=b.getValue(h),u=f.getValue(h),A=0;"Unlimited"==r.getValue(h)&&(A=1);"Clamp"==r.getValue(h)&&(A=2);switch(A){case 1:0.5<=c.getValue(h)&&(w+=g);0.5<=e.getValue(h)&&(w-=g);break;case 2:0.5<=c.getValue(h)&&(w+=g);0.5<=e.getValue(h)&&(w-=g);w>y&&(w=y,l.setValue(h,1));w<u&&
(w=u,n.setValue(h,1));break;default:0.5<=c.getValue(h)&&(w+=g),0.5<=e.getValue(h)&&(w-=g),w>y&&(w=u,l.setValue(h,1)),w<u&&(w=y,n.setValue(h,1))}s.getValue(h)!=w&&s.setValue(h,w);0.5<=m.getValue(h)&&s.setValue(h,k.getValue(h))}s.setSliceCount(d);n.setSliceCount(d);l.setSliceCount(d)}p=!0}};VVVV.Nodes.Counter.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.CurrentTimeAstronomy=function(g,d){this.constructor(g,"CurrentTime (Astronomy)",d);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:["http://javascript.about.com/library/bldst.htm"],compatibility_issues:["Time Zone index differs from classic VVVV","Time Zone Name does not work in Firefox"]};this.auto_evaluate=!0;var c=new Date,e=this.addOutputPin("GMT",[],VVVV.PinTypes.Value),f=this.addOutputPin("Time Zone",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Time Zone Name",
[""],VVVV.PinTypes.String);this.addOutputPin("Daylight Saving Time",[c.getTimezoneOffset()<function(a){var b=new Date(a.getFullYear(),0,1);a=new Date(a.getFullYear(),6,1);return Math.max(b.getTimezoneOffset(),a.getTimezoneOffset())}(c)?1:0],VVVV.PinTypes.Value);var a=this.addOutputPin("Current Time",[],VVVV.PinTypes.Value);this.evaluate=function(){var k=new Date,m=36E5*k.getTimezoneOffset(),c=k.getTime();e.setValue(0,c/1E3/60/60/24+25569);f.setValue(0,m/1E3/60/60);k.toString().match(/\((.+)\)$/)?
b.setValue(0,k.toString().match(/\((.+)\)$/)[1]):b.setValue(0,"n/a");a.setValue(0,(c-m)/1E3/60/60/24+25569)}};VVVV.Nodes.CurrentTimeAstronomy.prototype=new VVVV.Core.Node;VVVV.Nodes.GregorianAstronomySplit=function(g,d){this.constructor(g,"Gregorian (Astronomy Split)",d);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Time",[41491.4301],VVVV.PinTypes.Value),e=this.addOutputPin("Millisecond",[0],VVVV.PinTypes.Value),
f=this.addOutputPin("Second",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Minute",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Hour",[0],VVVV.PinTypes.Value),k=this.addOutputPin("DayOfWeek",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Day",[1],VVVV.PinTypes.Value),r=this.addOutputPin("Month",[1],VVVV.PinTypes.Value),s=this.addOutputPin("Year",[2E3],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),l=0;l<d;l++){var g=864E5*(c.getValue(l)-25569),g=new Date(g),h=
g.getMilliseconds();e.setValue(l,h);h=g.getSeconds();f.setValue(l,h);h=g.getMinutes();b.setValue(l,h);h=g.getHours();a.setValue(l,h);h=g.getDay();k.setValue(l,h);h=g.getDate();m.setValue(l,h);h=g.getMonth()+1;r.setValue(l,h);h=g.getYear()+1900;s.setValue(l,h)}e.setSliceCount(d);f.setSliceCount(d);b.setSliceCount(d);a.setSliceCount(d);k.setSliceCount(d);m.setSliceCount(d);r.setSliceCount(d);s.setSliceCount(d)}};VVVV.Nodes.GregorianAstronomySplit.prototype=new VVVV.Core.Node;VVVV.Nodes.GregorianAstronomyJoin=
function(g,d){this.constructor(g,"Gregorian (Astronomy Join)",d);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Millisecond",[0],VVVV.PinTypes.Value),e=this.addInputPin("Second",[0],VVVV.PinTypes.Value),f=this.addInputPin("Minute",[0],VVVV.PinTypes.Value),b=this.addInputPin("Hour",[0],VVVV.PinTypes.Value),a=this.addInputPin("Day",[1],VVVV.PinTypes.Value),k=this.addInputPin("Month",[1],VVVV.PinTypes.Value),
m=this.addInputPin("Year",[2E3],VVVV.PinTypes.Value),r=this.addOutputPin("Time",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0;g<d;g++){var l=new Date;l.setMilliseconds(c.getValue(g));l.setSeconds(e.getValue(g));l.setMinutes(f.getValue(g));l.setHours(b.getValue(g));l.setDate(a.getValue(g));l.setMonth(k.getValue(g)-1);l.setYear(m.getValue(g));r.setValue(g,l.getTime()/864E5+25569)}}};VVVV.Nodes.GregorianAstronomyJoin.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){function g(c,e,f){f?(this.constructor(c,e,f),d||(d=new AudioContext),this.initialize=function(){this.createAPINode();this.createAudioPins();this.createParamPins()},this.destroy=function(){this.apiNode&&(this.apiNode.disconnect(),this.apiNode=void 0)},this.audioInputPins=[],this.audioOutputPins=[],this.paramPins=[],this.modulationPins=[],this.auto_nil=!1):(this.createAPINode=function(b){this.apiNode="Analyser"==c?d.createAnalyser(b):"MediaElementSource"==c?d.createMediaElementSource(b):
"Oscillator"==c?d.createOscillator(b):"Delay"==c?d.createDelay(b):"Gain"==c?d.createGain(b):"DynamicsCompressor"==c?d.createDynamicsCompressor(b):"BiquadFilter"==c?d.createBiquadFilter(b):"MediaStreamSource"==c?d.createMediaStreamSource(b):d["create"+c].apply(d,arguments)},this.auto_evaluate=!1)}VVVV.PinTypes.WebAudio={typeName:"WebAudio",reset_on_disconnect:!0,defaultValue:function(){return"Unconnected Audio"},connectionChangedHandlers:{webaudio:function(){this.direction==VVVV.PinDirection.Output&&
(console.log("Connection changed!",this),this.audioConnectionChanged=!0)}}};VVVV.PinTypes.AudioBuffer={typeName:"AudioBuffer",reset_on_disconnect:!0,defaultValue:function(){return"Empty audio buffer"},connectionChangedHandlers:{}};var d=null;g.prototype=new VVVV.Core.Node;g.prototype.createAudioPins=function(){for(var c=0;c<this.apiNode.numberOfInputs;c++){var e=this.addInputPin("Input "+(c+1),[],VVVV.PinTypes.WebAudio);e.apiIndex=c;this.audioInputPins.push(e)}for(c=0;c<this.apiNode.numberOfOutputs;c++)e=
"Output "+(c+1),this.outputPins.hasOwnProperty(e)?(e=this.outputPins[e],e.setType(VVVV.PinTypes.WebAudio),e.setValue(0,this.apiNode)):e=this.addOutputPin(e,[this.apiNode],VVVV.PinTypes.WebAudio),e.apiIndex=c,this.audioOutputPins.push(e),e.audioConnectionChanged=!0};g.prototype.createParamPins=function(){for(var c in this.apiNode){var e=this.apiNode[c];if(e instanceof AudioParam){var f=c.replace(/([a-z^])([A-Z])/g,"$1 $2"),f=f.charAt(0).toUpperCase()+f.slice(1),e=this.addInputPin(f,[e.defaultValue],
VVVV.PinTypes.Value);e.apiName=c;this.paramPins.push(e);f=this.addInputPin(f+" Modulation",[],VVVV.PinTypes.WebAudio);f.apiName=c;this.modulationPins.push(f)}}};g.prototype.updateParamPins=function(){var c=this;this.paramPins.forEach(function(e,f){e.pinIsChanged()&&c.apiNode&&(c.apiNode[e.apiName].value=e.getValue(0))})};g.prototype.updateAudioConnections=function(){var c=this;this.audioOutputPins.forEach(function(e){e.audioConnectionChanged&&c.apiNode&&(console.log("Re-connecting!"),c.apiNode.disconnect(e.apiIndex),
e.links.forEach(function(f){f=f.toPin;var b=f.node;f.apiName?c.apiNode.connect(b.apiNode[f.apiName],e.apiIndex):c.apiNode.connect(b.apiNode,e.apiIndex,f.apiIndex)}),e.audioConnectionChanged=!1)})};VVVV.Nodes.FileAudioBuffer=function(c,e){this.constructor(c,"FileAudioBuffer (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Filename",[""],VVVV.PinTypes.String),b=this.addOutputPin("Audio Out",[],
VVVV.PinTypes.AudioBuffer);this.evaluate=function(){if(d&&f.pinIsChanged())for(var a=this.getMaxInputSliceCount(),e=0;e<a;e++){var m=VVVV.Helpers.prepareFilePath(f.getValue(e),this.parentPatch),c=new XMLHttpRequest;c.open("GET",m,!0);c.responseType="arraybuffer";c.onload=function(a){return function(){d.decodeAudioData(c.response,function(f){b.setValue(a,f)})}}(e);c.send()}}};VVVV.Nodes.FileAudioBuffer.prototype=new VVVV.Core.Node;VVVV.Nodes.AnalyserNode=function(c,e){function f(a){a||(a=32);k.setSliceCount(a);
m=new Float32Array(a)}g.call(this,c,"AnalyserNode (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("FFTSize",["2048"],VVVV.PinTypes.Value),a=this.addInputPin("Smoothing",[0.8],VVVV.PinTypes.Value),k=this.addOutputPin("FFT",[],VVVV.PinTypes.Value),m;f(2048);this.evaluate=function(){b.pinIsChanged()&&f(b.getValue(0));a.pinIsChanged()&&(this.apiNode.smoothingTimeConstant=a.getValue(0));this.updateAudioConnections();this.apiNode.getFloatFrequencyData(m);
for(var e=0;e<m.length;e++)k.setValue(e,m[e]);this.audioOutputPins.forEach(function(a){a.markPinAsChanged()})}};VVVV.Nodes.AnalyserNode.prototype=new g("Analyser");VVVV.Nodes.MediaElementSource=function(c,e){g.call(this,c,"MediaElementSource (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Audio",[],this),b=this.addOutputPin("Output",[],VVVV.PinTypes.WebAudio);this.audioOutputPins.push(b);this.initialize=function(){};
var a=[7];this.evaluate=function(){this.updateAudioConnections();if(f.pinIsChanged()){var e=f.getValue(0);e!=a[0]&&e&&(a[0]=e,this.createAPINode(f.getValue(0)),e.volume=1);this.apiNode&&b.setValue(0,this.apiNode)}}};VVVV.Nodes.MediaElementSource.prototype=new g("MediaElementSource");VVVV.Nodes.AudioDestination=function(c,e){g.call(this,c,"AudioDestination (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.createAPINode=function(){this.apiNode=
d.destination};this.evaluate=function(){this.updateAudioConnections()}};VVVV.Nodes.AudioDestination.prototype=new g("AudioDestination");VVVV.Nodes.AudioIn=function(c,e){g.call(this,c,"AudioIn (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=this,b=this.addOutputPin("Status",["Waiting"],VVVV.PinTypes.String);this.initialize=function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||
navigator.mozGetUserMedia;navigator.getUserMedia?navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},function(a){f.createAPINode(a);f.createAudioPins();b.setValue(0,"OK")},function(a){b.setValue(0,a)}):b.setValue(0,"Error: getUserMedia not supported!")};this.evaluate=function(){this.updateAudioConnections();this.audioOutputPins.forEach(function(a){a.markPinAsChanged()})}};VVVV.Nodes.AudioIn.prototype=
new g("MediaStreamSource");VVVV.Nodes.Oscillator=function(c,e){g.call(this,c,"Oscillator (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Type",["sine"],VVVV.PinTypes.Enum);f.enumOptions=["sine","square","sawtooth","triangle","custom"];var b=this.addInputPin("Enabled",[1],VVVV.PinTypes.Value);this.auto_evaluate=!0;this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();this.audioOutputPins.forEach(function(a){a.markPinAsChanged()});
f.pinIsChanged()&&this.apiNode&&(this.apiNode.type=f.getValue(0));b.pinIsChanged()&&this.apiNode&&(0<b.getValue(0)?this.apiNode.start():this.apiNode.stop())}};VVVV.Nodes.Oscillator.prototype=new g("Oscillator");VVVV.Nodes.Delay=function(c,e){g.call(this,c,"Delay (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.createAPINode;this.createAPINode=function(){f.call(this,10)};this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();
this.audioOutputPins.forEach(function(b){b.markPinAsChanged()})}};VVVV.Nodes.Delay.prototype=new g("Delay");VVVV.Nodes.Gain=function(c,e){g.call(this,c,"Gain (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();this.audioOutputPins.forEach(function(f){f.markPinAsChanged()})}};VVVV.Nodes.Gain.prototype=new g("Gain");VVVV.Nodes.Add=function(c,e){g.call(this,c,"Add (HTML5 Audio)",
e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),b=this,a=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(b,b.audioInputPins,a,function(a){a=b.addInputPin("Input "+(a+1),[],VVVV.PinTypes.WebAudio);a.apiIndex=0;return a})};this.initialize=function(){this.createAPINode();this.createAudioPins()};this.evaluate=function(){f.pinIsChanged()&&a();this.updateAudioConnections();
this.audioOutputPins.forEach(function(a){a.markPinAsChanged()})}};VVVV.Nodes.Add.prototype=new g("Gain");VVVV.Nodes.Convolver=function(c,e){g.call(this,c,"Convolver (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Impulse Response",[],VVVV.PinTypes.AudioBuffer),b=this.addInputPin("Normalize",[1],VVVV.PinTypes.Value);this.evaluate=function(){this.apiNode&&(b.pinIsChanged()||f.pinIsChanged())&&(this.apiNode.normalize=
0!=b.getValue(0),this.apiNode.buffer=f.getValue(0));this.updateAudioConnections();this.updateParamPins();this.audioOutputPins.forEach(function(a){a.markPinAsChanged()})}};VVVV.Nodes.Convolver.prototype=new g("Convolver");VVVV.Nodes.WaveShaper=function(c,e){g.call(this,c,"WaveShaper (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Curve",[],VVVV.PinTypes.Value),b=this.addInputPin("Oversample",[1],VVVV.PinTypes.Enum);
b.enumOptions=["none","2x","4x"];this.evaluate=function(){if(this.apiNode&&f.pinIsChanged()){var a=new Float32Array(f.getValue(0,f.getSliceCount()));2<a.length&&(this.apiNode.curve=a)}this.apiNode&&b.pinIsChanged()&&(this.apiNode.oversample=b.getValue(0));this.updateAudioConnections();this.updateParamPins();this.audioOutputPins.forEach(function(a){a.markPinAsChanged()})}};VVVV.Nodes.WaveShaper.prototype=new g("WaveShaper");VVVV.Nodes.BiquadFilter=function(c,e){g.call(this,c,"BiquadFilter (HTML5 Audio)",
e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Type",["lowpass"],VVVV.PinTypes.Enum);f.enumOptions="lowpass highpass bandpass lowshelf highshelf peaking notch allpass".split(" ");this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();this.audioOutputPins.forEach(function(b){b.markPinAsChanged()});this.apiNode&&f.pinIsChanged()&&(this.apiNode.type=f.getValue(0))}};VVVV.Nodes.BiquadFilter.prototype=new g("BiquadFilter");
VVVV.Nodes.DynamicsCompressor=function(c,e){g.call(this,c,"DynamicsCompressor (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addOutputPin("Reduction",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();this.audioOutputPins.forEach(function(b){b.markPinAsChanged()});this.apiNode&&f.setValue(0,this.apiNode.reduction.value)}};VVVV.Nodes.DynamicsCompressor.prototype=new g("DynamicsCompressor");
VVVV.Nodes.BeatDetector=function(c,e){g.call(this,c,"BeatDetector (HTML5 Audio)",e);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var f=new Float32Array(1024),b,a=this.addOutputPin("Beat Counter",[0],VVVV.PinTypes.Value),k=this.addOutputPin("BPM",[0],VVVV.PinTypes.Value),m=this.initialize;this.initialize=function(){m.call(this);this.apiNode.fftSize=1024;this.apiNode.smoothingTimeConstant=0};this.evaluate=function(){b||(b=new BeatDetektor);this.updateAudioConnections();
this.apiNode.getFloatFrequencyData(f);b.process(d.currentTime,f);a.setValue(0,b.beat_counter);k.setValue(0,b.win_bpm_int/10);this.audioOutputPins.forEach(function(a){a.markPinAsChanged()})}};VVVV.Nodes.BeatDetector.prototype=new g("Analyser");VVVV.Nodes.BeatDetector.requirements=["beatdetektor"]})(vvvvjs_jquery);(function(h){VVVV.Nodes.And=function(g,d){this.constructor(g,"AND (Boolean)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,b,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&
this.initialize();for(var b=this.getMaxInputSliceCount(),a=e.length,k,m=0;m<b;m++){k=!0;for(var d=0;d<a;d++)k=k&&0.5<=e[d].getValue(m);f.setValue(m,k?1:0)}f.setSliceCount(b)}};VVVV.Nodes.And.prototype=new VVVV.Core.Node;VVVV.Nodes.Or=function(g,d){this.constructor(g,"OR (Boolean)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);
this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,b,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=e.length,k,m=0;m<b;m++){k=!1;for(var d=0;d<a;d++)k=k||0.5<=e[d].getValue(m);f.setValue(m,k?1:0)}f.setSliceCount(b)}};VVVV.Nodes.Or.prototype=new VVVV.Core.Node;VVVV.Nodes.Not=function(g,d){this.constructor(g,"NOT (Boolean)",d);
this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),b=0;b<f;b++)e.setValue(b,1-Math.round(c.getValue(b)));e.setSliceCount(this.getMaxInputSliceCount())}};VVVV.Nodes.Not.prototype=new VVVV.Core.Node;VVVV.Nodes.OrSpectral=function(g,d){this.constructor(g,"OR (Boolean Spectral)",
d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0,k=0,m=!1,d=0;d<b||0<e.getValue(0)&&(0<k||0!=a%e.getSliceCount());d++)0==k&&(m=!1),m=m||0.5<=c.getValue(d),k++,0<e.getValue(0)?k>=e.getValue(a)&&(f.setValue(a,
m?1:0),a++,k=0):f.setValue(0,m?1:0);f.setSliceCount(a+(0<k))}};VVVV.Nodes.OrSpectral.prototype=new VVVV.Core.Node;VVVV.Nodes.AndSpectral=function(g,d){this.constructor(g,"AND (Boolean Spectral)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=
this.getMaxInputSliceCount(),a=0,k=0,m=!1,d=0;d<b||0<e.getValue(0)&&(0<k||0!=a%e.getSliceCount());d++)0==k&&(m=!0),m=m&&0.5<=c.getValue(d),k++,0<e.getValue(0)?k>=e.getValue(a)&&(f.setValue(a,m?1:0),a++,k=0):f.setValue(0,m?1:0);f.setSliceCount(a+(0<k))}};VVVV.Nodes.AndSpectral.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Types.CanvasTexture={imageObject:void 0,loaded:!1};VVVV.Types.CanvasRenderState=function(){this.fillColor=new VVVV.Types.Color("1,1,1,1");this.strokeColor=new VVVV.Types.Color("0,0,0,0");this.lineWidth=1;this.capStyle="butt";this.joinStyle="miter";this.gradient={type:"none"};this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0;this.shadowColor=new VVVV.Types.Color("0,0,0,1");this.blendMode="source-over";this.copy_attributes=function(c){c.fillColor.copy_to(this.fillColor);c.strokeColor.copy_to(this.strokeColor);
this.lineWidth=c.lineWidth;this.capStyle=c.capStyle;this.joinStyle=c.joinStyle;this.gradient=c.gradient;this.shadowOffsetX=c.shadowOffsetX;this.shadowOffsetY=c.shadowOffsetY;this.shadowBlur=c.shadowBlur;c.shadowColor.copy_to(this.shadowColor);this.blendMode=c.blendMode};this.apply=function(c){if("none"!=this.gradient.type){if("linear"==this.gradient.type)var e=c.createLinearGradient(this.gradient.startX,this.gradient.startY,this.gradient.endX,this.gradient.endY);for(var f=Math.max(this.gradient.colors.length,
this.gradient.colorPositions.length),b=0;b<f;b++){var a=this.gradient.colors[b];e.addColorStop(this.gradient.colorPositions[b],"rgba("+parseInt(255*a.rgba[0])+","+parseInt(255*a.rgba[1])+","+parseInt(255*a.rgba[2])+","+a.rgba[3]+")")}c.fillStyle=e}else c.fillStyle="rgba("+parseInt(255*this.fillColor.rgba[0])+","+parseInt(255*this.fillColor.rgba[1])+","+parseInt(255*this.fillColor.rgba[2])+","+this.fillColor.rgba[3]+")";c.strokeStyle="rgba("+parseInt(255*this.strokeColor.rgba[0])+","+parseInt(255*
this.strokeColor.rgba[1])+","+parseInt(255*this.strokeColor.rgba[2])+","+this.strokeColor.rgba[3]+")";c.lineWidth=this.lineWidth/c.canvas.height;c.lineCap=this.capStyle;c.lineJoin=this.joinStyle;c.shadowOffsetX=this.shadowOffsetX;c.shadowOffsetY=this.shadowOffsetY;c.shadowBlur=this.shadowBlur;c.shadowColor="rgba("+parseInt(255*this.shadowColor.rgba[0])+","+parseInt(255*this.shadowColor[1])+","+parseInt(255*this.shadowColor[2])+","+this.shadowColor[3]+")";c.globalCompositeOperation=this.blendMode}};
var g=new VVVV.Types.CanvasRenderState,d=new VVVV.Types.CanvasRenderState;d.fillColor=new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0");VVVV.PinTypes.CanvasRenderState={typeName:"CanvasRenderState",reset_on_disconnect:!0,defaultValue:function(){return g}};VVVV.PinTypes.CanvasLayer={typeName:"CanvasLayer",reset_on_disconnect:!0,defaultValue:function(){this.draw=function(){}}};VVVV.Nodes.FillCanvas=function(c,e){this.constructor(c,"Fill (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Color",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")],VVVV.PinTypes.Color),a=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),k=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==k[c]&&(k[c]=new VVVV.Types.CanvasRenderState),k[c].copy_attributes(f.getValue(c)),b.getValue(c).copy_to(k[c].fillColor),
a.setValue(c,k[c]);a.setSliceCount(e)}};VVVV.Nodes.FillCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.StrokeCanvas=function(c,e){this.constructor(c,"Stroke (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Color",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")],VVVV.PinTypes.Color),a=this.addInputPin("Width",[1],VVVV.PinTypes.Value),
k=this.addInputPin("Cap Style",["butt"],VVVV.PinTypes.Enum);k.enumOptions=["butt","round","square"];var m=this.addInputPin("Join Style",["miter"],VVVV.PinTypes.Enum);m.enumOptions=["miter","round","bevel"];var d=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),g=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==g[c]&&(g[c]=new VVVV.Types.CanvasRenderState),g[c].copy_attributes(f.getValue(c)),b.getValue(c).copy_to(g[c].strokeColor),g[c].lineWidth=
a.getValue(c),g[c].capStyle=k.getValue(c),g[c].joinStyle=m.getValue(c),d.setValue(c,g[c]);d.setSliceCount(e)}};VVVV.Nodes.StrokeCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.ShadowCanvas=function(c,e){this.constructor(c,"Shadow (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Color",[new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],
VVVV.PinTypes.Color),a=this.addInputPin("Offset X",[0],VVVV.PinTypes.Value),k=this.addInputPin("Offset Y",[0],VVVV.PinTypes.Value),m=this.addInputPin("Blur",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),g=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==g[c]&&(g[c]=new VVVV.Types.CanvasRenderState),g[c].copy_attributes(f.getValue(c)),g[c].shadowOffsetX=a.getValue(c),g[c].shadowOffsetY=k.getValue(c),g[c].shadowBlur=
m.getValue(c),b.getValue(c).copy_to(g[c].shadowColor),d.setValue(c,g[c]);d.setSliceCount(e)}};VVVV.Nodes.ShadowCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendCanvas=function(c,e){this.constructor(c,"Blend (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Mode",["source-over"],VVVV.PinTypes.Enum);b.enumOptions="source-over source-out source-in source-atop destination-over destination-out destination-in destination-atop copy lighter xor".split(" ");
var a=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),k=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==k[c]&&(k[c]=new VVVV.Types.CanvasRenderState),k[c].copy_attributes(f.getValue(c)),k[c].blendMode=b.getValue(c),a.setValue(c,k[c]);a.setSliceCount(e)}};VVVV.Nodes.BlendCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearGradientCanvas=function(c,e){this.constructor(c,"LinearGradient (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Start X",[0],VVVV.PinTypes.Value),a=this.addInputPin("Start Y",[0],VVVV.PinTypes.Value),k=this.addInputPin("End X",[0],VVVV.PinTypes.Value),m=this.addInputPin("End Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Colors",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0"),new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],VVVV.PinTypes.Color),g=this.addInputPin("Color Positions",
[0,1],VVVV.PinTypes.Value),n=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),l=[];this.evaluate=function(){for(var e=Math.max(f.getSliceCount(),b.getSliceCount()),e=Math.max(e,a.getSliceCount()),e=Math.max(e,k.getSliceCount()),e=Math.max(e,m.getSliceCount()),c=0;c<e;c++){void 0==l[c]&&(l[c]=new VVVV.Types.CanvasRenderState);l[c].copy_attributes(f.getValue(c));l[c].gradient={type:"linear"};l[c].gradient.startX=b.getValue(c);l[c].gradient.startY=a.getValue(c);l[c].gradient.endX=
k.getValue(c);l[c].gradient.endY=m.getValue(c);l[c].gradient.colors=[];l[c].gradient.colorPositions=[];for(var h=Math.max(d.getSliceCount(),g.getSliceCount()),x=0;x<h;x++)l[c].gradient.colors.push(d.getValue(x)),l[c].gradient.colorPositions.push(g.getValue(x));n.setValue(c,l[c])}n.setSliceCount(e)}};VVVV.Nodes.LinearGradientCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.ArcCanvas=function(c,e){this.constructor(c,"Arc (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],
compatibility_issues:[]};var f=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),k=this.addInputPin("Radius",[1],VVVV.PinTypes.Value),m=this.addInputPin("Start Angle",[0],VVVV.PinTypes.Value),r=this.addInputPin("End Angle",[0.5],VVVV.PinTypes.Value),s=this.addInputPin("Draw Segment",[0],VVVV.PinTypes.Value),n=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),
l=[],h=function(){this.transform=mat4.create();mat4.identity(this.transform);this.startAngle=0;this.endAngle=0.5;this.strokeColor=[1,1,1,1];this.lineWidth=1;this.renderState=g;this.clippingLayer=void 0;this.drawSegment=!1;this.draw=function(a,b){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.beginPath();b?d.apply(a):this.renderState.apply(a);
this.drawSegment&&(a.moveTo(0,0),a.lineTo(Math.cos(this.startAngle)*this.radius,Math.sin(this.startAngle)*this.radius));a.arc(0,0,this.radius,this.startAngle,this.endAngle,!1);this.drawSegment&&(a.moveTo(Math.cos(this.endAngle)*this.radius,Math.sin(this.endAngle)*this.radius),a.lineTo(0,0));0<this.renderState.fillColor.rgba[3]&&a.fill();0<this.renderState.strokeColor.rgba[3]&&a.stroke();this.clippingLayer&&a.restore()}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==
l[c]&&(l[c]=new h),l[c].transform=b.getValue(c),l[c].radius=k.getValue(c),l[c].startAngle=2*m.getValue(c)*Math.PI,l[c].endAngle=2*r.getValue(c)*Math.PI,l[c].renderState=f.getValue(c),l[c].drawSegment=1==s.getValue(c),0>l[c].radius&&(l[c].radius=-l[c].radius,l[c].startAngle+=Math.PI,l[c].endAngle+=Math.PI),a.isConnected()&&(l[c].clippingLayer=a.getValue(c));for(c=0;c<l.length;c++)n.setValue(c,l[c]);n.setSliceCount(e)}};VVVV.Nodes.ArcCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.RectangleCanvas=function(c,
e){this.constructor(c,"Rectangle (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),k=this.addInputPin("Width",[1],VVVV.PinTypes.Value),m=this.addInputPin("Height",[1],VVVV.PinTypes.Value),r=this.addInputPin("Corner Radius",[0],VVVV.PinTypes.Value),
s=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),n=[],l=function(){this.transform=mat4.create();mat4.identity(this.transform);this.renderState=g;this.clippingLayer=void 0;this.draw=function(a,b){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.beginPath();b?d.apply(a):this.renderState.apply(a);var f=this.width/2,
e=f-this.cornerRadius,k=this.height/2,c=k-this.cornerRadius,m=-f,l=-e,g=-k,n=-c;a.moveTo(l,g);a.lineTo(e,g);a.arc(e,n,this.cornerRadius,1.5*Math.PI,0,!1);a.lineTo(f,c);a.arc(e,c,this.cornerRadius,0,0.5*Math.PI,!1);a.lineTo(l,k);a.arc(l,c,this.cornerRadius,0.5*Math.PI,Math.PI,!1);a.lineTo(m,n);a.arc(l,n,this.cornerRadius,Math.PI,1.5*Math.PI,!1);a.closePath();0<this.renderState.fillColor.rgba[3]&&a.fill();0<this.renderState.strokeColor.rgba[3]&&a.stroke();this.clippingLayer&&a.restore()}};this.evaluate=
function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==n[c]&&(n[c]=new l),n[c].transform=b.getValue(c),n[c].width=k.getValue(c),n[c].height=m.getValue(c),n[c].cornerRadius=r.getValue(c),n[c].renderState=f.getValue(c),a.isConnected()&&(n[c].clippingLayer=a.getValue(c));for(c=0;c<n.length;c++)s.setValue(c,n[c]);s.setSliceCount(e)}};VVVV.Nodes.RectangleCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.TextCanvas=function(c,e){this.constructor(c,"Text (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),b=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),k=this.addInputPin("Text",["VVVV.js"],VVVV.PinTypes.String),m=this.addInputPin("Font",["10px sans-serif"],VVVV.PinTypes.String),r=this.addInputPin("Align",["start"],VVVV.PinTypes.Enum);r.enumOptions=["start","left","end","right","center"];var s=this.addInputPin("Baseline",
["alphabetic"],VVVV.PinTypes.Enum);s.enumOptions="top hanging middle alphabetic ideographic bottom".split(" ");var n=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),l=[],h=function(){this.transform=mat4.create();mat4.identity(this.transform);this.text="VVVV.js";this.font="sans-serif";this.align="start";this.baseline="top";this.renderState=g;this.clippingLayer=void 0;this.draw=function(a,b){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();a.save();this.transform&&
a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.scale(0.01,-0.01);a.font="100px "+this.font;a.textAlign=this.align;a.textBaseline=this.baseline;b?d.apply(a):this.renderState.apply(a);0<this.renderState.fillColor.rgba[3]&&a.fillText(this.text,0,0);0<this.renderState.strokeColor.rgba[3]&&a.strokeText(this.text,0,0);a.restore();this.clippingLayer&&a.restore()}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),
c=0;c<e;c++)void 0==l[c]&&(l[c]=new h),l[c].transform=b.getValue(c),l[c].text=k.getValue(c),l[c].font=m.getValue(c),l[c].align=r.getValue(c),l[c].baseline=s.getValue(c),l[c].renderState=f.getValue(c),l[c].clippingLayer=a.getValue(c);for(c=0;c<l.length;c++)n.setValue(c,l[c]);n.setSliceCount(e)}};VVVV.Nodes.TextCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.BezierCurveCanvas=function(c,e){function f(a,b){a.x.splice(b);a.y.splice(b);a.c1x.splice(b);a.c1y.splice(b);a.c2x.splice(b);a.c2y.splice(b)}this.constructor(c,
"BezierCurve (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),k=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),m=this.addInputPin("X",[0],VVVV.PinTypes.Value),r=this.addInputPin("Y",[0],VVVV.PinTypes.Value),s=this.addInputPin("Control 1 X",[0],VVVV.PinTypes.Value),n=this.addInputPin("Control 1 Y",
[0],VVVV.PinTypes.Value),l=this.addInputPin("Control 2 X",[0],VVVV.PinTypes.Value),h=this.addInputPin("Control 2 Y",[0],VVVV.PinTypes.Value),t=this.addInputPin("BinSize",[-1],VVVV.PinTypes.Value),v=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),x=[],w=function(){this.transform=mat4.create();mat4.identity(this.transform);this.x=[];this.y=[];this.c1x=[];this.c1y=[];this.c2x=[];this.c2y=[];this.strokeColor=[1,1,1,1];this.lineWidth=1;this.fillColor=[1,1,1,1];this.renderState=g;this.clippingLayer=
void 0;this.draw=function(a,b){if(!(1>this.x.length)){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());b?d.apply(a):this.renderState.apply(a);a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.beginPath();a.moveTo(this.x[0],this.y[0]);for(var f=1;f<this.x.length;f++)a.bezierCurveTo(this.c1x[f-1]+this.x[f-1],this.c1y[f-1]+this.y[f-1],this.c2x[f]+this.x[f],this.c2y[f]+this.y[f],
this.x[f],this.y[f]);0<this.renderState.fillColor.rgba[3]&&a.fill();0<this.renderState.strokeColor.rgba[3]&&a.stroke();this.clippingLayer&&a.restore()}}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0,d=0,g=0;g<e||0<t.getValue(0)&&(0<d||0<c%a.getSliceCount());g++)void 0==x[c]&&(x[c]=new w),0==d&&(x[c].renderState=b.getValue(c),x[c].transform=a.getValue(c),k.isConnected()&&(x[c].clippingLayer=k.getValue(c))),x[c].x[d]=m.getValue(g),x[c].y[d]=r.getValue(g),x[c].c1x[d]=s.getValue(g),
x[c].c1y[d]=n.getValue(g),x[c].c2x[d]=l.getValue(g),x[c].c2y[d]=h.getValue(g),d++,0<t.getValue(0)&&d>=t.getValue(c)&&(d<x[c].x.length&&f(x[c],d),c++,d=0);0>t.getValue(0)?d<x[c].x.length&&(f(x[c],d),x.splice(1)):x.splice(c);for(e=0;e<x.length;e++)v.setValue(e,x[e]);v.setSliceCount(x.length)}};VVVV.Nodes.BezierCurveCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.QuadCanvas=function(c,e){this.constructor(c,"Quad (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],
compatibility_issues:[]};var f=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),b=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),a=this.addInputPin("Texture",[],VVVV.PinTypes.HTML5Texture),k=this.addInputPin("Color",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")],VVVV.PinTypes.Color),m=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),d=[],g=function(){this.transform=mat4.create();this.clippingLayer=void 0;mat4.identity(this.transform);this.texture=VVVV.PinTypes.HTML5Texture.defaultValue();
this.color=[1,1,1,1];this.draw=function(a,b){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);"Empty Texture"!=this.texture?this.texture.loaded&&(a.globalAlpha=this.color[3],a.save(),a.translate(-0.5,0.5),this.texture.videoWidth?a.scale(1/this.texture.videoWidth,-1/this.texture.videoHeight):a.scale(1/this.texture.width,-1/this.texture.height),
a.drawImage(this.texture,0,0),a.restore(),a.fillStyle="rgba(0, 0, 0, .001)",a.fillRect(-0.5,-0.5,1,1),a.globalAlpha=1):(a.fillStyle="rgba("+parseInt(255*this.color.rgba[0])+", "+parseInt(255*this.color.rgba[1])+", "+parseInt(255*this.color.rgba[2])+", "+this.color.rgba[3]+")",a.fillRect(-0.5,-0.5,1,1));this.clippingLayer&&a.restore()}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==d[c]&&(d[c]=new g),d[c].transform=f.getValue(c),d[c].texture=a.getValue(c),d[c].color=
k.getValue(c),b.isConnected()&&(d[c].clippingLayer=b.getValue(c));for(c=0;c<d.length;c++)m.setValue(c,d[c]);m.setSliceCount(e)}};VVVV.Nodes.QuadCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.GroupCanvas=function(c,e){this.constructor(c,"Group (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInvisiblePin("Layer Count",[2],VVVV.PinTypes.Value),b=[],a=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer);this.initialize=
function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,b,a,function(a){return this.addInputPin("Layer "+(a+1),[],VVVV.PinTypes.CanvasLayer)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var e=0,c=b.length,d,g=0;g<c;g++)if(b[g].isConnected()){d=b[g].getSliceCount();for(var n=0;n<d;n++)a.setValue(e++,b[g].getValue(n))}a.setSliceCount(e)}};VVVV.Nodes.GroupCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.RendererCanvas=function(c,e){function f(a){function b(f){switch(f.which){case 1:VVVV.MousePositions._all.lb[0]=
0;VVVV.MousePositions[a.id].lb[0]=0;break;case 2:VVVV.MousePositions._all.mb[0]=0;VVVV.MousePositions[a.id].mb[0]=0;break;case 3:VVVV.MousePositions._all.rb[0]=0,VVVV.MousePositions[a.id].rb[0]=0}}function f(a,b){for(var e=a.originalEvent.changedTouches.length;e--;){var c=2*(a.originalEvent.changedTouches[e].pageX-h(b).offset().left)/h(b).width()-1,k=-(2*(a.originalEvent.changedTouches[e].pageY-h(b).offset().top)/h(b).height()-1);VVVV.MousePositions._all.x[a.originalEvent.changedTouches[e].identifier]=
VVVV.MousePositions[b.id].x[a.originalEvent.changedTouches[e].identifier]=c;VVVV.MousePositions._all.y[a.originalEvent.changedTouches[e].identifier]=VVVV.MousePositions[b.id].y[a.originalEvent.changedTouches[e].identifier]=k}}h(a).detach("mousemove");h(a).detach("mousedown");h(a).detach("mouseup");VVVV.MousePositions[a.id]={x:[0],y:[0],wheel:[0],lb:[0],mb:[0],rb:[0]};h(a).mousemove(function(b){var f=2*(b.pageX-h(this).offset().left)/h(this).width()-1;b=-(2*(b.pageY-h(this).offset().top)/h(this).height()-
1);VVVV.MousePositions._all.x[0]=f;VVVV.MousePositions._all.y[0]=b;VVVV.MousePositions[a.id].x[0]=f;VVVV.MousePositions[a.id].y[0]=b});h(a).bind("mousewheel",function(b){b=b.originalEvent.wheelDelta/120;VVVV.MousePositions[a.id].wheel[0]+=b;VVVV.MousePositions._all.wheel[0]+=b});h(a).bind("DOMMouseScroll",function(b){b=-b.originalEvent.detail/3;VVVV.MousePositions[a.id].wheel[0]+=b;VVVV.MousePositions._all.wheel[0]+=b});h(a).mousedown(function(f){switch(f.which){case 1:VVVV.MousePositions._all.lb[0]=
1;VVVV.MousePositions[a.id].lb[0]=1;break;case 2:VVVV.MousePositions._all.mb[0]=1;VVVV.MousePositions[a.id].mb[0]=1;break;case 3:VVVV.MousePositions._all.rb[0]=1,VVVV.MousePositions[a.id].rb[0]=1}h(document).unbind("mouseup",b);h(document).mouseup(b)});h(a).bind("touchstart",function(b){for(var e=b.originalEvent.changedTouches.length;e--;)VVVV.MousePositions._all.lb[b.originalEvent.changedTouches[e].identifier]=VVVV.MousePositions[a.id].lb[b.originalEvent.changedTouches[e].identifier]=1;f(b,this)});
h(a).bind("touchend",function(b){for(var f=b.originalEvent.changedTouches.length;f--;)VVVV.MousePositions._all.lb[b.originalEvent.changedTouches[f].identifier]=VVVV.MousePositions[a.id].lb[b.originalEvent.changedTouches[f].identifier]=0});h(a).bind("touchmove",function(a){f(a,this);a.preventDefault()})}this.constructor(c,"Renderer (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var b=this.addInputPin("Layers",[],VVVV.PinTypes.CanvasLayer);
this.addInputPin("Clear",[1],VVVV.PinTypes.Value);var a=this.addInputPin("Background Color",[new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],VVVV.PinTypes.Color),k=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),m=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),d=this.addInputPin("View",[],VVVV.PinTypes.Transform),s=this.addOutputPin("Canvas Out",[]),n,l,p,t=[0,0,0,1],v,x=mat4.create(),w;this.getContext=function(){var a=this.invisiblePins["Descriptive Name"].getValue(0);if((a=
h(a).get(0))&&"CANVAS"==a.nodeName)v=a;else{var b=parseInt(k.getValue(0)),e=parseInt(m.getValue(0));v=h('<canvas width="'+(0<b?b:512)+'" height="'+(0<e?e:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');a||(a="body");h(a).append(v);v=v.get(0)}l=v.width;p=v.height;v&&v.getContext&&(f(v),n=v.getContext("2d"),v.ctx=n,n.restoreView=function(){n.setTransform(x[0],x[1],x[4],x[5],x[12],x[13])})};this.destroy=function(){h(v).remove()};this.evaluate=
function(){this.invisiblePins["Descriptive Name"].pinIsChanged()&&(h(v).hasClass("vvvv-js-generated-renderer")&&h(v).remove(),this.getContext());if(n){if(k.pinIsChanged()||m.pinIsChanged()){var f=parseInt(k.getValue(0)),e=parseInt(m.getValue(0));0<f&&(l=f,h(v).attr("width",l));0<e&&(p=e,h(v).attr("height",p));w=mat4.create([l/2,0,0,0,0,-p/2,0,0,0,0,1,0,l/2,p/2,0,1]);mat4.multiply(w,d.getValue(0),x)}a.pinIsChanged()&&(f=a.getValue(0),t[0]=parseInt(255*f.rgba[0]),t[1]=parseInt(255*f.rgba[1]),t[2]=parseInt(255*
f.rgba[2]),t[3]=f.rgba[3]);g.apply(n);n.setTransform(1,0,0,1,0,0);1>t[3]&&n.clearRect(0,0,l,p);n.fillStyle="rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")";n.fillRect(0,0,l,p);d.pinIsChanged()&&mat4.multiply(w,d.getValue(0),x);n.restoreView();if(b.isConnected())for(f=0;f<b.getSliceCount();f++)b.getValue(f).draw(n);s.setValue(0,v);v.loaded=!0}}};VVVV.Nodes.RendererCanvas.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.PinTypes.Color={typeName:"Color",reset_on_disconnect:!1,defaultValue:function(){return new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")},primitive:!0};VVVV.Nodes.RGBJoin=function(g,d){this.constructor(g,"RGB (Color Join)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Red",[1],VVVV.PinTypes.Value),e=this.addInputPin("Green",[1],VVVV.PinTypes.Value),f=this.addInputPin("Blue",[1],VVVV.PinTypes.Value),
b=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[],VVVV.PinTypes.Color),k=[];this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),d=0;d<m;d++)k[d]||(k[d]=new VVVV.Types.Color("0.0,0.0,0.0,0.0")),k[d].rgba[0]=c.getValue(d)||0,k[d].rgba[1]=e.getValue(d)||0,k[d].rgba[2]=f.getValue(d)||0,k[d].rgba[3]=b.getValue(d)||0,a.setValue(d,k[d]);k.length=m;a.setSliceCount(m)}};VVVV.Nodes.RGBJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.HSVJoin=function(g,d){this.constructor(g,
"HSV (Color Join)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Hue",[0.33],VVVV.PinTypes.Value),e=this.addInputPin("Saturation",[0],VVVV.PinTypes.Value),f=this.addInputPin("Value",[1],VVVV.PinTypes.Value),b=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[],VVVV.PinTypes.Color),k=[],m,r,s,n;this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0;g<d;g++)m=c.getValue(g),
r=e.getValue(g),s=f.getValue(g),n=b.getValue(g),k[g]||(k[g]=new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0")),k[g].setHSV(m,r,s),k[g].rgba[3]=n,a.setValue(g,k[g]);k.length=d;a.setSliceCount(d)}};VVVV.Nodes.HSVJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxColor=function(g,d){this.constructor(g,"IOBox (Color)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Color Input",[new VVVV.Types.Color("0.0, 1.0, 0.0, 1.0")],
VVVV.PinTypes.Color),e=this.addOutputPin("Color Output",[],VVVV.PinTypes.Color);this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),b=0;b<f;b++)e.setValue(b,c.getValue(b));e.setSliceCount(f)}};VVVV.Nodes.IOBoxColor.prototype=new VVVV.Core.Node;VVVV.Nodes.SetAlphaColor=function(g,d){this.constructor(g,"SetAlpha (Color)",d);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!1;var c=this.addInputPin("Input",[new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0")],VVVV.PinTypes.Color),e=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[],VVVV.PinTypes.Color),b=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),k=0;k<a;k++){var m=c.getValue(k),d=e.getValue(k);b[k]||(b[k]=new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0"));b[k].rgba[0]=m.rgba[0];b[k].rgba[1]=m.rgba[1];b[k].rgba[2]=m.rgba[2];b[k].rgba[3]=d;f.setValue(k,b[k])}b.length=a;f.setSliceCount(a)}};
VVVV.Nodes.SetAlphaColor.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchColorInput=function(g,d){this.constructor(g,"Switch (Color Input)",d);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),e=[];e[0]=this.addInputPin("Input 1",[],VVVV.PinTypes.Color);e[1]=this.addInputPin("Input 2",[],VVVV.PinTypes.Color);var f=this.addOutputPin("Output",[],VVVV.PinTypes.Color);this.addInvisiblePin("Input Count",
[2],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)f.setValue(a,e[Math.round(Math.abs(c.getValue(a)))%e.length].getValue(a));f.setSliceCount(b)}};VVVV.Nodes.SwitchColorInput.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.Abs=function(g,d){this.constructor(g,"Abs (Complex)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input Real",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input Imagiary",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)f.setValue(a,Math.sqrt(Math.pow(c.getValue(a),2)+Math.pow(e.getValue(a),
2)));f.setSliceCount(b)}};VVVV.Nodes.Abs.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.Integrate=function(g,d){this.constructor(g,"Integrate (Differential)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Position In",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value),a=[];this.evaluate=function(){dt=this.parentPatch.mainloop.deltaT/
1E3;for(var k=this.getMaxInputSliceCount(),m=0;m<k;m++){void 0==a[m]&&(a[m]=0);var d=c.getValue(m);a[m]+=d*dt;0.5<=e.getValue(m)&&(a[m]=0);f.setValue(m,a[m]);b.setValue(m,d)}f.setSliceCount(k);b.setSliceCount(k);a.splice(k)}};VVVV.Nodes.Integrate.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.String2Enum=function(g,d){this.constructor(g,"String2Enum (Enumerations)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Validation check does not work"]};var c=this.addInputPin("String Value",[],VVVV.PinTypes.String),e=this.addOutputPin("Enum",[],VVVV.PinTypes.Enum);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),b=0;b<f;b++)e.setValue(b,c.getValue(b));e.setSliceCount(f)}};VVVV.Nodes.String2Enum.prototype=
new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Types.HTMLLayer=function(c){this.tagName=c;this.styles={};this.attributes={};this.tagName?(this.element=h("<"+this.tagName+">"),this.element.data("vvvvjslayer",this)):this.element=void 0;this.children=[g];this.parent=g;this.text="";this.position=0;this.style=d;this.set_style_properties={};this.apply=function(){if(this.element){var e=h(this.element);e.text(this.text);for(var f in this.attributes)e.attr(f,this.attributes[f]);for(var b in this.set_style_properties)!0!=this.set_style_properties[b]||
this.style.style_properties[b]||(e.css(b,""),this.set_style_properties[b]=!1);this.style.apply(this);this.parent.tagName?this.parent.element[0]!=this.element[0].parentElement&&this.parent.element.append(this.element):this.element[0].parentElement!=document.body&&h("body").append(this.element)}};this.changeTagName=function(e){this.tagName=e;e=h("<"+this.tagName+">");e.before(this.element);this.element.children().detach().appendTo(e);this.element.remove();this.element=e};this.setPosition=function(e){this.position=
e;if(0<this.element.next().length&&this.element.next().data("vvvvjslayer")&&this.position>this.element.next().data("vvvvjslayer").position||0<this.element.prev().length&&this.element.prev().data("vvvvjslayer")&&this.position<this.element.prev().data("vvvvjslayer").position){e=0;var f=this.element.parent().children(),b=!1;for(e=0;e<f.length;e++){var a=f.eq(e);if(this.position<a.data("vvvvjslayer").position||!a.data("vvvvjslayer")){a.before(this.element);b=!0;break}}b||this.element.parent().append(this.element)}}};
var g=new VVVV.Types.HTMLLayer;VVVV.PinTypes.HTMLLayer={typeName:"HTMLLayer",reset_on_disconnect:!0,defaultValue:function(){return g}};VVVV.Types.HTMLStyle=function(){this.style_properties={};this.inherited_properties={};this.set_properties={};this.apply=function(c){var e=h(c.element),f;for(f in this.inherited_properties)e.css(f,this.inherited_properties[f]),c.set_style_properties[f]=!0;for(f in this.style_properties)e.css(f,this.style_properties[f]),c.set_style_properties[f]=!0};this.copy_properties=
function(c){for(var e in c.style_properties)this.inherited_properties[e]=c.style_properties[e];for(e in c.inherited_properties)this.inherited_properties[e]=c.inherited_properties[e];for(e in this.inherited_properties)c.style_properties[e]||c.inherited_properties[e]||delete this.inherited_properties[e]}};var d=new VVVV.Types.HTMLStyle;VVVV.PinTypes.HTMLStyle={typeName:"HTMLStyle",reset_on_disconnect:!0,defaultValue:function(){return d}};[{nodename:"Element",tagname:"div",pins:[],dynamic:!0},{nodename:"Link",
tagname:"a",pins:[{name:"href",type:VVVV.PinTypes.String,value:"#",attribute:!0}]},{nodename:"Image",tagname:"img",pins:[{name:"src",type:VVVV.PinTypes.String,value:"",attribute:!0}]},{nodename:"TextInput",tagname:"input type='text'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:"",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"Checkbox",tagname:"input type='checkbox'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0,attribute:!0},
{name:"value",value:"1",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"RadioButton",tagname:"input type='radio'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:"1",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"Button",tagname:"input type='button'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:"Push me",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"RangeSlider",tagname:"input type='range'",pins:[{name:"name",
value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:0,type:VVVV.PinTypes.Value,attribute:!0},{name:"min",value:0,type:VVVV.PinTypes.Value,attribute:!0},{name:"max",value:10,type:VVVV.PinTypes.Value,attribute:!0},{name:"step",value:1,type:VVVV.PinTypes.Value,attribute:!0}]},{nodename:"SelectBox",tagname:"select",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"SelectOption",tagname:"option",pins:[{name:"value",value:"",type:VVVV.PinTypes.String,attribute:!0}]}].forEach(function(c){VVVV.Nodes[c.nodename+
"HTML"]=function(e,f){this.constructor(e,c.nodename+" (HTML)",f);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInvisiblePin("Attribute Names",[""],VVVV.PinTypes.String),a=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),k="",m=void 0;c.dynamic?m=this.addInputPin("Tag Name",["div"],VVVV.PinTypes.String):k=c.tagname;for(var d=this.addInputPin("Parent",[],VVVV.PinTypes.HTMLLayer),g=this.addInputPin("Text",[""],VVVV.PinTypes.String),
n=[],l=[],h=0;h<c.pins.length;h++)c.pins[h].type&&!0==c.pins[h].attribute?l.push(this.addInputPin(c.pins[h].name,[c.pins[h].value],c.pins[h].type)):this.addInputPin(c.pins[h].name,[c.pins[h].value],c.pins[h].type);var t=this.addOutputPin("Layers Out",[],VVVV.PinTypes.HTMLLayer),v=[];this.initialize=function(){for(var a=[],f=RegExp(/([a-z]+)/g),e;e=f.exec(b.getValue(0));)a.push(e[0]);for(f=0;f<a.length;f++)this.inputPins[a[f]]?this.inputPins[a[f]].unvalidated&&(n.push(this.inputPins[a[f]]),e=this.inputPins[a[f]].values.slice(),
this.inputPins[a[f]].setType(VVVV.PinTypes.String),this.inputPins[a[f]].isConnected()||(this.inputPins[a[f]].values=e)):n.push(this.addInputPin(a[f],[""],VVVV.PinTypes.String));for(f=0;f<n.length;f++)if(0>a.indexOf(n[f].pinname))for(this.removeInputPin(n[f].pinname),e=0;e<v.length;e++)delete v[e].attributes[n[f].pinname]};this.evaluate=function(){b.pinIsChanged()&&this.initialize();for(var f=this.getMaxInputSliceCount(),e=0;e<f;e++){void 0==v[e]&&(v[e]=new VVVV.Types.HTMLLayer(m?m.getValue(e):k));
m&&v[e].tagName!=m.getValue(e)&&v[e].changeTagName(m.getValue(e));v[e].text=g.getValue(e);v[e].parent=d.getValue(e);for(var c=0;c<n.length;c++)v[e].attributes[n[c].pinname]=n[c].getValue(e);for(c=0;c<l.length;c++)v[e].attributes[l[c].pinname]=l[c].getValue(e);v[e].style=a.getValue(e);v[e].apply();t.setValue(e,v[e])}for(e=f;e<v.length;e++)v[e].element.remove();v.length=f;t.setSliceCount(f)};this.destroy=function(){for(var a=0;a<v.length;a++)v[a].element.remove()}};VVVV.Nodes[c.nodename+"HTML"].prototype=
new VVVV.Core.Node});VVVV.Nodes.GroupHTML=function(c,e){this.constructor(c,"Group (HTML)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Parent",[],VVVV.PinTypes.HTMLLayer),b=this.addInvisiblePin("Output Count",[2],VVVV.PinTypes.Value),a=[];this.initialize=function(){for(var f=Math.max(2,b.getValue(0)),e=a.length;e<f;e++)a.push(this.addOutputPin("Element Slot "+(e+1),[],VVVV.PinTypes.HTMLLayer));for(e=a.length-1;e>=f;e--)this.removeOutputPin(a[e].pinname);
a.length=f};this.evaluate=function(){b.pinIsChanged()&&(this.initialize(),this.parentPatch.afterUpdate());for(var e=f.getSliceCount(),c=0;c<e;c++)for(var d=0;d<a.length;d++){var g=a[d].values[c];g||(g=new VVVV.Types.HTMLLayer("span"));g.parent=f.getValue(c);g.apply();a[d].setValue(c,g)}for(c=0;c<a.length;c++)for(d=a[c].values.length-1;d>=e;d--)a[c].values[d].element.remove()};this.destroy=function(){for(var b=0;b<a.length;b++)for(var f=0;f<a[b].values.length;f++)a[b].values[f].element.remove()}};
VVVV.Nodes.GroupHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.GetElementHTML=function(c,e){this.constructor(c,"GetElement (HTML)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Selector",[""],VVVV.PinTypes.String),b=this.addInputPin("Parent",[],VVVV.PinTypes.HTMLLayer);this.addInputPin("Refresh",[0],VVVV.PinTypes.Value);var a=this.addOutputPin("Layers Out",[],VVVV.PinTypes.HTMLLayer),k=this.addOutputPin("Bin Size",[-1],VVVV.PinTypes.Value),
m=[];this.evaluate=function(){this.getMaxInputSliceCount();var e;e=b.isConnected()?b.getValue(0).element:h(document);for(var c=f.getSliceCount(),d=0,g=0;g<c;g++){var p=f.getValue(g);if(""!=p){var t=0;e.find(p).each(function(){void 0==m[d]&&(m[d]=new VVVV.Types.HTMLLayer);m[d].tagName=h(this).prop("tagName");m[d].element=h(this);a.setValue(d,m[d]);d++;t++});k.setValue(g,t)}}m.length=d;a.setSliceCount(d);k.setSliceCount(c)}};VVVV.Nodes.GetElementHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.GetPositionHTML=
function(c,e){function f(b,f){var e;e=a.getValue(f)==a.enumOptions[0]||a.getValue(f)==a.enumOptions[1]?h(b).offset():h(b).position();a.getValue(f)==a.enumOptions[1]&&(e.left=2*(e.left/window.innerWidth)-1,e.top=-1*(2*(e.top/window.innerHeight)-1));k.setValue(f,e.left);m.setValue(f,e.top)}this.constructor(c,"GetPosition (HTML)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),a=this.addInputPin("Space",
["Browser Pixels"],VVVV.PinTypes.Enum);a.enumOptions=["Document Pixels","Document [-1, +1]","Parent Element Pixels"];var k=this.addOutputPin("X",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),d=[],g=[];this.evaluate=function(){var a=this.getMaxInputSliceCount();if(b.isConnected()&&""!=b.getValue(0).tagName){for(var e=0;e<a;e++)void 0!=g[e]&&g[e]!=b.getValue(e).element[0]&&(d[e].disconnect(),d[e]=void 0),void 0==d[e]&&(function(a){d[a]=new MutationObserver(function(b){f(g[a],
a)})}(e),g[e]=b.getValue(e).element[0],h(g[e]).parents().each(function(){d[e].observe(this,{attributes:!0,attributeFilter:["style"]})}),d[e].observe(g[e],{attributes:!0,attributeFilter:["style"]})),f(g[e],e);d.length=a;g.length=a;k.setSliceCount(a);m.setSliceCount(a)}else d.forEach(function(a){a.disconnect()}),d.length=0,k.setValue(0,0),m.setValue(0,0),k.setSliceCount(1),m.setSliceCount(1)};this.destroy=function(){d.forEach(function(a){a.disconnect()})}};VVVV.Nodes.GetPositionHTML.prototype=new VVVV.Core.Node;
VVVV.Nodes.GetValueHTML=function(c,e){this.constructor(c,"GetValue (HTML)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),b=this.addOutputPin("Output",[0],VVVV.PinTypes.String),a=[],k=[],m=[];this.evaluate=function(){var e=this.getMaxInputSliceCount(),c=this;if(f.isConnected()&&""!=f.getValue(0).tagName){for(var d=0;d<e;d++)void 0!=k[d]&&k[d]!=f.getValue(d).element[0]&&(h(k[d]).unbind("change input paste keyup",
a[d]),a[d]=void 0),void 0==a[d]&&(k[d]=f.getValue(d).element[0],function(b){a[b]=function(a){a="";"SELECT"==h(this).prop("tagName")?a=h(this).find("option:selected").attr("value"):"INPUT"==h(this).prop("tagName")&&"checkbox"==h(this).prop("type")?a=h(this).is(":checked")?h(this).attr("value"):"":"INPUT"==h(this).prop("tagName")&&"radio"==h(this).prop("type")?a=h(this).is(":checked")?h(this).attr("value"):"":"INPUT"==h(this).prop("tagName")&&(a=h(this).val());void 0==a&&(a="");m.push({sliceIdx:b,value:a});
c.dirty=!0}}(d),h(k[d]).bind("change input paste keyup",a[d]),a[d].call(k[d]));a.length=e;k.length=e;b.setSliceCount(e)}else{for(d=0;d<k.length;d++)h(k[d]).unbind("change input paste keyup",a[d]);a.length=0;k.length=0;b.setValue(0,"");b.setSliceCount(1)}if(0<m.length){for(d=m.length;d--;)b.setValue(m[d].sliceIdx,m[d].value);m.length=0;c.dirty=!1}};this.destroy=function(){for(var b=0;b<k.length;b++)h(k[b]).unbind("change input paste keyup",a[b])}};VVVV.Nodes.GetValueHTML.prototype=new VVVV.Core.Node;
[{name:"Event",code:"click",dynamic:!0},{name:"Click",code:"click"},{name:"MouseDown",code:"mousedown"},{name:"MouseUp",code:"mouseup"},{name:"MouseOver",code:"mouseover"},{name:"MouseEnter",code:"mouseenter"},{name:"MouseLeave",code:"mouseleave"},{name:"Change",code:"change"},{name:"Focus",code:"focus"},{name:"Blur",code:"blur"}].forEach(function(c){VVVV.Nodes["On"+c.name+"HTML"]=function(e,f){this.constructor(e,"On"+c.name+" (HTML)",f);this.meta={authors:["Matthias Zauner"],original_authors:[],
credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var b=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),a="",k=void 0;c.dynamic?k=this.addInputPin("Event",["click"],VVVV.PinTypes.String):a=c.code;var m=this.addOutputPin("OnEvent",[0],VVVV.PinTypes.Value),d=[],g=[],n=[],l=[],p=!1;this.evaluate=function(){var e=this.getMaxInputSliceCount();if(b.isConnected()&&""!=b.getValue(0).tagName){for(var f=0;f<e;f++)k&&(a=k.getValue(f)),void 0==g[f]||g[f]==b.getValue(f).element[0]&&n[f]==a||(h(g[f]).unbind(n[f],
d[f]),d[f]=void 0),void 0==d[f]&&(g[f]=b.getValue(f).element[0],n[f]=a,function(a){d[a]=function(b){l.push(a);p=!1}}(f),h(g[f]).bind(n[f],d[f]));d.length=e;g.length=e;n.length=e;m.setSliceCount(e)}else{for(f=0;f<g.length;f++)h(g[f]).unbind(n[f],d[f]);d.length=0;g.length=0;m.setValue(0,0);m.setSliceCount(1)}if(p){for(f=m.getSliceCount();f--;)m.setValue(f,0);p=!1}if(0<l.length){for(f=l.length;f--;)m.setValue(l[f],1);l.length=0;p=!0}};this.destroy=function(){for(var a=0;a<d.length;a++)h(g[a]).unbind(n[a],
d[a])}};VVVV.Nodes["On"+c.name+"HTML"].prototype=new VVVV.Core.Node});VVVV.Nodes.StyleHTML=function(c,e){this.constructor(c,"Style (HTML)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),b=this.addInputPin("Property Name",[],VVVV.PinTypes.String),a=this.addInputPin("Property Value",[],VVVV.PinTypes.String),k=this.addOutputPin("Style Out",[],VVVV.PinTypes.HTMLStyle),m=[];this.evaluate=function(){for(var e=
this.getMaxInputSliceCount(),c=[],d=0;d<e;d++)m[d]||(m[d]=new VVVV.Types.HTMLStyle),m[d].copy_properties(f.getValue(d)),""!=b.getValue(d)&&(m[d].style_properties[b.getValue(d)]=a.getValue(d),c[d]||(c[d]={}),c[d][b.getValue(d)]=!0),k.setValue(d,m[d]);for(d=0;d<e;d++)for(stylename in m[d].style_properties)c[d][stylename]||delete m[d].style_properties[stylename];k.setSliceCount(e)}};VVVV.Nodes.StyleHTML.prototype=new VVVV.Core.Node;[{name:"Background",pins:[{name:"background-color",type:VVVV.PinTypes.Color,
is_property:!0}]},{name:"Border",pins:[{name:"border-width",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"border-color",type:VVVV.PinTypes.Color,is_property:!0},{name:"border-style",value:"solid",type:VVVV.PinTypes.Enum,enumOptions:["solid","dashed","dotted"],is_property:!0}]},{name:"Padding",pins:[{name:"padding-left",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"padding-top",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"padding-right",
value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"padding-bottom",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0}]},{name:"Margin",pins:[{name:"margin-left",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"margin-top",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"margin-right",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"margin-bottom",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0}]},{name:"Font",pins:[{name:"color",
type:VVVV.PinTypes.Color,is_property:!0},{name:"font-family",value:"inherit",type:VVVV.PinTypes.String,is_property:!0},{name:"font-weight",value:"inherit",type:VVVV.PinTypes.Enum,is_property:!0,enumOptions:["inherit","normal","light","bold"]},{name:"text-decoration",value:"inherit",type:VVVV.PinTypes.Enum,is_property:!0,enumOptions:["inherit","none","underline","line-through"]}]},{name:"FontSize",pins:[{name:"font-size",value:12,unit:"px",type:VVVV.PinTypes.Value,is_property:!0}]}].forEach(function(c){VVVV.Nodes[c.name+
"HTML"]=function(e,f){this.constructor(e,c.name+" (HTML)",f);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};for(var b=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),a=[],k=0;k<c.pins.length;k++){var d=[];c.pins[k].value&&d.push(c.pins[k].value);d=this.addInputPin(c.pins[k].name,d,c.pins[k].type);c.pins[k].unit&&(d.unit=c.pins[k].unit);if(c.pins[k].enumOptions){d.enumOptions=[];for(var g=0;g<c.pins[k].enumOptions.length;g++)d.enumOptions[g]=
c.pins[k].enumOptions[g]}c.pins[k].is_property&&a.push(d)}var s=this.addOutputPin("Style Out",[],VVVV.PinTypes.HTMLStyle),n=[],l=[];this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),e=[],c=0;c<f;c++){n[c]||(n[c]=new VVVV.Types.HTMLStyle);n[c].copy_properties(b.getValue(c));for(var k=0;k<a.length;k++){var d;"Color"==a[k].typeName?(l[0]=parseInt(256*a[k].getValue(c).rgba[0]),l[1]=parseInt(256*a[k].getValue(c).rgba[1]),l[2]=parseInt(256*a[k].getValue(c).rgba[2]),l[3]=a[k].getValue(c).rgba[3],
d="rgba("+l.join(",")+")"):d=a[k].getValue(c);""!=d?(a[k].unit&&(d+=a[k].unit),n[c].style_properties[a[k].pinname]=d,e[c]||(e[c]={}),e[c][a[k].pinname]=!0):e[c]&&(e[c][a[k].pinname]=!1)}s.setValue(c,n[c])}for(c=0;c<f;c++)for(stylename in n[c].style_properties)e[c]&&!e[c][stylename]&&delete n[c].style_properties[stylename];s.setSliceCount(f)}};VVVV.Nodes[c.name+"HTML"].prototype=new VVVV.Core.Node})})(vvvvjs_jquery);(function(h){VVVV.PinTypes.HTML5Texture={typeName:"HTML5Texture",reset_on_disconnect:!0,defaultValue:function(){return"Empty Texture"}};VVVV.Nodes.FileTextureCanvas=function(g,d){this.constructor(g,"FileTexture (HTML5 VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Filename",[],VVVV.PinTypes.String),e=this.addOutputPin("Texture Out",[],VVVV.PinTypes.HTML5Texture),f=this.addOutputPin("Width",[0],
VVVV.PinTypes.Value),b=this.addOutputPin("Height",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Up and Running",[0],VVVV.PinTypes.Value),k=[],m=!1;this.evaluate=function(){var d=this.getMaxInputSliceCount();if(c.pinIsChanged()){for(var g=0;g<d;g++){var n=VVVV.Helpers.prepareFilePath(c.getValue(g),this.parentPatch);0===n.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(n=VVVV.ImageProxyPrefix+encodeURI(n));if(void 0==k[g]||k[g].origSrc!=n)k[g]=new Image,k[g].loaded=!1,k[g].origSrc=n,k[g].onload=
function(a){return function(){m=k[a].loaded=!0}}(g),k[g].src=n,a.setValue(g,0),e.setValue(g,k[g])}k.length=d;e.setSliceCount(d);f.setSliceCount(d);b.setSliceCount(d);a.setSliceCount(d)}if(m){for(g=0;g<d;g++)e.setValue(g,k[g]),f.setValue(g,k[g].width),b.setValue(g,k[g].height),a.setValue(g,k[g].loaded?1:0);m=!1}}};VVVV.Nodes.FileTextureCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.FileStreamCanvas=function(g,d){this.constructor(g,"FileStream (HTML5 VVVVjs)",d);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],e=["HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","HAVE_CURRENT_DATA"],f=this.addInputPin("Play",[1],VVVV.PinTypes.Value),b=this.addInputPin("Loop",[0],VVVV.PinTypes.Value),a=this.addInputPin("Start Time",[0],VVVV.PinTypes.Value),k=this.addInputPin("End Time",[-1],VVVV.PinTypes.Value),m=this.addInputPin("Do Seek",[0],VVVV.PinTypes.Value),
r=this.addInputPin("Seek Position",[0],VVVV.PinTypes.Value),s=this.addInputPin("Filename",["http://html5doctor.com/demos/video-canvas-magic/video.ogg"],VVVV.PinTypes.String),n=this.addOutputPin("Video",[],this),l=this.addOutputPin("Audio",[],this),p=this.addOutputPin("Duration",[0],VVVV.PinTypes.Value),t=this.addOutputPin("Position",[0],VVVV.PinTypes.Value),v=this.addOutputPin("Video Width",[0],VVVV.PinTypes.Value),x=this.addOutputPin("Video Height",[0],VVVV.PinTypes.Value),w=this.addOutputPin("Network Status",
[""],VVVV.PinTypes.String),y=this.addOutputPin("Ready Status",[""],VVVV.PinTypes.String),u=[];this.evaluate=function(){var d=this.getMaxInputSliceCount();if(s.pinIsChanged())for(var g=0;g<d;g++){filename=VVVV.Helpers.prepareFilePath(s.getValue(g),this.parentPatch);if(void 0==u[g]){var z=h('<video style="display:none"><source src="" type=video/ogg></video>');h("body").append(z);u[g]=z[0];u[g].volume=0;z=function(a){return function(){}}(g);u[g].onprogress=z;u[g].oncanplay=z;u[g].oncanplaythrough=z}filename!=
u[g].currentSrc&&(h(u[g]).find("source").first().attr("src",filename),u[g].load(),0.5<f.getValue(g)?u[g].play():u[g].pause(),u[g].loaded=!0,n.setValue(g,u[g]),l.setValue(g,u[g]))}if(f.pinIsChanged())for(g=0;g<d;g++)0.5<f.getValue(g)?u[g].play():u[g].pause();if(m.pinIsChanged())for(g=0;g<d;g++)u[g%u.length].loaded&&0.5<=m.getValue(g)&&(u[g%u.length].currentTime=r.getValue(g),0.5<f.getValue(g)&&u[g].play());for(g=0;g<d;g++){if(!u[g].paused){n.setValue(g,u[g]);l.setValue(g,u[g]);p.getValue(g)!=u[g].duration&&
p.setValue(g,u[g].duration);t.setValue(g,u[g].currentTime);var z=k.getValue(g),B=a.getValue(g);u[g].currentTime<B&&(u[g].currentTime=B);if(u[g].currentTime>=u[g].duration||0<=z&&u[g].currentTime>=z)0.5<=b.getValue(g)?u[g].currentTime=B:u[g].pause()}if(u[g].videoWidth!=v.getValue(g)||u[g].videoHeight!=x.getValue(g))v.setValue(g,u[g].videoWidth),x.setValue(g,u[g].videoHeight);w.getValue(g)!=c[u[g].networkState]&&w.setValue(g,c[u[g].networkState]);y.getValue(g)!=e[u[g].readyState]&&y.setValue(g,e[u[g].readyState])}n.setSliceCount(d);
l.setSliceCount(d)}};VVVV.Nodes.FileStreamCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.AudioOutHTML5=function(g,d){this.constructor(g,"AudioOut (HTML5 VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var c=this.addInputPin("Audio",[],this),e=this.addInputPin("Volume",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){var f=this.getMaxInputSliceCount();if(e.pinIsChanged())for(var b=0;b<f;b++)c.getValue(b).volume=Math.max(0,Math.min(1,e.getValue(b)))}};
VVVV.Nodes.AudioOutHTML5.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.HTTPGet=function(g,d){this.constructor(g,"HTTP (Network Get)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Doesnt handle get variables yet","Doesnt support proxies","No header output pin yet"]};this.auto_evaluate=!0;var c=this.addInputPin("URL",["http://localhost"],VVVV.PinTypes.String),e=this.addInputPin("Name",[""],VVVV.PinTypes.String),f=this.addInputPin("Value",[""],VVVV.PinTypes.String),b=this.addInputPin("Refresh",
[0],VVVV.PinTypes.Value),a=this.addOutputPin("Status",[""],VVVV.PinTypes.String),k=this.addOutputPin("Body",[""],VVVV.PinTypes.String),m=this.addOutputPin("Fail",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Success",[0],VVVV.PinTypes.Value),s,n,l,p=!1;this.evaluate=function(){this.getMaxInputSliceCount();var d=c.pinIsChanged()||e.pinIsChanged()||f.pinIsChanged()||b.pinIsChanged()&&1==b.getValue(0);1==r.getValue(0)&&r.setValue(0,0);1==m.getValue(0)&&m.setValue(0,0);p&&(k.setValue(0,s),a.setValue(0,
void 0),r.setValue(0,n),m.setValue(0,l),p=!1);d&&(void 0==c.getValue(0)?(k.setValue(0,""),a.setValue(0,"")):h.ajax({url:c.getValue(0),type:"get",success:function(a,b,f){s=a;n=1;p=!0},error:function(a,b){s="";l=1;p=!0}}))}};VVVV.Nodes.HTTPGet.prototype=new VVVV.Core.Node;VVVV.Nodes.WebsocketClient=function(g,d){this.constructor(g,"Websocket (Network Client)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("URL",
["localhost"],VVVV.PinTypes.String),e=this.addInputPin("Port",[8006],VVVV.PinTypes.Value),f=this.addInputPin("Input",["Hello"],VVVV.PinTypes.String),b=this.addInputPin("DoSend",[0],VVVV.PinTypes.Value),a=this.addInputPin("Enabled",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Output",[""],VVVV.PinTypes.String),m=this.addOutputPin("OnData",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Connected",[0],VVVV.PinTypes.Value),h=null,n=[];this.evaluate=function(){(0.5>a.getValue(0)||c.pinIsChanged()||e.pinIsChanged())&&
null!=h&&(h.close(),h=null);0.5<=a.getValue(0)&&null==h&&(h=new WebSocket("ws://"+c.getValue(0)+":"+e.getValue(0)),h.onopen=function(a){r.setValue(0,1)},h.onclose=function(a){r.setValue(0,0)},h.onmessage=function(a){n.push(a.data)});0<n.length?(k.setValue(0,n.shift()),m.setValue(0,1)):(k.setValue(0,""),m.setValue(0,0));0.5<=b.getValue(0)&&h&&h.send(f.getValue(0))}};VVVV.Nodes.WebsocketClient.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.PinTypes.Node={typeName:"Node",reset_on_disconnect:!0,connectionChangedHandlers:{nodepin:function(){function g(e,f){for(var b in this.node.inputPins)if(this.pinname!=b&&this.node.inputPins[b].typeName==e.typeName&&"Node"!=this.node.inputPins[b].typeName&&this.node.inputPins[b].isConnected())return;for(b in this.node.outputPins)if(this.pinname!=b&&this.node.outputPins[b].typeName==e.typeName&&"Node"!=this.node.outputPins[b].typeName&&this.node.outputPins[b].isConnected())return;for(b in this.node.outputPins)if(this.node.outputPins[b].typeName==
e.typeName){this.node.outputPins[b].setType(f);this.node.outputPins[b].slavePin&&this.node.outputPins[b].slavePin.setType(f);for(var a=this.node.outputPins[b].links.length;a--;)this.node.outputPins[b].links[a].toPin.typeName!=f.typeName&&this.node.outputPins[b].links[a].toPin.connectionChanged()}for(b in this.node.inputPins)this.node.inputPins[b].typeName==e.typeName&&(this.node.inputPins[b].setType(f),this.node.inputPins[b].masterPin&&this.node.inputPins[b].masterPin.setType(f),this.pinname!=b&&
0<this.node.inputPins[b].links.length&&this.node.inputPins[b].links[0].fromPin.connectionChanged())}if(this.direction==VVVV.PinDirection.Input)if(this.isConnected()){var d;0<this.links.length?d=this.links[0].fromPin:this.masterPin&&(d=this.masterPin);g.call(this,VVVV.PinTypes.Node,VVVV.PinTypes[d.typeName])}else g.call(this,VVVV.PinTypes[this.typeName],VVVV.PinTypes.Node);else if(this.direction==VVVV.PinDirection.Output)if(this.isConnected()){var c;0<this.links.length?c=this.links[0].toPin:this.slavePin&&
(c=this.slavePin);g.call(this,VVVV.PinTypes.Node,VVVV.PinTypes[c.typeName])}else g.call(this,VVVV.PinTypes[this.typeName],VVVV.PinTypes.Node)}}};VVVV.Nodes.IOBoxNode=function(g,d){this.constructor(g,"IOBox (Node)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input Node",[],VVVV.PinTypes.Node),e=this.addOutputPin("Output Node",[],VVVV.PinTypes.Node);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),
b=0;b<f;b++)e.setValue(b,c.getValue(b));e.setSliceCount(f)}};VVVV.Nodes.IOBoxNode.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchNodeInput=function(g,d){this.constructor(g,"Switch (Node Input)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};this.auto_nil=!1;var c=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],b=this.addOutputPin("Output",[],
VVVV.PinTypes.Node);this.initialize=function(){for(var a=e.getValue(0),b=f.length;b<a;b++)f[b]=this.addInputPin("Input "+(b+1),[],VVVV.PinTypes.Node);f.length=a};this.evaluate=function(){e.pinIsChanged()&&this.initialize();if(void 0==c.getValue(0))b.setValue(0,void 0);else{for(var a=f[Math.round(Math.abs(c.getValue(0)))%f.length],k=a.getSliceCount(),d=0;d<k;d++)b.setValue(d,a.getValue(d));b.setSliceCount(k)}}};VVVV.Nodes.SwitchNodeInput.prototype=new VVVV.Core.Node;VVVV.Nodes.GetSliceNode=function(g,
d){this.constructor(g,"GetSlice (Node)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[],VVVV.PinTypes.Node),e=this.addInputPin("BinSize",[1],VVVV.PinTypes.Value),f=this.addInputPin("Index",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[],VVVV.PinTypes.Node);this.evaluate=function(){for(var a=f.getSliceCount(),k,d,g=0,h=0;h<a;h++)if(d=e.getValue(h),k=c.getValue(Math.round(f.getValue(h)),d),1<d)for(d=
0;d<k.length;d++)b.setValue(g,k[d]),g++;else b.setValue(h,k),g++;b.setSliceCount(g)}};VVVV.Nodes.GetSliceNode.prototype=new VVVV.Core.Node;VVVV.Nodes.SelectNode=function(g,d){this.constructor(g,"Select (Node)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[],VVVV.PinTypes.Node),e=this.addInputPin("Select",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[],VVVV.PinTypes.Node),b=this.addOutputPin("Former Slice",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),k=0,d=0;d<a;d++)for(var g=0;g<e.getValue(d);g++)f.setValue(k,c.getValue(d)),b.setValue(k,d),k++;f.setSliceCount(k);b.setSliceCount(k)}};VVVV.Nodes.SelectNode.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.BoundsSpectral=function(g,d){this.constructor(g,"Bounds (Spectral)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Center",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Width",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Minimum",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Maximum",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0,h=0,n,l,p,t=0;t<d||0<e.getValue(0)&&(0<h||0!=g%e.getSliceCount());t++)n=c.getValue(t),0==h&&(center=l=p=n,width=0),l=Math.min(n,l),p=Math.max(n,p),h++,0<e.getValue(0)&&h>=e.getValue(g)&&(a.setValue(g,l),k.setValue(g,p),f.setValue(g,l+(p-l)/2),b.setValue(g,Math.abs(p-l)),g++,h=0);-1==e.getValue(0)&&(a.setValue(g,l),k.setValue(g,p),f.setValue(g,l+(p-l)/2),b.setValue(g,Math.abs(p-l)));f.setSliceCount(g+(0<h));
b.setSliceCount(g+(0<h));a.setSliceCount(g+(0<h));k.setSliceCount(g+(0<h))}};VVVV.Nodes.BoundsSpectral.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.GetSliceSpreads=function(g,d){this.constructor(g,"GetSlice (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value),f=this.addInputPin("Index",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=f.getSliceCount(),k,d,g=0,h=0;h<a;h++)if(d=e.getValue(h),
k=c.getValue(Math.round(f.getValue(h)),d),1<d)for(d=0;d<k.length;d++)b.setValue(g,k[d]),g++;else b.setValue(h,k),g++;b.setSliceCount(g)}};VVVV.Nodes.GetSliceSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.SetSliceSpreads=function(g,d){this.constructor(g,"SetSlice (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Spread",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input",[0],VVVV.PinTypes.Value),
f=this.addInputPin("Index",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=c.getSliceCount(),k=0;k<a;k++)b.setValue(k,c.getValue(k));size=Math.max(e.getSliceCount(),f.getSliceCount());for(k=0;k<size;k++)b.setValue(f.getValue(k)%a,e.getValue(k));b.setSliceCount(a)}};VVVV.Nodes.SetSliceSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.RandomSpread=function(g,d){function c(e){var f=[],b=0,a=0;(function(a){for(var b=0;256>b;b++)f[b]=b;for(var e=
0,b=0;256>b;b++){var e=(e+f[b]+a.charCodeAt(b%a.length))%256,c=f[b];f[b]=f[e];f[e]=c}})(e);this.getRandomNumber=function(){for(var e=0,c=1,d=0;8>d;d++){b=(b+1)%256;a=(a+f[b])%256;var g=f[b];f[b]=f[a];f[a]=g;e+=f[(f[b]+f[a])%256]*c;c*=256}return e/1.8446744073709552E19}}this.constructor(g,"RandomSpread (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:["http://www.webdeveloper.com/forum/showthread.php?t=140572"],compatibility_issues:["Doesnt handle spreaded inputs",
"random result will differ from original vvvv node because of different algorithm"]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.addInputPin("Random Seed",[0],VVVV.PinTypes.Value);this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var e=parseInt(this.inputPins["Spread Count"].getValue(0)),f=this.inputPins.Input.getValue(0),b=this.inputPins.Width.getValue(0),
a=parseInt(this.inputPins["Random Seed"].getValue(0));rng=new c(a.toString());this.outputPins.Output.setSliceCount(e);for(a=0;a<e;a++)this.outputPins.Output.setValue(a,rng.getRandomNumber()*b-b/2+f)}};VVVV.Nodes.RandomSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.SortSpreads=function(g,d){this.constructor(g,"Sort (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Output",
[0],VVVV.PinTypes.Value);this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=_(this.inputPins.Input.values).map(function(e,b){return[e,b]}),c=_(c).sortBy(function(e){return e[0]}),e=0;e<c.length;e++)this.outputPins.Output.setValue(e,c[e][0]),this.outputPins["Former Index"].setValue(e,c[e][1]);this.outputPins.Output.setSliceCount(c.length);this.outputPins["Former Index"].setSliceCount(c.length)}};VVVV.Nodes.SortSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearSpread=
function(g,d){this.constructor(g,"LinearSpread (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["phase does not work with Block alignment"]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Width",[1],VVVV.PinTypes.Value),f=this.addInputPin("Alignment",["Centered"],VVVV.PinTypes.Enum);f.enumOptions=["Centered","Block","LeftJustified","RightJustified"];var b=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),
a=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value),k=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0,h=0;h<d;h++){var n=parseInt(a.getValue(h)),l=e.getValue(h),p=b.getValue(h),t=c.getValue(h),v=f.getValue(h);""==v&&(v="Centered");var x=l/n;"Block"==v&&(x=l/(n-1));var w=x/2;if("Block"==v||"LeftJustified"==v)w=0;"RightJustified"==v&&(w=x);for(var y,u=0;u<n;u++)y=u*x+w,"Block"!=v&&0!=l&&(y=(y+p*l)%l),y=t-l/2+y,k.setValue(g,
y),g++}k.setSliceCount(g)}};VVVV.Nodes.LinearSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.AvoidNil=function(g,d){this.constructor(g,"AvoidNIL (Spreads)",d);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Default",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){if(c.pinIsChanged()||e.pinIsChanged()){var b=
c;0==c.getSliceCount()&&(b=e);for(var a=0;a<b.values.length;a++)f.setValue(a,b.getValue(a));f.setSliceCount(b.getSliceCount())}}};VVVV.Nodes.AvoidNil.prototype=new VVVV.Core.Node;VVVV.Nodes.SwapDim=function(g,d){this.constructor(g,"SwapDim (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["BinSize not implemented"]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Column Count",[0],VVVV.PinTypes.Value),
f=this.addInputPin("Row Count",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=parseInt(e.getValue(0)),k=parseInt(f.getValue(0)),d=a*k,g=0;g<d;g++)b.setValue(g%a*k+parseInt(g/a),c.getValue(g));b.setSliceCount(d)}};VVVV.Nodes.SwapDim.prototype=new VVVV.Core.Node;VVVV.Nodes.I=function(g,d){this.constructor(g,"I (Spreads)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:["Matthias Zauner, M\u00f3r\u00e1sz D\u00e1vid (micro.D)"],
compatibility_issues:[]};var c=this.addInputPin("[ From ..",[0],VVVV.PinTypes.Value),e=this.addInputPin(".. To [",[1],VVVV.PinTypes.Value),f=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),k=0,d=0;d<a;d++){var g=Math.round(c.getValue(d)),h=Math.round(e.getValue(d)),n=f.getValue(d),l=h-g,p=Math.abs(l);if(g<=h)for(h=0;h<p;h++,k++){var t=parseFloat(h)-p*n,t=Math.round(t)%l;0>t&&(t=
l+t);t+=g;b.setValue(k,t)}else for(h=p;0<h;h--,k++)t=parseFloat(h)-p*n,t=Math.round(t)%l,0>l&&(t*=-1),0>t&&(t=l-t),t+=g,b.setValue(k,t)}b.setSliceCount(k)}};VVVV.Nodes.I.prototype=new VVVV.Core.Node;VVVV.Nodes.CircularSpread=function(g,d){this.constructor(g,"CircularSpread (Spreads)",d);this.meta={authors:["Matija Miloslavich, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.xIn=this.addInputPin("Input X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Input Y",
[0],VVVV.PinTypes.Value);this.widthIn=this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.heightIn=this.addInputPin("Height",[1],VVVV.PinTypes.Value);this.factorIn=this.addInputPin("Factor",[1],VVVV.PinTypes.Value);this.phaseIn=this.addInputPin("Phase",[0],VVVV.PinTypes.Value);this.sprcntIn=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.xOut=this.addOutputPin("Output X",[0],VVVV.PinTypes.Value);this.yOut=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=
2*Math.PI,e=0,f=0;f<this.getMaxInputSliceCount();f++)for(var b=this.xIn.getValue(f),a=this.yIn.getValue(f),k=0.5*this.widthIn.getValue(f),d=0.5*this.heightIn.getValue(f),g=this.factorIn.getValue(f),h=this.phaseIn.getValue(f)*c,n=parseInt(this.sprcntIn.getValue(f)),l=0;l<n;l++){var p=h+c*(l/n)*g,t=b+Math.cos(p)*k,p=a+Math.sin(p)*d;this.xOut.setValue(e,t);this.yOut.setValue(e,p);e++}this.xOut.setSliceCount(e);this.yOut.setSliceCount(e)}};VVVV.Nodes.CircularSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.ReverseSpreads=
function(g,d){this.constructor(g,"Reverse (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=c.getSliceCount(),b=0;b<f;b++){var a=c.getValue(b);e.setValue(f-b-1,a)}e.setSliceCount(f)}};VVVV.Nodes.ReverseSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IntegralSpreads=
function(g,d){this.constructor(g,"Integral (Spreads)",d);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),f=this.addInputPin("Offset",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output Bin Size",[2],VVVV.PinTypes.Value);this.evaluate=function(){var k=
c.getSliceCount(),d=Math.max(e.getSliceCount(),f.getSliceCount()),g=0,h=0,n=[];if(0<d)for(;g<d||h<k;){var l=parseInt(e.getValue(g));0>l&&(l=parseInt(Math.round(k/parseFloat(Math.abs(l)))));h+=l;n[g]=l;g++}n.splice(g);for(h=d=k=0;h<g;h++){l=n[h];a.setValue(h,l+1);for(var p=f.getValue(h),t=0;t<l;t++)b.setValue(d,p),d++,p+=c.getValue(k+t);k+=l;b.setValue(d,p);d++}b.setSliceCount(d);a.setSliceCount(g)}};VVVV.Nodes.IntegralSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.DifferentialSpreads=function(g,
d){this.constructor(g,"Differential (Spreads)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output Bin Size",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Offset",[0],VVVV.PinTypes.Value);this.evaluate=function(){var k=c.getSliceCount(),
d=e.getSliceCount(),g=0,h=0,n=[];if(0<d)for(;g<d||h<k;){var l=parseInt(e.getValue(g));0>l&&(l=parseInt(Math.round(k/parseFloat(Math.abs(l)))));h+=l;n[g]=l;g++}n.splice(g);for(h=d=k=0;h<g;h++){var l=n[h]-1,p=c.getValue(k);b.setValue(h,l);a.setValue(h,p);for(var t=0;t<l;t++){var v=c.getValue(k+t+1);f.setValue(d,v-p);p=v;d++}k+=l+1}f.setSliceCount(d);b.setSliceCount(g);a.setSliceCount(g)}};VVVV.Nodes.DifferentialSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.ConsSpreads=function(g,d){this.constructor(g,
"Cons (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=[],e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();
for(var b=0,a=0;a<c.length;a++)for(var k=0;k<c[a].getSliceCount();k++)e.setValue(b++,c[a].getValue(k));e.setSliceCount(b)}};VVVV.Nodes.ConsSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IntervalSpreads=function(g,d){this.constructor(g,"Interval (Spreads)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0.5],VVVV.PinTypes.Value),e=this.addInputPin("Intervals",[0],VVVV.PinTypes.Value),
f=this.addOutputPin("Index",[0],VVVV.PinTypes.Value),b=0;this.evaluate=function(){var a=c.getSliceCount(),k=e.getSliceCount();if(e.pinIsChanged()){b=void 0;for(var d=0;d<k;d++)if(e.getValue(d)<b||void 0==b)b=e.getValue(d)}for(d=0;d<a;d++){var g=c.getValue(d);if(g<b)f.setValue(d,-1);else{for(var h=0;h<k-1&&!(g>=e.getValue(h)&&g<e.getValue(h+1));h++);f.setValue(d,h)}}f.setSliceCount(a)}};VVVV.Nodes.IntervalSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.QueueSpreads=function(g,d){this.constructor(g,
"Queue (Spreads)",d);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Insert",[0],VVVV.PinTypes.Value),f=this.addInputPin("Frame Count",[1],VVVV.PinTypes.Value),b=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[],VVVV.PinTypes.Value),k=this.addOutputPin("Output Bin Size",[],VVVV.PinTypes.Value),m=[],h=[];this.evaluate=function(){var d=
e.getValue(0),g=f.getValue(0),l=b.getValue(0),p=!1;if(0.5<=d&&0.5>l){d=c.getSliceCount();for(p=d-1;0<=p;p--)m.unshift(c.getValue(p));h.unshift(d);p=!0}if(f.pinIsChanged()||p){for(p=currFrameCount=h.length;p>g;p--)m.splice(-h[p-1]);h.splice(g);p=!0}if(p){for(p=0;p<m.length;p++)a.setValue(p,m[p]);for(p=0;p<h.length;p++)k.setValue(p,h[p]);a.setSliceCount(m.length);a.setSliceCount(h.length)}0.5<=l&&(m.length=0,h.length=0,a.setSliceCount(0),k.setSliceCount(0))}};VVVV.Nodes.QueueSpreads.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.IOBoxString=function(g,d){this.constructor(g,"IOBox (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addInputPin("SliceOffset",[0],VVVV.PinTypes.Value);this.addInputPin("Input String",[""],VVVV.PinTypes.String);this.addOutputPin("Output String",[""],VVVV.PinTypes.String);this.evaluate=function(){this.outputPins["Output String"].setSliceCount(this.inputPins["Input String"].getSliceCount());
for(var c=0;c<this.inputPins["Input String"].getSliceCount();c++)this.outputPins["Output String"].setValue(c,this.inputPins["Input String"].getValue(c))}};VVVV.Nodes.IOBoxString.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchStringInput=function(g,d){this.constructor(g,"Switch (String Input)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=this.addInputPin("Switch",[0],
VVVV.PinTypes.Value),f=[],b=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.initialize=function(){var a=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,f,a,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),k=0;k<a;k++)b.setValue(k,f[Math.round(Math.abs(e.getValue(k)))%f.length].getValue(k));b.setSliceCount(a)}};VVVV.Nodes.SwitchStringInput.prototype=
new VVVV.Core.Node;VVVV.Nodes.AddString=function(g,d){this.constructor(g,"Add (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet","Intersperse *Enum* not implemented"]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),b=this.addOutputPin("Output",["texttext"],VVVV.PinTypes.String);this.initialize=function(){var a=Math.max(2,
c.getValue(0));VVVV.Helpers.dynamicPins(this,e,a,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),k=0;k<a;k++){var d=[],g=f.getValue(k);void 0==g&&(g="");for(var h=0;h<e.length;h++)d.push(e[h].getValue(k));b.setValue(k,d.join(g))}b.setSliceCount(a)}};VVVV.Nodes.AddString.prototype=new VVVV.Core.Node;VVVV.Nodes.GetSliceString=function(g,d){this.constructor(g,"GetSlice (String)",
d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Bin Size not implemented"]};var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value);var e=this.addInputPin("Index",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){for(var b=0;b<e.values.length;b++)f.setValue(b,c.getValue(Math.round(e.getValue(b))));f.setSliceCount(e.getSliceCount())}};
VVVV.Nodes.GetSliceString.prototype=new VVVV.Core.Node;VVVV.Nodes.AsValue=function(g,d){this.constructor(g,"AsValue (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[],VVVV.PinTypes.String),e=this.addInputPin("Default",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var k=c.getValue(a);/^\s*-?[0-9.e]+\s*$/.test(k)?
f.setValue(a,k):f.setValue(a,e.getValue(a))}f.setSliceCount(b)}};VVVV.Nodes.AsValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SortString=function(g,d){this.constructor(g,"Sort (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Reverse Sorting",[0],VVVV.PinTypes.Value);var e=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),
f=this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var b=_(c.values).map(function(a,b){return[a,b]}),b=_(b).sortBy(function(a){return a[0]}),a=0;a<b.length;a++)e.setValue(a,b[a][0]),f.setValue(a,b[a][1]);e.setSliceCount(b.length);f.setSliceCount(b.length)}};VVVV.Nodes.SortString.prototype=new VVVV.Core.Node;VVVV.Nodes.LengthString=function(g,d){this.constructor(g,"Length (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),e=this.addOutputPin("Count",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),b=0;b<f;b++){var a=c.getValue(b);e.setValue(b,a.length)}e.setSliceCount(f)}};VVVV.Nodes.LengthString.prototype=new VVVV.Core.Node;VVVV.Nodes.SiftString=function(g,d){this.constructor(g,"Sift (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),e=this.addInputPin("Filter",["text"],VVVV.PinTypes.String),f=this.addInputPin("Comparison",["Matches"],VVVV.PinTypes.Enum);f.enumOptions=["Matches","Contains","MatchesAny","ContainsAny"];var b=this.addInputPin("Case Sensitive",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Input Index",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Filter Index",
[0],VVVV.PinTypes.Value),h=this.addOutputPin("Found At Position",[0],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();a.setSliceCount(d);var g=f.getValue(0);b.getValue(0);for(var l=0,p=0;p<d;p++){var t=c.getValue(p),v=1;if("MatchesAny"==g||"ContainsAny"==g)v=e.getSliceCount();for(var x=0,w=0;w<v;w++){var y=e.getValue(w+p),u=[];if("Matches"==g||"MatchesAny"==g)y==t&&u.push(-1);else for(var y=RegExp(y,"gi"),A;A=y.exec(t);)u.push(A.index);for(y=0;y<u.length;y++)k.setValue(l,
p%c.getSliceCount()),m.setValue(l,(p+w)%e.getSliceCount()),h.setValue(l,u[y]+1),l++,x++}a.setValue(p,x)}k.setSliceCount(l);m.setSliceCount(l);h.setSliceCount(l)}};VVVV.Nodes.SiftString.prototype=new VVVV.Core.Node;VVVV.Nodes.SeparateString=function(g,d){this.constructor(g,"Separate (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Quotes don't work"]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),
e=this.addInputPin("Intersperse",["None"],VVVV.PinTypes.Enum);e.enumOptions="None Space Comma CommaPlusSpace Semicolon Colon Pipe UnixPath DosPath Dash NewLineAutoDetection Dot UnderScore Minus".split(" ");var f=this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),b=this.addInputPin("Ignore between",["Double"],VVVV.PinTypes.Enum);b.enumOptions=["Single","Double"];var a=this.addInputPin("Keep Quotes",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),m=
this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value),h={None:"",Space:" ",Comma:",",CommaPlusSpace:", ",Semicolon:";",Colon:":",Pipe:"|",UnixPath:"/",DosPath:"\\",Dash:"-",NewLineAutoDetection:"\n",Dot:".",UnderScore:"_",Minus:"-"},s={Single:"'",Double:'"'};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0,p=0;p<d;p++){var t=c.getValue(p),v=h[e.getValue(p)],x=f.getValue(p),w=s[b.getValue(p)],y=a.getValue(p);""==v&&(v=x);""==v&&(v=void 0);t=t.split(v);v=t.length;w=RegExp("[^"+
w+"]*","g");for(x=0;x<v;x++)1==y?k.setValue(g,t[x]):k.setValue(g,t[x].match(w).join("")),m.setValue(g,p),g++}k.setSliceCount(g);m.setSliceCount(g)}};VVVV.Nodes.SeparateString.prototype=new VVVV.Core.Node;VVVV.Nodes.EQString=function(g,d){this.constructor(g,"EQ (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input 1",[""],VVVV.PinTypes.String),e=this.addInputPin("Input 2",[""],VVVV.PinTypes.String),
f=this.addInputPin("Case Sensitive",[1],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var k=this.getMaxInputSliceCount(),d=0;d<k;d++){var g=c.getValue(d),h=e.getValue(d),n=f.getValue(d),g=g==h||0==n&&g.toLowerCase()==h.toLowerCase()?1:0;b.setValue(d,g);a.setValue(d,1-g)}b.setSliceCount(k);a.setSliceCount(k)}};VVVV.Nodes.EQString.prototype=new VVVV.Core.Node;VVVV.Nodes.SelectString=
function(g,d){this.constructor(g,"Select (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[""],VVVV.PinTypes.String),e=this.addInputPin("Select",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[""],VVVV.PinTypes.String),b=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),k=0,d=0;d<a;d++)for(var g=0;g<e.getValue(d);g++)f.setValue(k,
c.getValue(d)),b.setValue(k,d),k++;f.setSliceCount(k);b.setSliceCount(k)}};VVVV.Nodes.SelectString.prototype=new VVVV.Core.Node;VVVV.Nodes.CountString=function(g,d){this.constructor(g,"Count (String)",d);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[""],VVVV.PinTypes.String);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&
(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountString.prototype=new VVVV.Core.Node;VVVV.Nodes.CleanString=function(g,d){this.constructor(g,"Clean (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),e=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);
this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),b=0;b<f;b++)c.getValue(b)?e.setValue(b,c.getValue(b).trim()):e.setValue(b,void 0);e.setSliceCount(f)}};VVVV.Nodes.CleanString.prototype=new VVVV.Core.Node;VVVV.Nodes.AvoidNilString=function(g,d){this.constructor(g,"AvoidNIL (String)",d);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),e=this.addInputPin("Default",
["text"],VVVV.PinTypes.String),f=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){if(c.pinIsChanged()||e.pinIsChanged()){var b=c;0==c.getSliceCount()&&(b=e);for(var a=0;a<b.values.length;a++)f.setValue(a,b.getValue(a));f.setSliceCount(b.getSliceCount())}}};VVVV.Nodes.AvoidNilString.prototype=new VVVV.Core.Node;VVVV.Nodes.FormatValueString=function(g,d){this.constructor(g,"FormatValue (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:["pad function: http://stackoverflow.com/a/10073788","thousands separator regex: http://stackoverflow.com/a/2901298"],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Characters before Comma",[1],VVVV.PinTypes.Value),f=this.addInputPin("Characters after Comma",[0],VVVV.PinTypes.Value),b=this.addInputPin("Thousands Symbol",["None"],VVVV.PinTypes.Enum);b.enumOptions=["None","Dot","Comma","Space"];var a=this.addInputPin("Comma Symbol",
["Dot"],VVVV.PinTypes.Enum);a.enumOptions=["Dot","Comma"];var k=this.addInputPin("Leading Zeroes",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Output",["0"],VVVV.PinTypes.String),h={Dot:".",Comma:",",None:"",Space:" "};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0;g<d;g++){var l=c.getValue(g),p=parseInt(e.getValue(g)),t=parseInt(f.getValue(g)),v=b.getValue(g),x=a.getValue(g),w=k.getValue(g),p=p+t+(0<t),l=l.toFixed(t),w=w=0.5<=w?"0":" ",l=l+"",l=l.length>=p?l:Array(p-l.length+
1).join(w)+l,l=l.replace(".",h[x]).replace(/\B(?=(\d{3})+(?!\d))/g,h[v]);m.setValue(g,l)}m.setSliceCount(d)}};VVVV.Nodes.FormatValueString.prototype=new VVVV.Core.Node;VVVV.Nodes.SampleAndHoldString=function(g,d){this.constructor(g,"S+H (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["different output slice count in pure VVVV, if Set pin has only one slice"]};var c=this.addInputPin("Input",[""],VVVV.PinTypes.String),e=this.addInputPin("Set",
[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[""],VVVV.PinTypes.String);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)void 0==f.values[a]&&f.setValue(a,0),0.5<=Math.round(e.getValue(a))&&f.setValue(a,c.getValue(a));f.setSliceCount(b)}};VVVV.Nodes.SampleAndHoldString.prototype=new VVVV.Core.Node;VVVV.Nodes.ConsString=function(g,d){this.constructor(g,"Cons (String)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};
this.auto_evaluate=!1;var c=[],e=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,b,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var b=0,a=0;a<c.length;a++)for(var k=0;k<c[a].getSliceCount();k++)e.setValue(b++,c[a].getValue(k));e.setSliceCount(b)}};
VVVV.Nodes.ConsString.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.MouseGlobal=function(g,d){function c(a){for(var b=a.originalEvent.changedTouches.length;b--;)s[a.originalEvent.changedTouches[b].identifier]=2*a.originalEvent.changedTouches[b].pageX/parseInt(h("body").css("width"))-1,n[a.originalEvent.changedTouches[b].identifier]=-(2*a.originalEvent.changedTouches[b].pageY/parseInt(h("body").css("height"))-1)}this.constructor(g,"Mouse (System Global)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported"]};
this.auto_evaluate=!0;var e=this.addInputPin("Maximum Touch Points",[1],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Left Button",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Middle Button",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value),s=[0],n=[0],l=[0],p=[0],t=[0],v=[0];h(document).mousemove(function(a){s[0]=
2*a.pageX/parseInt(h("body").css("width"))-1;n[0]=-(2*a.pageY/parseInt(h("body").css("height"))-1)});h(document).bind("mousewheel",function(a){l[0]+=a.originalEvent.wheelDelta/120});h(document).bind("DOMMouseScroll",function(a){l[0]+=-a.originalEvent.detail/3});h(document).mousedown(function(a){switch(a.which){case 1:p[0]=1;break;case 2:t[0]=1;break;case 3:v[0]=1}});h(document).mouseup(function(a){switch(a.which){case 1:p[0]=0;break;case 2:t[0]=0;break;case 3:v[0]=0}});h(document).bind("touchstart",
function(a){for(var b=a.originalEvent.changedTouches.length;b--;)p[a.originalEvent.changedTouches[b].identifier]=1;c(a)});h(document).bind("touchend",function(a){for(var b=a.originalEvent.changedTouches.length;b--;)p[a.originalEvent.changedTouches[b].identifier]=0});h(document).bind("touchmove",c);this.evaluate=function(){for(var c=Math.max(1,e.getValue(0)),d=c;d--;)f.setValue(d,s[d]||0),b.setValue(d,n[d]||0),a.setValue(d,l[d]||0),k.setValue(d,p[d]||0),m.setValue(d,t[d]||0),r.setValue(d,v[d]||0);
e.pinIsChanged()&&[f,b,a,k,m,r].forEach(function(a){a.setSliceCount(c)})}};VVVV.Nodes.MouseGlobal.prototype=new VVVV.Core.Node;VVVV.Nodes.MouseWindow=function(g,d){this.constructor(g,"Mouse (System Window)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var c=this.addInputPin("Maximum Touch Points",[1],
VVVV.PinTypes.Value),e=this.addOutputPin("X",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Left Button",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Middle Button",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=Math.max(1,c.getValue(0)),g=d;g--;)e.setValue(g,VVVV.MousePositions._all.x[g]||0),f.setValue(g,VVVV.MousePositions._all.y[g]||
0),b.setValue(g,VVVV.MousePositions._all.wheel[g]||0),a.setValue(g,VVVV.MousePositions._all.lb[g]||0),k.setValue(g,VVVV.MousePositions._all.mb[g]||0),m.setValue(g,VVVV.MousePositions._all.rb[g]||0);c.pinIsChanged()&&[e,f,b,a,k,m].forEach(function(a){a.setSliceCount(d)})}};VVVV.Nodes.MouseWindow.prototype=new VVVV.Core.Node;VVVV.Nodes.ShellExecute=function(g,d){this.constructor(g,"ShellExecute (Windows)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["This actually does something completely different from the original node: the origin node executes a shell command, this node evals javascript code"]};
var c=this.addInputPin("File",[0],VVVV.PinTypes.String),e=this.addInputPin("Do Execute",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Result",[""],VVVV.PinTypes.String);this.evaluate=function(){if(1<=Math.round(e.getValue(0))){var b=eval(c.getValue(0));b instanceof Array||b instanceof Object||(b=[b]);if(void 0!=b)for(var a=0;a<b.length;a++)f.setValue(a,b[a])}}};VVVV.Nodes.ShellExecute.prototype=new VVVV.Core.Node;VVVV.Nodes.ScreenInfo=function(g,d){this.constructor(g,"ScreenInfo (Windows)",d);this.meta=
{authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:["Outputs the window size (ResolutionXY) and the document size (Working AreaXY) only","no Bits per pixel"]};this.auto_evaluate=!0;var c=this.addOutputPin("ResolutionXY",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Working AreaXY",[0],VVVV.PinTypes.Value),f=0,b=0,a=0,k=0;h(document).ready(function(){b=h(window).innerHeight();f=h(window).innerWidth();k=h(document).height();
a=h(document).width()});h(window).resize(function(){b=h(window).innerHeight();f=h(window).innerWidth();k=h(document).height();a=h(document).width()});this.evaluate=function(){if(c.getValue(0)!=f||c.getValue(1)!=b)c.setValue(0,f),c.setValue(1,b);if(e.getValue(0)!=a||e.getValue(1)!=k)e.setValue(0,a),e.setValue(1,k)}};VVVV.Nodes.ScreenInfo.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.PinTypes.Transform={typeName:"Transform",reset_on_disconnect:!0,defaultValue:function(){return mat4.identity(mat4.create())}};VVVV.Nodes.Rotate=function(g,d){this.constructor(g,"Rotate (Transform)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);
this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=0;f<e;f++){var b=this.inputPins["Transform In"].getValue(f),a=this.inputPins.X.getValue(f),k=this.inputPins.Y.getValue(f),
d=this.inputPins.Z.getValue(f);mat4.rotate(b,2*k*Math.PI,[0,1,0],c[f]);mat4.rotate(c[f],2*a*Math.PI,[1,0,0]);mat4.rotate(c[f],2*d*Math.PI,[0,0,1]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.Rotate.prototype=new VVVV.Core.Node;VVVV.Nodes.Translate=function(g,d){this.constructor(g,"Translate (Transform)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);
this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=
0;f<e;f++){var b=this.xIn.getValue(f),a=this.yIn.getValue(f),k=this.zIn.getValue(f);mat4.translate(this.trIn.getValue(f),[b,a,k],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.Translate.prototype=new VVVV.Core.Node;VVVV.Nodes.Scale=function(g,d){this.constructor(g,"Scale (Transform)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);
this.xIn=this.addInputPin("X",[1],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[1],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=
0;f<e;f++){var b=this.inputPins.X.getValue(f),a=this.inputPins.Y.getValue(f),k=this.inputPins.Z.getValue(f);mat4.scale(this.trIn.getValue(f),[b,a,k],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.Scale.prototype=new VVVV.Core.Node;VVVV.Nodes.UniformScale=function(g,d){this.constructor(g,"UniformScale (Transform)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);
this.xyzIn=this.addInputPin("XYZ",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():this.xyzIn.getSliceCount();if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=0;f<e;f++){var b=this.inputPins.XYZ.getValue(f);mat4.scale(this.trIn.getValue(f),[b,b,b],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.UniformScale.prototype=
new VVVV.Core.Node;VVVV.Nodes.Trapeze=function(g,d){this.constructor(g,"Trapeze (Transform)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[],e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",
[],VVVV.PinTypes.Transform);this.evaluate=function(){var f=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(f>c.length)for(var b=c.length;b++<f;)c.push(mat4.create());else f<c.length&&(c.length=f);for(b=0;b<f;b++){var a=2*this.inputPins.X.getValue(b),k=2*this.inputPins.Y.getValue(b),d=2*this.inputPins.Z.getValue(b);e[3]=a;e[7]=k;e[11]=d;mat4.multiply(this.inputPins["Transform In"].getValue(b),e,c[b]);this.trOut.setValue(b,
c[b])}this.trOut.setSliceCount(f)}};VVVV.Nodes.Trapeze.prototype=new VVVV.Core.Node;VVVV.Nodes.Transform2d=function(g,d){this.constructor(g,"Transform (Transform 2d)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.txIn=this.addInputPin("TranslateX",[0],VVVV.PinTypes.Value);this.tyIn=this.addInputPin("TranslateY",[0],VVVV.PinTypes.Value);this.sxIn=this.addInputPin("ScaleX",
[1],VVVV.PinTypes.Value);this.syIn=this.addInputPin("ScaleY",[1],VVVV.PinTypes.Value);this.rIn=this.addInputPin("Rotate",[0],VVVV.PinTypes.Value);this.cxIn=this.addInputPin("CenterX",[0],VVVV.PinTypes.Value);this.cyIn=this.addInputPin("CenterY",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.getMaxInputSliceCount();if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=
0;f<e;f++){var b=this.inputPins.TranslateX.getValue(f),a=this.inputPins.TranslateY.getValue(f),k=this.inputPins.ScaleX.getValue(f),d=this.inputPins.ScaleY.getValue(f),g=this.inputPins.Rotate.getValue(f),h=this.inputPins.CenterX.getValue(f),n=this.inputPins.CenterY.getValue(f);mat4.translate(this.inputPins["Transform In"].getValue(f),[b,a,0],c[f]);mat4.rotate(c[f],2*g*Math.PI,[0,0,1]);mat4.scale(c[f],[k,d,1]);mat4.translate(c[f],[-h,-n,0]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};
VVVV.Nodes.Transform2d.prototype=new VVVV.Core.Node;VVVV.Nodes.AspectRatio=function(g,d){this.constructor(g,"AspectRatio (Transform)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.wIn=this.addInputPin("Aspect Width",[1],VVVV.PinTypes.Value);this.hIn=this.addInputPin("Aspect Height",[1],VVVV.PinTypes.Value);this.sIn=this.addInputPin("Uniform Scale",[1],VVVV.PinTypes.Value);
this.alignmentIn=this.addInputPin("Alignment",["FitIn"],VVVV.PinTypes.Enum);this.alignmentIn.enumOptions=["FitIn","FitWidth","FitHeight","FitOut"];this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.wIn.getSliceCount(),this.hIn.getSliceCount(),this.sIn.getSliceCount(),this.alignmentIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&
(c.length=e);for(f=0;f<e;f++){var b=this.inputPins["Aspect Width"].getValue(f),a=this.inputPins["Aspect Height"].getValue(f),d=this.inputPins["Uniform Scale"].getValue(f),g=d,h=d;switch(this.alignmentIn.getValue(f)){case "FitIn":b>a?h*=a/b:g*=b/a;break;case "FitWidth":h*=a/b;g*=a/b;break;case "FitHeight":g*=b/a;h*=b/a;break;case "FitOut":b<a?h*=a/b:g*=b/a}mat4.scale(this.inputPins["Transform In"].getValue(f),[g,h,d],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.AspectRatio.prototype=
new VVVV.Core.Node;VVVV.Nodes.Perspective=function(g,d){this.constructor(g,"Perspective (Transform)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable"]};mat4.identity(mat4.create());this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.addInputPin("FOV",[0.25],VVVV.PinTypes.Value);this.addInputPin("Near Plane",[0.05],VVVV.PinTypes.Value);this.addInputPin("Far Plane",[100],VVVV.PinTypes.Value);this.addOutputPin("Transform Out",
[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=this.inputPins.FOV.getValue(0),e=this.inputPins["Near Plane"].getValue(0),f=this.inputPins["Far Plane"].getValue(0),b=mat4.create();mat4.identity(b);mat4.perspective(360*c,1,e,f,b);this.inputPins["Transform In"].isConnected()&&(c=this.inputPins["Transform In"].getValue(0),mat4.multiply(c,b,b));this.outputPins["Transform Out"].setValue(0,b)}};VVVV.Nodes.Perspective.prototype=new VVVV.Core.Node;VVVV.Nodes.InverseTransform=function(g,d){this.constructor(g,
"Inverse (Transform)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[],e=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),f=this.addInputPin("Source",[],VVVV.PinTypes.Transform),b=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var a=this.getMaxInputSliceCount();if(a>c.length)for(var d=c.length;d++<a;)c.push(mat4.create());else a<c.length&&(c.length=a);for(d=0;d<a;d++)mat4.set(f.getValue(d),
c[d]),mat4.multiply(e.getValue(d),mat4.inverse(c[d],c[d]),c[d]),b.setValue(d,c[d]);b.setSliceCount(a)}};VVVV.Nodes.InverseTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.LookAtTransformVector=function(g,d){this.constructor(g,"LookAt (Transform Vector)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),e=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),
f=this.addInputPin("LookAt XYZ",[0,0,1],VVVV.PinTypes.Value),b=this.addInputPin("UpVector XYZ",[0,1,0],VVVV.PinTypes.Value),a=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform),k=mat4.create();mat4.identity(k);mat4.scale(k,[-1,1,-1]);var m=[];this.evaluate=function(){var d=Math.max(c.getSliceCount(),Math.max(e.getSliceCount()/3,Math.max(f.getSliceCount()/3,b.getSliceCount()/3))),d=Math.ceil(d);if(d>m.length)for(var g=m.length;g++<d;)m.push(mat4.create());else d<m.length&&(m.length=d);for(g=
0;g<d;g++){var h=e.getValue(g,3),l=f.getValue(g,3),p=b.getValue(g,3);mat4.lookAt(h,l,p,m[g]);mat4.multiply(k,m[g],m[g]);c.isConnected()&&mat4.multiply(c.getValue(g),m[g],m[g]);a.setValue(g,m[g])}a.setSliceCount(d)}};VVVV.Nodes.LookAtTransformVector.prototype=new VVVV.Core.Node;VVVV.Nodes.LookAtTransform=function(g,d){this.constructor(g,"LookAt (Transform)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform In",
[],VVVV.PinTypes.Transform),e=this.addInputPin("Position X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Position Y",[0],VVVV.PinTypes.Value),b=this.addInputPin("Position Z",[0],VVVV.PinTypes.Value),a=this.addInputPin("LookAt X",[0],VVVV.PinTypes.Value),k=this.addInputPin("LookAt Y",[0],VVVV.PinTypes.Value),m=this.addInputPin("LookAt Z",[1],VVVV.PinTypes.Value),h=this.addInputPin("UpVector X",[0],VVVV.PinTypes.Value),s=this.addInputPin("UpVector Y",[1],VVVV.PinTypes.Value),n=this.addInputPin("UpVector Z",
[0],VVVV.PinTypes.Value),l=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform),p=mat4.create();mat4.identity(p);mat4.scale(p,[-1,1,-1]);var t=[],v=vec3.create(),x=vec3.create(),w=vec3.create();this.evaluate=function(){var d=this.getMaxInputSliceCount();if(d>t.length)for(var g=t.length;g++<d;)t.push(mat4.create());else d<t.length&&(t.length=d);for(g=0;g<d;g++)v[0]=e.getValue(g),v[1]=f.getValue(g),v[2]=b.getValue(g),x[0]=a.getValue(g),x[1]=k.getValue(g),x[2]=m.getValue(g),w[0]=h.getValue(g),
w[1]=s.getValue(g),w[2]=n.getValue(g),mat4.lookAt(v,x,w,t[g]),mat4.multiply(p,t[g],t[g]),c.isConnected()&&mat4.multiply(c.getValue(g),t[g],t[g]),l.setValue(g,t[g]);l.setSliceCount(d)}};VVVV.Nodes.LookAtTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.MultiplyTransform=function(g,d){this.constructor(g,"Multiply (Transform)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[],e=2;this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);
var f=this.addInvisiblePin("Transform In Count",[2],VVVV.PinTypes.Value),b=[];this.initialize=function(){e=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,b,e,function(a){return this.addInputPin("Transform In "+(a+1),[],VVVV.PinTypes.Transform)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();var a=this.getMaxInputSliceCount();if(a>c.length)for(var d=c.length;d++<a;)c.push(mat4.create());else a<c.length&&(c.length=a);for(d=0;d<a;d++){mat4.identity(c[d]);for(var g=e-1;0<=g;g--)if(b[g].isConnected()){var h=
b[g].getValue(d);mat4.multiply(c[d],h,c[d])}this.trOut.setValue(d,c[d])}this.trOut.setSliceCount(a)}};VVVV.Nodes.MultiplyTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.ApplyTransform=function(g,d){this.constructor(g,"ApplyTransform (Transform)",d);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),e=this.addInputPin("X UnTransformed",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y UnTransformed",
[0],VVVV.PinTypes.Value),b=this.addInputPin("Z UnTransformed",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X Transformed",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Y Transformed",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Z Transformed",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0;g<d;g++){var h=c.getValue(g),l=[];l[0]=e.getValue(g);l[1]=f.getValue(g);l[2]=b.getValue(g);mat4.multiplyVec3(h,l);a.setValue(g,l[0]);k.setValue(g,l[1]);m.setValue(g,
l[2])}a.setSliceCount(d);k.setSliceCount(d);m.setSliceCount(d)}};VVVV.Nodes.ApplyTransform.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.AddValue=function(g,d){this.constructor(g,"Add (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){c.pinIsChanged()&&this.initialize();var b=this.getMaxInputSliceCount();f.setSliceCount(b);for(var a=0;a<b;a++){for(var d=e[0].getValue(a),g=1;g<e.length;g++)d+=e[g].getValue(a);f.setValue(a,d)}};this.getCode=function(){c.pinIsChanged()&&this.initialize();for(var b=[],a=0;a<e.length;a++)b.push("{Input "+(a+1)+"}");return b.join(" + ")}};VVVV.Nodes.AddValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SubtractValue=function(g,d){this.constructor(g,"Subtract (Value)",d);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();var b=this.getMaxInputSliceCount();f.setSliceCount(b);for(var a=0;a<b;a++){for(var d=
e[0].getValue(a),g=1;g<e.length;g++)d-=e[g].getValue(a);f.setValue(a,d)}};this.getCode=function(){c.pinIsChanged()&&this.initialize();for(var b=[],a=0;a<e.length;a++)b.push("{Input "+(a+1)+"}");return b.join(" - ")}};VVVV.Nodes.SubtractValue.prototype=new VVVV.Core.Node;VVVV.Nodes.EqValue=function(g,d){this.constructor(g,"EQ (Value)",d);this.meta={authors:["Matthias Zauner","Fibo"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),
e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0;g<d;g++){var h=0;Math.abs(c.getValue(g)-e.getValue(g))<=Math.abs(f.getValue(g))&&(h=1);b.setValue(g,h);a.setValue(g,1-h)}b.setSliceCount(d);a.setSliceCount(d)}};VVVV.Nodes.EqValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.GtValue=function(g,d){this.constructor(g,"GT (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var c=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var d=0;c.getValue(a)>e.getValue(a)&&(d=1);f.setValue(a,d)}f.setSliceCount(b)};
this.getCode=function(){return"{Input 1} > {Input 2} ? 1 : 0"}};VVVV.Nodes.GtValue.prototype=new VVVV.Core.Node;VVVV.Nodes.LtValue=function(g,d){this.constructor(g,"LT (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var c=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=
this.getMaxInputSliceCount(),a=0;a<b;a++){var d=0;c.getValue(a)<e.getValue(a)&&(d=1);f.setValue(a,d)}f.setSliceCount(b)};this.getCode=function(){return"{Input 1} < {Input 2} ? 1 : 0"}};VVVV.Nodes.LtValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MultiplyValue=function(g,d){this.constructor(g,"Multiply (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",
[0],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,b,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();var b=this.getMaxInputSliceCount();f.setSliceCount(b);for(var a=0;a<b;a++){for(var d=e[0].getValue(a),g=1;g<e.length;g++)d*=e[g].getValue(a);f.setValue(a,d)}};this.getCode=function(){c.pinIsChanged()&&this.initialize();for(var b=[],a=0;a<e.length;a++)b.push("{Input "+
(a+1)+"}");return b.join(" * ")}};VVVV.Nodes.MultiplyValue.prototype=new VVVV.Core.Node;VVVV.Nodes.DivideValue=function(g,d){this.constructor(g,"Divide (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Inputs Count",[2],VVVV.PinTypes.Value);var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=
function(){};this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)0==e.getValue(a)?f.setValue(a,1):f.setValue(a,c.getValue(a)/e.getValue(a));f.setSliceCount(b)};this.getCode=function(){return"{Input} / {Input 2}"}};VVVV.Nodes.DivideValue.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxValueAdvanced=function(g,d){this.constructor(g,"IOBox (Value Advanced)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Y Input Value",
[0],VVVV.PinTypes.Value);this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addOutputPin("Y Output Value",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.inputPins["Y Input Value"].getSliceCount(),e,f=0;f<c;f++)e=parseFloat(this.inputPins["Y Input Value"].getValue(f)),isFinite(e)||(e=0),this.outputPins["Y Output Value"].setValue(f,e);this.outputPins["Y Output Value"].setSliceCount(this.inputPins["Y Input Value"].getSliceCount())}};VVVV.Nodes.IOBoxValueAdvanced.prototype=new VVVV.Core.Node;
VVVV.Nodes.CountValue=function(g,d){this.constructor(g,"Count (Value)",d);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,
this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchValueInput=function(g,d){this.constructor(g,"Switch (Value Input)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),f=[];this.initialize=function(){var a=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,
f,a,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};var b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),d=0;d<a;d++)b.setValue(d,f[Math.round(Math.abs(e.getValue(d)))%f.length].getValue(d));b.setSliceCount(a)}};VVVV.Nodes.SwitchValueInput.prototype=new VVVV.Core.Node;VVVV.Nodes.SelectValue=function(g,d){this.constructor(g,"Select (Value)",d);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Select",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),d=0,g=0;g<a;g++)for(var h=0;h<e.getValue(g);h++)f.setValue(d,c.getValue(g)),b.setValue(d,g),d++;f.setSliceCount(d);b.setSliceCount(d)}};VVVV.Nodes.SelectValue.prototype=
new VVVV.Core.Node;VVVV.Nodes.AsString=function(g,d){this.constructor(g,"AsString (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["SubType not implemented, always returns float formatting"]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("SubType",["Real (MinFloat .. MaxFloat)"],VVVV.PinTypes.Enum);e.enumOptions=["Real (MinFloat .. MaxFloat)","Integer (MinInt .. MaxInt)"];var f=this.addOutputPin("Output",
[0],VVVV.PinTypes.String);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){subtype=e.getValue(a).match(/^(.+) \(/)[1];var d;switch(subtype){case "Real":d=c.getValue(a).toFixed(4);break;case "Integer":d=c.getValue(a).toFixed(0)}f.setValue(a,d)}f.setSliceCount(b)}};VVVV.Nodes.AsString.prototype=new VVVV.Core.Node;VVVV.Nodes.Frac=function(g,d){this.constructor(g,"Frac (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};
var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Whole Part",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Real Part",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var d=c.getValue(a);e.setValue(a,Math.floor(d));f.setValue(a,d-Math.floor(d))}e.setSliceCount(b);f.setSliceCount(b)}};VVVV.Nodes.Frac.prototype=new VVVV.Core.Node;VVVV.Nodes.AddValueSpectral=function(g,d){this.constructor(g,"Add (Value Spectral)",d);this.meta=
{authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),e=0,f=0,b=0;b<c||0<this.inputPins["Bin Size"].getValue(0)&&(0<f||0!=e%this.inputPins["Bin Size"].getSliceCount());b++){if(0==f)var a=0;a+=this.inputPins.Input.getValue(b);
f++;0<this.inputPins["Bin Size"].getValue(0)?f>=this.inputPins["Bin Size"].getValue(e)&&(this.outputPins.Output.setValue(e,a),e++,f=0):this.outputPins.Output.setValue(0,a)}this.outputPins.Output.setSliceCount(e+(0<f))}};VVVV.Nodes.AddValueSpectral.prototype=new VVVV.Core.Node;VVVV.Nodes.WaveShaperValue=function(g,d){this.constructor(g,"WaveShaper (Value)",d);this.meta={authors:["sebl"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",
[0],VVVV.PinTypes.Value),e=this.addInputPin("Shape",["Linear"],VVVV.PinTypes.Enum);e.enumOptions=["Linear","Inverse","Triangle","Sine","Rectangle"];var f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var d=c.getValue(a);switch(e.getValue(a)){case "Linear":f.setValue(a,d);break;case "Inverse":f.setValue(a,1-d);break;case "Triangle":0.5>d?f.setValue(a,2*d):f.setValue(a,2*(1-d));break;case "Sine":inp=
6.28318530717959*((d+0.25)%1);f.setValue(a,Math.sin(inp)/2+0.5);break;case "Rectangle":0.5>d?f.setValue(a,0):f.setValue(a,1)}}f.setSliceCount(b)}};VVVV.Nodes.WaveShaperValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MapValue=function(g,d){this.constructor(g,"Map (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Mirror Mapping Mode not implemented"]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0.5],VVVV.PinTypes.Value),e=this.addInputPin("Source Minimum",
[0],VVVV.PinTypes.Value),f=this.addInputPin("Source Maximum",[1],VVVV.PinTypes.Value),b=this.addInputPin("Destination Minimum",[0],VVVV.PinTypes.Value),a=this.addInputPin("Destination Maximum",[1],VVVV.PinTypes.Value),k=this.addInputPin("Mapping",["Float"],VVVV.PinTypes.Enum);k.enumOptions=["Float","Wrap","Clamp"];var m=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0;g<d;g++){var h=c.getValue(g),l=e.getValue(g),p=f.getValue(g),
t=b.getValue(g),v=a.getValue(g),x=k.getValue(g);if(p==l)m.setValue(g,t);else{h-=l;p-=l;switch(x){case "Clamp":h=Math.max(0,Math.min(p,h));break;case "Wrap":h=(p+h%p)%p}m.setValue(g,h*((v-t)/p)+t)}}m.setSliceCount(d)}};VVVV.Nodes.MapValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MinValue=function(g,d){this.constructor(g,"Min (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addOutputPin("Output",[0],
VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var b=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var d=void 0,g=0;g<f.length;g++)if(void 0==d||f[g].getValue(a)<d)d=f[g].getValue(a);c.setValue(a,d)}c.setSliceCount(b)}};VVVV.Nodes.MinValue.prototype=
new VVVV.Core.Node;VVVV.Nodes.MaxValue=function(g,d){this.constructor(g,"Max (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var b=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};
this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var d=void 0,g=0;g<f.length;g++)if(void 0==d||f[g].getValue(a)>d)d=f[g].getValue(a);c.setValue(a,d)}c.setSliceCount(b)}};VVVV.Nodes.MaxValue.prototype=new VVVV.Core.Node;VVVV.Nodes.ModValue=function(g,d){this.constructor(g,"Mod (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addOutputPin("Output",
[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var b=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var d=f[0].getValue(a),g=1;g<f.length;g++)d=0==f[g].getValue(a)?0:d%f[g].getValue(a);c.setValue(a,d)}c.setSliceCount(b)}};
VVVV.Nodes.ModValue.prototype=new VVVV.Core.Node;VVVV.Nodes.PowerValue=function(g,d){this.constructor(g,"Power (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var b=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,b,function(a){return this.addInputPin("Input "+
(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var d=f[0].getValue(a),g=1;g<f.length;g++)d=Math.pow(d,f[g].getValue(a));c.setValue(a,d)}c.setSliceCount(b)}};VVVV.Nodes.PowerValue.prototype=new VVVV.Core.Node;VVVV.Nodes.RandomValue=function(g,d){this.constructor(g,"Random (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!0;var c=this.addInputPin("Enabled",[1],VVVV.PinTypes.Value),e=this.addInputPin("Is Integer",[0],VVVV.PinTypes.Value),f=this.addInputPin("Scale",[1],VVVV.PinTypes.Value),b=this.addInputPin("Prevent from doubles",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),g=0;g<d;g++){var h=c.getValue(g),s=e.getValue(g),n=f.getValue(g),l=b.getValue(g),p=a.getValue(g);void 0==p&&a.setValue(g,0);if(0.5<=h){p=a.getValue(g);
do h=Math.random()*n,0.5<=s&&(h=Math.round(h));while(0.5<=l&&h==p);a.setValue(g,h)}}a.setSliceCount(d)}};VVVV.Nodes.RandomValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SignValue=function(g,d){this.constructor(g,"Sign (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Sign Part",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Absolute Part",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var d=c.getValue(a);e.setValue(a,0==d?0:d/Math.abs(d));f.setValue(a,Math.abs(d))}f.setSliceCount(b)}};VVVV.Nodes.SignValue.prototype=new VVVV.Core.Node;VVVV.Nodes.InputMorphValue=function(g,d){this.constructor(g,"InputMorph (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Switch",[0],
VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),b=[];this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,b,a,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),d,g,h,s=0;s<a;s++)d=c.getValue(s),g=((Math.floor(d)+b.length)%b.length+b.length)%b.length,
h=((Math.ceil(d)+b.length)%b.length+b.length)%b.length,d-=Math.floor(d),e.setValue(s,(1-d)*b[g].getValue(s)+d*b[h].getValue(s));e.setSliceCount(a)}};VVVV.Nodes.InputMorphValue.prototype=new VVVV.Core.Node;VVVV.Nodes.Sift=function(g,d){this.constructor(g,"Sift (Value)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Filter",[0],VVVV.PinTypes.Value),
f=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),b=this.addInputPin("Find",["First"],VVVV.PinTypes.Enum);b.enumOptions=["First","Last","All"];var a=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Input Index",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Filter Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.getMaxInputSliceCount();var d=c.getSliceCount(),g=e.getSliceCount();a.setSliceCount(d);f.getValue(0);for(var h=b.getValue(0),l={},p=0,t=0;t<d;t++){var v=
t;"Last"==h&&(v=d-t-1);var x=c.getValue(v);if("All"!=h){if(l[x]){a.setValue(v,0);continue}l[x]=!0}for(var w=0,y=0;y<g;y++)if(filter=e.getValue(y),filter==x){k.setValue(p,v);m.setValue(p,y);p++;w++;break}a.setValue(v,w)}k.setSliceCount(p);m.setSliceCount(p)}};VVVV.Nodes.Sift.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){function g(){function d(a){return 0<a?parseInt(a):parseInt(a-1)}function c(a,b,e,f,d){return a[0]*b+a[1]*e+a[2]*f+a[3]*d}var e=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,1]],f=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],
[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],b=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,
18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,
128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,
202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],a=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,
0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],
[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]];this.noise2d=function(a,f){var c,g,h;h=0.5*(Math.sqrt(3)-1);h*=a+f;var l=d(a+h),p=d(f+h),t=(3-Math.sqrt(3))/6;h=(l+p)*t;c=a-(l-h);var v=f-(p-h),x,w;c>v?(x=1,w=0):(x=0,w=1);g=c-x+t;var y=v-w+t;h=c-1+2*t;var t=v-1+2*t,u=l&255,p=p&255,l=b[u+b[p]]%12;x=b[u+x+b[p+w]]%12;w=b[u+1+b[p+1]]%12;p=0.5-c*c-v*v;0>p?c=0:(p*=p,c=p*p*(e[l][0]*c+e[l][1]*v));v=0.5-g*g-y*y;0>v?g=0:(v*=v,g=v*v*(e[x][0]*g+e[x][1]*y));y=0.5-h*h-t*t;0>y?h=0:
(y*=y,h=y*y*(e[w][0]*h+e[w][1]*t));return 70*(c+g+h)};this.noise3d=function(a,f,c){var g,h,l,p=(a+f+c)*(1/3),t=d(a+p),v=d(f+p),x=d(c+p),p=1/6;l=(t+v+x)*p;g=a-(t-l);h=f-(v-l);var w=c-(x-l),y,u,A,q,z,B;g>=h?h>=w?(y=1,A=u=0,z=q=1,B=0):(g>=w?(y=1,A=u=0):(u=y=0,A=1),q=1,z=0,B=1):h<w?(u=y=0,A=1,q=0,B=z=1):g<w?(y=0,u=1,q=A=0,B=z=1):(y=0,u=1,A=0,z=q=1,B=0);var D=g-y+p,C=h-u+p,F=w-A+p;l=g-q+2*p;a=h-z+2*p;var J=w-B+2*p;c=g-1+3*p;f=h-1+3*p;var p=w-1+3*p,t=t&255,H=v&255,M=x&255,v=b[t+b[H+b[M]]]%12,x=b[t+y+b[H+
u+b[M+A]]]%12;q=b[t+q+b[H+z+b[M+B]]]%12;t=b[t+1+b[H+1+b[M+1]]]%12;z=0.6-g*g-h*h-w*w;0>z?g=0:(z*=z,g=z*z*(e[v][0]*g+e[v][1]*h+e[v][2]*w));h=0.6-D*D-C*C-F*F;0>h?h=0:(h*=h,h=h*h*(e[x][0]*D+e[x][1]*C+e[x][2]*F));D=0.6-l*l-a*a-J*J;0>D?l=0:(D*=D,l=D*D*(e[q][0]*l+e[q][1]*a+e[q][2]*J));a=0.6-c*c-f*f-p*p;0>a?c=0:(a*=a,c=a*a*(e[t][0]*c+e[t][1]*f+e[t][2]*p));return 32*(g+h+l+c)};this.noise4d=function(e,g,h,s){var n=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20,p,t,v,n=(e+g+h+s)*n,x=d(e+n),w=d(g+n),y=d(h+n),u=d(s+
n),n=(x+w+y+u)*l;p=e-(x-n);t=g-(w-n);var A=h-(y-n),q=s-(u-n);s=(p>t?32:0)+(p>A?16:0)+(t>A?8:0)+(p>q?4:0)+(t>q?2:0)+(A>q?1:0);var z,B,D,C,F,J,H,M,G,L,E,I;z=3<=a[s][0]?1:0;B=3<=a[s][1]?1:0;D=3<=a[s][2]?1:0;C=3<=a[s][3]?1:0;F=2<=a[s][0]?1:0;J=2<=a[s][1]?1:0;H=2<=a[s][2]?1:0;M=2<=a[s][3]?1:0;G=1<=a[s][0]?1:0;L=1<=a[s][1]?1:0;E=1<=a[s][2]?1:0;I=1<=a[s][3]?1:0;var O=p-z+l,P=t-B+l,Q=A-D+l,R=q-C+l;v=p-F+2*l;var K=t-J+2*l,S=A-H+2*l,T=q-M+2*l,n=p-G+3*l;e=t-L+3*l;var U=A-E+3*l,V=q-I+3*l;s=p-1+4*l;h=t-1+4*l;
g=A-1+4*l;var l=q-1+4*l,x=x&255,w=w&255,N=y&255,u=u&255,y=b[x+b[w+b[N+b[u]]]]%32;z=b[x+z+b[w+B+b[N+D+b[u+C]]]]%32;F=b[x+F+b[w+J+b[N+H+b[u+M]]]]%32;G=b[x+G+b[w+L+b[N+E+b[u+I]]]]%32;u=b[x+1+b[w+1+b[N+1+b[u+1]]]]%32;w=0.6-p*p-t*t-A*A-q*q;0>w?p=0:(w*=w,p=w*w*c(f[y],p,t,A,q));t=0.6-O*O-P*P-Q*Q-R*R;0>t?t=0:(t*=t,t=t*t*c(f[z],O,P,Q,R));A=0.6-v*v-K*K-S*S-T*T;0>A?v=0:(A*=A,v=A*A*c(f[F],v,K,S,T));K=0.6-n*n-e*e-U*U-V*V;0>K?n=0:(K*=K,n=K*K*c(f[G],n,e,U,V));e=0.6-s*s-h*h-g*g-l*l;0>e?s=0:(e*=e,s=e*e*c(f[u],s,h,
g,l));return 27*(p+t+v+n+s)}}VVVV.Nodes.Join2dVector=function(d,c){this.constructor(d,"Vector (2d Join)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),b=this.addOutputPin("XY",[0,0],VVVV.PinTypes.Value);this.evaluate=function(){var a=this.getMaxInputSliceCount();b.setSliceCount(2*a);for(var d=0;d<a;d++)b.setValue(2*d,e.getValue(d)),b.setValue(2*
d+1,f.getValue(d))}};VVVV.Nodes.Join2dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Join3dVector=function(d,c){this.constructor(d,"Vector (3d Join)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),b=this.addInputPin("Z",[0],VVVV.PinTypes.Value),a=this.addOutputPin("XYZ",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();
a.setSliceCount(3*d);for(var c=0;c<d;c++)a.setValue(3*c,e.getValue(c)),a.setValue(3*c+1,f.getValue(c)),a.setValue(3*c+2,b.getValue(c))}};VVVV.Nodes.Join3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Join4dVector=function(d,c){this.constructor(d,"Vector (4d Join)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),b=this.addInputPin("Z",[0],
VVVV.PinTypes.Value),a=this.addInputPin("W",[0],VVVV.PinTypes.Value),g=this.addOutputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();g.setSliceCount(4*d);for(var c=0;c<d;c++)g.setValue(4*c,e.getValue(c)),g.setValue(4*c+1,f.getValue(c)),g.setValue(4*c+2,b.getValue(c)),g.setValue(4*c+3,a.getValue(c))}};VVVV.Nodes.Join4dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split2dVector=function(d,c){this.constructor(d,"Vector (2d Split)",c);this.meta={authors:["Julien Vulliet"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("XY",[0],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0,d=0;d<a;d+=2)f.setValue(c,e.getValue(d)),b.setValue(c,e.getValue(d+1)),c++;f.setSliceCount(c);b.setSliceCount(c)}};VVVV.Nodes.Split2dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split3dVector=function(d,c){this.constructor(d,
"Vector (3d Split)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("XYZ",[0],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Z",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),d=0,g=0;g<c;g+=3)f.setValue(d,e.getValue(g)),b.setValue(d,e.getValue(g+1)),a.setValue(d,e.getValue(g+2)),
d++;f.setSliceCount(d);b.setSliceCount(d);a.setSliceCount(d)}};VVVV.Nodes.Split3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split4dVector=function(d,c){this.constructor(d,"Vector (4d Split)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Z",[0],VVVV.PinTypes.Value),
g=this.addOutputPin("W",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),d=0,h=0;h<c;h+=4)f.setValue(d,e.getValue(h)),b.setValue(d,e.getValue(h+1)),a.setValue(d,e.getValue(h+2)),g.setValue(d,e.getValue(h+3)),d++;f.setSliceCount(d);b.setSliceCount(d);a.setSliceCount(d);g.setSliceCount(d)}};VVVV.Nodes.Split4dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Simplex2d=function(d,c){this.constructor(d,"Simplex (2d)",c);this.meta={authors:["woei"],original_authors:["tonfilm"],
credits:[],compatibility_issues:[]};var e=this.addInputPin("Position Input XY",[0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),b=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),k=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=new g;this.evaluate=function(){for(var d=Math.ceil(Math.max(0.5*e.getSliceCount())),c=parseInt(f.getValue(0)),g=b.getValue(0),l=a.getValue(0),p=0;p<d;p++){for(var t=
e.getValue(2*p),v=e.getValue(2*p+1),x=0,w=0;w<=c;w++)var y=Math.pow(g,w),x=x+h.noise2d(t*y,v*y)*Math.pow(l,w);k.setValue(p,x)}k.setSliceCount(d)}};VVVV.Nodes.Simplex2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Simplex3d=function(d,c){this.constructor(d,"Simplex (3d)",c);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Position Input XYZ",[0.5,0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),b=this.addInputPin("Frequency",
[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),k=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=new g;this.evaluate=function(){for(var d=Math.ceil(Math.max(e.getSliceCount()/3)),c=parseInt(f.getValue(0)),g=b.getValue(0),l=a.getValue(0),p=0;p<d;p++){for(var t=e.getValue(3*p),v=e.getValue(3*p+1),x=e.getValue(3*p+2),w=0,y=0;y<=c;y++)var u=Math.pow(g,y),w=w+h.noise3d(t*u,v*u,x*u)*Math.pow(l,y);k.setValue(p,w)}k.setSliceCount(d)}};VVVV.Nodes.Simplex3d.prototype=
new VVVV.Core.Node;VVVV.Nodes.Simplex4d=function(d,c){this.constructor(d,"Simplex (4d)",c);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Position Input XYZW",[0.5,0.5,0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),b=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),k=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=new g;this.evaluate=
function(){for(var d=Math.ceil(Math.max(e.getSliceCount()/3)),c=parseInt(f.getValue(0)),g=b.getValue(0),l=a.getValue(0),p=0;p<d;p++){for(var t=e.getValue(4*p),v=e.getValue(4*p+1),x=e.getValue(4*p+2),w=e.getValue(4*p+3),y=0,u=0;u<=c;u++)var A=Math.pow(g,u),y=y+h.noise4d(t*A,v*A,x*A,w*A)*Math.pow(l,u);k.setValue(p,y)}k.setSliceCount(d)}};VVVV.Nodes.Simplex4d.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.ShaderCodeResources={};VVVV.Types.ShaderCodeResource=function(){var d="";this.relatedNodes=[];this.definingNode=void 0;this.setSourceCode=function(c){d=c;for(c=0;c<this.relatedNodes.length;c++)this.relatedNodes[c].shaderSourceUpdated(d)};this.addRelatedNode=function(c){this.relatedNodes.push(c);""!=d&&c.shaderSourceUpdated(d)}};mat4.identity(mat4.create());VVVV.Types.WebGlRenderState=function(){this.alphaBlending=!0;this.srcBlendMode="SRC_ALPHA";this.destBlendMode="ONE_MINUS_SRC_ALPHA";
this.enableZWrite=!0;this.depthFunc="LEQUAL";this.depthOffset=0;this.cullFace=void 0;this.polygonDrawMode="TRIANGLES";this.copy_attributes=function(d){this.alphaBlending=d.alphaBlending;this.alphaFunc=d.alphaFunc;this.srcBlendMode=d.srcBlendMode;this.destBlendMode=d.destBlendMode;this.enableZwrite=d.enableZWrite;this.depthFunc=d.depthFunc;this.depthOffset=d.depthOffset;this.cullFace=d.cullFace;this.polygonDrawMode=d.polygonDrawMode};this.apply=function(d){this.alphaBlending?d.enable(d.BLEND):d.disable(d.BLEND);
d.blendFunc(d[this.srcBlendMode],d[this.destBlendMode]);void 0!==this.cullFace?(d.enable(d.CULL_FACE),d.frontFace(d[this.cullFace]),d.cullFace(d.BACK)):d.disable(d.CULL_FACE);d.depthMask(this.enableZWrite)}};VVVV.Types.VertexBuffer=function(d,c){this.vbo=void 0;this.subBuffers={};this.length=0;this.setSubBuffer=function(e,f,b){this.subBuffers[e]={usage:e,data:new Float32Array(b),size:f,offset:this.length};this.length+=this.subBuffers[e].data.byteLength};this.updateSubBuffer=function(e,f){this.subBuffers[e].data=
new Float32Array(f)};this.create=function(){this.vbo=d.createBuffer()};this.update=function(){d.bindBuffer(d.ARRAY_BUFFER,this.vbo);d.bufferData(d.ARRAY_BUFFER,this.length,d.DYNAMIC_DRAW);_(this.subBuffers).each(function(e){d.bufferSubData(d.ARRAY_BUFFER,e.offset,e.data)})}};VVVV.Types.Mesh=function(d,c,e){this.vertexBuffer=c;this.indexBuffer=d.createBuffer();this.update=function(e){d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.indexBuffer);d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),d.DYNAMIC_DRAW);
this.numIndices=e.length}};VVVV.Types.Layer=function(){this.mesh=null;this.textures=[];this.shader=null;this.uniforms={};this.uniformNames=[];this.renderState=g;this.toString=function(){return"Layer"}};VVVV.PinTypes.WebGlResource={typeName:"WebGlResource",reset_on_disconnect:!0,connectionChangedHandlers:{webglresource:function(){function d(b){return"WebGlResource"==b||"WebGlTexture"==b}if(this.direction!=VVVV.PinDirection.Input){var c=this.node,e=c.findDownstreamNodes("Renderer (EX9)");c.renderContexts||
(c.renderContexts=[]);void 0==c.contextChanged&&(c.contextChanged=!1);for(var f=0;f<e.length;f++)c.contextChanged|=!c.renderContexts[f]||c.renderContexts[f].canvas.id!=e[f].ctxt.id,c.renderContexts[f]=e[f].ctxt,c.dirty=!0;c.renderContexts.length!=e.length&&(c.renderContexts.length=e.length,c.contextChanged=!0,c.dirty=!0);c.isSubpatch||_(c.inputPins).each(function(b){var a;b.markPinAsChanged();"Renderer (EX9)"!=c.nodename&&b.isConnected()&&(0<b.links.length?a=b.links[0].fromPin:0<b.masterPin.links[0].fromPin.links.length&&
(a=b.masterPin.links[0].fromPin),a&&d(a.typeName)&&a.connectionChanged())});this.masterPin&&d(this.masterPin.typeName)&&this.masterPin.connectionChanged()}}},defaultValue:function(){return new VVVV.Types.Layer}};VVVV.PinTypes.WebGlTexture={typeName:"WebGlTexture",reset_on_disconnect:!0,connectionChangedHandlers:{webglresource:VVVV.PinTypes.WebGlResource.connectionChangedHandlers.webglresource},defaultValue:function(){return VVVV.DefaultTexture}};var g=new VVVV.Types.WebGlRenderState;VVVV.PinTypes.WebGlRenderState=
{typeName:"WebGlRenderState",reset_on_disconnect:!0,defaultValue:function(){return g}};VVVV.DefaultTexture="Empty Texture";VVVV.Types.ShaderProgram=function(){this.uniformSpecs={};this.attributeSpecs={};this.attribSemanticMap={};this.uniformSemanticMap={};var d="",c="",e,f;this.isSetup=!1;this.shaderProgram=void 0;this.log="";var b=this;this.extractSemantics=function(a){b.attributeSpecs={};b.attribSemanticMap={};b.uniformSpecs={};b.uniformSemanticMap={};for(var e=/(uniform|attribute) ([a-zA-Z]+)([0-9xD]*) ([a-zA-Z0-9_]+)( : ([A-Z0-9]+))?( = \{?([^;\}]+)\}?)?;/g,
f;f=e.exec(a);)"attribute"!=f[1]||b.attributeSpecs[f[4]]?"uniform"!=f[1]||b.uniformSpecs[f[4]]||(b.uniformSpecs[f[4]]={varname:f[4],semantic:f[6],position:0,type:f[2],defaultValue:f[8],dimension:""==f[3]?1:f[3]},void 0!=f[6]&&(b.uniformSemanticMap[f[6]]=f[4])):(b.attributeSpecs[f[4]]={varname:f[4],semantic:f[6],position:0},void 0!=f[6]&&(b.attribSemanticMap[f[6]]=f[4]))};this.setVertexShader=function(a){d=a};this.setFragmentShader=function(a){c=a};this.setup=function(a){this.log="";e=a.createShader(a.VERTEX_SHADER);
a.shaderSource(e,d.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));a.compileShader(e);a.getShaderParameter(e,a.COMPILE_STATUS)||(this.log=a.getShaderInfoLog(e),console.log(this.log));f=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(f,c.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));a.compileShader(f);a.getShaderParameter(f,a.COMPILE_STATUS)||(this.log=a.getShaderInfoLog(f),console.log(this.log));this.shaderProgram=a.createProgram();a.attachShader(this.shaderProgram,
e);a.attachShader(this.shaderProgram,f);a.linkProgram(this.shaderProgram);a.getProgramParameter(this.shaderProgram,a.LINK_STATUS)||console.log("Could not initialise shaders");_(this.attributeSpecs).each(function(e){e.position=a.getAttribLocation(b.shaderProgram,e.varname)});_(this.uniformSpecs).each(function(e){e.position=a.getUniformLocation(b.shaderProgram,e.varname)});this.isSetup=!0;return""==this.log}};VVVV.Nodes.FileTexture=function(d,c){this.constructor(d,"FileTexture (EX9.Texture)",c);this.auto_nil=
!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Always loads in background","No reload pin","No preload pin (preloading handled by browser)","No up and running pin","No texture info outputs"]};this.auto_evaluate=!1;var e=this.addInputPin("Filename",[""],VVVV.PinTypes.String),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),b=this.addInvisiblePin("Type",["Texture"],VVVV.PinTypes.Enum);b.enumOptions=["Texture","Cube Texture"];
var a=[];this.evaluate=function(){if(this.renderContexts){var d=this.renderContexts[0];if(d){if(this.contextChanged){for(var c=0;c<a.length;c++)a[c].context.deleteTexture(a[c]);a=[]}if(e.pinIsChanged()||b.pinIsChanged()||this.contextChanged){for(var g=b.getValue(0),s=this.getMaxInputSliceCount(),c=0;c<s;c++){var n=VVVV.Helpers.prepareFilePath(e.getValue(c),this.parentPatch);0===n.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(n=VVVV.ImageProxyPrefix+encodeURI(n));a[c]=d.createTexture();a[c].context=
d;"Texture"==g?(a[c].image=new Image,a[c].image.onload=function(b){return function(){d.bindTexture(d.TEXTURE_CUBE_MAP,null);d.bindTexture(d.TEXTURE_2D,a[b]);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a[b].image);d.generateMipmap(d.TEXTURE_2D);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_NEAREST);d.bindTexture(d.TEXTURE_2D,null);f.setValue(b,a[b])}}(c),a[c].image.src=n):"Cube Texture"==g&&(a[c].image=new Image,
a[c].image.onload=function(b){return function(){var e=[{face:d.TEXTURE_CUBE_MAP_POSITIVE_X,offset:[2,1]},{face:d.TEXTURE_CUBE_MAP_NEGATIVE_X,offset:[0,1]},{face:d.TEXTURE_CUBE_MAP_POSITIVE_Y,offset:[1,0]},{face:d.TEXTURE_CUBE_MAP_NEGATIVE_Y,offset:[1,2]},{face:d.TEXTURE_CUBE_MAP_POSITIVE_Z,offset:[1,1]},{face:d.TEXTURE_CUBE_MAP_NEGATIVE_Z,offset:[3,1]}];d.bindTexture(d.TEXTURE_CUBE_MAP,a[b]);var c=h('<canvas style="display:none" width="'+this.width/4+'" height="'+this.height/3+'"></canvas>');h("body").append(c);
for(var g=c.get(0).getContext("2d"),m=0;6>m;m++)g.save(),g.translate(-this.width/4*e[m].offset[0],-this.height/3*e[m].offset[1]),g.drawImage(this,0,0),d.texImage2D(e[m].face,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,c.get(0)),d.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_MIN_FILTER,d.NEAREST),g.restore();d.bindTexture(d.TEXTURE_CUBE_MAP,null);c.remove();f.setValue(b,a[b])}}(c),a[c].image.src=n);f.setValue(c,VVVV.defaultTexture)}f.setSliceCount(s)}this.contextChanged=
!1}}};this.destroy=function(){for(var b=0;b<a.length;b++)a[b].context.deleteTexture(a[b])}};VVVV.Nodes.FileTexture.prototype=new VVVV.Core.Node;VVVV.Nodes.DX9Texture=function(d,c){this.constructor(d,"DX9Texture (EX9.Texture)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Using WebGL renderer as source doesnt work correctly in Chrome."]};var e=this.addInputPin("Source",[],VVVV.PinTypes.WebGlResource),f=this.addOutputPin("Texture Out",
[],VVVV.PinTypes.WebGlTexture),b;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){this.contextChanged&&b&&(b.context.deleteTexture(b),b=void 0);if(e.isConnected()){var d=e.getValue(0);if(!d)return;0==(d.width&d.width-1)&&0==(d.height&d.height-1)||console.log("Warning: Source renderer's width/height is not a power of 2. DX9Texture will most likely not work.");d instanceof WebGLTexture?f.setValue(0,d):(void 0==b&&(b=a.createTexture(),b.context=a),a.bindTexture(a.TEXTURE_2D,
b),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.bindTexture(a.TEXTURE_2D,null),f.setValue(0,b))}else delete b,a.deleteTexture(b),f.setValue(0,void 0);this.contextChanged=!1}}};this.destroy=function(){b&&b.context.deleteTexture(b)}};VVVV.Nodes.DX9Texture.prototype=new VVVV.Core.Node;VVVV.Nodes.VideoTexture=function(d,c){this.constructor(d,"VideoTexture (EX9.Texture VMR9)",
c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Only supports power-of-2 sized videos","Has no output pins for meta data"]};var e=this.addInputPin("Video",[],this),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),b;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a)if(e.isConnected()){var d=e.getValue(0);0==(d.videoWidth&d.videoWidth-1)&&0==(d.videoHeight&d.videoHeight-1)||
console.log("Warning: Video width/height is not a power of 2. VideoTexture will most likely not work.");if(void 0==b||this.contextChanged)b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.bindTexture(a.TEXTURE_2D,null);f.setValue(0,b);this.contextChanged=!1}else delete b,a.deleteTexture(b),f.setValue(0,void 0)}}};VVVV.Nodes.VideoTexture.prototype=
new VVVV.Core.Node;VVVV.Nodes.VertexBufferJoin=function(d,c){this.constructor(d,"VertexBuffer (EX9.Geometry Join)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),f=this.addInputPin("Normal XYZ",[0,0,0],VVVV.PinTypes.Value),b=this.addInputPin("Texture Coordinate 0 XY",[0,0],VVVV.PinTypes.Value),a=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),g=this.addOutputPin("Vertex Buffer",
[],VVVV.PinTypes.WebGlResource),h=null,r=[],s=[],n=[],l;this.evaluate=function(){var d=this.renderContexts[0];if(d&&0.5<=a.getValue(0)){l=this.getMaxInputSliceCount();for(var c=0;c<l;c++)r[c]=e.getValue(c),s[c]=b.getValue(c),n[c]=f.getValue(c);r.length=s.length=n.length=l;h||(h=new VVVV.Types.VertexBuffer(d,r),h.create());h.setSubBuffer("POSITION",3,r);h.setSubBuffer("TEXCOORD0",2,s);h.setSubBuffer("NORMAL",3,n);h.update();g.setValue(0,h)}}};VVVV.Nodes.VertexBufferJoin.prototype=new VVVV.Core.Node;
VVVV.Nodes.MeshJoin=function(d,c){this.constructor(d,"Mesh (EX9.Geometry Join)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Vertex Buffer",[],VVVV.PinTypes.WebGlResource),f=this.addInputPin("Indices",[0],VVVV.PinTypes.Value),b=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),g=null;this.evaluate=function(){var d=this.renderContexts[0];
d&&(0.5<=b.getValue(0)&&(e.isConnected()?(g||(g=new VVVV.Types.Mesh(d,e.getValue(0),f.values)),(f.pinIsChanged()||this.contextChanged)&&g.update(f.values),(f.pinIsChanged()||e.pinIsChanged()||this.contextChanged)&&a.setValue(0,g)):(a.setValue(0,void 0),delete g)),this.contextChanged=!1)}};VVVV.Nodes.MeshJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.Grid=function(d,c){this.constructor(d,"Grid (EX9.Geometry)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};var e=this.addInputPin("Resolution X",[2],VVVV.PinTypes.Value),f=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value),b=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),a=null;this.evaluate=function(){if(this.renderContexts){var d=this.renderContexts[0];if(d){for(var c=parseInt(e.getValue(0)),g=parseInt(f.getValue(0)),h=[],n=[],l=[],p=0,t=0;t<g;t++)for(var v=0;v<c;v++)h.push(parseFloat(v)/(c-1)-0.5),h.push(0.5-parseFloat(t)/(g-1)),h.push(0),p++,n.push(0),
n.push(0),n.push(1),l.push(parseFloat(v)/(c-1)),l.push(parseFloat(t)/(g-1));p=new VVVV.Types.VertexBuffer(d,h);p.create();p.setSubBuffer("POSITION",3,h);p.setSubBuffer("TEXCOORD0",2,l);p.setSubBuffer("NORMAL",3,n);p.update();h=[];for(t=0;t<g-1;t++)for(v=0;v<c-1;v++)n=v+c*t,h.push(n),h.push(n+1),h.push(n+c+1),h.push(n+c+1),h.push(n+c),h.push(n);a=new VVVV.Types.Mesh(d,p,h);a.update(h);b.setValue(0,a)}}}};VVVV.Nodes.Grid.prototype=new VVVV.Core.Node;VVVV.Nodes.Sphere=function(d,c){this.constructor(d,
"Sphere (EX9.Geometry)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Radius",[0.5],VVVV.PinTypes.Value),f=this.addInputPin("Resolution X",[15],VVVV.PinTypes.Value),b=this.addInputPin("Resolution Y",[15],VVVV.PinTypes.Value),a=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),g=null;this.evaluate=function(){if(this.renderContexts){var d=this.renderContexts[0];if(d){for(var c=parseInt(f.getValue(0)),
h=parseInt(b.getValue(0)),n=e.getValue(0),l=[],p=[],t=[],v=0;v<h+1;v++)for(var x=Math.cos(-parseFloat(v)/h*Math.PI),w=0;w<c;w++){var y=Math.cos(2*(parseFloat(w)/c)*Math.PI)*Math.cos(Math.asin(x)),u=Math.sin(2*(parseFloat(w)/c)*Math.PI)*Math.cos(Math.asin(x));l.push(y*n);l.push(x*n);l.push(u*n);p.push(y);p.push(x);p.push(u);t.push(parseFloat(w)/c);t.push(parseFloat(v)/h)}n=new VVVV.Types.VertexBuffer(d,l);n.create();n.setSubBuffer("POSITION",3,l);n.setSubBuffer("TEXCOORD0",2,t);n.setSubBuffer("NORMAL",
3,p);n.update();l=[];for(v=0;v<h;v++)for(w=0;w<c;w++)p=c*v,t=w+p,l.push(t),l.push((t+1)%c+p),l.push((t+1)%c+c+p),l.push((t+1)%c+c+p),l.push(t+c),l.push(t);g=new VVVV.Types.Mesh(d,n,l);g.update(l);a.setValue(0,g)}}}};VVVV.Nodes.Sphere.prototype=new VVVV.Core.Node;VVVV.Nodes.Cylinder=function(d,c){this.constructor(d,"Cylinder (EX9.Geometry)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Radius 1",
[0.5],VVVV.PinTypes.Value),f=this.addInputPin("Radius 2",[0.5],VVVV.PinTypes.Value),b=this.addInputPin("Length",[1],VVVV.PinTypes.Value),a=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),g=this.addInputPin("Caps",[1],VVVV.PinTypes.Value),h=this.addInputPin("Resolution X",[15],VVVV.PinTypes.Value),r=this.addInputPin("Resolution Y",[1],VVVV.PinTypes.Value),s=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),n=null;this.evaluate=function(){if(this.renderContexts){var d=this.renderContexts[0];
if(d){var c=parseInt(h.getValue(0)),t=parseInt(r.getValue(0)),v=e.getValue(0),x=f.getValue(0),w=b.getValue(0),y=a.getValue(0),u=[],A=[],q=[];u.push(0);u.push(w/2);u.push(0);A.push(0);A.push(1);A.push(0);q.push(0);q.push(0);u.push(0);u.push(-w/2);u.push(0);A.push(0);A.push(-1);A.push(0);q.push(0);q.push(0);for(var z=0;z<t+1;z++)for(var B=parseFloat(z)/t,D=(B-0.5)*-w,C=0;C<c+1;C++){var F=Math.cos(2*(parseFloat(C)/c)*Math.PI*y-Math.PI*y-Math.PI/2),J=Math.sin(2*(parseFloat(C)/c)*Math.PI*y-Math.PI*y-Math.PI/
2),H=B*x+(1-B)*v;u.push(F*H);u.push(D);u.push(J*H);A.push(F);A.push(0);A.push(J);q.push(parseFloat(C)/c);q.push(parseFloat(z)/t)}v=new VVVV.Types.VertexBuffer(d,u);v.create();v.setSubBuffer("POSITION",3,u);v.setSubBuffer("TEXCOORD0",2,q);v.setSubBuffer("NORMAL",3,A);v.update();u=[];if(0.5<g.getValue(0))for(B=0;2>B;B++)for(C=0;C<c;C++)u.push(B),u.push(2+C+B+B*t*(c+1)),u.push(2+C+(1-B)+B*t*(c+1));for(z=0;z<t;z++)for(C=0;C<c;C++)B=C+(c+1)*z+2,u.push(B),u.push(B+1),u.push(B+c+2),u.push(B+c+2),u.push(B+
c+1),u.push(B);n=new VVVV.Types.Mesh(d,v,u);n.update(u);s.setValue(0,n)}}}};VVVV.Nodes.Cylinder.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendWebGLAdvanced=function(d,c){function e(a){switch(a){case "One":return"ONE";case "Zero":return"ZERO";case "SrcAlpha":return"SRC_ALPHA";case "InvSrcAlpha":return"ONE_MINUS_SRC_ALPHA";case "DestAlpha":return"DST_ALPHA";case "InvDestAlpha":return"ONE_MINUS_DST_ALPHA";case "SrcColor":return"SRC_COLOR";case "InvSrcColor":return"ONE_MINUS_SRC_COLOR";case "DestColor":return"DST_COLOR";
case "InvDestColor":return"ONE_MINUS_DST_COLOR"}return null}this.constructor(d,"Blend (EX9.RenderState Advanced)",c);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),b=this.addInputPin("Alpha Blending",[1],VVVV.PinTypes.Value),a=this.addInputPin("Source Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum),g=this.addInputPin("Destination Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum);
a.enumOptions=g.enumOptions="One Zero SrcAlpha InvSrcAlpha DestAlpha InvDestAlpha SrcColor InvSrcColor DestColor InvDestColor".split(" ");var h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),r=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==r[c]&&(r[c]=new VVVV.Types.WebGlRenderState),r[c].copy_attributes(f.getValue(c)),r[c].alphaBlending=0.5<b.getValue(c),r[c].srcBlendMode=e(a.getValue(c)),r[c].destBlendMode=e(g.getValue(c)),h.setValue(c,
r[c]);h.setSliceCount(d)}};VVVV.Nodes.BlendWebGLAdvanced.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendWebGL=function(d,c){this.constructor(d,"Blend (EX9.RenderState)",c);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Draw Mode",["Blend"],VVVV.PinTypes.Enum);f.enumOptions=["Add","Blend","ColorAsAlphaAdd","ColorAsAlphaBlend","Multiply"];var b=
this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){void 0==a[c]&&(a[c]=new VVVV.Types.WebGlRenderState);a[c].copy_attributes(e.getValue(c));switch(f.getValue(c)){case "Add":a[c].srcBlendMode="SRC_ALPHA";a[c].destBlendMode="ONE";break;case "Blend":a[c].srcBlendMode="SRC_ALPHA";a[c].destBlendMode="ONE_MINUS_SRC_ALPHA";break;case "ColorAsAlphaAdd":a[c].srcBlendMode="SRC_COLOR";a[c].destBlendMode="ONE";
break;case "ColorAsAlphaBlend":a[c].srcBlendMode="SRC_COLOR";a[c].destBlendMode="ONE_MINUS_SRC_COLOR";break;case "Multiply":a[c].srcBlendMode="ZERO",a[c].destBlendMode="SRC_COLOR"}b.setValue(c,a[c])}b.setSliceCount(d)}};VVVV.Nodes.BlendWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.FillWebGL=function(d,c){this.constructor(d,"Fill (EX9.RenderState)",c);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["does not actually draw wireframe, because this is not supported in WebGL, but makes renderer use gl.LINE instead of gl.TRIANGLES when drawing"]};
var e=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Fill Mode",["Solid"],VVVV.PinTypes.Enum);f.enumOptions=["Point","Solid","WireFrame"];var b=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),d=0;d<c;d++){void 0==a[d]&&(a[d]=new VVVV.Types.WebGlRenderState);a[d].copy_attributes(e.getValue(d));switch(f.getValue(d)){case "Point":a[d].polygonDrawMode="POINTS";break;
case "Solid":a[d].polygonDrawMode="TRIANGLES";break;case "WireFrame":a[d].polygonDrawMode="LINES"}b.setValue(d,a[d])}b.setSliceCount(c)}};VVVV.Nodes.FillWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.ZWriteEnableWebGL=function(d,c){function e(a){switch(a){case "Never":return"NEVER";case "Less":return"LESS";case "LessEqual":return"LEQUAL";case "Equal":return"EQUAL";case "NotEqual":return"NOTEQUAL";case "Greater":return"GREATER";case "GreaterEqual":return"GEQUAL";case "Always":return"ALWAYS"}return null}
this.constructor(d,"ZWriteEnable (EX9.RenderState)",c);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),b=this.addInputPin("ZWrite Enable",[1],VVVV.PinTypes.Value),a=this.addInputPin("Compare Function",["Always"],VVVV.PinTypes.Enum);a.enumOptions="Never Less LessEqual Equal NotEqual Greater GreaterEqual Always".split(" ");var g=this.addInputPin("Depth Bias",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),r=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==r[c]&&(r[c]=new VVVV.Types.WebGlRenderState),r[c].copy_attributes(f.getValue(c)),r[c].enableZWrite=0.5<b.getValue(c),r[c].depthFunc=e(a.getValue(c)),r[c].depthOffset=g.getValue(0),h.setValue(c,r[c]);h.setSliceCount(d)}};VVVV.Nodes.ZWriteEnableWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.CullWebGL=function(d,c){this.constructor(d,"Cull (EX9.RenderState)",
c);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Culling",["None"],VVVV.PinTypes.Enum);f.enumOptions=["None","Clockwise","Counterclockwise"];var b=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),d=0;d<c;d++)void 0==a[d]&&(a[d]=new VVVV.Types.WebGlRenderState),
a[d].copy_attributes(e.getValue(d)),"Clockwise"==f.getValue(d)?a[d].cullFace="CW":"Counterclockwise"==f.getValue(d)?a[d].cullFace="CCW":a[d].cullFace=void 0,b.setValue(d,a[d]);b.setSliceCount(c)}};VVVV.Nodes.CullWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.GenericShader=function(d,c){this.constructor(d,"GenericShader (EX9.Effect)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.shaderFile="";var e=this.addInputPin("Render State",
[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Mesh",[],VVVV.PinTypes.WebGlResource),b=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Technique",[""],VVVV.PinTypes.Enum);a.enumOptions=[""];this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var g=[],m=null,r,s=!1,n=[],l=this;this.initialize=function(){var a=["Render State","Mesh","Transform","Technique"];_(l.inputPins).each(function(b){0>a.indexOf(b.pinname)&&(b.unvalidated=!0,n.push(b))});void 0==VVVV.ShaderCodeResources[l.shaderFile]?
(VVVV.ShaderCodeResources[l.shaderFile]=new VVVV.Types.ShaderCodeResource,VVVV.ShaderCodeResources[l.shaderFile].addRelatedNode(l),h.ajax({url:VVVV.Helpers.prepareFilePath(l.shaderFile,l.parentPatch),async:!1,dataType:"text",success:function(a){VVVV.ShaderCodeResources[l.shaderFile].setSourceCode(a)},error:function(){console.log("ERROR: Could not load shader file "+l.shaderFile.replace("%VVVV%",VVVV.Root));VVVV.onNotImplemented("Could not load shader file "+l.shaderFile.replace("%VVVV%",VVVV.Root))}})):
VVVV.ShaderCodeResources[l.shaderFile].addRelatedNode(l)};this.shaderSourceUpdated=function(a){r=a;m||(m=new VVVV.Types.ShaderProgram);l.addUniformPins();l.setupShader();_(l.inputPins).each(function(a){a.markPinAsChanged()});s=!0;m.isSetup=!1;this.parentPatch.afterUpdate()};this.addUniformPins=function(){m.extractSemantics(r);for(var a=[],b=0;b<n.length;b++)m.uniformSpecs[n[b].pinname.replace(/ /g,"_")]||(l.removeInputPin(n[b].pinname),a.push(b));for(b=0;b<a.length;b++)n.splice(a[b],1);_(m.uniformSpecs).each(function(a){if("VIEW"!=
a.semantic&&"PROJECTION"!=a.semantic&&"WORLD"!=a.semantic&&"VIEWPROJECTION"!=a.semantic&&"WORLDVIEW"!=a.semantic&&"WORLDVIEWPROJECTION"!=a.semantic){var b=VVVV.PinTypes.Value,e=[];switch(a.type){case "mat":b=VVVV.PinTypes.Transform;break;case "samplerCube":case "sampler":b=VVVV.PinTypes.WebGlTexture;break;default:"COLOR"==a.semantic?(b=VVVV.PinTypes.Color,e=[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")]):e=[0],a.defaultValue&&(e="COLOR"!=a.semantic?_(a.defaultValue.split(",")).map(function(a){return parseFloat(a)}):
[new VVVV.Types.Color(a.defaultValue)])}for(var f=0;f<n.length;f++)if(n[f].pinname==a.varname.replace(/_/g," ")){n[f].dimensions=a.dimension;n[f].unvalidated&&!n[f].isConnected()&&(n[f].values="Color"==b.typeName?l.defaultPinValues[n[f].pinname]?_(l.defaultPinValues[n[f].pinname]).map(function(a){return new VVVV.Types.Color(a)}):e:l.defaultPinValues[n[f].pinname]?l.defaultPinValues[n[f].pinname].slice():e);n[f].typeName!=b.typeName&&(a=n[f].values.slice(),e=n[f].getSliceCount(),n[f].setType(b),n[f].unvalidated&&
(b.primitive&&!n[f].isConnected())&&(n[f].values=a,n[f].setSliceCount(e)),n[f].isConnected()&&!n[f].unvalidated&&(n[f].connectionChanged(),n[f].links[0].destroy()));n[f].unvalidated=!1;return}b=l.addInputPin(a.varname.replace(/_/g," "),e,b);b.dimensions=a.dimension;n.push(b)}})};this.setupShader=function(){var b=a.getValue(0),b=b.replace(/^\s*/,"").replace(/\s*$/,""),f=RegExp(/(vertex_shader|fragment_shader)\{([^\}]+)\}/g);a.enumOptions=[];for(var e;null!=(e=f.exec(r));)a.enumOptions=a.enumOptions.concat(e[2].replace(/\s/g,
"").split(","));a.enumOptions=a.enumOptions.filter(function(a,b,e){return e.indexOf(a)===b});0==a.enumOptions.length&&a.enumOptions.push("");if(""==b||0>a.enumOptions.indexOf(b))b=a.enumOptions[0],a.setValue(0,b);var d=RegExp("vertex_shader(\\{([a-zA-Z0-9]+,\\s*)*"+b+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)"),f=RegExp("fragment_shader(\\{([a-zA-Z0-9]+,\\s*)*"+b+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)");e=/STARTOFSTRING((\r?\n|.)*?)(vertex_shader|fragment_shader)/.exec("STARTOFSTRING"+
r);var c=e[1];void 0==(e=d.exec(r+"\nfragment_shader"))?console.log("ERROR: No vertex shader code for technique "+b+" found"):(d=e[4],void 0==(e=f.exec(r+"\nfragment_shader"))?console.log("ERROR: No fragment shader code for technique "+b+" found"):(m.setFragmentShader(c+e[4]),m.setVertexShader(c+d)))};this.evaluate=function(){if(this.renderContexts){var d=this.renderContexts[0];if(d&&m){if(!m.isSetup||this.contextChanged||a.pinIsChanged())this.setupShader(),m.setup(d)?VVVV.ShaderCodeResources[l.shaderFile].definingNode&&
VVVV.ShaderCodeResources[l.shaderFile].definingNode.showStatus("success","Successfully compiled"):VVVV.ShaderCodeResources[l.shaderFile].definingNode&&VVVV.ShaderCodeResources[l.shaderFile].definingNode.showStatus("error",m.log);var c=0;_(this.inputPins).each(function(a){var b=a.getSliceCount();a=a.pinname.replace(/ /g,"_");m.uniformSpecs[a]&&("vec"==m.uniformSpecs[a].type&&"COLOR"!=m.uniformSpecs[a].semantic)&&(b=parseInt(b/m.uniformSpecs[a].dimension));b>c&&(c=b)});f.isConnected()&&void 0!=f.getValue(0)||
(c=0);var h=g.length;if(this.contextChanged||s)h=0;c<h&&g.splice(c,h-c);for(var r=h;r<c;r++)g[r]=new VVVV.Types.Layer,g[r].mesh=f.getValue(0),g[r].shader=m,_(m.uniformSpecs).each(function(a){g[r].uniformNames.push(a.varname);g[r].uniforms[a.varname]={uniformSpec:a,value:void 0}});if(f.pinIsChanged())for(r=0;r<c;r++)g[r].mesh=f.getValue(0);for(r=0;r<c;r++)g[r].shader=m;for(d=0;d<n.length;d++){var w=n[d].pinname.replace(/ /g,"_");if(n[d].pinIsChanged()||h<c)for(r=0;r<c;r++)if("vec"==m.uniformSpecs[w].type)if("COLOR"==
m.uniformSpecs[w].semantic)g[r].uniforms[w].value=n[d].getValue(r).rgba;else{var y=n[d].getValue(r,n[d].dimensions);g[r].uniforms[w].value=new Float32Array(y)}else y=n[d].getValue(r),g[r].uniforms[w].value=y}if(e.pinIsChanged()||h<c)for(d=0;d<c;d++)e.isConnected()?g[d].renderState=e.getValue(d):g[d].renderState=VVVV.DefaultRenderState;if(b.pinIsChanged()||h<c)for(d=0;d<c;d++)h=this.inputPins.Transform.getValue(d),g[d].uniforms[g[d].shader.uniformSemanticMap.WORLD].value=h;this.outputPins.Layer.setSliceCount(c);
for(d=0;d<c;d++)this.outputPins.Layer.setValue(d,g[d]);s=this.contextChanged=!1}}};this.openUIWindow=function(){VVVV.ShaderCodeResources[l.shaderFile].definingNode&&VVVV.ShaderCodeResources[l.shaderFile].definingNode.openUIWindow()}};VVVV.Nodes.GenericShader.prototype=new VVVV.Core.Node;VVVV.Nodes.Quad=function(d,c){this.constructor(d,"Quad (DX9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No Sampler States","No texture coord mapping",
"No enable pin","Transprent pixels are discarded by default"]};this.auto_evaluate=!1;var e=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",[],VVVV.PinTypes.WebGlTexture);this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",[],VVVV.PinTypes.Color);this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var f=[],b=null,a=null;this.evaluate=function(){if(this.renderContexts){var d=
this.renderContexts[0];if(d){if(this.contextChanged){var c=[0.5,0.5,0,-0.5,0.5,0,0.5,-0.5,0,-0.5,-0.5,0],g=new VVVV.Types.VertexBuffer(d,c);g.create();g.setSubBuffer("POSITION",3,c);g.setSubBuffer("TEXCOORD0",2,[1,0,0,0,1,1,0,1]);g.update();b=new VVVV.Types.Mesh(d,g,[0,1,2,1,3,2]);b.update([0,1,2,1,3,2]);c="#ifdef GL_ES\nprecision highp float;\n#endif\n";c+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";
a=new VVVV.Types.ShaderProgram;a.extractSemantics(c+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");a.setFragmentShader(c);a.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
a.setup(d)}d=this.getMaxInputSliceCount();c=f.length;this.contextChanged&&(c=0);d<c&&f.splice(d,c-d);for(var h=c;h<d;h++)f[h]=new VVVV.Types.Layer,f[h].mesh=b,f[h].shader=a,_(a.uniformSpecs).each(function(a){f[h].uniformNames.push(a.varname);f[h].uniforms[a.varname]={uniformSpec:a,value:void 0}});var n=this.inputPins.Color.pinIsChanged(),l=this.inputPins.Transform.pinIsChanged(),g=this.inputPins.Texture.pinIsChanged(),p=this.inputPins["Texture Transform"].pinIsChanged();if(n||c<d)for(n=0;n<d;n++){var t=
this.inputPins.Color.getValue(n);f[n].uniforms.col.value=t.rgba}if(e.pinIsChanged()||c<d)for(n=0;n<d;n++)e.isConnected()?f[n].renderState=e.getValue(n):f[n].renderState=VVVV.DefaultRenderState;if(l||c<d)for(n=0;n<d;n++)l=this.inputPins.Transform.getValue(n),f[n].uniforms[f[n].shader.uniformSemanticMap.WORLD].value=l;if(g||c<d)for(n=0;n<d;n++)f[n].uniforms.Samp0.value=this.inputPins.Texture.getValue(n);if(p||c<d)for(n=0;n<d;n++)l=this.inputPins["Texture Transform"].getValue(n),f[n].uniforms.tTex.value=
l;this.outputPins.Layer.setSliceCount(d);for(n=0;n<d;n++)this.outputPins.Layer.setValue(n,f[n]);this.contextChanged=!1}}}};VVVV.Nodes.Quad.prototype=new VVVV.Core.Node;VVVV.Nodes.GridSegment=function(d,c){this.constructor(d,"GridSegment (DX9)",c);this.auto_nil=!1;this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",
[],VVVV.PinTypes.WebGlTexture);this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",[],VVVV.PinTypes.Color);var f=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),b=this.addInputPin("Inner Radius",[0],VVVV.PinTypes.Value),a=this.addInputPin("Resolution X",[6],VVVV.PinTypes.Value),g=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value);this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var h=[],r=null;this.evaluate=function(){if(this.renderContexts){var d=
this.renderContexts[0];if(d){if(this.contextChanged){var c;c="#ifdef GL_ES\nprecision highp float;\n#endif\n";c+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";r=new VVVV.Types.ShaderProgram;r.extractSemantics(c+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
r.setFragmentShader(c);r.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");r.setup(d)}c=this.getMaxInputSliceCount();var l=h.length;if(this.contextChanged||a.pinIsChanged()||g.pinIsChanged()||f.pinIsChanged()||b.pinIsChanged())l=
0;c<l&&h.splice(c,l-c);for(var p=l;p<c;p++){h[p]=new VVVV.Types.Layer;for(var t=parseInt(a.getValue(p)),v=parseInt(g.getValue(p)),x=f.getValue(p),w=b.getValue(p),y=[],u=[],A=[],q=0,z=0;z<v;z++)for(var B=0;B<t;B++){var D=parseFloat(B)/(t-1),D=0.25-D*x,D=6.28318530718*D,C=parseFloat(z)/(v-1),C=w*(1-C)+C;y.push(0.5*Math.sin(D)*C);y.push(0.5*Math.cos(D)*C);y.push(0);q++;u.push(0);u.push(0);u.push(1);A.push(parseFloat(B)/(t-1));A.push(parseFloat(z)/(v-1))}x=new VVVV.Types.VertexBuffer(d,y);x.create();
x.setSubBuffer("POSITION",3,y);x.setSubBuffer("TEXCOORD0",2,A);x.setSubBuffer("NORMAL",3,u);x.create();y=[];for(z=0;z<v-1;z++)for(B=0;B<t-1;B++)u=B+t*z,y.push(u),y.push(u+1),y.push(u+t+1),y.push(u+t+1),y.push(u+t),y.push(u);h[p].mesh=new VVVV.Types.Mesh(d,x,y);h[p].mesh.update(y);h[p].shader=r;_(r.uniformSpecs).each(function(a){h[p].uniformNames.push(a.varname);h[p].uniforms[a.varname]={uniformSpec:a,value:void 0}})}z=this.inputPins.Color.pinIsChanged();v=this.inputPins.Transform.pinIsChanged();d=
this.inputPins.Texture.pinIsChanged();t=this.inputPins["Texture Transform"].pinIsChanged();if(z||l<c)for(z=0;z<c;z++)B=this.inputPins.Color.getValue(z),h[z].uniforms.col.value=B.rgba;if(e.pinIsChanged()||l<c)for(z=0;z<c;z++)e.isConnected()?h[z].renderState=e.getValue(z):h[z].renderState=VVVV.DefaultRenderState;if(v||l<c)for(z=0;z<c;z++)v=this.inputPins.Transform.getValue(z),h[z].uniforms[h[z].shader.uniformSemanticMap.WORLD].value=v;if(d||l<c)for(z=0;z<c;z++)h[z].uniforms.Samp0.value=this.inputPins.Texture.getValue(z);
if(t||l<c)for(z=0;z<c;z++)v=this.inputPins["Texture Transform"].getValue(z),h[z].uniforms.tTex.value=v;this.outputPins.Layer.setSliceCount(c);for(z=0;z<c;z++)this.outputPins.Layer.setValue(z,h[z]);this.contextChanged=!1}}}};VVVV.Nodes.GridSegment.prototype=new VVVV.Core.Node;VVVV.Nodes.Group=function(d,c){this.constructor(d,"Group (EX9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=[],f=this.addInputPin("Enabled",
[1],VVVV.PinTypes.Value),b=this.addInvisiblePin("Layer Template Count",[2],VVVV.PinTypes.Value),a=this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);this.initialize=function(){var a=Math.max(2,b.getValue(0));VVVV.Helpers.dynamicPins(this,e,a,function(a){return this.addInputPin("Layer "+(a+1),[],VVVV.PinTypes.WebGlResource)})};this.evaluate=function(){b.pinIsChanged()&&this.initialize();var d=0;if(0.5<f.getValue(0))for(var c=0;c<e.length;c++)for(var g=0;g<e[c].getSliceCount();g++)a.setValue(d++,
e[c].getValue(g));a.setSliceCount(d)}};VVVV.Nodes.Group.prototype=new VVVV.Core.Node;VVVV.Nodes.RendererWebGL=function(d,c){function e(){function a(b){switch(b.which){case 1:VVVV.MousePositions._all.lb[0]=0;VVVV.MousePositions[d].lb[0]=0;break;case 2:VVVV.MousePositions._all.mb[0]=0;VVVV.MousePositions[d].mb[0]=0;break;case 3:VVVV.MousePositions._all.rb[0]=0,VVVV.MousePositions[d].rb[0]=0}}function b(a,d){for(var c=a.originalEvent.changedTouches.length;c--;){var e=2*(a.originalEvent.changedTouches[c].pageX-
h(d).offset().left)/h(d).width()-1,f=-(2*(a.originalEvent.changedTouches[c].pageY-h(d).offset().top)/h(d).height()-1);VVVV.MousePositions._all.x[a.originalEvent.changedTouches[c].identifier]=VVVV.MousePositions[d.id].x[a.originalEvent.changedTouches[c].identifier]=e;VVVV.MousePositions._all.y[a.originalEvent.changedTouches[c].identifier]=VVVV.MousePositions[d.id].y[a.originalEvent.changedTouches[c].identifier]=f}}h(u).detach("mousemove");h(u).detach("mousedown");h(u).detach("mouseup");VVVV.MousePositions[d]=
{x:[0],y:[0],wheel:[0],lb:[0],mb:[0],rb:[0]};h(u).mousemove(function(a){var b=2*(a.pageX-h(this).offset().left)/h(this).width()-1;a=-(2*(a.pageY-h(this).offset().top)/h(this).height()-1);VVVV.MousePositions._all.x[0]=b;VVVV.MousePositions._all.y[0]=a;VVVV.MousePositions[d].x[0]=b;VVVV.MousePositions[d].y[0]=a});h(u).bind("mousewheel",function(a){a=a.originalEvent.wheelDelta/120;VVVV.MousePositions[d].wheel[0]+=a;VVVV.MousePositions._all.wheel[0]+=a});h(u).bind("DOMMouseScroll",function(a){a=-a.originalEvent.detail/
3;VVVV.MousePositions[d].wheel[0]+=a;VVVV.MousePositions._all.wheel[0]+=a});h(u).mousedown(function(b){switch(b.which){case 1:VVVV.MousePositions._all.lb[0]=1;VVVV.MousePositions[d].lb[0]=1;break;case 2:VVVV.MousePositions._all.mb[0]=1;VVVV.MousePositions[d].mb[0]=1;break;case 3:VVVV.MousePositions._all.rb[0]=1,VVVV.MousePositions[d].rb[0]=1}h(document).unbind("mouseup",a);h(document).mouseup(a)});h(u).bind("touchstart",function(a){for(var c=a.originalEvent.changedTouches.length;c--;)VVVV.MousePositions._all.lb[a.originalEvent.changedTouches[c].identifier]=
VVVV.MousePositions[d].lb[a.originalEvent.changedTouches[c].identifier]=1;b(a,this)});h(u).bind("touchend",function(a){for(var b=a.originalEvent.changedTouches.length;b--;)VVVV.MousePositions._all.lb[a.originalEvent.changedTouches[b].identifier]=VVVV.MousePositions[d].lb[a.originalEvent.changedTouches[b].identifier]=0});h(u).bind("touchmove",function(a){b(a,this);a.preventDefault()})}this.constructor(d,"Renderer (EX9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:["Disabling Clear doesn't work in Chrome","No Fullscreen","No Enable Pin","No Aspect Ration and Viewport transform","No mouse output"]};this.addInputPin("Layers",[],VVVV.PinTypes.WebGlResource);var f=this.addInputPin("Clear",[1],VVVV.PinTypes.Value),b=this.addInputPin("Background Color",[new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],VVVV.PinTypes.Color),a=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),k=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),
m=this.addInputPin("View",[],VVVV.PinTypes.Transform),r=this.addInputPin("Projection",[],VVVV.PinTypes.Transform),s=this.addInvisiblePin("Windowed Depthbuffer Format",["NONE"],VVVV.PinTypes.Enum);s.enumOptions=["NONE","DX16"];var n=this.addOutputPin("Actual Backbuffer Width",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Actual Backbuffer Height",[0],VVVV.PinTypes.Value),p=this.addOutputPin("EX9 Out",[],VVVV.PinTypes.WebGlResource),t=0,v=0,x,w,y;mat4.create();mat4.create();var u,A=this.ctxt=void 0,
q,z,B;this.getContexts=function(){if(this.invisiblePins["Descriptive Name"]){var c=this.invisiblePins["Descriptive Name"].getValue(0);if((c=h(c).get(0))&&"CANVAS"==c.nodeName)u=h(c);else{var g=parseInt(a.getValue(0)),l=parseInt(k.getValue(0)),g=0<g?g:512,l=0<l?l:512;d="vvvv-js-generated-renderer-"+(new Date).getTime();u=h('<canvas width="'+g+'" height="'+l+'" id="'+d+'" class="vvvv-js-generated-renderer"></canvas>');c||(c="body");h(c).append(u)}if(u){e();try{A=u.get(0).getContext("experimental-webgl",
{preserveDrawingBuffer:!0}),A.viewportWidth=parseInt(u.get(0).width),A.viewportHeight=parseInt(u.get(0).height)}catch(n){console.log(n)}this.ctxt=A;p.isConnected()&&this.renderContexts&&this.renderContexts[0]?(q=this.ctxt=this.renderContexts[0],z=q.createFramebuffer(),q.bindFramebuffer(q.FRAMEBUFFER,z),z.width=u.get(0).width,z.height=u.get(0).height,B=q.createTexture(),q.bindTexture(q.TEXTURE_2D,B),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!0),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),
q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR_MIPMAP_NEAREST),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,z.width,z.height,0,q.RGBA,q.UNSIGNED_SHORT_4_4_4_4,null),q.generateMipmap(q.TEXTURE_2D),c=q.createRenderbuffer(),q.bindRenderbuffer(q.RENDERBUFFER,c),q.renderbufferStorage(q.RENDERBUFFER,q.DEPTH_COMPONENT16,z.width,z.height),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,B,0),q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_ATTACHMENT,q.RENDERBUFFER,c),q.bindTexture(q.TEXTURE_2D,
null),q.bindRenderbuffer(q.RENDERBUFFER,null),q.bindFramebuffer(q.FRAMEBUFFER,null)):this.renderContexts&&this.renderContexts[0]&&(this.renderContexts[0].deleteTexture(B),B=void 0);this.ctxt&&(t=parseInt(u.get(0).width),v=parseInt(u.get(0).height),q=this.ctxt,c=new Uint8Array([255,255,255]),q.DefaultTexture={},q.DefaultTexture["2D"]=q.createTexture(),q.bindTexture(q.TEXTURE_2D,q.DefaultTexture["2D"]),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,
q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.pixelStorei(q.UNPACK_ALIGNMENT,1),q.texImage2D(q.TEXTURE_2D,0,q.RGB,1,1,0,q.RGB,q.UNSIGNED_BYTE,c),q.bindTexture(q.TEXTURE_2D,null),q.DefaultTexture.CUBE=q.createTexture(),q.bindTexture(q.TEXTURE_CUBE_MAP,q.DefaultTexture.CUBE),q.texParameteri(q.TEXTURE_CUBE_MAP,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_CUBE_MAP,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),
q.texParameteri(q.TEXTURE_CUBE_MAP,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_CUBE_MAP,q.TEXTURE_MAG_FILTER,q.NEAREST),q.pixelStorei(q.UNPACK_ALIGNMENT,1),q.texImage2D(q.TEXTURE_CUBE_MAP_POSITIVE_X,0,q.RGB,1,1,0,q.RGB,q.UNSIGNED_BYTE,c),q.texImage2D(q.TEXTURE_CUBE_MAP_NEGATIVE_X,0,q.RGB,1,1,0,q.RGB,q.UNSIGNED_BYTE,c),q.texImage2D(q.TEXTURE_CUBE_MAP_POSITIVE_Y,0,q.RGB,1,1,0,q.RGB,q.UNSIGNED_BYTE,c),q.texImage2D(q.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,q.RGB,1,1,0,q.RGB,q.UNSIGNED_BYTE,c),q.texImage2D(q.TEXTURE_CUBE_MAP_POSITIVE_Z,
0,q.RGB,1,1,0,q.RGB,q.UNSIGNED_BYTE,c),q.texImage2D(q.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,q.RGB,1,1,0,q.RGB,q.UNSIGNED_BYTE,c),q.bindTexture(q.TEXTURE_CUBE_MAP,null),this.inputPins.Layers.markPinAsChanged(),f.markPinAsChanged(),b.markPinAsChanged(),m.markPinAsChanged(),r.markPinAsChanged())}}};this.destroy=function(){h(u).remove()};var D=!1;this.evaluate=function(){q=this.ctxt;if(this.invisiblePins["Descriptive Name"].pinIsChanged()||this.contextChanged)A&&h(A.canvas).hasClass("vvvv-js-generated-renderer")&&
h(A.canvas).remove(),this.getContexts(),this.inputPins.Layers.isConnected()&&this.inputPins.Layers.links[0].fromPin.connectionChanged();D||(n.setValue(0,t),l.setValue(0,v),D=!0);if(void 0!=q){if(a.pinIsChanged()&&(!this.renderContexts||!this.renderContexts[0])){var c=parseInt(a.getValue(0));0<c&&(t=c,h(A.canvas).attr("width",t),n.setValue(0,t))}!k.pinIsChanged()||this.renderContexts&&this.renderContexts[0]||(c=parseInt(k.getValue(0)),0<c&&(v=c,h(A.canvas).attr("height",v),l.setValue(0,v)));this.renderContexts&&
this.renderContexts[0]&&q==this.renderContexts[0]?q.bindFramebuffer(q.FRAMEBUFFER,z):q.bindFramebuffer(q.FRAMEBUFFER,null);if(this.contextChanged||b.pinIsChanged())c=b.getValue(0),q.clearColor(c.rgba[0],c.rgba[1],c.rgba[2],c.rgba[3]);q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT);if(this.contextChanged||s.pinIsChanged())"NONE"==s.getValue(0)?q.disable(q.DEPTH_TEST):q.enable(q.DEPTH_TEST);r.pinIsChanged()&&(r.isConnected()?(x=mat4.create(),mat4.set(r.getValue(0),x)):(x=mat4.create(),mat4.ortho(-1,
1,-1,1,-100,100,x)),mat4.scale(x,[1,1,-1]),this.renderContexts&&this.renderContexts[0]&&mat4.scale(x,[1,-1,1]),y=mat4.create());m.pinIsChanged()&&(w=m.getValue(0));(m.pinIsChanged()||r.pinIsChanged())&&mat4.multiply(x,w,y);if(!this.contextChanged){q.viewport(0,0,t,v);var d=c=null,e=null;if(this.inputPins.Layers.isConnected()){for(var f=this.inputPins.Layers.values,u=0;u<f.length;u++)if(layer=f[u],void 0!=layer.shader){c!=layer.shader.shaderProgram&&(q.useProgram(layer.shader.shaderProgram),q.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.PROJECTION].position,
!1,x),q.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEW].position,!1,w),layer.shader.uniformSemanticMap.VIEWPROJECTION&&q.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEWPROJECTION].position,!1,y));var G=layer.renderState;G||(G=g);G!=d&&G.apply(q);if(layer.mesh!=e||layer.shader.shaderProgram!=c)q.bindBuffer(q.ARRAY_BUFFER,layer.mesh.vertexBuffer.vbo),_(layer.mesh.vertexBuffer.subBuffers).each(function(a){layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]]&&
-1!=layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position&&(q.enableVertexAttribArray(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position),q.vertexAttribPointer(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position,a.size,q.FLOAT,!1,0,a.offset))}),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,layer.mesh.indexBuffer);for(var d=layer.uniformNames.length,L=e=0;L<d;L++){var E=layer.uniforms[layer.uniformNames[L]];if(void 0!=E.value&&!(0<
u&&layer.shader.shaderProgram==c&&f[u-1].uniforms[layer.uniformNames[L]]&&E.value==f[u-1].uniforms[layer.uniformNames[L]].value)){start=(new Date).getTime();switch(E.uniformSpec.type){case "mat":q["uniformMatrix"+E.uniformSpec.dimension+"fv"](E.uniformSpec.position,!1,E.value);break;case "vec":q["uniform"+E.uniformSpec.dimension+"fv"](E.uniformSpec.position,E.value);break;case "int":q["uniform"+E.uniformSpec.dimension+"i"](E.uniformSpec.position,E.value);break;case "float":q["uniform"+E.uniformSpec.dimension+
"f"](E.uniformSpec.position,E.value);break;case "sampler":var I=E.value;I==VVVV.DefaultTexture&&(I=q.DefaultTexture["2D"]);q.activeTexture(q["TEXTURE"+e]);q.bindTexture(q["TEXTURE_"+E.uniformSpec.dimension],I);q.uniform1i(E.uniformSpec.position,e);e++;break;case "samplerCube":I=E.value,I==VVVV.DefaultTexture&&(I=q.DefaultTexture.CUBE),q.activeTexture(q["TEXTURE"+e]),q.bindTexture(q.TEXTURE_CUBE_MAP,I),q.uniform1i(E.uniformSpec.position,e),e++}loopstart=(new Date).getTime()}}q.drawElements(q[G.polygonDrawMode],
layer.mesh.numIndices,q.UNSIGNED_SHORT,0);c=layer.shader.shaderProgram;d=G;e=layer.mesh}q.bindTexture(q.TEXTURE_2D,null);q.bindTexture(q.TEXTURE_CUBE_MAP,null)}this.renderContexts&&this.renderContexts[0]&&(q.bindTexture(q.TEXTURE_2D,B),q.generateMipmap(q.TEXTURE_2D),q.bindTexture(this.renderContexts[0].TEXTURE_2D,null));p.setValue(0,B)}this.contextChanged=!1}}};VVVV.Nodes.RendererWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.DefineEffect=function(d,c){this.constructor(d,"DefineEffect (DX9)",c);this.auto_nil=
!1;this.meta={authors:["Matthias Zauner"],original_authors:["Matthias Zauner"],credits:[],compatibility_issues:["Not available in classic VVVV"]};this.auto_evaluate=!1;var e=this.addInputPin("Effect Descriptor",[""],VVVV.PinTypes.String),f=this.addInvisiblePin("Source Code",["#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform mat4 tW : WORLD;\nuniform mat4 tV : VIEW;\nuniform mat4 tP : PROJECTION;\n\nuniform vec4 Color : COLOR = {1.0, 1.0, 1.0, 1.0};\nuniform sampler2D Texture;\nuniform mat4 Texture_Transform;\nuniform float Alpha = 1.0;\n\nvarying vec2 vs2psTexCd;\n\nvertex_shader:\n\nattribute vec3 PosO : POSITION;\nattribute vec2 TexCd : TEXCOORD0;\n\nvoid main(void) {\n  gl_Position = tP * tV * tW * vec4(PosO, 1.0);\n  vs2psTexCd = (Texture_Transform * vec4(TexCd, 0, 1)).xy;\n}\n\n\nfragment_shader:\n\nvoid main(void) {\n  gl_FragColor = Color * texture2D(Texture, vs2psTexCd) * vec4(1.0, 1.0, 1.0, Alpha);\n}"],
VVVV.PinTypes.String),b="",a;this.evaluate=function(){if(""!=e.getValue(0)){if(e.pinIsChanged()){var c=e.getValue(0);if(""==c)return;""==b?void 0==VVVV.ShaderCodeResources["./"+c+".vvvvjs.fx"]&&(VVVV.ShaderCodeResources["./"+c+".vvvvjs.fx"]=new VVVV.Types.ShaderCodeResource):VVVV.ShaderCodeResources["./"+c+".vvvvjs.fx"]=VVVV.ShaderCodeResources[b];b="./"+c+".vvvvjs.fx";VVVV.ShaderCodeResources[b].definingNode=this;VVVV.ShaderCodeResources[b].setSourceCode(f.getValue(0));a&&h("#path",a.document).text((this.parentPatch.nodename||
"root")+" / "+(""!=b?b:"Untitled"))}f.pinIsChanged()&&VVVV.ShaderCodeResources[b]&&VVVV.ShaderCodeResources[b].setSourceCode(f.getValue(0))}};this.openUIWindow=function(){a=window.open(location.protocol+"//"+location.host+("/"==VVVV.Root[0]?"":location.pathname.replace(/\/[^\/]*$/,"")+"/")+VVVV.Root+"/code_editor.html",b+" / VVVV.js Effect Editor","location=no, width=800, height=800, toolbar=no");var c=this;window.setTimeout(function(){a.document.title=b+" / VVVV.js Effect Editor";var d=c.parentPatch.nodename||
"root",e=""!=b?b:"Untitled";h("#path",a.document).text(d+" / "+e);h("textarea",a.document).text(f.getValue(0));h("#compile_button",a.document).click(function(){""==b?c.showStatus("error","Please provide a name for this shader first"):(f.setValue(0,h("textarea",a.document).val()),0<VVVV.ShaderCodeResources[b].relatedNodes.length?c.showStatus("notice","Compiling ..."):c.showStatus("notice","No instance of this shader found. Create a node (./"+b+") and connect it to a Renderer (EX9) to compile."))});
a.focus()},500)};this.showStatus=function(b,c){a&&(h("#status",a.document).text(c),h("#status",a.document).attr("class",b))}};VVVV.Nodes.DefineEffect.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Types.XElement=function(){this.name="root";this.data=""};VVVV.PinTypes.XElement={typeName:"XElement",reset_on_disconnect:!0,defaultValue:function(){return new VVVV.Types.XElement}};VVVV.PinTypes.XAttribute={typeName:"XAttribute",reset_on_disconnect:!0,defaultValue:function(){return{}}};VVVV.Nodes.AsXElementJSON=function(g,d){this.constructor(g,"AsXElement (JSON)",d);this.meta={authors:["Matthias Zauner"],original_authors:["herbst"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!1;var c=this.addInputPin("JSON",['{"vvvv.js":"awesome"}'],VVVV.PinTypes.String),e=this.addOutputPin("Output Node",[],VVVV.PinTypes.XElement),f=this.addOutputPin("Success",[0],VVVV.PinTypes.Value),b=new VVVV.Types.XElement,a=0;this.evaluate=function(){try{b.data=JSON.parse(c.getValue(0)),a=1}catch(d){b.data={},a=0}e.setValue(0,b);f.setValue(0,a)}};VVVV.Nodes.AsXElementJSON.prototype=new VVVV.Core.Node;VVVV.Nodes.ElementXElementSplit=function(g,d){this.constructor(g,"Element (XElement Split)",d);this.meta=
{authors:["Matthias Zauner"],original_authors:["herbst"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Element",[],VVVV.PinTypes.XElement),e=this.addOutputPin("Name",[""],VVVV.PinTypes.String),f=this.addOutputPin("Value",[""],VVVV.PinTypes.String);this.addOutputPin("Deep Value",[""],VVVV.PinTypes.String);var b=this.addOutputPin("Children",[],VVVV.PinTypes.XElement),a=this.addOutputPin("Children Bin Size",[0],VVVV.PinTypes.Value);this.addOutputPin("Attributes",[],
VVVV.PinTypes.XAttribute);this.addOutputPin("Attributes Bin Size",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=c.getSliceCount(),g=0,h=0;h<d;h++){var s=c.getValue(h);e.setValue(h,s.name);var n=0;if(s.data instanceof Array){f.setValue(h,"");for(var l=0;l<s.data.length;l++){var p;p=b.getSliceCount()<=g?new VVVV.Types.XElement:b.getValue(g);p.name="item";p.data=s.data[l];b.setValue(g,p);g++;n++}}else if("object"==typeof s.data){f.setValue(h,"");for(var t in s.data)p=b.getSliceCount()<=
g?new VVVV.Types.XElement:b.getValue(g),p.name=t,p.data=s.data[t],b.setValue(g,p),g++,n++}else f.setValue(h,s.data);a.setValue(h,n)}e.setSliceCount(d);f.setSliceCount(d);b.setSliceCount(g);a.setSliceCount(d)}};VVVV.Nodes.ElementXElementSplit.prototype=new VVVV.Core.Node;VVVV.Nodes.GetElementsByName=function(g,d){function c(d,e){if(d.data instanceof Array)for(var f=0;f<d.data.length;f++)c(d.data[f],e);else if("object"==typeof d.data)for(f in d.data){if(f==e){var g=b.getSliceCount()<=a?new VVVV.Types.XElement:
b.getValue(a);g.name=f;g.data=d.data[f];b.setValue(a,g);a++}c(d.data[f],e)}}this.constructor(g,"GetElements (XElement ByName)",d);this.meta={authors:["Matthias Zauner"],original_authors:["herbst"],credits:[],compatibility_issues:["no bin size output"]};this.auto_evaluate=!1;var e=this.addInputPin("Element",[],VVVV.PinTypes.XElement),f=this.addInputPin("Name",["myChildTagName"],VVVV.PinTypes.String),b=this.addOutputPin("Elements",[],VVVV.PinTypes.XElement),a=0;this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),
g=a=0;g<d;g++)c(e.getValue(g),f.getValue(g));b.setSliceCount(a)}};VVVV.Nodes.GetElementsByName.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.Nodes.XPathXML=function(g,d){this.constructor(g,"XPath (XML)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["XML Index Output Pin not implemented","Query Index Output Pin not implemented"]};this.auto_evaluate=!1;var c=this.addInputPin("XML Input",["text"],VVVV.PinTypes.String),e=this.addInputPin("XPath Query",["text"],VVVV.PinTypes.String),f=this.addInputPin("Base Element",["text"],VVVV.PinTypes.String),b=this.addOutputPin("Output",
["text"],VVVV.PinTypes.String),a=this.addOutputPin("XML Index",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Query Index",[0],VVVV.PinTypes.Value),m;this.evaluate=function(){var d=c.getValue(0),g=e.getValue(0);f.getValue(0);c.pinIsChanged()&&(m=(new DOMParser).parseFromString(d,"text/xml"));for(var d=m.evaluate(g,m,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),g=0,n;n=d.iterateNext();)n.value?b.setValue(g,n.value):n.data?b.setValue(g,n.data):b.setValue(g,""),g++;a.setValue(g,0);h.setValue(g,0);
b.setSliceCount(g);a.setSliceCount(1);h.setSliceCount(1)}};VVVV.Nodes.XPathXML.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(h){VVVV.PinTypes.Value.makeLabel=VVVV.PinTypes.String.makeLabel=function(g,d){var c=d.IOBoxRows();d.IOBoxInputPin().getSliceCount();d3.select(g).selectAll(".vvvv-node-label").remove();for(var e=0;e<c;e++)d3.select(g).append("svg:text").text(d.IOBoxInputPin().getValue(e)).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(c){return 12*e+12}).attr("dx",4).attr("font-size",10).attr("font-family","Lucida Sans Unicode")};VVVV.PinTypes.Value.openInputBox=VVVV.PinTypes.String.openInputBox=
function(g,d,c,e){$inputbox=h("<input type='text' value='"+c.getValue(e).toString().replace(/\|/g,"||").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"' class='pininputbox value resettable'/>");$inputbox.css("position",d.css("position"));$inputbox.css("width",d.css("width"));$inputbox.css("height",d.css("height"));$inputbox.css("left",d.css("left"));$inputbox.css("top",d.css("top"));d.replaceWith($inputbox);$inputbox.get(0).select();$inputbox.change(function(){"Value"==c.typeName?
c.setValue(e,parseFloat(h(this).val())):c.setValue(e,h(this).val());var b=_(c.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"|"});b.length=c.getSliceCount();c.node.parentPatch.editor.update(c.node.parentPatch,"<PATCH><NODE id='"+c.node.id+"'><PIN pinname='"+c.pinname+"' values='"+b.join(",")+"'/></NODE>")});$inputbox.keydown(function(b){13==b.which&&(h(this).change(),h(this).remove())});if("Value"==c.typeName){var f=
function(b,a,c){var d=h(b).val()%1;if(!isNaN(d)){var e;e=1;if(c.altKey||0!==d)e=0.01;a*=e;h(b).val(parseFloat(h(b).val())+a);h(b).change()}};$inputbox.bind("mousewheel",function(b){f(this,b.originalEvent.wheelDelta/120,b);b.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",function(b){f(this,-b.originalEvent.detail/3,b);b.preventDefault();return!1});g.window.document.addEventListener("pointerlockerror",function(b){console.log("POINTER LOCK ERROR")});$inputbox.mousedown(function(b){3==b.which&&
this.requestPointerLock()});$inputbox.mouseup(function(b){3==b.which&&(g.window.document.exitPointerLock(),window.setTimeout(function(){$inputbox.remove()},100),g.state=0)});$inputbox.mousemove(function(b){g.window.document.pointerLockElement&&(g.state=6,50>Math.abs(b.originalEvent.movementY)&&f(this,Math.floor(-0.5*b.originalEvent.movementY),b))})}$inputbox.bind("paste",function(b){b.stopPropagation()});$inputbox.bind("copy",function(b){b.stopPropagation()})};VVVV.PinTypes.Enum.openInputBox=function(g,
d,c,e){$inputbox=h("<select class='pininputbox value resettable'>");for(g=0;g<c.enumOptions.length;g++)$opt=h('<option value="'+c.enumOptions[g]+'">'+c.enumOptions[g]+"</option>"),c.getValue(e)==c.enumOptions[g]&&$opt.attr("selected",!0),$inputbox.append($opt);$inputbox.css("position",d.css("position"));$inputbox.css("width",d.css("width"));$inputbox.css("height",d.css("height"));$inputbox.css("left",d.css("left"));$inputbox.css("top",d.css("top"));d.replaceWith($inputbox);$inputbox.change(function(){c.setValue(e,
h(this).val());var d=_(c.values).map(function(b){return"|"+b+"|"});d.length=c.getSliceCount();c.node.parentPatch.editor.update(c.node.parentPatch,"<PATCH><NODE id='"+c.node.id+"'><PIN pinname='"+c.pinname+"' values='"+d.join(",")+"'/></NODE>");h(this).remove()})};VVVV.PinTypes.Color.makeLabel=function(g,d){var c=d.IOBoxRows();d.IOBoxInputPin().getSliceCount();d3.select(g).selectAll(".vvvv-node-label").remove();for(var e=0;e<c;e++)d3.select(g).append("svg:rect").attr("class","vvvv-node-label").attr("height",
d.getHeight()/c-8).attr("width",d.getWidth()).attr("y",12*e+4).attr("fill",function(c){c=d.IOBoxInputPin().getValue(e);for(var b=[],a=0;a<c.rgba.length;a++)b[a]=parseInt(256*c.rgba[a]);return"rgba("+b.join(",")+")"})};VVVV.PinTypes.Color.openInputBox=function(g,d,c,e){function f(a){k=a.altKey&&a.shiftKey?3:a.altKey?1:a.shiftKey?2:0}function b(b){s[k]+=0.01*b;0!=k&&(s[k]=Math.min(1,Math.max(0,s[k])));a();$inputbox.find("input[type='range']").each(function(a){h(this).val(s[a])})}function a(){m.setHSV(s[0],
s[1],s[2]);m.rgba[3]=s[3];$inputbox.css("background-color","rgba("+_(m.rgba).map(function(a){return parseInt(255*a)}).join(",")+")");ibx=$inputbox;c.setValue(e,m);var a=_(c.values).map(function(a){return"|"+a.toString()+"|"});a.length=c.getSliceCount();c.node.parentPatch.editor.update(c.node.parentPatch,"<PATCH><NODE id='"+c.node.id+"'><PIN pinname='"+c.pinname+"' values='"+a.join(",")+"'/></NODE>")}var k=0;h(g.window.document).keydown(f).keyup(f);$inputbox=h('<div class="pininputbox color resettable"></div>');
$inputbox.css("position",d.css("position"));$inputbox.css("width","120px");$inputbox.css("height","66px");$inputbox.css("left",d.css("left"));$inputbox.css("top",d.offset().top-60+"px");var m=c.getValue(e);g=[];for(var r=0;r<m.rgba.length;r++)g[r]=parseInt(256*m.rgba[r]);g[3]=255;$inputbox.css("background-color","rgba("+g.join(",")+")");d.replaceWith($inputbox);var s=m.getHSV();s[3]=m.rgba[3];for(r=0;4>r;r++)$slider=h('<input type="range" name="hsv[]" min="0" max="1" step="0.001" value="'+s[r]+'"/>'),
$inputbox.append('<span class="color-component">'+"HSVA"[r]+":</div>"),$inputbox.append($slider),function(b){$slider.on("input",function(){s[b]=parseFloat(h(this).val());a()})}(r);$inputbox.on("mousewheel",function(a){b(a.originalEvent.wheelDelta/120);a.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",function(a){b(-a.originalEvent.detail/3);a.preventDefault();return!1})};VVVV.Editors.BrowserEditor={};VVVV.Editors.BrowserEditor.PatchWindow=function(g,d,c){function e(){a.selectAll(".vvvv-node.selected").attr("class",
function(a){return a.isIOBox?"vvvv-node vvvv-iobox":"vvvv-node"});l=[]}var f=this.state=0,b=0,a,k,m,r,s,n=void 0,l=[],p=g,t=0,v=location.protocol+"//"+location.host+("/"==VVVV.Root[0]?"":location.pathname.replace(/\/[^\/]*$/,"")+"/")+VVVV.Root+"/patch.html",x=!1,w=0,y=0,u=0,A=0;this.window=c?window:window.open(v,g.nodename,"location=no, width="+g.windowWidth+", height="+g.windowHeight+", toolbar=no");var q=this;window.setTimeout(function(){for(var m=0;m<p.nodeList.length;m++)t=Math.max(t,p.nodeList[m].id);
c?root=d3.select(h(c).get(0)):(q.window.document.title=g.nodename,root=d3.select(q.window.document.body));if(!c){h("body",q.window.document).on("copy",function(a){for(var b=h("<PATCH>"),c=[],d=_(l).map(function(a){return a.id}),e=0;e<l.length;e++)b.append(l[e].serialize()),_(l[e].inputPins).each(function(a){for(var b=0;b<a.links.length;b++)0<=d.indexOf(a.links[b].fromPin.node.id)&&c.push(a.links[b])});for(e=0;e<c.length;e++)b.append(c[e].serialize());b='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n'+
b.wrapAll("<d></d>").parent().html();b=b.replace(/<patch/g,"<PATCH");b=b.replace(/<\/patch>/g,"\n  </PATCH>");b=b.replace(/<node/g,"\n  <NODE");b=b.replace(/<\/node>/g,"\n  </NODE>");b=b.replace(/<bounds/g,"\n  <BOUNDS");b=b.replace(/<\/bounds>/g,"\n  </BOUNDS>");b=b.replace(/<pin/g,"\n  <PIN");b=b.replace(/<\/pin>/g,"\n  </PIN>");b=b.replace(/<lonk/g,"\n  <LINK");b=b.replace(/<\/lonk>/g,"\n  </LINK>");a.originalEvent.clipboardData.setData("text/plain",b);a.preventDefault();return!1});var r=0,s=0;
h("body",q.window.document).mousemove(function(a){r=a.pageX;s=a.pageY});h("body",q.window.document).on("paste",function(b){b=b.originalEvent.clipboardData.getData("text/plain");if(!b.match(/^<!DOCTYPE PATCH/))return!1;$patch=h(b);var c=void 0,f=void 0;$patch.find("node bounds").each(function(){var a=parseInt(h(this).attr("left")),b=parseInt(h(this).attr("top"));if(!c||a<c)c=a;if(!f||b<f)f=b});var g={};$patch.find("node").each(function(){t++;g[h(this).attr("id")]=t;h(this).attr("createme","pronto");
h(this).attr("id",t);var a=parseInt(h(this).find("bounds").attr("left"))-c+15*r,b=parseInt(h(this).find("bounds").attr("top"))-f+15*s;h(this).find("bounds").attr("left",a);h(this).find("bounds").attr("top",b)});$patch.find("link").each(function(){h(this).attr("createme","pronto");var a=h(this).attr("srcnodeid"),b=h(this).attr("dstnodeid");h(this).attr("srcnodeid",g[a]);h(this).attr("dstnodeid",g[b])});b=$patch.wrapAll("<d></d>").parent().html();d.update(p,b);e();var k=_(g).map(function(a){return a});
a.selectAll(".vvvv-node").each(function(a){0<=k.indexOf(parseInt(a.id))&&(l.push(a),d3.select(this).attr("class","vvvv-node selected"))})})}a=root.append("svg:svg").attr("class","chart").attr("width",Math.max(p.windowWidth,p.boundingBox.width)).attr("height",Math.max(p.windowHeight,p.boundingBox.height));m=a.append("svg:rect").attr("class","background").attr("width",Math.max(p.windowWidth,p.boundingBox.width)).attr("height",Math.max(p.windowHeight,p.boundingBox.height));c||(a.on("mousemove",function(){if(1==
q.state)a.select(".vvvv-link.current-link").attr("x2",function(a){return d3.event.pageX+(d3.select(this).attr("x1")<d3.event.pageX?-1:1)}).attr("y2",function(a){return d3.event.pageY+(d3.select(this).attr("y1")<d3.event.pageY?-1:1)});else if(2==q.state){var c=d3.event.pageX-f,d=d3.event.pageY-b;a.selectAll(".vvvv-node.selected").attr("transform",function(a){return"translate("+(a.x+c)+","+(a.y+d)+")"});for(var g=0;g<l.length;g++){var h=l[g];a.selectAll(".vvvv-link line").filter(function(a){return a.fromPin.node.id==
h.id}).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+c}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+d});a.selectAll(".vvvv-link line").filter(function(a){return a.toPin.node.id==h.id}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+c}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+d})}}else 5==q.state&&(u=d3.event.pageX,A=d3.event.pageY,a.select(".selection-area").attr("transform","translate("+Math.min(w,u)+", "+Math.min(y,A)+")").attr("width",Math.abs(u-
w)).attr("height",Math.abs(A-y)),e(),a.selectAll(".vvvv-node").each(function(a){for(var b=[a.x,a.x+a.getWidth()],c=[a.y,a.y+a.getHeight()],d=!1,e=0;2>e;e++)for(var f=0;2>f;f++)b[e]>=Math.min(w,u)&&(b[e]<=Math.max(w,u)&&c[f]>=Math.min(y,A)&&c[f]<=Math.max(y,A))&&(d=!0);d&&(d3.select(this).attr("class","vvvv-node selected"),l.push(a))}))}).on("contextmenu",function(){1==q.state&&(a.select(".vvvv-link.current-link").remove(),h(".resettable",q.window.document).remove(),q.state=0);d3.event.stopPropagation();
d3.event.preventDefault();return!1}).on("mouseup",function(){if(2==q.state){q.state=0;for(var c=d3.event.pageX-f,e=d3.event.pageY-b,g="<PATCH>",h=0;h<l.length;h++)var k=l[h],g=g+("<NODE componentmode='Node' id='"+k.id+"'><BOUNDS type='Node' left='"+15*(c+k.x)+"' top='"+15*(e+k.y)+"' width='"+k.width+"' height='"+k.height+"'/></NODE>");d.update(p,g+"</PATCH>")}5==q.state&&(a.select(".selection-area").remove(),q.state=0)}).on("dblclick",function(){function a(b){g.empty();var c=f.find("#node_filter").val().toLowerCase();
b=VVVV.NodeNames.concat(_(VVVV.ShaderCodeResources).map(function(a,b){return b.replace("%VVVV%/effects/","")}));b=_(_(b).filter(function(a){return 0<=VVVV.Helpers.translateOperators(a).toLowerCase().indexOf(c)})).sortBy(function(a){return a.toLowerCase().indexOf(c)});for(var d=0;d<b.length;d++)g.append(h("<option>"+b[d]+"</option>"));g.find("option").first().attr("selected",!0)}function b(){var a=f.find("#node_filter").val(),g=f.find("#new_node option:selected").val(),h="";g||!a.match(/\.fx$/)&&!a.match(/\.v4p$/)||
(g=a);if(g){var k;(k=g.match(/^(.*\/([^\.]+))(\.vvvvjs)?\.fx$/))?(g=k[2]+" (EX9.Effect)",h=k[1]+".fx"):(k=g.match("([^.]+)(.vvvvjs)?.fx$"))?(g=k[1]+" (EX9.Effect)",h="%VVVV%/effects/"+k[1]+".fx"):g.match("[^/].v4p$")&&(h=g=a);t++;g="<PATCH>"+("<NODE componentmode='Hidden' id='"+t+"' nodename='"+g+"' systemname='"+g+"' "+(""!=h?"filename='"+h+"'":"")+">");g+="<BOUNDS type='Node' left='"+15*c+"' top='"+15*e+"' width='100' height='100'/>"}else t++,g="<PATCH>"+("<NODE componentmode='Hidden' id='"+t+"' nodename='IOBox (String)' systemname='IOBox (String)'>"),
g+="<BOUNDS type='Node' left='"+15*c+"' top='"+15*e+"' width='100' height='100'/>",g+="<PIN pinname='Input String' values='|"+a+"|'/>";d.update(p,g+"</NODE>");f.remove()}h("#node_selection",q.window.document).remove();var c=d3.event.pageX,e=d3.event.pageY,f=h('<div id="node_selection"><input type="text" id="node_filter"/></div>'),g=h('<select id="new_node" size="8">');f.append(g);f.css("left",c);f.css("top",e);h("body",q.window.document).append(f);f.find("input").bind("paste",function(a){a.stopPropagation()});
f.find("#node_filter").get(0).focus();a();f.find("#node_filter").keyup(function(c){if(13==c.which)b();else{if(40==c.which)return g.find("option:selected").first().next().attr("selected",!0),!1;if(38==c.which)return g.find("option:selected").first().prev().attr("selected",!0),!1;a()}});f.find("#new_node").click(b)}).on("mousedown",function(){0==q.state&&(q.state=5,w=u=d3.event.pageX+1,y=A=d3.event.pageY+1,a.append("svg:rect").attr("class","selection-area").attr("stroke","#000").attr("stroke-dasharray",
"2,2").attr("stroke-width",1).attr("fill","rgba(0,0,0,0)").attr("transform","translate("+w+", "+y+")").attr("width",0).attr("height",0),e())}),m.on("click",function(){q.state=0;h(".resettable",q.window.document).remove();h("#node_selection",q.window.document).remove();e();n=void 0}),m=function(a){x=a.shiftKey},h(q.window.document).keydown(m),h(q.window.document).keyup(m),h(q.window.document).keydown(function(b){if(46==b.which&&0<l.length){var c="<PATCH>";for(b=0;b<l.length;b++){var f=l[b],c=c+("<NODE id='"+
l[b].id+"' deleteme='pronto'/>");_(f.inputPins).each(function(a){_(a.links).each(function(a){c+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"})});_(f.outputPins).each(function(a){_(a.links).each(function(a){c+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"})})}c+="</PATCH>";
d.update(p,c);l=[]}else if(115!=b.which&&83!=b.which||!b.ctrlKey){if(73==b.which&&b.ctrlKey)return d.inspector?d.inspector.win.focus():d.openInspector("."),b.preventDefault(),!1;if(65==b.which&&b.ctrlKey)return e(),a.selectAll(".vvvv-node").each(function(a){l.push(a);d3.select(this).attr("class","vvvv-node selected")}),b.preventDefault(),!1}else return d.save(p.nodename,p.toXML()),b.preventDefault(),!1}),h(q.window).resize(function(){p.windowWidth=h(this).width();p.windowHeight=h(this).height();p.boundingBox.width=
Math.max(p.windowWidth,p.boundingBox.width);p.boundingBox.height=Math.max(p.windowHeight,p.boundingBox.height);p.afterUpdate()}));q.drawComplete();p.afterUpdate=function(){q.drawComplete();d.inspector&&window.setTimeout(d.inspector.update,100)};p.afterEvaluate=function(){k.filter(function(a){return a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel}).each(function(a){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,a)})}},1E3);this.close=function(){this.window.close()};this.drawComplete=
function(){k&&k.remove();s&&s.remove();c||p.windowWidth==h(q.window).width()&&p.windowHeight==h(q.window).height()||q.window.resizeTo(p.windowWidth,p.windowHeight);a.attr("width",Math.max(p.windowWidth,p.boundingBox.width)).attr("height",Math.max(p.windowHeight,p.boundingBox.height));a.selectAll(".background").attr("width",Math.max(p.windowWidth,p.boundingBox.width)).attr("height",Math.max(p.windowHeight,p.boundingBox.height));var g=a.append("svg:g").attr("class","link-group");k=a.selectAll("g.vvvv-node").data(p.nodeList).enter().append("svg:g").attr("class",
function(a){var b="vvvv-node";a.isIOBox&&(b+=" vvvv-iobox");0<=l.indexOf(a)&&(b+=" selected");return b}).attr("id",function(a){return"vvvv-node-"+a.id}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"});k.append("svg:rect").attr("class","vvvv-node-background").attr("height",function(a){return a.getHeight()}).attr("width",function(a){return a.getWidth()}).attr("fill",function(a){return a.isComment()?"rgba(0,0,0,0)":a.not_implemented?"rgba(255,0,0,1)":"#cdcdcd"});k.append("svg:rect").attr("class",
"vvvv-node-pinbar").attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});k.append("svg:rect").attr("class","vvvv-node-pinbar").attr("y",function(a){return a.isIOBox?a.getHeight()-2:a.getHeight()-4}).attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});k.append("svg:g").attr("class","descriptive-name-bg");
k.append("svg:text").text(function(a){return a.invisiblePins["Descriptive Name"]?a.invisiblePins["Descriptive Name"].getValue(0):null}).attr("class","vvvv-node-descriptive-name").attr("shape-rendering","crispEdges").attr("dy",function(a){return a.getHeight()+12}).attr("dx",2).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","white");k.selectAll("g.descriptive-name-bg").append("svg:rect").attr("fill",function(a){return void 0==a.invisiblePins["Descriptive Name"]||""==a.invisiblePins["Descriptive Name"].getValue(0)?
"rgba(0,0,0,0)":"rgba(0,0,0,1)"}).attr("y",function(a){return a.getHeight()}).attr("width",5).attr("height",14);k.each(function(a){if(a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,a);for(var b=a.IOBoxRows(),d=a.IOBoxInputPin().getSliceCount(),e=this,f=0;f<b;f++)(function(f){var g=d3.select(e).append("svg:rect").attr("width",a.getWidth()+2).attr("height",a.getHeight()/b-4).attr("y",12*f+2).attr("fill","rgba(0,0,0,0)");if(!c)g.on("contextmenu",
function(a){if(void 0!=a.IOBoxInputPin().getValue(0)&&!a.IOBoxInputPin().isConnected()){h(".resettable",q.window.document).remove();var c=h("<input type='text'/>");h("body",q.window.document).append(c);c.css("position","absolute");c.css("left",h(this).offset().left);c.css("top",h(this).offset().top+2);c.css("width",a.getWidth());c.css("height",a.getHeight()/b-4);VVVV.PinTypes[a.IOBoxInputPin().typeName].openInputBox(q.window,c,a.IOBoxInputPin(),f%d)}d3.event.stopPropagation();d3.event.preventDefault();
return!1})})(f)}else d3.select(this).append("svg:text").text(function(a){return a.label()}).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(a,b){return 12*b+12}).attr("dx",4).attr("font-size",10).attr("font-family","Lucida Sans Unicode")});m=k.selectAll("g.vvvv-input-pin").data(function(a){return a.isSubpatch?_(a.inputPins).sortBy(function(a){return a.slavePin?a.slavePin.node.x:1}).map(function(a,b){return a}):_(a.inputPins).map(function(a,b){return a})}).enter().append("svg:g").attr("class",
"vvvv-input-pin").attr("transform",function(a,b){pinOffset=0;1<_(a.node.inputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.inputPins).size()-1));a.y=0;a.x=b*pinOffset;return"translate("+a.x+", 0)"});m.append("svg:rect").attr("width",4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-input-pin").filter(function(a,b){return b==c}).each(function(){d3.select(this).append("svg:rect").attr("class",
"vvvv-input-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);d3.select(this).append("svg:text").text(function(a){return 1<a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-input-pin text").remove();a.selectAll("#vvvv-node-"+b.node.id+
" g.vvvv-input-pin rect.vvvv-input-pin-highlight").remove()});r=k.selectAll("g.vvvv-output-pin").data(function(a){return _(a.outputPins).map(function(a,b){return a})}).enter().append("svg:g").attr("class","vvvv-output-pin").attr("transform",function(a,b){pinOffset=0;1<_(a.node.outputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.outputPins).size()-1));a.y=a.node.getHeight()-4;a.x=b*pinOffset;return"translate("+a.x+", "+a.y+")"});r.append("svg:rect").attr("width",4).attr("height",4).attr("fill",
function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin").filter(function(a,b){return b==c}).each(function(){d3.select(this).append("svg:rect").attr("class","vvvv-output-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);b.values.code&&(new Function("patch",b.generateStaticCode(!1)))(b.node.parentPatch);d3.select(this).append("svg:text").text(function(a){return 1<
a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin text").remove();a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin rect.vvvv-output-pin-highlight").remove()});s=g.selectAll("g.vvvv-link").data(p.linkList).enter().append("svg:g").attr("class","vvvv-link");
s.append("svg:line").attr("stroke","rgba(0, 0, 0, 0)").attr("stroke-width",4).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});s.append("svg:line").attr("stroke","#000").attr("stroke-width",1).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+
a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});h(".descriptive-name-bg rect",q.window.document).each(function(){h(this,q.window.document).attr("width",h(this,q.window.document).parent().next().get(0).getBBox().width+4)});c||(a.selectAll("g.vvvv-input-pin").on("contextmenu",function(a,b){if(VVVV.PinTypes[a.typeName].openInputBox&&void 0!=a.getValue(0)&&!a.isConnected()){h(".resettable",q.window.document).remove();
var c=h("<input type='text'/>");h("body",q.window.document).append(c);c.css("position","absolute");c.css("left",h(this).offset().left);c.css("top",h(this).offset().top-3);c.css("width",50);c.css("height",14);VVVV.PinTypes[a.typeName].openInputBox(q,c,a,0)}d3.event.stopPropagation();d3.event.preventDefault();return!1}),a.selectAll("g.vvvv-input-pin, g.vvvv-output-pin").on("click",function(b,c){if(1!=q.state){n=b;q.state=1;a.append("svg:line").attr("class","vvvv-link current-link resettable").attr("stroke",
"#000").attr("stroke-width",1).attr("x1",b.x+b.node.x+2+0.5).attr("y1",b.y+b.node.y+2+0.5).attr("x2",b.x+b.node.x+2+0.5).attr("y2",b.y+b.node.y+2+0.5);var e=n.direction==VVVV.PinDirection.Output?"input":"output",f=[],g=function(a){a=a.getUpstreamNodes();for(var b=0;b<a.length;b++)a[b]==n.node||a[b].delays_output||(f.push(a[b]),g(a[b]));return!1};n.node.delays_output||g(n.node);a.selectAll("g.vvvv-"+e+"-pin").filter(function(a){return a.typeName!=n.typeName&&("Node"!=n.typeName||VVVV.PinTypes[a.typeName].primitive)&&
("Node"!=a.typeName||VVVV.PinTypes[n.typeName].privimive)||0<=f.indexOf(a.node)||a.node==n.node?!1:!0}).append("svg:rect").attr("class","vvvv-connection-highlight resettable").attr("width",4).attr("height",3).attr("fill","rgba(0,0,0,1)").attr("y",function(a){return a.direction==VVVV.PinDirection.Input?-3:3})}else{if(n.direction==VVVV.PinDirection.Input)var e=b,k=n;else e=n,k=b;if(1==h(this).find(".vvvv-connection-highlight").length){var l="<PATCH>";_(k.links).each(function(a){l+="<LINK deleteme='pronto' srcnodeid='"+
a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"});l+="<LINK createme='pronto' srcnodeid='"+e.node.id+"' srcpinname='"+e.pinname+"' dstnodeid='"+k.node.id+"' dstpinname='"+k.pinname+"'/>";l+="</PATCH>";d.update(p,l);a.select(".vvvv-link.current-link").remove();a.select(".vvvv-connection-highlight").remove();q.state=0;p.afterUpdate()}}d3.event.stopPropagation()}).on("mousedown",function(){d3.event.stopPropagation()}),a.selectAll("g.vvvv-link").on("contextmenu",
function(a){0==q.state&&d.update(p,"<PATCH><LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/></PATCH>");d3.event.preventDefault()}),k.on("mousedown",function(a){h(".resettable",q.window.document).remove();q.state=2;0>l.indexOf(a)&&(x||e(),d3.select(this).attr("class","vvvv-node selected"),l.push(a));f=d3.event.pageX;b=d3.event.pageY;d.inspector&&d.inspector.setNode(a);d3.event.preventDefault();
d3.event.stopPropagation();return!1}).on("contextmenu",function(a){a.isSubpatch?d.openPatch(a):a.openUIWindow&&a.openUIWindow();d3.event.preventDefault();d3.event.stopPropagation();return!1}))}};VVVV.Editors.BrowserEditor.Inspector=function(g){function d(){b=void 0;h(a.win.document).find("#pins, #values").empty();h(a.win.document).find("#pins").append('<div class="row heading">Configuration</div>');h(a.win.document).find("#values").append('<div class="row heading"></div>');_(f.invisiblePins).each(function(a){c(a)});
h(a.win.document).find("#pins").append('<div class="row heading">Input Pins</div>');h(a.win.document).find("#values").append('<div class="row heading"></div>');_(f.inputPins).each(function(a){c(a)});h(a.win.document).find("#pins").append('<div class="row heading">Output Pins</div>');h(a.win.document).find("#values").append('<div class="row heading"></div>');_(f.outputPins).each(function(a){c(a)})}function c(b){var c=h('<a class="row pin" href="#">'+b.pinname+"</a>");h(a.win.document).find("#pins").append(c);
c.click(function(c){h(a.win.document).find("a.pin.active").removeClass("active");h(this).addClass("active");VVVV.PinTypes[b.typeName].openInputBox&&e(b);c.preventDefault();return!1});VVVV.PinTypes[b.typeName].openInputBox&&b.direction!=VVVV.PinDirection.Output&&!b.isConnected()&&void 0!=b.getValue(0)?(c=h('<div class="row value"><div style="height:100%">'+b.getValue(0).toString().replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div>"),c.find("div").click(function(){VVVV.PinTypes[b.typeName].openInputBox(a.win,
h(this),b,0)})):c=h('<div class="row value readonlyvalue"><div style="height:100%">'+b.getValue(0).toString().replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div>");"Color"==b.typeName&&c.find("div").css("background-color","rgba("+_(b.getValue(0).rgba).map(function(a){return parseInt(255*a)}).join(",")+")");h(a.win.document).find("#values").append(c)}function e(c){var d=b!=c;b=c;var e=c.getSliceCount(),f=h('<div class="row heading"><input type="text" value="'+e+'"/ size="3"/> Slices</div>');c.direction!=
VVVV.PinDirection.Input&&f.find("input").attr("disabled",!0);var g=h(a.win.document).find("#values .row").first();0<g.length?g.replaceWith(f):h(a.win.document).find("#values").append(f);f.find("input").change(function(a){for(var c=Math.max(1,parseInt(h(this).val())),d=b.getSliceCount();d<c;d++)b.setValue(d,VVVV.PinTypes[b.typeName].defaultValue());b.setSliceCount(c);b.node.parentPatch.afterUpdate();a.preventDefault();return!1});for(f=f=0;f<e;f++)if(g=h(a.win.document).find("#values .row").eq(f+1),
d||!g.children().first().hasClass("pininputbox")){if(VVVV.PinTypes[c.typeName].openInputBox&&c.direction!=VVVV.PinDirection.Output&&!c.isConnected()&&void 0!=c.getValue(0)){var l=h('<div class="row value"><div style="height:100%">'+c.getValue(f).toString().replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div>");(function(b){l.find("div").click(function(){VVVV.PinTypes[c.typeName].openInputBox(a.win,h(this),c,b)})})(f)}else l=h('<div class="row value readonlyvalue"><div style="height:100%">'+c.getValue(f).toString().replace(/</g,
"&lt;").replace(/>/g,"&gt;")+"</div></div>");0<g.length?g.replaceWith(l):h(a.win.document).find("#values").append(l);"Color"==c.typeName&&l.find("div").css("background-color","rgba("+_(c.getValue(f).rgba).map(function(a){return parseInt(255*a)}).join(",")+")")}f++;for(g=h(a.win.document).find("#values .row");f<g.length;f++)g.eq(f).remove()}this.win=window.open(location.protocol+"//"+location.host+("/"==VVVV.Root[0]?"":location.pathname.replace(/\/[^\/]*$/,"")+"/")+VVVV.Root+"/inspektor.html","inspektor",
"location=no, width=250, height=600, toolbar=no");var f,b;insw=this.win;var a=this;this.update=function(){f&&(b?e(b):d())};this.setNode=function(a){f=a;d()};this.close=function(){this.win.close()}};VVVV.Editors.BrowserEditor.Interface=function(){function g(){return"Are you sure you want to leave? Unsaved changes in your patches will be lost."}var d=[],c={};this.inspector=void 0;this.enable=function(c,b){b=b||{};this.addPatch(c);this.openPatch(c,b.selector);if(!b.selector){var a=this;h(window).bind("beforeunload",
g);h(window).unload(function(){a.disable()});this.openInspector(VVVV.Root);d[0].window?b&&b.success&&b.success():b&&b.error&&b.error()}};this.openInspector=function(c,b){if(!this.inspector){this.inspector=new VVVV.Editors.BrowserEditor.Inspector(c);var a=this;h(this.inspector.win).bind("beforeunload",function(){console.log("closing inspektor");a.inspector=void 0})}};var e=[];this.addPatch=function(d){for(var b=d.id,a=d;void 0!=(a=a.parentPatch);)b+="-"+a.id;if(!(0<=e.indexOf(b)))for(e.push(b),d.editor=
this,b=VVVV.Helpers.prepareFilePath(d.nodename,d.parentPatch),void 0==c[b]&&(c[b]=[]),c[b].push(d),d=d.getSubPatches(),b=0;b<d.length;b++)this.addPatch(d[b])};this.removePatch=function(d){for(var b=d.getSubPatches(),a=0;a<b.length;a++)this.removePatch(b[a]);b=VVVV.Helpers.prepareFilePath(d.nodename,d.parentPatch);c[b].splice(c[b].indexOf(d),1);0==c[b].length&&delete c[b];console.log(c)};this.openPatch=function(c,b){d.push(new VVVV.Editors.BrowserEditor.PatchWindow(c,this,b))};this.update=function(d,
b){for(var a=VVVV.Helpers.prepareFilePath(d.nodename,d.parentPatch),e=c[a].length,g=0;g<e;g++)c[a][g].doLoad(b),c[a][g].afterUpdate()};this.disable=function(){for(var c=0;c<d.length;c++)d[c].close();this.inspector&&this.inspector.close();h(window).unbind("beforeunload",g)};this.save=function(c,b){var a=h("<a>save</a>");h("body").append(a);a.attr("href","data:application/octet-stream;charset=utf-8,"+encodeURIComponent(b));a.attr("download",c.replace(/.*\//,""));a[0].click();a.remove()};this.sendUndo=
function(){}};VVVV.VVVViewer=function(g,d){(new VVVV.Editors.BrowserEditor.Interface).enable(g,{selector:d})};VVVV.Editors.edit=VVVV.Editors.BrowserEditor.Interface})(vvvvjs_jquery);VVVV.Themes=VVVV.Themes||{};
VVVV.Themes.Tron={scaleX:1.2,scaleY:1.8,categoryColors:{Value:"#78B4A8",Animation:"#51de3a","3d":"#78B4A8",Boolean:"#78B4A8",Complex:"#78B4A8","2d":"#78B4A8",Spreads:"#78B4A8",String:"#d54c70",EX9:"#d6bf00",Canvas:"#d6bf00",HTML5:"#d6bf00",Transform:"#ba4b36","default":"#AAAAAA"},chart:function(h){},background:function(h){h.attr("fill","#666666")},node:function(h){h.attr("x",-1).attr("width",function(g){return g.getWidth()*VVVV.Themes.Tron.scaleX+2}).attr("rx",1).attr("ry",1).attr("stroke","rgba(127, 190, 183, 1.0)").attr("stroke-width",
1).attr("fill",function(g){return g.isComment()?"rgba(0,0,0,0)":g.not_implemented?"rgba(255,0,0,1)":"rgba(127, 190, 183, 0.6)"})},inputPinBar:function(h){h.attr("height",2).attr("fill","rgba(0,0,0,0)")},outputPinBar:function(h){h.attr("y",function(g){return g.getHeight()*VVVV.Theme.scaleY-2}).attr("height",2).attr("fill","rgba(0,0,0,0)")},descriptiveNameText:function(h){h.attr("shape-rendering","crispEdges").attr("dy",function(g){return g.getHeight()*VVVV.Theme.scaleY+12}).attr("dx",2).attr("font-size",
10).attr("font-family","Lucida Sans Unicode").attr("fill","white")},descriptiveNameBackground:function(h){h.attr("fill",function(g){return void 0==g.invisiblePins["Descriptive Name"]||""==g.invisiblePins["Descriptive Name"].getValue(0)?"rgba(0,0,0,0)":"rgba(0,0,0,1)"}).attr("y",function(g){return g.getHeight()*VVVV.Theme.scaleY}).attr("width",5).attr("height",14)},nodeLabel:function(h){h.attr("fill","white").attr("shape-rendering","crispEdges").attr("dy",function(g,d){return 18*d+19}).attr("dx",4).attr("font-size",
11).attr("font-family","Lucida Sans Unicode")},inputPin:function(h){h.attr("y",-2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(g){return g.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},inputPinHover:function(h){h.attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-6)},inputPinValue:function(h){h.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},outputPin:function(h){h.attr("y",
2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(g){return g.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},outputPinHover:function(h){h.attr("width",4).attr("height",4).attr("fill","rgba(1,1,1,1)").attr("y",6)},outputPinValue:function(h){h.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},connectablePin:function(h){h.attr("width",4).attr("height",3).attr("fill","rgba(1,1,1,1)").attr("y",
function(g){return g.direction==PinDirection.Input?-3:3})},link:function(h){h.append("svg:path").attr("stroke","rgba(0, 0, 0, 0)").attr("fill","rgba(0,0,0,0)").attr("stroke-width",4).attr("d",function(g){var d=(g.toPin.node.y-g.fromPin.node.y-g.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>d&&(d=30);return"M"+(g.fromPin.x+g.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(g.fromPin.y+g.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(g.fromPin.x+g.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(g.fromPin.y+
g.fromPin.node.y*VVVV.Theme.scaleY+4+d)+" "+(g.toPin.x+g.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(g.toPin.y+g.toPin.node.y*VVVV.Theme.scaleY-d)+" "+(g.toPin.x+g.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(g.toPin.y+g.toPin.node.y*VVVV.Theme.scaleY+0.5)});h.append("svg:path").attr("stroke","#FFF").attr("fill","rgba(0,0,0,0)").attr("stroke-width",0.5).attr("d",function(g){var d=(g.toPin.node.y-g.fromPin.node.y-g.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>d&&(d=30);return"M"+(g.fromPin.x+g.fromPin.node.x*
VVVV.Theme.scaleX+2+0.5)+","+(g.fromPin.y+g.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(g.fromPin.x+g.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(g.fromPin.y+g.fromPin.node.y*VVVV.Theme.scaleY+4+d)+" "+(g.toPin.x+g.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(g.toPin.y+g.toPin.node.y*VVVV.Theme.scaleY-d)+" "+(g.toPin.x+g.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(g.toPin.y+g.toPin.node.y*VVVV.Theme.scaleY+0.5)})},currentLink:function(h){h.attr("stroke","#FFF").attr("stroke-width",1)}};
VVVV.Theme=VVVV.Themes.Tron;
