var VVVV_ENV="production",vvvvjs_jquery=$.noConflict();$=vvvvjs_jquery;
(function(k){k.ajaxPrefilter(function(b,g,c){if("script"==b.dataType||"script"==g.dataType)b.cache=!0});window.console||(window.console={log:function(b){}});VVVV={Nodes:{},PinTypes:{},Types:{},NodeLibrary:{},NodeNames:[],Patches:{},Editors:{},onNotImplemented:function(b){console.log("Warning: "+b+" is not implemented.")},loadCounter:0,loadScript:function(b,g){var c=document.getElementsByTagName("head")[0],e=document.createElement("script");e.async=!1;e.src=VVVV.Root+"/"+b;g&&e.addEventListener("load",
g);VVVV.loadCounter++;c.appendChild(e)},init:function(b,g,c){function e(){var d=new VVVV.Core.Patch("");_(VVVV.Nodes).each(function(a){var h=new a(0,d);"development"==VVVV_ENV&&console.log("Registering "+h.nodename);VVVV.NodeLibrary[h.nodename.toLowerCase()]=a;VVVV.NodeNames.push(h.nodename)});"development"==VVVV_ENV&&console.log("done ...");VVVV.MainLoops=[];k("script[language='VVVV']").each(function(a){var d=new VVVV.Core.Patch(k(this).attr("src"),function(){var a=new VVVV.Core.MainLoop(this);VVVV.MainLoops.push(a)});
VVVV.Patches[a]=d});"function"===typeof c&&c.call()}VVVV.Root=b||"./";"development"==VVVV_ENV&&console.log("loading vvvv.js ...");if("development"==VVVV_ENV){document.getElementsByTagName("head");var f=function(d){d.target.removeEventListener("load",f);0>=--VVVV.loadCounter&&e()};0==k("script[src*=thirdparty]").length&&VVVV.loadScript("thirdparty.js",f);0==k("script[src*=underscore]").length&&VVVV.loadScript("lib/underscore/underscore-min.js",f);0!=k('script[src*="d3.js"]').length||"full"!=g&&"vvvviewer"!=
g||VVVV.loadScript("lib/d3-v3/d3.v3.min.js",f);0!=k("script[src*=glMatrix]").length||"full"!=g&&"run"!=g||VVVV.loadScript("lib/glMatrix-0.9.5.min.js",f);if(0==k('script[src*="vvvv.core.js"]').length){VVVV.loadScript("core/vvvv.core.js",f);if("run"==g||"full"==g)VVVV.loadScript("mainloop/vvvv.mainloop.js",f),VVVV.loadScript("mainloop/vvvv.dominterface.js",f),VVVV.loadScript("nodes/vvvv.nodes.value.js",f),VVVV.loadScript("nodes/vvvv.nodes.string.js",f),VVVV.loadScript("nodes/vvvv.nodes.boolean.js",
f),VVVV.loadScript("nodes/vvvv.nodes.color.js",f),VVVV.loadScript("nodes/vvvv.nodes.spreads.js",f),VVVV.loadScript("nodes/vvvv.nodes.spectral.js",f),VVVV.loadScript("nodes/vvvv.nodes.animation.js",f),VVVV.loadScript("nodes/vvvv.nodes.network.js",f),VVVV.loadScript("nodes/vvvv.nodes.system.js",f),VVVV.loadScript("nodes/vvvv.nodes.canvas.js",f),VVVV.loadScript("nodes/vvvv.nodes.html5.js",f),VVVV.loadScript("nodes/vvvv.nodes.transform.js",f),VVVV.loadScript("nodes/vvvv.nodes.vectors.js",f),VVVV.loadScript("nodes/vvvv.nodes.webgl.js",
f),VVVV.loadScript("nodes/vvvv.nodes.complex.js",f),VVVV.loadScript("nodes/vvvv.nodes.enumerations.js",f),VVVV.loadScript("nodes/vvvv.nodes.2d.js",f),VVVV.loadScript("nodes/vvvv.nodes.3d.js",f),VVVV.loadScript("nodes/vvvv.nodes.node.js",f),VVVV.loadScript("nodes/vvvv.nodes.astronomy.js",f),VVVV.loadScript("nodes/vvvv.nodes.xml.js",f),VVVV.loadScript("nodes/vvvv.nodes.differential.js",f);VVVV.loadScript("editors/vvvv.editors.browser_editor.js",f)}}"production"==VVVV_ENV&&e()}}})(vvvvjs_jquery);(function(k){VVVV.MousePositions={_all:{x:0,y:0,wheel:0,lb:0,mb:0,rb:0}};VVVV.PinDirection={Input:0,Output:1,Configuration:2};VVVV.PinTypes.Generic={typeName:"Generic",reset_on_disconnect:!0,defaultValue:function(){return"0"}};VVVV.PinTypes.Value={typeName:"Value",reset_on_disconnect:!1,defaultValue:function(){return 0},primitive:!0};VVVV.PinTypes.String={typeName:"String",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0};VVVV.PinTypes.Enum={typeName:"Enum",reset_on_disconnect:!1,
defaultValue:function(){return""},primitive:!0};VVVV.Helpers={translateOperators:function(b){b=b.replace("Add","+");b=b.replace("Subtract","-");b=b.replace("Multiply","*");b=b.replace("Divide","/");b=b.replace("EQ","=");b=b.replace("GT",">");b=b.replace("GTE",">=");b=b.replace("LT","<");return b=b.replace("LTE","<=")},prepareFilePath:function(b,g){b=b.replace(/\\/g,"/");return b.match(/^%VVVV%/)?b.replace("%VVVV%",VVVV.Root):b.match(/^%PAGE%/)?b.replace("%PAGE%",location.pathname):b.match(/^(\/|.+:\/\/)/)?
b:g?g.getAbsolutePath()+b:b},dynamicPins:function(b,g,c,e){for(var f=g.length;f<c;f++)g[f]=e.call(b,f);for(f=c;f<g.length;f++)b.removeInputPin(g[f].pinname);g.length=c;b.parentPatch.afterUpdate()}};VVVV.Core={Pin:function(b,g,c,e,f){this.direction=g;this.pinname=b;this.links=[];this.values=[];this.values.changed=!0;this.node=e;this.reset_on_disconnect=this.active=!1;this.masterPin=this.slavePin=void 0;this.connectionChangedHandlers={};this.enumOptions=[];this.getValue=function(d,a){if(!a||1==a)return this.values[d%
this.values.length];for(var h=[],f=0;f<a;f++)h.push(this.values[(d*a+f)%this.values.length]);return h};this.setValue=function(d,a){this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.primitive&&this.values[d]==a||this.markPinAsChanged(),this.values[d]=a);this.node.isIOBox&&"Descriptive Name"==this.pinname&&(this.node.parentPatch.domInterface?this.node.parentPatch.domInterface.connect(this.node):this.node.parentPatch.parentPatch&&this.node.registerInterfacePin())};this.markPinAsChanged=
function(){this.values.changed=!0};this.pinIsChanged=function(){return this.values.changed};this.connect=function(d){this.values=d.values;if(this.direction==VVVV.PinDirection.Output){d=this.links.length;for(var a=0;a<d;a++)this.links[a].toPin.values=this.values}this.slavePin&&(this.slavePin.values=this.values);this.markPinAsChanged()};this.disconnect=function(){this.values=this.values.slice(0)};this.isConnected=function(){return 0<this.links.length||this.masterPin&&this.masterPin.isConnected()};this.getSliceCount=
function(){return this.values.length};this.setSliceCount=function(d){this.values.length!=d&&(this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.values.length=d),this.markPinAsChanged())};this.setType=function(d){if(d.typeName!=this.typeName){var a=this;delete this.connectionChangedHandlers.nodepin;delete this.connectionChangedHandlers.webglresource;_(d.connectionChangedHandlers).each(function(h,f){a.connectionChangedHandlers[f]=d.connectionChangedHandlers[f]});this.typeName=d.typeName;
this.defaultValue=d.defaultValue;this.direction==VVVV.PinDirection.Input&&(this.defaultValue&&!this.isConnected())&&(this.setValue(0,this.defaultValue()),this.setSliceCount(1));void 0!=d.reset_on_disconnect&&(this.reset_on_disconnect=d.reset_on_disconnect)}};void 0==f&&(f=VVVV.PinTypes.Generic,this.unvalidated=!0);this.setType(f);c&&0<c.length&&(this.values=c.slice(0),this.values.changed=!0);this.reset=function(){this.values=[];this.slavePin&&(this.slavePin.values=this.values);this.defaultValue?(this.setValue(0,
this.defaultValue()),this.setSliceCount(1)):this.values=c.slice(0);this.markPinAsChanged()};this.connectionChanged=function(){var d=this;_(this.connectionChangedHandlers).each(function(a){d.f=a;d.f()})}},Node:function(b,g,c){this.nodename=g;this.id=b;this.height=this.width=this.y=this.x=0;this.isShader=this.isIOBox=!1;this.resourcesPending=0;this.auto_nil=!0;this.setupObject=function(){this.inputPins={};this.outputPins={};this.invisiblePins={};this.defaultPinValues={}};this.setupObject();this.delays_output=
this.auto_evaluate=!1;this.dirty=!0;(this.parentPatch=c)&&(this.parentPatch.nodeMap[b]=this);this.addDefault=function(e,f){this.defaultPinValues[e]=f};this.addInputPin=function(e,f,d){f=new VVVV.Core.Pin(e,VVVV.PinDirection.Input,f,this,d);this.inputPins[e]=f;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_in_"+e]=f);this.applyPinValuesFromXML(e);return f};this.addOutputPin=function(e,f,d){f=new VVVV.Core.Pin(e,VVVV.PinDirection.Output,f,this,d);this.outputPins[e]=f;this.parentPatch&&(this.parentPatch.pinMap[this.id+
"_out_"+e]=f);return f};this.removeInputPin=function(e){if(this.inputPins[e]){var f=this.inputPins[e].links[0];f&&(f.fromPin.connectionChanged(),f.destroy());delete this.inputPins[e];this.dirty=!0}};this.removeOutputPin=function(e){if(this.outputPins[e]){for(var f=this.outputPins[e].links.length,d=0;d<f;d++){var a=this.outputPins[e].links[d];a.toPin.connectionChanged();a.destroy()}delete this.outputPins[e];this.dirty=!0}};this.addInvisiblePin=function(e,f,d){f=new VVVV.Core.Pin(e,VVVV.PinDirection.Configuration,
f,this,d);this.invisiblePins[e]=f;this.parentPatch.pinMap[this.id+"_inv_"+e]=f;void 0!=this.defaultPinValues[e]&&(f.values=this.defaultPinValues[e],f.values.changed=!0);return f};this.IOBoxType=function(){var e=/^IOBox \((.*)\)/.exec(this.nodename);return e&&1<e.length?e[1]:""};this.IOBoxInputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.inputPins["Y Input Value"];case "String":return this.inputPins["Input String"];case "Color":return this.inputPins["Color Input"];case "Node":return this.inputPins["Input Node"]}};
this.IOBoxOutputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.outputPins["Y Output Value"];case "String":return this.outputPins["Output String"];case "Color":return this.outputPins["Color Output"];case "Node":return this.outputPins["Output Node"]}};this.IOBoxRows=function(){return this.invisiblePins.Rows?this.invisiblePins.Rows.getValue(0):1};this.isComment=function(){return this.isIOBox&&0==_(this.outputPins).size()};this.label=function(){if(this.isIOBox)return this.IOBoxInputPin().getValue(0)?
this.IOBoxInputPin().getValue(0).toString():"";if(this.isSubpatch)return"||"+this.nodename.match(/([^\/]+)\.v4p$/)[1];var e=this.nodename.replace(/\s\(.+\)/,"");return e=VVVV.Helpers.translateOperators(e)};this.getWidth=function(){var e;e=100==this.width||0==this.width?this.isIOBox?60:Math.max(18,6*(this.label().length+2)):this.width/15;return e=Math.max(e,12*(_(this.inputPins).size()-1)+4)};this.getHeight=function(){return this.isIOBox&&100==this.height?18*this.IOBoxRows():100==this.height||this.isSubpatch?
18:Math.max(18,this.height/15)};this.getUpstreamNodes=function(){var e=[];_(this.inputPins).each(function(f){0<f.links.length&&e.push(f.links[0].fromPin.node)});return e};this.getDownstreamNodes=function(){var e=[];_(this.outputPins).each(function(f){for(var d=0;d<f.links.length;d++)e.push(f.links[d].toPin.node)});return e};this.findDownstreamNodes=function(e){var f=[];_(this.outputPins).each(function(d){for(var a=0;a<d.links.length;a++)d.links[a].toPin.node.nodename==e?f.push(d.links[a].toPin.node):
f=d.links[a].toPin.slavePin?f.concat(d.links[a].toPin.slavePin.node.findDownstreamNodes(e)):d.links[a].toPin.node.isIOBox&&d.links[a].toPin.node.IOBoxOutputPin().slavePin?f.concat(d.links[a].toPin.node.IOBoxOutputPin().slavePin.node.findDownstreamNodes(e)):f.concat(d.links[a].toPin.node.findDownstreamNodes(e))});return f};this.hasNilInputs=function(){var e=!1;_(this.inputPins).each(function(f){0==f.getSliceCount()&&(e=!0)});return e};this.isDirty=function(){if(this.dirty)return!0;for(var e in this.inputPins)if(this.inputPins[e].values.changed)return!0;
for(e in this.invisiblePins)if(this.invisiblePins[e].values.changed)return!0;return!1};this.getMaxInputSliceCount=function(){var e=0,f;for(f in this.inputPins)this.inputPins[f].getSliceCount()>e&&(e=this.inputPins[f].values.length);return e};this.applyPinValuesFromXML=function(e){if(this.inputPins[e]){var f=this.inputPins[e];e=this.defaultPinValues[e];if(void 0!=e&&(!f.reset_on_disconnect||1<e.length||""!=e[0])){for(var d=0;d<e.length;d++)f.values[d]!=e[d]&&f.setValue(d,e[d]);f.setSliceCount(e.length)}}};
this.registerInterfacePin=function(){var e=this;if(this.isIOBox&&this.parentPatch.parentPatch&&""!=this.invisiblePins["Descriptive Name"].getValue(0)){var f=this.invisiblePins["Descriptive Name"].getValue(0);this.IOBoxInputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.masterPin){"development"==VVVV_ENV&&console.log("deleting "+f+" input pin because node has input connection...");for(var d=0;d<this.masterPin.links.length;d++)this.masterPin.links[d].destroy();
this.disconnect();e.parentPatch.removeInputPin(f);this.masterPin=void 0}0==e.IOBoxOutputPin().links.length&&(e.IOBoxOutputPin().slavePin?e.IOBoxOutputPin().slavePin.pinname!=f&&("development"==VVVV_ENV&&console.log("renaming "+e.IOBoxOutputPin().slavePin.pinname+" to "+f),e.parentPatch.outputPins[f]=e.parentPatch.outputPins[e.IOBoxOutputPin().slavePin.pinname],e.parentPatch.removeOutputPin(e.IOBoxOutputPin().slavePin.pinname),e.IOBoxOutputPin().slavePin.pinname=f):("development"==VVVV_ENV&&console.log("interfacing output pin detected: "+
f),d=e.parentPatch.outputPins[f],void 0==d&&(d=e.parentPatch.addOutputPin(f,e.IOBoxOutputPin().values)),d.setType(VVVV.PinTypes[e.IOBoxOutputPin().typeName]),e.IOBoxOutputPin().slavePin=d,d.masterPin=e.IOBoxOutputPin(),d.connect(e.IOBoxOutputPin())));this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxInputPin().connectionChanged();this.IOBoxOutputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.slavePin){"development"==VVVV_ENV&&console.log("deleting "+
f+" output pin because node "+e.id+" has output connection...");for(var d=0;d<this.slavePin.links.length;d++)this.slavePin.links[d].destroy();this.slavePin.disconnect();e.parentPatch.removeOutputPin(f);this.slavePin=void 0}if(0==e.IOBoxInputPin().links.length)if(e.IOBoxInputPin().masterPin)e.IOBoxInputPin().masterPin.pinname!=f&&(console.log("renaming "+e.IOBoxInputPin().masterPin.pinname+" to "+f),e.parentPatch.inputPins[f]=e.parentPatch.inputPins[e.IOBoxInputPin().masterPin.pinname],e.parentPatch.removeInputPin(e.IOBoxInputPin().masterPin.pinname),
e.IOBoxInputPin().masterPin.pinname=f);else{"development"==VVVV_ENV&&console.log("interfacing input pin detected: "+f);d=e.parentPatch.inputPins[f];void 0==d&&("development"==VVVV_ENV&&console.log("creating new input pin at parent patch, using IOBox values"),d=e.parentPatch.addInputPin(f,e.IOBoxInputPin().values));var a=d.values.slice();d.setType(VVVV.PinTypes[e.IOBoxInputPin().typeName]);d.unvalidated&&VVVV.PinTypes[d.typeName].primitive&&!d.isConnected()&&(d.values=a,d.values.changed=!0);d.unvalidated=
!1;d.slavePin=e.IOBoxInputPin();e.IOBoxInputPin().masterPin=d;e.IOBoxInputPin().connect(d)}this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxOutputPin().connectionChanged()}};this.setup=function(){this.addInvisiblePin("Descriptive Name",[""],VVVV.PinTypes.String)};this.initialize=function(){};this.evaluate=function(){_(this.outputPins).each(function(e){e.setValue(0,"not calculated")})};this.destroy=function(){this.isIOBox&&(this.IOBoxInputPin().masterPin&&(this.parentPatch.removeInputPin(this.IOBoxInputPin().masterPin.pinname),
this.parentPatch.parentPatch.afterUpdate()),this.IOBoxOutputPin().slavePin&&(this.parentPatch.removeOutputPin(this.IOBoxOutputPin().slavePin.pinname),this.parentPatch.parentPatch.afterUpdate()))};this.serialize=function(){var e=k("<NODE>");e.attr("id",this.id);e.attr("nodename",this.nodename);e.attr("systemname",this.nodename);this.shaderFile&&e.attr("filename",this.shaderFile.replace(".vvvvjs.fx",".fx").replace("%VVVV%/effects","%VVVV%/lib/nodes/effects"));this.isSubpatch&&(e.attr("filename",this.nodename),
e.attr("systemname",this.nodename.match("(.*).v4p$")[1]));this.isIOBox?e.attr("componentmode","InABox"):e.attr("componentmode","Hidden");var f=k("<BOUNDS>");this.isIOBox?f.attr("type","Box"):f.attr("type","Node");f.attr("left",parseInt(15*this.x));f.attr("top",parseInt(15*this.y));f.attr("width",parseInt(this.width));f.attr("height",parseInt(this.height));e.append(f);var d=this;_(this.inputPins).each(function(a){var h=k("<PIN>");h.attr("pinname",a.pinname);h.attr("visible","1");(!a.isConnected()||
a.masterPin)&&(VVVV.PinTypes[a.typeName].primitive&&d.defaultPinValues[a.pinname])&&h.attr("values",_(d.defaultPinValues[a.pinname]).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));e.append(h)});_(this.invisiblePins).each(function(a){var d=k("<PIN>");d.attr("pinname",a.pinname);d.attr("visible","0");VVVV.PinTypes[a.typeName].primitive&&d.attr("values",_(a.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));e.append(d)});return e}},Link:function(b,
g){this.fromPin=b;this.toPin=g;this.fromPin.links.push(this);this.toPin.links.push(this);this.destroy=function(){this.fromPin.links.splice(this.fromPin.links.indexOf(this),1);this.toPin.links.splice(this.toPin.links.indexOf(this),1);this.fromPin.node.parentPatch.linkList.splice(this.fromPin.node.parentPatch.linkList.indexOf(this),1);this.toPin.reset_on_disconnect?this.toPin.reset():(this.toPin.disconnect(),this.toPin.node.defaultPinValues[this.toPin.pinname]=this.toPin.values.slice(0))};this.serialize=
function(){var c=k("<LONK>");c.attr("srcnodeid",this.fromPin.node.id);c.attr("srcpinname",this.fromPin.pinname);c.attr("dstnodeid",this.toPin.node.id);c.attr("dstpinname",this.toPin.pinname);return c}},Patch:function(b,g,c,e,f){function d(a){if(void 0==a)return[];if("45_26">=this.vvvv_version)return separator=/\|/.test(a)?"|":",",a.split(separator).filter(function(a,d){return""!=a});for(var d=[],h="",f=!1,e=a.length,m=0;m<e;m++)","!=a[m]||f?"|"==a[m]?"|"!=a[m+1]||m+1==a.length-1?f=!f:h+=a[++m]:h+=
a[m]:(d.push(h),h="");d.push(h);return d}function a(){var a=window.location.hash.match("#([^/]+)/"+l.ressource+"$");a&&(console.log("launching editor ..."),(new VVVV.Editors[a[1]]).enable(l))}this.ressource=b;this.vvvv_version="45_26.1";this.boundingBox={width:0,height:0};this.windowHeight=this.windowWidth=500;this.pinMap={};this.nodeMap={};this.nodeList=[];this.linkList=[];this.pinList=[];this.evaluationRecipe=[];this.mainloop=void 0;this.success=g;this.error=c;this.editor=void 0;this.setupObject();
e&&(this.parentPatch=e);f&&(this.id=f);var h=!1;this.getAbsolutePath=function(){var a=this.getRelativePath();this.parentPatch&&(a=this.parentPatch.getAbsolutePath()+a);return a};this.getRelativePath=function(){return this.nodename.match(/(.*\/)?[^/]+\.v4p/)[1]||""};this.destroy=function(){for(var a=0;a<this.nodeList.length;a++)this.nodeList[a].destroy(),delete this.nodeMap[this.nodeList[a].id],delete this.nodeList[a]};if("45_26">=this.vvvv_version)var m={},t={},q={},n={};var l=this;this.doLoad=function(a,
h){function f(a){"complete"==c&&(t={});k(a).find('link[deleteme="pronto"]').each(function(){for(var a=!1,d=0;d<l.linkList.length;d++)l.linkList[d].fromPin.node.id==k(this).attr("srcnodeid")&&(l.linkList[d].fromPin.pinname==k(this).attr("srcpinname")&&l.linkList[d].toPin.node.id==k(this).attr("dstnodeid")&&l.linkList[d].toPin.pinname==k(this).attr("dstpinname"))&&(a=l.linkList[d]);if(a){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var d=a.fromPin,h=a.toPin;
a.destroy();d.connectionChanged();h.connectionChanged();h.markPinAsChanged()}});k(a).find('link[deleteme!="pronto"]').each(function(){var a=l.pinMap[k(this).attr("srcnodeid")+"_out_"+k(this).attr("srcpinname")],d=l.pinMap[k(this).attr("dstnodeid")+"_in_"+k(this).attr("dstpinname")];void 0==a&&l.nodeMap[k(this).attr("srcnodeid")]&&(a=l.nodeMap[k(this).attr("srcnodeid")].addOutputPin(k(this).attr("srcpinname"),void 0));void 0==d&&l.nodeMap[k(this).attr("dstnodeid")]&&(d=l.nodeMap[k(this).attr("dstnodeid")].addInputPin(k(this).attr("dstpinname"),
void 0));if(a&&d){for(var h=!1,f=0;f<l.linkList.length;f++)l.linkList[f].fromPin.node.id==a.node.id&&(l.linkList[f].fromPin.pinname==a.pinname&&l.linkList[f].toPin.node.id==d.node.id&&l.linkList[f].toPin.pinname==d.pinname)&&(h=l.linkList[f]);h||(h=new VVVV.Core.Link(a,d),a.connectionChanged(),d.connectionChanged(),l.linkList.push(h),d.connect(a));"complete"==c&&(t[a.node.id+"_"+a.pinname+"-"+d.node.id+"_"+d.pinname]=h)}});"complete"==c&&(_(m).each(function(a,d){if(void 0==t[d]){"development"==VVVV_ENV&&
console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var h=a.fromPin,f=a.toPin;a.destroy();h.connectionChanged();f.connectionChanged();f.markPinAsChanged();f.reset_on_disconnect&&f.reset()}}),m={},_(t).each(function(a,d){m[d]=a}))}var e=this;do e.dirty=!0;while(e=e.parentPatch);if(e=/^<!DOCTYPE\s+PATCH\s+SYSTEM\s+"(.+)\\(.+)\.dtd/.exec(a))l.vvvv_version=e[2].replace(/[a-zA-Z]+/,"_");var c="diff";if(/\s<PATCH/.test(a)||"45_26">=l.vvvv_version)c="complete","development"==VVVV_ENV&&console.log("complete: "+
this.nodename);e=k(a).find('bounds[type="Window"]').first();0<e.length&&(l.windowWidth=e.attr("width")/15,l.windowHeight=e.attr("height")/15);"complete"==c&&(n={});k(a).find("node").each(function(){if("pronto"==k(this).attr("createme")&&void 0!=l.nodeMap[k(this).attr("id")]){var e=l.nodeMap[k(this).attr("id")];"development"==VVVV_ENV&&console.log("node renamed, so deleting node "+e.id+" / "+e.nodename);_(e.inputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.fromPin.connectionChanged()})});
_(e.outputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.toPin.connectionChanged();a.toPin.markPinAsChanged()})});l.nodeList.splice(l.nodeList.indexOf(e),1);delete l.nodeMap[e.id]}var m;m="InABox"==k(this).attr("componentmode")?k(this).find('bounds[type="Box"]').first():k(this).find('bounds[type="Node"]').first();var t=void 0!=l.nodeMap[k(this).attr("id")];if(t)e=l.nodeMap[k(this).attr("id")];else{var q=""!=k(this).attr("systemname")?k(this).attr("systemname"):k(this).attr("nodename");
if(void 0==q)return;if(void 0!=VVVV.NodeLibrary[q.toLowerCase()])e=new (VVVV.NodeLibrary[q.toLowerCase()])(k(this).attr("id"),l),VVVV.NodeLibrary[q.toLowerCase()].requirements&&(l.resourcesPending++,_(VVVV.NodeLibrary[q.toLowerCase()].requirements).each(function(a){void 0===VVVV.LoadedLibs[a]&&VVVV.loadScript(VVVV.ThirdPartyLibs[a],function(){l.resourcesPending--})}));else if(/.fx$/.test(k(this).attr("filename")))e=new VVVV.Nodes.GenericShader(k(this).attr("id"),l),e.isShader=!0,e.shaderFile=k(this).attr("filename").replace(/\\/g,
"/").replace(/\.fx$/,".vvvvjs.fx").replace("lib/nodes/",""),e.nodename=q;else if(/.v4p$/.test(k(this).attr("filename"))){l.resourcesPending++;var g=this,e=new VVVV.Core.Patch(k(this).attr("filename"),function(){l.resourcesPending--;"development"==VVVV_ENV&&console.log(this.nodename+"invoking update links");f(a);l.editor&&l.editor.addPatch(this);if(this.auto_evaluate){var d=l;do d.auto_evaluate=!0;while(d=d.parentPatch)}this.setMainloop(l.mainloop);l.afterUpdate();l.updateEvaluationRecipe();0>=l.resourcesPending&&
h&&(h(),h=void 0)},function(){l.resourcesPending--;this.not_implemented=!0;VVVV.onNotImplemented(q);f(a);l.afterUpdate();l.updateEvaluationRecipe();0>=l.resourcesPending&&h&&(h(),h=void 0)},l,k(g).attr("id"));e.isSubpatch=!0;l.editor&&!e.editor&&l.editor.addPatch(e);l.nodeMap[e.id]=e}else e=new VVVV.Core.Node(k(this).attr("id"),q,l),e.not_implemented=!0,"diff"==c&&!0==VVVV.Config.auto_undo&&l.editor.sendUndo(),VVVV.onNotImplemented(q);"development"==VVVV_ENV&&"complete"!=c&&console.log(l.nodename+
": inserted new node "+e.nodename)}if(e.auto_evaluate){g=l;do g.auto_evaluate=!0;while(g=g.parentPatch)}if("pronto"==k(this).attr("deleteme")){"development"==VVVV_ENV&&console.log("removing node "+e.id);if(e.isSubpatch){e.editor&&e.editor.removePatch(e);g=e.getSubPatches();g.push(e);for(var b,s=0;s<g.length;s++)b=VVVV.Helpers.prepareFilePath(g[s].nodename,g[s].parentPatch),VVVV.Patches[b].splice(VVVV.Patches[b].indexOf(e),1),0==VVVV.Patches[b].length&&delete VVVV.Patches[b]}l.nodeList.splice(l.nodeList.indexOf(e),
1);e.destroy();delete l.nodeMap[e.id]}0<m.length&&(m.attr("left")&&(e.x=m.attr("left")/15,e.y=m.attr("top")/15,l.boundingBox.width=Math.max(l.boundingBox.width,e.x+100),l.boundingBox.height=Math.max(l.boundingBox.height,e.y+100)),m.attr("width")&&(e.width=m.attr("width"),e.height=m.attr("height")));/^iobox/.test(e.nodename.toLowerCase())&&(e.isIOBox=!0);t||e.setup();g=this;k(this).find("pin").each(function(){var h=k(this).attr("pinname"),f=d(k(this).attr("values"));void 0!=f&&0<f.length&&e.addDefault(h,
f);if(void 0==e.outputPins[h])if(void 0!=e.inputPins[h])e.inputPins[h].isConnected()||e.applyPinValuesFromXML(h);else if(void 0!=e.invisiblePins[h]){if(void 0!=f){for(var m=0;m<f.length;m++)e.invisiblePins[h].values[m]!=f[m]&&e.invisiblePins[h].setValue(m,f[m]);e.invisiblePins[h].setSliceCount(f.length)}}else 1==k(this).attr("visible")&&"Configuration"!=k(this).attr("pintype")||e.isSubpatch?"Output"==k(this).attr("pintype")||0<k(a).find("link[srcnodeid="+e.id+"]").filter("link[srcpinname='"+h.replace(/[\[\]]/,
"")+"']").length?void 0==e.outputPins[h]&&e.addOutputPin(h,f):void 0==e.inputPins[h]&&void 0==e.invisiblePins[h]&&e.addInputPin(h,f):void 0==e.inputPins[h]&&void 0==e.invisiblePins[h]&&e.addInvisiblePin(h,f)});t||(e.initialize(),l.nodeList.push(e));"complete"==c&&(n[e.id]=e)});"complete"==c&&(_(q).each(function(a,d){void 0==n[d]&&("development"==VVVV_ENV&&console.log("removing node "+a.id),l.nodeList.splice(l.nodeList.indexOf(a),1),delete l.nodeMap[a.id])}),q={},_(n).each(function(a,d){q[d]=a}));
0===this.resourcesPending&&f(a);this.updateEvaluationRecipe();0>=this.resourcesPending&&h&&(h(),h=void 0)};this.getSubPatches=function(){for(var a=[],d=0;d<this.nodeList.length;d++)this.nodeList[d].isSubpatch&&(a.push(this.nodeList[d]),a=a.concat(this.nodeList[d].getSubPatches()));return a};this.setMainloop=function(a){this.mainloop=a;for(var d=0;d<this.nodeList.length;d++)this.nodeList[d].isSubpatch&&this.nodeList[d].setMainloop(a)};this.afterEvaluate=function(){};this.afterUpdate=function(){};this.toXML=
function(){var a=k("<PATCH>"),d=k("<BOUNDS>");d.attr("type","Window");d.attr("width",parseInt(15*this.windowWidth));d.attr("height",parseInt(15*this.windowHeight));a.append(d);for(d=0;d<this.nodeList.length;d++)a.append(this.nodeList[d].serialize());for(d=0;d<this.linkList.length;d++)a.append(this.linkList[d].serialize());a='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n  '+a.wrapAll("<d></d>").parent().html();a=a.replace(/<patch/g,"<PATCH");a=a.replace(/<\/patch>/g,"\n  </PATCH>");
a=a.replace(/<node/g,"\n  <NODE");a=a.replace(/<\/node>/g,"\n  </NODE>");a=a.replace(/<bounds/g,"\n  <BOUNDS");a=a.replace(/<\/bounds>/g,"\n  </BOUNDS>");a=a.replace(/<pin/g,"\n  <PIN");a=a.replace(/<\/pin>/g,"\n  </PIN>");a=a.replace(/<lonk/g,"\n  <LINK");return a=a.replace(/<\/lonk>/g,"\n  </LINK>")};this.updateEvaluationRecipe=function(){function a(c){if(0>h.indexOf(c.id)){h.push(c.id);var t=c.getUpstreamNodes(),q=!1;_(t).each(function(h){void 0==d[h.id]&&(q=q||a(h))});h.pop()}q&&c.delays_output&&
f.push(c);if(!q&&0>h.indexOf(c.id)||c.delays_output){e.push(c);for(var l in c.inputPins)0==c.inputPins[l].links.length&&m.push(c.inputPins[l]);for(l in c.invisiblePins)m.push(c.invisiblePins[l]);for(l in c.outputPins)m.push(c.outputPins[l]);d[c.id]=c;return!1}return!0}this.evaluationRecipe=[];this.pinList=[];for(var d={},h=[],f=[],e=this.evaluationRecipe,m=this.pinList,c=0;c<this.nodeList.length;c++)(0==this.nodeList[c].getDownstreamNodes().length||this.nodeList[c].auto_evaluate||this.nodeList[c].delays_output)&&
void 0==d[this.nodeList[c].id]&&a(this.nodeList[c]);for(c=0;c<f.length;c++)a(f[c])};this.evaluate=function(){if(!(0<this.resourcesPending)){if(h)var a={},d=(new Date).getTime(),f=0;for(var e,m=0;m<this.evaluationRecipe.length;m++){var c=this.evaluationRecipe[m];h&&console.log(c.nodename);if(c.isDirty()||c.auto_evaluate||c.isSubpatch){h&&(d=(new Date).getTime());if(c.auto_nil&&!c.isSubpatch&&c.hasNilInputs())for(e in c.outputPins)c.outputPins[e].setSliceCount(0);else{try{c.evaluate()}catch(q){console.log("VVVV.Js / Error evaluating "+
c.nodename+": "+q.message)}c.dirty=!1}h&&(a[c.nodename]||(a[c.nodename]={count:0,dt:0}),f=(new Date).getTime()-d,a[c.nodename].count++,a[c.nodename].dt+=f,console.log(c.nodename+" / "+c.id+": "+f+"ms"))}}h&&(_(a).each(function(a,d){console.log(a.count+"x "+d+": "+a.dt+"ms")}),d=(new Date).getTime());this.afterEvaluate();h&&console.log("patch rendering: "+((new Date).getTime()-d)+"ms");h=!1}};this.clearChangedFlags=function(){for(var a=this.pinList.length;a--;)this.pinList[a].values.changed=!1};k(window).keydown(function(a){84==
a.which&&(a.altKey&&a.ctrlKey)&&(h=!0)});if(/\.v4p[^<>\s]*$/.test(b)){this.nodename=b;var r=this,s=b;this.parentPatch&&(s=VVVV.Helpers.prepareFilePath(b,this.parentPatch));VVVV.Patches[s]?r.doLoad(VVVV.Patches[s][0].toXML(),function(){VVVV.Patches[s].push(r);r.success&&r.success();r.afterUpdate()}):k.ajax({url:s,type:"get",dataType:"text",success:function(a){r.doLoad(a,function(){VVVV.Patches[s]=VVVV.Patches[s]||[];VVVV.Patches[s].push(r);r.success&&r.success();r.afterUpdate()})},error:function(){r.error&&
r.error()}})}else this.doLoad(b,function(){this.success&&this.success()});a();k(window).bind("hashchange",function(){a()})}};VVVV.Core.Patch.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Core.DOMInterface=function(b){function g(d){if("event"==d.property_class){var a=d.selector;"window"==a&&(a=window);"document"==a&&(a=document);k(a).each(function(a){d.values[a]=0;k(this).bind(d.property,function(){d.values[a]=1;return!1})})}}var c={},e={};b.domInterface=this;this.connect=function(d){_(c).each(function(a,h){a.node.id==d.id&&("event"==a.property_class&&k(a.selector).unbind(a.property),delete c[h])});_(e).each(function(a,h){a.node.id==d.id&&delete e[h]});var a=/([^\/]+)(\/(event|attribute|style)\/(.+))?/.exec(d.invisiblePins["Descriptive Name"].getValue(0));
if(null!=a){var h={selector:a[1],property_class:a[3],property:a[4],values:[],node:d};0!=k(h.selector).length&&(0==d.getUpstreamNodes().length?c[a[0]]=h:0==d.getDownstreamNodes().length&&(e[a[0]]=h),g(h))}};var f=this;_(b.nodeList).each(function(d){d.isIOBox&&void 0!=d.invisiblePins["Descriptive Name"]&&(f.connect(d),d.IOBoxInputPin().connectionChanged=function(){f.connect(d)})});this.populateInputConnectors=function(){var d,a;for(d in c)switch(a=c[d],a.property_class){case "event":a.values.length!=
a.node.IOBoxInputPin().values.length&&a.node.IOBoxInputPin().setSliceCount(a.values.length);for(var h=0;h<a.values.length;h++)void 0!=a.node.IOBoxInputPin().values[h]&&a.values[h]==a.node.IOBoxInputPin().values[h]||a.node.IOBoxInputPin().setValue(h,a.values[h]);break;default:for(this.fetchValuesFromDOM(a),a.values.length!=a.node.IOBoxInputPin().values.length&&a.node.IOBoxInputPin().setSliceCount(a.values.length),h=0;h<a.values.length;h++)a.node.IOBoxInputPin().getValue(h)!=a.values[h]&&a.node.IOBoxInputPin().setValue(h,
a.values[h])}};this.processOutputConnectors=function(){for(var d in e)switch(e[d].property_class){default:this.setDOMByIOBox(e[d])}for(d in c)if("event"==c[d].property_class)for(var a=0;a<c[d].values.length;a++)c[d].values[a]=0};this.fetchValuesFromDOM=function(d){d.values.length=0;k(d.selector).each(function(a){var h;if(void 0==d.property_class)switch(this.nodeName){case "INPUT":"text"==k(this).attr("type")&&(h=k(this).val());"checkbox"==k(this).attr("type")&&(h=k(this).attr("checked")?1:0);break;
default:h=k(this).text()}"attribute"==d.property_class&&(h=k(this).attr(d.property));"style"==d.property_class&&(h=k(this).css(d.property));d.values[a]=h})};this.setDOMByIOBox=function(d){if(d.node.IOBoxOutputPin().pinIsChanged()){var a=d.node.IOBoxInputPin().values,h=k(d.selector).length;void 0==d.property_class&&(k(d.selector).empty(),k(d.selector).val(""));for(var f=0;f<Math.max(a.length,h);f++){var e=f%h,c=f%a.length,n=k(d.selector).eq(e);if(0!=n.length){if(void 0==d.property_class)switch(n[0].nodeName){case "INPUT":n.val(k(d.selector).eq(e).val()+
a[c]);break;default:n.html(k(d.selector).eq(e).html()+a[c])}"attribute"==d.property_class&&n.attr(d.property,a[c]);"style"==d.property_class&&n.css(d.property,a[c])}}}}}})(vvvvjs_jquery);(function(k){VVVV.fps=60;VVVV.Core.MainLoop=function(b,g){function c(){if(0==b.resourcesPending){e++;var q=(new Date).getTime();a&&(t.deltaT=q-a);a=q;f.populateInputConnectors();b.evaluate();f.processOutputConnectors();b.clearChangedFlags();q=(new Date).getTime()-a;0==e%10&&(m&&(console.log(1/((a-h)/1E4)+"fps"),m=!1),h=a)}d&&window.setTimeout(function(){window.requestAnimationFrame(c)},Math.max(0,Math.round(1E3/VVVV.fps-q)))}VVVV.fps=g||60;var e=0,f=new VVVV.Core.DOMInterface(b),d=!0,a=void 0,h=0,
m=!1;this.deltaT=1E3/VVVV.fps;b.setMainloop(this);var t=this;this.stop=function(){d=!1};this.start=function(){d||(d=!0,c())};this.isRunning=function(){return d};c();k(window).keydown(function(a){(102==a.which||70==a.which)&&(a.altKey&&a.ctrlKey)&&(m=!0)})}})(vvvvjs_jquery);(function(k){VVVV.Nodes.Cross2d=function(b,g){this.constructor(b,"Cross (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X In",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y In",[0],VVVV.PinTypes.Value),f=this.addInputPin("Include Upper",[1],VVVV.PinTypes.Value),d=this.addInputPin("Include Lower",[1],VVVV.PinTypes.Value),a=this.addInputPin("Include Equal",[1],VVVV.PinTypes.Value),h=this.addOutputPin("X Out",
[0],VVVV.PinTypes.Value),m=this.addOutputPin("Y Out",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var t=0,q=0;q<e.getSliceCount();q++)for(var n=0;n<c.getSliceCount();n++)0.5>f.getValue(0)&&q>n||(0.5>d.getValue(0)&&q<n||0.5>a.getValue(0)&&q==n)||(h.setValue(t,c.getValue(n)),m.setValue(t,e.getValue(q)),t++);h.setSliceCount(t);m.setSliceCount(t)}};VVVV.Nodes.Cross2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Polar2d=function(b,g){this.constructor(b,"Polar (2d)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",[1],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++){var m=c.getValue(h),t=e.getValue(h);f.setValue(h,Math.atan2(t,m)/(2*Math.PI));d.setValue(h,Math.sqrt(m*
m+t*t))}f.setSliceCount(a);d.setSliceCount(a)}};VVVV.Nodes.Polar2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Cartesian2d=function(b,g){this.constructor(b,"Cartesian (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),e=this.addInputPin("Length",[1],VVVV.PinTypes.Value),f=this.addOutputPin("X",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++){var m=c.getValue(h),t=e.getValue(h);f.setValue(h,t*Math.cos(2*m*Math.PI));d.setValue(h,t*Math.sin(2*m*Math.PI))}f.setSliceCount(a);d.setSliceCount(a)}};VVVV.Nodes.Cartesian2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Points2Vector2d=function(b,g){this.constructor(b,"Points2Vector (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X1",
[0],VVVV.PinTypes.Value),e=this.addInputPin("Y1",[0],VVVV.PinTypes.Value),f=this.addInputPin("X2",[1],VVVV.PinTypes.Value),d=this.addInputPin("Y2",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Length",[1],VVVV.PinTypes.Value),t=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var q=this.getMaxInputSliceCount(),n=0;n<q;n++){var l=parseFloat(c.getValue(n)),g=parseFloat(e.getValue(n)),
b=parseFloat(f.getValue(n)),u=parseFloat(d.getValue(n)),b=b-l,u=u-g;a.setValue(n,l+b/2);h.setValue(n,g+u/2);m.setValue(n,Math.sqrt(b*b+u*u));t.setValue(n,Math.atan2(u,b)/(2*Math.PI))}a.setSliceCount(q);h.setSliceCount(q);m.setSliceCount(q);t.setSliceCount(q)}};VVVV.Nodes.Points2Vector2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Vector2Points2d=function(b,g){this.constructor(b,"Vector2Points (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};
this.auto_evaluate=!1;var c=this.addInputPin("X",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addInputPin("Length",[1],VVVV.PinTypes.Value),d=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X1",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y1",[0],VVVV.PinTypes.Value),m=this.addOutputPin("X2",[0],VVVV.PinTypes.Value),t=this.addOutputPin("Y2",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var q=this.getMaxInputSliceCount(),n=0;n<q;n++){var l=
parseFloat(c.getValue(n)),g=parseFloat(e.getValue(n)),b=parseFloat(f.getValue(n)),u=2*parseFloat(d.getValue(n)-0.25)*Math.PI,k=b/2*Math.sin(u),b=-b/2*Math.cos(u);a.setValue(n,l+k);h.setValue(n,g+b);m.setValue(n,l-k);t.setValue(n,g-b)}a.setSliceCount(q);h.setSliceCount(q);m.setSliceCount(q);t.setSliceCount(q)}};VVVV.Nodes.Vector2Points2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Attractor2d=function(b,g){this.constructor(b,"Attractor (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addInputPin("Attractor X",[0],VVVV.PinTypes.Value),d=this.addInputPin("Attractor Y",[0],VVVV.PinTypes.Value),a=this.addInputPin("Attractor Strength",[1],VVVV.PinTypes.Value),h=this.addInputPin("Attractor Power",[1],VVVV.PinTypes.Value),m=this.addInputPin("Attractor Radius",[0.1],VVVV.PinTypes.Value),t=this.addOutputPin("Output X",[0],
VVVV.PinTypes.Value),q=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var n=Math.max(c.getSliceCount(),e.getSliceCount()),l=Math.max(f.getSliceCount(),d.getSliceCount()),g,b,u,k,y,w,v=0;v<n;v++){g=parseFloat(c.getValue(v));b=parseFloat(e.getValue(v));for(var p=0;p<l;p++)if(u=parseFloat(f.getValue(p)),k=parseFloat(d.getValue(p)),attractorstrength=parseFloat(a.getValue(p)),y=parseFloat(h.getValue(p)),w=parseFloat(m.getValue(p)),u=g-u,k=b-k,0!=u||0!=k){var A=Math.sqrt(Math.pow(u,
2)+Math.pow(k,2)),B=0;A<=w&&(w=A/w,B=attractorstrength*(Math.pow(w,y)*(0>w?-1:0<w?1:0)/w-1));g+=u*B;b+=k*B}t.setValue(v,g);q.setValue(v,b)}t.setSliceCount(n);q.setSliceCount(n)}};VVVV.Nodes.Attractor2d.prototype=new VVVV.Core.Node;VVVV.Nodes.ConnectAll2d=function(b,g){this.constructor(b,"ConnectAll (2d)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X In",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y In",
[0],VVVV.PinTypes.Value),f=this.addOutputPin("X1 Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Y1 Out",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X2 Out",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y2 Out",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),t=0,q=0;q<m;q++)for(var n=q+1;n<m;n++)f.setValue(t,c.getValue(q)),d.setValue(t,e.getValue(q)),a.setValue(t,c.getValue(n)),h.setValue(t,e.getValue(n)),t++;f.setSliceCount(t);d.setSliceCount(t);a.setSliceCount(t);
h.setSliceCount(t)}};VVVV.Nodes.ConnectAll2d.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.Polar3d=function(b,g){this.constructor(b,"Polar (3d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y",[0],VVVV.PinTypes.Value),f=this.addInputPin("Z",[-1],VVVV.PinTypes.Value),d=this.addOutputPin("Pitch",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Yaw",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);
this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),t=0;t<m;t++){var q=c.getValue(t),n=e.getValue(t),l=f.getValue(t),g=Math.sqrt(q*q+n*n+l*l);a.setValue(t,Math.atan2(-q,-l)/(2*Math.PI));d.setValue(t,0==g?0:Math.acos(-n/g)/(2*Math.PI)-0.25);h.setValue(t,g)}a.setSliceCount(m);d.setSliceCount(m);h.setSliceCount(m)}};VVVV.Nodes.Polar3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Cartesian3d=function(b,g){this.constructor(b,"Cartesian (3d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Pitch",[0],VVVV.PinTypes.Value),e=this.addInputPin("Yaw",[0],VVVV.PinTypes.Value),f=this.addInputPin("Length",[1],VVVV.PinTypes.Value),d=this.addOutputPin("X",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Z",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),t=0;t<m;t++){var q=2*(c.getValue(t)+0.25)*Math.PI,g=2*e.getValue(t)*Math.PI,
l=f.getValue(t);h.setValue(t,-l*Math.cos(g)*Math.sin(q));d.setValue(t,-l*Math.sin(g)*Math.sin(q));a.setValue(t,-l*Math.cos(q))}d.setSliceCount(m);a.setSliceCount(m);h.setSliceCount(m)}};VVVV.Nodes.Cartesian3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Normalize3d=function(b,g){this.constructor(b,"Normalize (3d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("X",[1],VVVV.PinTypes.Value),e=this.addInputPin("Y",
[0],VVVV.PinTypes.Value),f=this.addInputPin("Z",[0],VVVV.PinTypes.Value),d=this.addOutputPin("NormalizedX",[1],VVVV.PinTypes.Value),a=this.addOutputPin("NormalizedY",[0],VVVV.PinTypes.Value),h=this.addOutputPin("NormalizedZ",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var t=this.getMaxInputSliceCount(),q=0;q<t;q++){var g=c.getValue(q),l=e.getValue(q),b=f.getValue(q),s=Math.sqrt(g*g+l*l+b*b);d.setValue(q,0==s?0:g/s);a.setValue(q,
0==s?0:l/s);h.setValue(q,0==s?0:b/s);m.setValue(q,s)}d.setSliceCount(t);a.setSliceCount(t);h.setSliceCount(t);m.setSliceCount(t)}};VVVV.Nodes.Normalize3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Normalize3dVector=function(b,g){this.constructor(b,"Normalize (3d Vector)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("XYZ",[],VVVV.PinTypes.Value),e=this.addOutputPin("NormalizedXYZ",[],VVVV.PinTypes.Value),
f=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d/3;a++){var h=c.getValue(a,3),m=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]);e.setValue(3*a,0==m?0:h[0]/m);e.setValue(3*a+1,0==m?0:h[1]/m);e.setValue(3*a+2,0==m?0:h[2]/m);f.setValue(a,m)}e.setSliceCount(3*Math.ceil(d/3));f.setSliceCount(Math.ceil(d/3))}};VVVV.Nodes.Normalize3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dCross=function(b,g){this.constructor(b,"Multiply (3d Cross)",
g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),e=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),f=this.addOutputPin("Output XYZ",[],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d/3;a++){var h=c.getValue(a,3),m=e.getValue(a,3);f.setValue(3*a+0,h[1]*m[2]-h[2]*m[1]);f.setValue(3*a+1,-(h[0]*m[2]-h[2]*m[0]));
f.setValue(3*a+2,h[0]*m[1]-h[1]*m[0])}f.setSliceCount(3*Math.ceil(d/3))}};VVVV.Nodes.Multiply3dCross.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dDot=function(b,g){this.constructor(b,"Multiply (3d Dot)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),e=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d/3;a++){var h=c.getValue(a,3),m=e.getValue(a,3);f.setValue(a,h[0]*m[0]+h[1]*m[1]+h[2]*m[2])}f.setSliceCount(Math.ceil(d/3))}};VVVV.Nodes.Multiply3dDot.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dVector=function(b,g){this.constructor(b,"Multiply (3d Vector)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform",
[],VVVV.PinTypes.Transform),e=this.addInputPin("XYZ UnTransformed",[0,0,0],VVVV.PinTypes.Value),f=this.addOutputPin("XYZ Transformed",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=Math.max(c.getSliceCount(),e.getSliceCount()/3),a=0;a<d;a++){var h=e.getValue(3*a,3),m=c.getValue(a);mat4.multiplyVec3(m,h);f.setValue(3*a+0,h[0]);f.setValue(3*a+1,h[1]);f.setValue(3*a+2,h[2])}f.setSliceCount(Math.ceil(3*d))}};VVVV.Nodes.Multiply3dVector.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.LFO=function(b,g){this.constructor(b,"LFO (Animation)",g);this.meta={authors:["Matthias Zauner, sebl, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable yet"]};this.auto_evaluate=!0;var c=this.addInputPin("Period",[1],VVVV.PinTypes.Value),e=this.addInputPin("Pause",[0],VVVV.PinTypes.Value),f=this.addInputPin("Reverse",[0],VVVV.PinTypes.Value),d=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),a=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Change",[0],VVVV.PinTypes.Value),t=this.addOutputPin("Cycles",[0],VVVV.PinTypes.Value),q=[],n=[],l=(new Date).getTime(),r=(new Date).getTime();this.evaluate=function(){var g=this.getMaxInputSliceCount();l=(new Date).getTime()-r;for(var b=0;b<g;b++){var k=c.getValue(b%c.values.length),y=e.getValue(b%e.values.length),w=f.getValue(b%f.values.length),v=d.getValue(b%d.values.length),p=a.getValue(b%a.values.length),A=0;void 0==q[b]&&
(q[b]=0);void 0==n[b]&&(n[b]=0);0.5>y&&(0!=k&&isFinite(k))&&(dv=1/(1E3*k)*l,0<w&&(dv*=-1),q[b]+=dv,0>q[b]&&(n[b]-=Math.ceil(-q[b]),q[b]=1+q[b],A=1),1<q[b]&&(n[b]+=Math.floor(q[b]),A=1));r=(new Date).getTime();0.5<=v&&(q[b]=0,n[b]=0,A=1);if(0.5>y||0.5<=v)h.setValue(b,(q[b]+p)%1),m.setValue(b,A),t.setValue(b,n[b]);q[b]%=1}h.setSliceCount(g);m.setSliceCount(g);t.setSliceCount(g);q.splice(g);n.splice(g)}};VVVV.Nodes.LFO.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearFilter=function(b,g){this.constructor(b,
"LinearFilter (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var c=this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),e=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);this.addOutputPin("Acceleration Out",[0],
VVVV.PinTypes.Value);var a=[],h=[],m=[],t=[],q=[],n=[];this.evaluate=function(){for(var l=this.getMaxInputSliceCount(),g=c.pinIsChanged()||e.pinIsChanged(),b=0;b<l;b++){void 0==a[b]&&(a[b]=(new Date).getTime());var k=this.parentPatch.mainloop.deltaT,z=parseFloat(c.getValue(b)),y=parseFloat(e.getValue(b));void 0==t[b]&&(t[b]=z);if(z!=h[b]||y!=m[b])n[b]=void 0,h[b]=z,m[b]=y,q[b]=0<m[b]?(h[b]-t[b])/(1E3*m[b]):0;Math.abs(q[b]*k)>Math.abs(h[b]-t[b])?t[b]=h[b]:t[b]+=q[b]*k;0!=n[b]&&(f.setValue(b,t[b]),
d.setValue(b,q[b]));n[b]=h[b]-t[b];a[b]=(new Date).getTime()}g&&f.getSliceCount()!=l&&(h.splice(l),m.splice(l),a.splice(l),t.splice(l),q.splice(l),n.splice(l),f.setSliceCount(l))}};VVVV.Nodes.LinearFilter.prototype=new VVVV.Core.Node;VVVV.Nodes.Damper=function(b,g){this.constructor(b,"Damper (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var c=
this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),e=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);this.addOutputPin("Acceleration Out",[0],VVVV.PinTypes.Value);var a=[],h=[],m=[],t=[];this.evaluate=function(){for(var q=this.getMaxInputSliceCount(),b=c.pinIsChanged()||e.pinIsChanged(),l=0;l<q;l++){void 0==a[l]&&(a[l]=(new Date).getTime());var g=this.parentPatch.mainloop.deltaT,
s=parseFloat(c.getValue(l)),k=parseFloat(e.getValue(l));void 0==h[l]&&(h[l]=s);m[l]=0<k?(s-h[l])/(1E3*k):0;Math.abs(m[l]*g)>Math.abs(s-h[l])?h[l]=s:h[l]+=m[l]*g;0!=t[l]&&(f.setValue(l,h[l]),d.setValue(l,m[l]));t[l]=s-h[l];a[l]=(new Date).getTime()}b&&f.getSliceCount()!=q&&(a.splice(q),h.splice(q),m.splice(q),t.splice(q),f.setSliceCount(q))}};VVVV.Nodes.Damper.prototype=new VVVV.Core.Node;VVVV.Nodes.Delay=function(b,g){this.constructor(b,"Delay (Animation)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:["Reset not implemented","Linear Mode not implemented"]};this.auto_evaluate=!0;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Time",[1],VVVV.PinTypes.Value),f=this.addInputPin("Insert",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=[],h=Array(1024);this.evaluate=function(){var m=this.getMaxInputSliceCount();now=(new Date).getTime();var t=c.pinIsChanged();if(void 0==c.getValue(0))t&&
d.setValue(0,void 0);else{if(1==f.getValue(0)&&(t||e.pinIsChanged()))for(h.pop(),h.unshift(now),t=0;t<m;t++){if(void 0==a[t]){a[t]=Array(1024);for(var q=1024;q--;)a[t][q]=0}1024<=a[t].length&&a[t].pop();a[t].unshift(c.getValue(t))}for(t=0;t<m;t++){for(var b=now-1E3*e.getValue(t),l=!1,q=0;1024>q;q++)if(h[q]<=b){d.values[t]!=a[t][q]&&d.setValue(t,a[t][q]);l=!0;break}l||0==d.values[t]||d.setValue(t,0)}d.setSliceCount(m);a.splice(m)}}};VVVV.Nodes.Delay.prototype=new VVVV.Core.Node;VVVV.Nodes.Change=function(b,
g){this.constructor(b,"Change (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("OnChange",[0],VVVV.PinTypes.Value),f=[];this.evaluate=function(){var d=this.getMaxInputSliceCount();if(c.pinIsChanged()){for(var a=0;a<d;a++)f[a]!=c.getValue(a)?e.setValue(a,1):1==e.getValue(a)&&e.setValue(a,0),f[a]=c.getValue(a);e.setSliceCount(d)}else{for(a=
0;a<d;a++)1==e.getValue(a)&&(e.setValue(a,0),e.setSliceCount(d));f[a]=c.getValue(a)}}};VVVV.Nodes.Change.prototype=new VVVV.Core.Node;VVVV.Nodes.TogEdge=function(b,g){this.constructor(b,"TogEdge (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Up Edge",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Down Edge",[0],VVVV.PinTypes.Value),
d=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)(0>=Math.round(d[h])||void 0==d[h])&&1<=Math.round(c.getValue(h))?e.setValue(h,1):0!=e.values[h]&&e.setValue(h,0),1<=Math.round(d[h])&&0>=Math.round(c.getValue(h))?f.setValue(h,1):0!=f.values[h]&&f.setValue(h,0),d[h]=c.getValue(h);e.setSliceCount(a);f.setSliceCount(a)}};VVVV.Nodes.TogEdge.prototype=new VVVV.Core.Node;VVVV.Nodes.FlipFlop=function(b,g){this.constructor(b,"FlipFlop (Animation)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Set",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),a=!1;this.evaluate=function(){var h=this.getMaxInputSliceCount(),m=f.getSliceCount();if(h>m)for(;m<h;m++)f.setValue(m,0),d.setValue(m,1);for(m=0;m<h;m++){var t=void 0;1<=Math.round(e.getValue(m))&&(t=0);1<=Math.round(c.getValue(m))&&
(t=1);void 0!=t?(f.setValue(m,t),d.setValue(m,1-t)):a||(f.setValue(m,0),d.setValue(m,1))}f.setSliceCount(h);d.setSliceCount(h);a=!0}};VVVV.Nodes.FlipFlop.prototype=new VVVV.Core.Node;VVVV.Nodes.MonoFlop=function(b,g){this.constructor(b,"MonoFlop (Animation)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Set",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),f=this.addInputPin("Time",
[0],VVVV.PinTypes.Value),d=this.addInputPin("Retriggerable",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),m=[];this.evaluate=function(){var t=this.getMaxInputSliceCount(),q=a.getSliceCount();if(t>q)for(;q<t;q++)a.setValue(q,0),h.setValue(q,1);for(q=0;q<t;q++)if(void 0==m[q]&&(m[q]=0),void 0==a.getValue(q)&&a.setValue(q,0),1==a.getValue(q)){if(m[q]+=this.parentPatch.mainloop.deltaT/1E3,1==c.getValue(q)&&
1==d.getValue(q)&&(m[q]=0),m[q]>=parseFloat(f.getValue(q))||1==e.getValue(q))m[q]=0,a.setValue(q,0),h.setValue(q,1)}else 1==c.getValue(q)&&(a.setValue(q,1),h.setValue(q,0));a.setSliceCount(t);h.setSliceCount(t);m.splice(t)}};VVVV.Nodes.MonoFlop.prototype=new VVVV.Core.Node;VVVV.Nodes.SampleAndHold=function(b,g){this.constructor(b,"S+H (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["different output slice count in pure VVVV, if Set pin has only one slice"]};
var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Set",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(e.pinIsChanged()||c.pinIsChanged()){for(var a=0;a<d;a++)void 0==f.values[a]&&f.setValue(a,0),1<=Math.round(e.getValue(a))&&f.setValue(a,c.getValue(a));f.setSliceCount(d)}}};VVVV.Nodes.SampleAndHold.prototype=new VVVV.Core.Node;VVVV.Nodes.FrameDelay=function(b,g){this.constructor(b,
"FrameDelay (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["no dynamice pin count"]};this.auto_evaluate=this.delays_output=!0;var c=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),e=this.addInputPin("Default 1",[0],VVVV.PinTypes.Value),f=this.addInputPin("Initialize",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output 1",[0],VVVV.PinTypes.Value),a=[];this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),m=0;m<
h;m++)0.5<f.getValue(m)||void 0==a[m]?d.setValue(m,e.getValue(m)):d.setValue(m,a[m]);for(m=0;m<h;m++)a[m]=c.getValue(m);d.setSliceCount(h)}};VVVV.Nodes.FrameDelay.prototype=new VVVV.Core.Node;VVVV.Nodes.Toggle=function(b,g){this.constructor(b,"Toggle (Animation)",g);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",
[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),a=!1;this.evaluate=function(){var h=this.getMaxInputSliceCount(),m=f.getSliceCount();if(h>m)for(;m<h;m++)f.setValue(m,0),d.setValue(m,1);for(m=0;m<h;m++){var t=void 0;1<=Math.round(e.getValue(m))&&(t=0);1<=Math.round(c.getValue(m))&&(t=1-parseFloat(f.getValue(m)));void 0!=t&&f.getValue(m)!=t?(f.setValue(m,t),d.setValue(m,1-t)):a||(f.setValue(m,0),d.setValue(m,
1))}f.setSliceCount(h);d.setSliceCount(h);a=!0}};VVVV.Nodes.Toggle.prototype=new VVVV.Core.Node;VVVV.Nodes.Counter=function(b,g){this.constructor(b,"Counter (Animation)",g);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Up",[0],VVVV.PinTypes.Value),e=this.addInputPin("Down",[0],VVVV.PinTypes.Value),f=this.addInputPin("Minimum",[0],VVVV.PinTypes.Value),d=this.addInputPin("Maximum",
[15],VVVV.PinTypes.Value),a=this.addInputPin("Increment",[1],VVVV.PinTypes.Value),h=this.addInputPin("Default",[0],VVVV.PinTypes.Value),m=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),t=this.addInputPin("Mode",["Wrap"],VVVV.PinTypes.Enum);t.enumOptions=["Wrap","Unlimited","Clamp"];var q=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),n=this.addOutputPin("Underflow",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Overflow",[0],VVVV.PinTypes.Value),r=!1;this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),
g=f.pinIsChanged()||d.pinIsChanged()||h.pinIsChanged()||m.pinIsChanged()||t.pinIsChanged(),k=0;k<b;k++)1!=l.getValue(k)&&r||l.setValue(k,0),1!=n.getValue(k)&&r||n.setValue(k,0),r||q.setValue(k,0),g=g||0.5<=c.getValue(k)||0.5<=e.getValue(k);if(g){for(k=0;k<b;k++){var g=parseFloat(a.getValue(k)),y=k>=q.getSliceCount()?0:parseFloat(q.getValue(k)),w=parseFloat(d.getValue(k)),v=parseFloat(f.getValue(k)),p=0;"Unlimited"==t.getValue(k)&&(p=1);"Clamp"==t.getValue(k)&&(p=2);switch(p){case 1:0.5<=c.getValue(k)&&
(y+=g);0.5<=e.getValue(k)&&(y-=g);break;case 2:0.5<=c.getValue(k)&&(y+=g);0.5<=e.getValue(k)&&(y-=g);y>w&&(y=w,l.setValue(k,1));y<v&&(y=v,n.setValue(k,1));break;default:0.5<=c.getValue(k)&&(y+=g),0.5<=e.getValue(k)&&(y-=g),y>w&&(y=v,l.setValue(k,1)),y<v&&(y=w,n.setValue(k,1))}q.getValue(k)!=y&&q.setValue(k,y);0.5<=m.getValue(k)&&q.setValue(k,h.getValue(k))}q.setSliceCount(b);n.setSliceCount(b);l.setSliceCount(b)}r=!0}};VVVV.Nodes.Counter.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.CurrentTimeAstronomy=function(b,g){this.constructor(b,"CurrentTime (Astronomy)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:["http://javascript.about.com/library/bldst.htm"],compatibility_issues:["Time Zone index differs from classic VVVV","Time Zone Name does not work in Firefox"]};this.auto_evaluate=!0;var c=new Date,e=this.addOutputPin("GMT",[],VVVV.PinTypes.Value),f=this.addOutputPin("Time Zone",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Time Zone Name",
[""],VVVV.PinTypes.String);this.addOutputPin("Daylight Saving Time",[c.getTimezoneOffset()<function(a){var d=new Date(a.getFullYear(),0,1);a=new Date(a.getFullYear(),6,1);return Math.max(d.getTimezoneOffset(),a.getTimezoneOffset())}(c)?1:0],VVVV.PinTypes.Value);var a=this.addOutputPin("Current Time",[],VVVV.PinTypes.Value);this.evaluate=function(){var h=new Date,m=36E5*h.getTimezoneOffset(),c=h.getTime();e.setValue(0,c/1E3/60/60/24+25569);f.setValue(0,m/1E3/60/60);h.toString().match(/\((.+)\)$/)?
d.setValue(0,h.toString().match(/\((.+)\)$/)[1]):d.setValue(0,"n/a");a.setValue(0,(c-m)/1E3/60/60/24+25569)}};VVVV.Nodes.CurrentTimeAstronomy.prototype=new VVVV.Core.Node;VVVV.Nodes.GregorianAstronomySplit=function(b,g){this.constructor(b,"Gregorian (Astronomy Split)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Time",[41491.4301],VVVV.PinTypes.Value),e=this.addOutputPin("Millisecond",[0],VVVV.PinTypes.Value),
f=this.addOutputPin("Second",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Minute",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Hour",[0],VVVV.PinTypes.Value),h=this.addOutputPin("DayOfWeek",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Day",[1],VVVV.PinTypes.Value),t=this.addOutputPin("Month",[1],VVVV.PinTypes.Value),q=this.addOutputPin("Year",[2E3],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),l=0;l<b;l++){var g=864E5*(c.getValue(l)-25569),g=new Date(g);x=
g.getMilliseconds();x!=e.values[l]&&e.setValue(l,x);x=g.getSeconds();x!=f.values[l]&&f.setValue(l,x);x=g.getMinutes();x!=d.values[l]&&d.setValue(l,x);x=g.getHours();x!=a.values[l]&&a.setValue(l,x);x=g.getDay();x!=h.values[l]&&h.setValue(l,x);x=g.getDate();x!=m.values[l]&&m.setValue(l,x);x=g.getMonth()+1;x!=t.values[l]&&t.setValue(l,x);x=g.getYear()+1900;x!=q.values[l]&&q.setValue(l,x)}e.setSliceCount(b);f.setSliceCount(b);d.setSliceCount(b);a.setSliceCount(b);h.setSliceCount(b);m.setSliceCount(b);
t.setSliceCount(b);q.setSliceCount(b)}};VVVV.Nodes.GregorianAstronomySplit.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.And=function(b,g){this.constructor(b,"AND (Boolean)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,d,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&
this.initialize();for(var d=this.getMaxInputSliceCount(),a=e.length,h,m=0;m<d;m++){h=!0;for(var b=0;b<a;b++)h=h&&0.5<=e[b].getValue(m);f.setValue(m,h?1:0)}f.setSliceCount(d)}};VVVV.Nodes.And.prototype=new VVVV.Core.Node;VVVV.Nodes.Or=function(b,g){this.constructor(b,"OR (Boolean)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);
this.initialize=function(){var d=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,d,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var d=this.getMaxInputSliceCount(),a=e.length,h,m=0;m<d;m++){h=!1;for(var b=0;b<a;b++)h=h||0.5<=e[b].getValue(m);f.setValue(m,h?1:0)}f.setSliceCount(d)}};VVVV.Nodes.Or.prototype=new VVVV.Core.Node;VVVV.Nodes.Not=function(b,g){this.constructor(b,"NOT (Boolean)",g);
this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),d=0;d<f;d++)e.setValue(d,1-Math.round(parseFloat(c.getValue(d))));e.setSliceCount(this.getMaxInputSliceCount())}};VVVV.Nodes.Not.prototype=new VVVV.Core.Node;VVVV.Nodes.OrSpectral=function(b,g){this.constructor(b,"OR (Boolean Spectral)",
g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0,h=0,m=!1,b=0;b<d||0<e.getValue(0)&&(0<h||0!=a%e.values.length);b++)0==h&&(m=!1),m=m||0.5<=c.getValue(b),h++,0<e.getValue(0)?h>=e.getValue(a)&&(f.setValue(a,m?
1:0),a++,h=0):f.setValue(0,m?1:0);f.setSliceCount(a+(0<h))}};VVVV.Nodes.OrSpectral.prototype=new VVVV.Core.Node;VVVV.Nodes.AndSpectral=function(b,g){this.constructor(b,"AND (Boolean Spectral)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=
this.getMaxInputSliceCount(),a=0,h=0,m=!1,b=0;b<d||0<e.getValue(0)&&(0<h||0!=a%e.values.length);b++)0==h&&(m=!0),m=m&&0.5<=c.getValue(b),h++,0<e.getValue(0)?h>=e.getValue(a)&&(f.setValue(a,m?1:0),a++,h=0):f.setValue(0,m?1:0);f.setSliceCount(a+(0<h))}};VVVV.Nodes.AndSpectral.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Types.CanvasTexture={imageObject:void 0,loaded:!1};VVVV.Types.CanvasRenderState=function(){this.fillColor=[1,1,1,1];this.strokeColor=[0,0,0,0];this.lineWidth=1;this.capStyle="butt";this.joinStyle="miter";this.gradient={type:"none"};this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0;this.shadowColor=[0,0,0,1];this.blendMode="source-over";this.copy_attributes=function(c){this.fillColor=c.fillColor;this.strokeColor=c.strokeColor;this.lineWidth=c.lineWidth;this.capStyle=c.capStyle;
this.joinStyle=c.joinStyle;this.gradient=c.gradient;this.shadowOffsetX=c.shadowOffsetX;this.shadowOffsetY=c.shadowOffsetY;this.shadowBlur=c.shadowBlur;this.shadowColor=c.shadowColor;this.blendMode=c.blendMode};this.apply=function(c){if("none"!=this.gradient.type){if("linear"==this.gradient.type)var e=c.createLinearGradient(this.gradient.startX,this.gradient.startY,this.gradient.endX,this.gradient.endY);for(var f=Math.max(this.gradient.colors.length,this.gradient.colorPositions.length),d=0;d<f;d++){var a=
this.gradient.colors[d];e.addColorStop(this.gradient.colorPositions[d],"rgba("+parseInt(255*a[0])+","+parseInt(255*a[1])+","+parseInt(255*a[2])+","+a[3]+")")}c.fillStyle=e}else c.fillStyle="rgba("+parseInt(255*this.fillColor[0])+","+parseInt(255*this.fillColor[1])+","+parseInt(255*this.fillColor[2])+","+this.fillColor[3]+")";c.strokeStyle="rgba("+parseInt(255*this.strokeColor[0])+","+parseInt(255*this.strokeColor[1])+","+parseInt(255*this.strokeColor[2])+","+this.strokeColor[3]+")";c.lineWidth=this.lineWidth/
c.canvas.height;c.lineCap=this.capStyle;c.lineJoin=this.joinStyle;c.shadowOffsetX=this.shadowOffsetX;c.shadowOffsetY=this.shadowOffsetY;c.shadowBlur=this.shadowBlur;c.shadowColor="rgba("+parseInt(255*this.shadowColor[0])+","+parseInt(255*this.shadowColor[1])+","+parseInt(255*this.shadowColor[2])+","+this.shadowColor[3]+")";c.globalCompositeOperation=this.blendMode}};var b=new VVVV.Types.CanvasRenderState,g=new VVVV.Types.CanvasRenderState;g.fillColor=[0,0,0,0];VVVV.PinTypes.CanvasRenderState={typeName:"CanvasRenderState",
reset_on_disconnect:!0,defaultValue:function(){return b}};VVVV.PinTypes.CanvasLayer={typeName:"CanvasLayer",reset_on_disconnect:!0,defaultValue:function(){this.draw=function(){}}};VVVV.Nodes.FillCanvas=function(c,e){this.constructor(c,"Fill (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),d=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color),
a=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),h=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==h[c]&&(h[c]=new VVVV.Types.CanvasRenderState),h[c].copy_attributes(f.getValue(c)),h[c].fillColor=d.getValue(c).split(","),a.setValue(c,h[c]);a.setSliceCount(e)}};VVVV.Nodes.FillCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.StrokeCanvas=function(c,e){this.constructor(c,"Stroke (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),d=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color),a=this.addInputPin("Width",[1],VVVV.PinTypes.Value),h=this.addInputPin("Cap Style",["butt"],VVVV.PinTypes.Enum);h.enumOptions=["butt","round","square"];var m=this.addInputPin("Join Style",["miter"],VVVV.PinTypes.Enum);m.enumOptions=["miter","round","bevel"];var b=this.addOutputPin("Render State Out",
[],VVVV.PinTypes.CanvasRenderState),q=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==q[c]&&(q[c]=new VVVV.Types.CanvasRenderState),q[c].copy_attributes(f.getValue(c)),q[c].strokeColor=d.getValue(c).split(","),q[c].lineWidth=a.getValue(c),q[c].capStyle=h.getValue(c),q[c].joinStyle=m.getValue(c),b.setValue(c,q[c]);b.setSliceCount(e)}};VVVV.Nodes.StrokeCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.ShadowCanvas=function(c,e){this.constructor(c,"Shadow (Canvas VVVVjs RenderState)",
e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),d=this.addInputPin("Color",["0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color),a=this.addInputPin("Offset X",[0],VVVV.PinTypes.Value),h=this.addInputPin("Offset Y",[0],VVVV.PinTypes.Value),m=this.addInputPin("Blur",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),q=[];this.evaluate=
function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==q[c]&&(q[c]=new VVVV.Types.CanvasRenderState),q[c].copy_attributes(f.getValue(c)),q[c].shadowOffsetX=a.getValue(c),q[c].shadowOffsetY=h.getValue(c),q[c].shadowBlur=m.getValue(c),q[c].shadowColor=d.getValue(c).split(","),b.setValue(c,q[c]);b.setSliceCount(e)}};VVVV.Nodes.ShadowCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendCanvas=function(c,e){this.constructor(c,"Blend (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),d=this.addInputPin("Mode",["source-over"],VVVV.PinTypes.Enum);d.enumOptions="source-over source-out source-in source-atop destination-over destination-out destination-in destination-atop copy lighter xor".split(" ");var a=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),h=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<
e;c++)void 0==h[c]&&(h[c]=new VVVV.Types.CanvasRenderState),h[c].copy_attributes(f.getValue(c)),h[c].blendMode=d.getValue(c),a.setValue(c,h[c]);a.setSliceCount(e)}};VVVV.Nodes.BlendCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearGradientCanvas=function(c,e){this.constructor(c,"LinearGradient (Canvas VVVVjs RenderState)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),
d=this.addInputPin("Start X",[0],VVVV.PinTypes.Value),a=this.addInputPin("Start Y",[0],VVVV.PinTypes.Value),h=this.addInputPin("End X",[0],VVVV.PinTypes.Value),m=this.addInputPin("End Y",[0],VVVV.PinTypes.Value),b=this.addInputPin("Colors",["1.0, 1.0, 1.0, 1.0","0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color),q=this.addInputPin("Color Positions",[0,1],VVVV.PinTypes.Value),g=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),l=[];this.evaluate=function(){for(var e=Math.max(f.values.length,
d.values.length),e=Math.max(e,a.values.length),e=Math.max(e,h.values.length),e=Math.max(e,m.values.length),c=0;c<e;c++){void 0==l[c]&&(l[c]=new VVVV.Types.CanvasRenderState);l[c].copy_attributes(f.getValue(c));l[c].gradient={type:"linear"};l[c].gradient.startX=d.getValue(c);l[c].gradient.startY=a.getValue(c);l[c].gradient.endX=h.getValue(c);l[c].gradient.endY=m.getValue(c);l[c].gradient.colors=[];l[c].gradient.colorPositions=[];for(var k=Math.max(b.values.length,q.values.length),z=0;z<k;z++)l[c].gradient.colors.push(b.getValue(z).split(",")),
l[c].gradient.colorPositions.push(q.getValue(z));g.setValue(c,l[c])}g.setSliceCount(e)}};VVVV.Nodes.LinearGradientCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.ArcCanvas=function(c,e){this.constructor(c,"Arc (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),d=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),
h=this.addInputPin("Radius",[1],VVVV.PinTypes.Value),m=this.addInputPin("Start Angle",[0],VVVV.PinTypes.Value),t=this.addInputPin("End Angle",[0.5],VVVV.PinTypes.Value),q=this.addInputPin("Draw Segment",[0],VVVV.PinTypes.Value),n=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),l=[],r=function(){this.transform=mat4.create();mat4.identity(this.transform);this.startAngle=0;this.endAngle=0.5;this.strokeColor=[1,1,1,1];this.lineWidth=1;this.renderState=b;this.clippingLayer=void 0;this.drawSegment=
!1;this.draw=function(a,d){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.beginPath();d?g.apply(a):this.renderState.apply(a);this.drawSegment&&(a.moveTo(0,0),a.lineTo(Math.cos(this.startAngle)*this.radius,Math.sin(this.startAngle)*this.radius));a.arc(0,0,this.radius,this.startAngle,this.endAngle,!1);this.drawSegment&&(a.moveTo(Math.cos(this.endAngle)*
this.radius,Math.sin(this.endAngle)*this.radius),a.lineTo(0,0));0<this.renderState.fillColor[3]&&a.fill();0<this.renderState.strokeColor[3]&&a.stroke();this.clippingLayer&&a.restore()}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==l[c]&&(l[c]=new r),l[c].transform=d.getValue(c),l[c].radius=parseFloat(h.getValue(c)),l[c].startAngle=2*parseFloat(m.getValue(c))*Math.PI,l[c].endAngle=2*parseFloat(t.getValue(c))*Math.PI,l[c].renderState=f.getValue(c),l[c].drawSegment=
1==q.getValue(c),a.isConnected()&&(l[c].clippingLayer=a.getValue(c));for(c=0;c<l.length;c++)n.setValue(c,l[c]);n.setSliceCount(e)}};VVVV.Nodes.ArcCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.RectangleCanvas=function(c,e){this.constructor(c,"Rectangle (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),d=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),
a=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),h=this.addInputPin("Width",[1],VVVV.PinTypes.Value),m=this.addInputPin("Height",[1],VVVV.PinTypes.Value),t=this.addInputPin("Corner Radius",[0],VVVV.PinTypes.Value),q=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),n=[],l=function(){this.transform=mat4.create();mat4.identity(this.transform);this.renderState=b;this.clippingLayer=void 0;this.draw=function(a,d){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());
a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.beginPath();d?g.apply(a):this.renderState.apply(a);var h=this.width/2,f=h-this.cornerRadius,e=this.height/2,c=e-this.cornerRadius,m=-h,b=-f,q=-e,t=-c;a.moveTo(b,q);a.lineTo(f,q);a.arc(f,t,this.cornerRadius,1.5*Math.PI,0,!1);a.lineTo(h,c);a.arc(f,c,this.cornerRadius,0,0.5*Math.PI,!1);a.lineTo(b,e);a.arc(b,c,this.cornerRadius,0.5*Math.PI,Math.PI,
!1);a.lineTo(m,t);a.arc(b,t,this.cornerRadius,Math.PI,1.5*Math.PI,!1);a.closePath();0<this.renderState.fillColor[3]&&a.fill();0<this.renderState.strokeColor[3]&&a.stroke();this.clippingLayer&&a.restore()}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==n[c]&&(n[c]=new l),n[c].transform=d.getValue(c),n[c].width=h.getValue(c),n[c].height=m.getValue(c),n[c].cornerRadius=t.getValue(c),n[c].renderState=f.getValue(c),a.isConnected()&&(n[c].clippingLayer=a.getValue(c));
for(c=0;c<n.length;c++)q.setValue(c,n[c]);q.setSliceCount(e)}};VVVV.Nodes.RectangleCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.TextCanvas=function(c,e){this.constructor(c,"Text (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),d=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),h=this.addInputPin("Text",
["VVVV.js"],VVVV.PinTypes.String),m=this.addInputPin("Font",["10px sans-serif"],VVVV.PinTypes.String),t=this.addInputPin("Align",["start"],VVVV.PinTypes.Enum);t.enumOptions=["start","left","end","right","center"];var q=this.addInputPin("Baseline",["alphabetic"],VVVV.PinTypes.Enum);q.enumOptions="top hanging middle alphabetic ideographic bottom".split(" ");var n=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),l=[],k=function(){this.transform=mat4.create();mat4.identity(this.transform);this.text=
"VVVV.js";this.font="sans-serif";this.align="start";this.baseline="top";this.renderState=b;this.clippingLayer=void 0;this.draw=function(a,d){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();a.save();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.scale(0.01,-0.01);a.font="100px "+this.font;a.textAlign=this.align;a.textBaseline=this.baseline;d?g.apply(a):this.renderState.apply(a);
0<this.renderState.fillColor[3]&&a.fillText(this.text,0,0);0<this.renderState.strokeColor[3]&&a.strokeText(this.text,0,0);a.restore();this.clippingLayer&&a.restore()}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0;c<e;c++)void 0==l[c]&&(l[c]=new k),l[c].transform=d.getValue(c),l[c].text=h.getValue(c),l[c].font=m.getValue(c),l[c].align=t.getValue(c),l[c].baseline=q.getValue(c),l[c].renderState=f.getValue(c),l[c].clippingLayer=a.getValue(c);for(c=0;c<l.length;c++)n.setValue(c,
l[c]);n.setSliceCount(e)}};VVVV.Nodes.TextCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.BezierCurveCanvas=function(c,e){function f(a,d){a.x.splice(d);a.y.splice(d);a.c1x.splice(d);a.c1y.splice(d);a.c2x.splice(d);a.c2y.splice(d)}this.constructor(c,"BezierCurve (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),
h=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),m=this.addInputPin("X",[0],VVVV.PinTypes.Value),t=this.addInputPin("Y",[0],VVVV.PinTypes.Value),q=this.addInputPin("Control 1 X",[0],VVVV.PinTypes.Value),n=this.addInputPin("Control 1 Y",[0],VVVV.PinTypes.Value),l=this.addInputPin("Control 2 X",[0],VVVV.PinTypes.Value),k=this.addInputPin("Control 2 Y",[0],VVVV.PinTypes.Value),s=this.addInputPin("BinSize",[-1],VVVV.PinTypes.Value),u=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),
z=[],y=function(){this.transform=mat4.create();mat4.identity(this.transform);this.x=[];this.y=[];this.c1x=[];this.c1y=[];this.c2x=[];this.c2y=[];this.strokeColor=[1,1,1,1];this.lineWidth=1;this.fillColor=[1,1,1,1];this.renderState=b;this.clippingLayer=void 0;this.draw=function(a,d){if(!(1>this.x.length)){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());d?g.apply(a):this.renderState.apply(a);a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],
this.transform[5],this.transform[12],this.transform[13]);a.beginPath();a.moveTo(this.x[0],this.y[0]);for(var h=1;h<this.x.length;h++)a.bezierCurveTo(this.c1x[h-1]+this.x[h-1],this.c1y[h-1]+this.y[h-1],this.c2x[h]+this.x[h],this.c2y[h]+this.y[h],this.x[h],this.y[h]);0<this.renderState.fillColor[3]&&a.fill();0<this.renderState.strokeColor[3]&&a.stroke();this.clippingLayer&&a.restore()}}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0,b=0,g=0;g<e||0<s.getValue(0)&&(0<b||0<c%a.getSliceCount());g++)void 0==
z[c]&&(z[c]=new y),0==b&&(z[c].renderState=d.getValue(c),z[c].transform=a.getValue(c),h.isConnected()&&(z[c].clippingLayer=h.getValue(c))),z[c].x[b]=parseFloat(m.getValue(g)),z[c].y[b]=parseFloat(t.getValue(g)),z[c].c1x[b]=parseFloat(q.getValue(g)),z[c].c1y[b]=parseFloat(n.getValue(g)),z[c].c2x[b]=parseFloat(l.getValue(g)),z[c].c2y[b]=parseFloat(k.getValue(g)),b++,0<s.getValue(0)&&b>=s.getValue(c)&&(b<z[c].x.length&&f(z[c],b),c++,b=0);0>s.getValue(0)?b<z[c].x.length&&(f(z[c],b),z.splice(1)):z.splice(c);
for(e=0;e<z.length;e++)u.setValue(e,z[e]);u.setSliceCount(z.length)}};VVVV.Nodes.BezierCurveCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.QuadCanvas=function(c,e){this.constructor(c,"Quad (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),d=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),a=this.addInputPin("Texture",[],VVVV.PinTypes.HTML5Texture),h=this.addInputPin("Color",
["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color),m=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),b=[],q=function(){this.transform=mat4.create();this.clippingLayer=void 0;mat4.identity(this.transform);this.texture=VVVV.PinTypes.HTML5Texture.defaultValue();this.color=[1,1,1,1];this.draw=function(a,d){this.clippingLayer&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],
this.transform[13]);"Empty Texture"!=this.texture?this.texture.loaded&&(a.globalAlpha=this.color[3],a.save(),a.translate(-0.5,0.5),this.texture.videoWidth?a.scale(1/this.texture.videoWidth,-1/this.texture.videoHeight):a.scale(1/this.texture.width,-1/this.texture.height),a.drawImage(this.texture,0,0),a.restore(),a.fillStyle="rgba(0, 0, 0, .001)",a.fillRect(-0.5,-0.5,1,1),a.globalAlpha=1):(a.fillStyle="rgba("+parseInt(255*this.color[0])+", "+parseInt(255*this.color[1])+", "+parseInt(255*this.color[2])+
", "+this.color[3]+")",a.fillRect(-0.5,-0.5,1,1));this.clippingLayer&&a.restore()}};this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),e=0;e<c;e++)void 0==b[e]&&(b[e]=new q),b[e].transform=f.getValue(e),b[e].texture=a.getValue(e),b[e].color=h.getValue(e).split(","),d.isConnected()&&(b[e].clippingLayer=d.getValue(e));for(e=0;e<b.length;e++)m.setValue(e,b[e]);m.setSliceCount(c)}};VVVV.Nodes.QuadCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.GroupCanvas=function(c,e){this.constructor(c,
"Group (Canvas VVVVjs)",e);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInvisiblePin("Layer Count",[2],VVVV.PinTypes.Value),d=[],a=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer);this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,d,a,function(a){return this.addInputPin("Layer "+(a+1),[],VVVV.PinTypes.CanvasLayer)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var h=0,
e=d.length,c,b=0;b<e;b++)if(d[b].isConnected()){c=d[b].getSliceCount();for(var g=0;g<c;g++)a.setValue(h++,d[b].getValue(g))}a.setSliceCount(h)}};VVVV.Nodes.GroupCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.RendererCanvas=function(c,e){function f(a){function d(h){switch(h.which){case 1:VVVV.MousePositions._all.lb=0;VVVV.MousePositions[a.id].lb=0;break;case 2:VVVV.MousePositions._all.mb=0;VVVV.MousePositions[a.id].mb=0;break;case 3:VVVV.MousePositions._all.rb=0,VVVV.MousePositions[a.id].rb=0}}k(a).detach("mousemove");
k(a).detach("mousedown");k(a).detach("mouseup");VVVV.MousePositions[a.id]={x:0,y:0,wheel:0,lb:0,mb:0,rb:0};k(a).mousemove(function(d){var h=2*(d.pageX-k(this).offset().left)/k(this).width()-1;d=-(2*(d.pageY-k(this).offset().top)/k(this).height()-1);VVVV.MousePositions._all.x=h;VVVV.MousePositions._all.y=d;VVVV.MousePositions[a.id].x=h;VVVV.MousePositions[a.id].y=d});k(a).bind("mousewheel",function(d){d=d.originalEvent.wheelDelta/120;VVVV.MousePositions[a.id].wheel+=d;VVVV.MousePositions._all.wheel+=
d});k(a).bind("DOMMouseScroll",function(d){d=-d.originalEvent.detail/3;VVVV.MousePositions[a.id].wheel+=d;VVVV.MousePositions._all.wheel+=d});k(a).mousedown(function(h){switch(h.which){case 1:VVVV.MousePositions._all.lb=1;VVVV.MousePositions[a.id].lb=1;break;case 2:VVVV.MousePositions._all.mb=1;VVVV.MousePositions[a.id].mb=1;break;case 3:VVVV.MousePositions._all.rb=1,VVVV.MousePositions[a.id].rb=1}k(document).unbind("mouseup",d);k(document).mouseup(d)})}this.constructor(c,"Renderer (Canvas VVVVjs)",
e);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var d=this.addInputPin("Layers",[],VVVV.PinTypes.CanvasLayer);this.addInputPin("Clear",[1],VVVV.PinTypes.Value);var a=this.addInputPin("Background Color",["0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color),h=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),m=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),g=this.addInputPin("View",[],VVVV.PinTypes.Transform),q=this.addOutputPin("Canvas Out",
[],this),n,l,r,s=[0,0,0,1],u,z=mat4.create(),y;this.getContext=function(){var a=this.invisiblePins["Descriptive Name"].getValue(0);if((a=k(a).get(0))&&"CANVAS"==a.nodeName)u=a;else{var d=parseInt(h.getValue(0)),e=parseInt(m.getValue(0));u=k('<canvas width="'+(0<d?d:512)+'" height="'+(0<e?e:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');a||(a="body");k(a).append(u);u=u.get(0)}l=u.width;r=u.height;u&&u.getContext&&(f(u),n=u.getContext("2d"),
u.ctx=n,n.restoreView=function(){n.setTransform(z[0],z[1],z[4],z[5],z[12],z[13])})};this.destroy=function(){k(u).remove()};this.evaluate=function(){this.invisiblePins["Descriptive Name"].pinIsChanged()&&(k(u).hasClass("vvvv-js-generated-renderer")&&k(u).remove(),this.getContext());if(n){if(h.pinIsChanged()||m.pinIsChanged()){var e=parseInt(h.getValue(0)),c=parseInt(m.getValue(0));0<e&&(l=e,k(u).attr("width",l));0<c&&(r=c,k(u).attr("height",r));y=mat4.create([l/2,0,0,0,0,-r/2,0,0,0,0,1,0,l/2,r/2,0,
1]);mat4.multiply(y,g.getValue(0),z)}a.pinIsChanged()&&(s=a.getValue(0).split(","),s[0]=parseInt(255*s[0]),s[1]=parseInt(255*s[1]),s[2]=parseInt(255*s[2]));b.apply(n);n.setTransform(1,0,0,1,0,0);1>s[3]&&n.clearRect(0,0,l,r);n.fillStyle="rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")";n.fillRect(0,0,l,r);g.pinIsChanged()&&mat4.multiply(y,g.getValue(0),z);n.restoreView();if(d.isConnected())for(e=0;e<d.values.length;e++)d.getValue(e).draw(n);q.setValue(0,u);u.loaded=!0}}};VVVV.Nodes.RendererCanvas.prototype=
new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Color={typeName:"Color",reset_on_disconnect:!1,defaultValue:function(){return"1.0, 1.0, 1.0, 1.0"},primitive:!0,hsvToRgb:function(b,g,c){b=360*((b%1+1)%1);var e=Math.floor(b/60),f=b/60-e;b=c*(1-g);var d=c*(1-g*f);g=c*(1-g*(1-f));switch(e){case 1:return[d,c,b];case 2:return[b,c,g];case 3:return[b,d,c];case 4:return[g,b,c];case 5:return[c,b,d];default:return[c,g,b]}},rgbToHsv:function(b,g,c){var e=Math.max(b,Math.max(g,c)),f=Math.min(b,Math.min(g,c)),d;e==f?d=0:e==b?d=60*
(0+(g-c)/(e-f)):e==g?d=60*(2+(c-b)/(e-f)):e==c&&(d=60*(4+(b-g)/(e-f)));0>d&&(d+=360);b=0;0!=e&&(b=(e-f)/e);return[d/360,b,e]}};VVVV.Nodes.RGBJoin=function(b,g){this.constructor(b,"RGB (Color Join)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Red",[1],VVVV.PinTypes.Value),e=this.addInputPin("Green",[1],VVVV.PinTypes.Value),f=this.addInputPin("Blue",[1],VVVV.PinTypes.Value),d=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),
a=this.addOutputPin("Output",["1.0,1.0,1.0,1.0"],VVVV.PinTypes.Color);this.evaluate=function(){if(c.pinIsChanged()||e.pinIsChanged||f.pinIsChanged()||d.pinIsChanged()){for(var h=this.getMaxInputSliceCount(),m=0;m<h;m++){var b=c.getValue(m)||0,g=e.getValue(m)||0,n=f.getValue(m)||0,l=d.getValue(m)||0;a.setValue(m,b+","+g+","+n+","+l)}a.setSliceCount(h)}}};VVVV.Nodes.RGBJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.HSVJoin=function(b,g){this.constructor(b,"HSV (Color Join)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Hue",[0.33],VVVV.PinTypes.Value),e=this.addInputPin("Saturation",[0],VVVV.PinTypes.Value),f=this.addInputPin("Value",[1],VVVV.PinTypes.Value),d=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",["1.0,1.0,1.0,1.0"],VVVV.PinTypes.Color);this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),m=0;m<h;m++){var b=c.getValue(m),g=e.getValue(m),n=f.getValue(m),l=d.getValue(m),
b=VVVV.PinTypes.Color.hsvToRgb(b,g,n);a.setValue(m,b[0]+","+b[1]+","+b[2]+","+l)}a.setSliceCount(h)}};VVVV.Nodes.HSVJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxColor=function(b,g){this.constructor(b,"IOBox (Color)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Color Input",["0.0, 1.0, 0.0, 1.0"],VVVV.PinTypes.Color),e=this.addOutputPin("Color Output",["0.0, 1.0, 0.0, 1.0"],VVVV.PinTypes.Color);
this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),d=0;d<f;d++)e.setValue(d,c.getValue(d));e.setSliceCount(f)}};VVVV.Nodes.IOBoxColor.prototype=new VVVV.Core.Node;VVVV.Nodes.SetAlphaColor=function(b,g){this.constructor(b,"SetAlpha (Color)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["0.0, 0.0, 0.0, 0.0"],VVVV.PinTypes.Color),
e=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",["0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){var h=c.getValue(a),m=e.getValue(a);f.setValue(a,h.replace(/[^, ]+$/,m))}f.setSliceCount(d)}};VVVV.Nodes.SetAlphaColor.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchColorInput=function(b,g){this.constructor(b,"Switch (Color Input)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],
compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),e=[];e[0]=this.addInputPin("Input 1",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);e[1]=this.addInputPin("Input 2",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);var f=this.addOutputPin("Output",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(this.hasNilInputs())f.setSliceCount(0);else{for(var a=
0;a<d;a++)f.setValue(a,e[Math.round(Math.abs(c.getValue(a)))%e.length].getValue(a));f.setSliceCount(d)}}};VVVV.Nodes.SwitchColorInput.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.Abs=function(b,g){this.constructor(b,"Abs (Complex)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input Real",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input Imagiary",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++)f.setValue(a,Math.sqrt(Math.pow(parseFloat(c.getValue(a)),2)+
Math.pow(parseFloat(e.getValue(a)),2)));f.setSliceCount(d)}};VVVV.Nodes.Abs.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.Integrate=function(b,g){this.constructor(b,"Integrate (Differential)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Position In",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value),a=[];this.evaluate=function(){dt=this.parentPatch.mainloop.deltaT/
1E3;for(var h=this.getMaxInputSliceCount(),m=0;m<h;m++){void 0==a[m]&&(a[m]=0);var b=parseFloat(c.getValue(m));a[m]+=b*dt;0.5<=e.getValue(m)&&(a[m]=0);f.setValue(m,a[m]);d.setValue(m,b)}f.setSliceCount(h);d.setSliceCount(h);a.splice(h)}};VVVV.Nodes.Integrate.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.String2Enum=function(b,g){this.constructor(b,"String2Enum (Enumerations)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Validation check does not work"]};var c=this.addInputPin("String Value",[],VVVV.PinTypes.String),e=this.addOutputPin("Enum",[],VVVV.PinTypes.Enum);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),d=0;d<f;d++)e.setValue(d,c.getValue(d));e.setSliceCount(f)}};VVVV.Nodes.String2Enum.prototype=
new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.HTML5Texture={typeName:"HTML5Texture",reset_on_disconnect:!0,defaultValue:function(){return"Empty Texture"}};VVVV.Nodes.FileTextureCanvas=function(b,g){this.constructor(b,"FileTexture (HTML5 VVVVjs)",g);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Filename",[],VVVV.PinTypes.String),e=this.addOutputPin("Texture Out",[],VVVV.PinTypes.HTML5Texture),f=this.addOutputPin("Width",[0],
VVVV.PinTypes.Value),d=this.addOutputPin("Height",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Up and Running",[0],VVVV.PinTypes.Value),h=[],m=!1;this.evaluate=function(){var b=this.getMaxInputSliceCount();if(c.pinIsChanged()){for(var g=0;g<b;g++){var n=VVVV.Helpers.prepareFilePath(c.getValue(g),this.parentPatch);0===n.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(n=VVVV.ImageProxyPrefix+encodeURI(n));if(void 0==h[g]||h[g].origSrc!=n)h[g]=new Image,h[g].loaded=!1,h[g].origSrc=n,h[g].onload=
function(a){return function(){m=h[a].loaded=!0}}(g),h[g].src=n,a.setValue(g,0),e.setValue(g,h[g])}h.length=b;e.setSliceCount(b);f.setSliceCount(b);d.setSliceCount(b);a.setSliceCount(b)}if(m){for(g=0;g<b;g++)e.setValue(g,h[g]),f.setValue(g,h[g].width),d.setValue(g,h[g].height),a.setValue(g,h[g].loaded?1:0);m=!1}}};VVVV.Nodes.FileTextureCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.FileStreamCanvas=function(b,g){this.constructor(b,"FileStream (HTML5 VVVVjs)",g);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],e=["HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","HAVE_CURRENT_DATA"],f=this.addInputPin("Play",[1],VVVV.PinTypes.Value),d=this.addInputPin("Loop",[0],VVVV.PinTypes.Value),a=this.addInputPin("Start Time",[0],VVVV.PinTypes.Value),h=this.addInputPin("End Time",[-1],VVVV.PinTypes.Value),m=this.addInputPin("Do Seek",[0],VVVV.PinTypes.Value),
t=this.addInputPin("Seek Position",[0],VVVV.PinTypes.Value),q=this.addInputPin("Filename",["http://html5doctor.com/demos/video-canvas-magic/video.ogg"],VVVV.PinTypes.String),n=this.addOutputPin("Video",[],this),l=this.addOutputPin("Audio",[],this),r=this.addOutputPin("Duration",[0],VVVV.PinTypes.Value),s=this.addOutputPin("Position",[0],VVVV.PinTypes.Value),u=this.addOutputPin("Video Width",[0],VVVV.PinTypes.Value),z=this.addOutputPin("Video Height",[0],VVVV.PinTypes.Value),y=this.addOutputPin("Network Status",
[""],VVVV.PinTypes.String),w=this.addOutputPin("Ready Status",[""],VVVV.PinTypes.String),v=[];this.evaluate=function(){var b=this.getMaxInputSliceCount();if(q.pinIsChanged())for(var g=0;g<b;g++){filename=VVVV.Helpers.prepareFilePath(q.getValue(g),this.parentPatch);if(void 0==v[g]){var B=k('<video style="display:none"><source src="" type=video/ogg></video>');k("body").append(B);v[g]=B[0];v[g].volume=0;B=function(a){return function(){}}(g);v[g].onprogress=B;v[g].oncanplay=B;v[g].oncanplaythrough=B}filename!=
v[g].currentSrc&&(k(v[g]).find("source").first().attr("src",filename),v[g].load(),0.5<f.getValue(g)?v[g].play():v[g].pause(),v[g].loaded=!0,n.setValue(g,v[g]),l.setValue(g,v[g]))}if(f.pinIsChanged())for(g=0;g<b;g++)0.5<f.getValue(g)?v[g].play():v[g].pause();if(m.pinIsChanged())for(g=0;g<b;g++)v[g%v.length].loaded&&0.5<=m.getValue(g)&&(v[g%v.length].currentTime=parseFloat(t.getValue(g)),0.5<f.getValue(g)&&v[g].play());for(g=0;g<b;g++){if(!v[g].paused){n.setValue(g,v[g]);l.setValue(g,v[g]);r.getValue(g)!=
v[g].duration&&r.setValue(g,v[g].duration);s.setValue(g,v[g].currentTime);var B=parseFloat(h.getValue(g)),C=parseFloat(a.getValue(g));v[g].currentTime<C&&(v[g].currentTime=C);if(v[g].currentTime>=v[g].duration||0<=B&&v[g].currentTime>=B)0.5<=d.getValue(g)?v[g].currentTime=C:v[g].pause()}if(v[g].videoWidth!=u.getValue(g)||v[g].videoHeight!=z.getValue(g))u.setValue(g,v[g].videoWidth),z.setValue(g,v[g].videoHeight);y.getValue(g)!=c[v[g].networkState]&&y.setValue(g,c[v[g].networkState]);w.getValue(g)!=
e[v[g].readyState]&&w.setValue(g,e[v[g].readyState])}n.setSliceCount(b);l.setSliceCount(b)}};VVVV.Nodes.FileStreamCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.AudioOutHTML5=function(b,g){this.constructor(b,"AudioOut (HTML5 VVVVjs)",g);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var c=this.addInputPin("Audio",[],this),e=this.addInputPin("Volume",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){var f=this.getMaxInputSliceCount();if(e.pinIsChanged())for(var d=
0;d<f;d++)c.getValue(d).volume=Math.max(0,Math.min(1,parseFloat(e.getValue(d))))}};VVVV.Nodes.AudioOutHTML5.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.HTTPGet=function(b,g){this.constructor(b,"HTTP (Network Get)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Doesnt handle get variables yet","Doesnt support proxies","No header output pin yet"]};this.auto_evaluate=!0;var c=this.addInputPin("URL",["http://localhost"],VVVV.PinTypes.String),e=this.addInputPin("Name",[""],VVVV.PinTypes.String),f=this.addInputPin("Value",[""],VVVV.PinTypes.String),d=this.addInputPin("Refresh",
[0],VVVV.PinTypes.Value),a=this.addOutputPin("Status",[""],VVVV.PinTypes.String),h=this.addOutputPin("Body",[""],VVVV.PinTypes.String),m=this.addOutputPin("Fail",[0],VVVV.PinTypes.Value),t=this.addOutputPin("Success",[0],VVVV.PinTypes.Value),q,n,l,r=!1;this.evaluate=function(){this.getMaxInputSliceCount();var g=c.pinIsChanged()||e.pinIsChanged()||f.pinIsChanged()||d.pinIsChanged()&&1==d.getValue(0);1==t.getValue(0)&&t.setValue(0,0);1==m.getValue(0)&&m.setValue(0,0);r&&(h.setValue(0,q),a.setValue(0,
void 0),t.setValue(0,n),m.setValue(0,l),r=!1);g&&(void 0==c.getValue(0)?(h.setValue(0,""),a.setValue(0,"")):k.ajax({url:c.getValue(0),type:"get",success:function(a,d,h){q=a;n=1;r=!0},error:function(a,d){q="";l=1;r=!0}}))}};VVVV.Nodes.HTTPGet.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Node={typeName:"Node",reset_on_disconnect:!0};VVVV.Nodes.IOBoxNode=function(b,g){this.constructor(b,"IOBox (Node)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input Node",[],VVVV.PinTypes.Node),e=this.addOutputPin("Output Node",[],VVVV.PinTypes.Node);this.initialize=function(){c.connectionChangedHandlers.nodepin=function(){if(this.isConnected()){var c;0<this.links.length?
c=this.links[0].fromPin:this.masterPin&&(c=this.masterPin);this.setType(VVVV.PinTypes[c.typeName]);e.setType(VVVV.PinTypes[c.typeName]);e.slavePin&&e.slavePin.setType(VVVV.PinTypes[c.typeName])}else e.isConnected()||(this.setType(VVVV.PinTypes.Node),e.setType(VVVV.PinTypes.Node),e.slavePin&&e.slavePin.setType(VVVV.PinTypes.Node))};e.connectionChangedHandlers.nodepin=function(){if(this.isConnected()){var e;0<this.links.length?e=this.links[0].toPin:this.slavePin&&(e=this.slavePin);this.setType(VVVV.PinTypes[e.typeName]);
c.setType(VVVV.PinTypes[e.typeName]);c.masterPin&&c.masterPin.setType(VVVV.PinTypes[e.typeName])}else c.isConnected()||(this.setType(VVVV.PinTypes.Node),c.setType(VVVV.PinTypes.Node),c.masterPin&&c.masterPin.setType(VVVV.PinTypes.Node))}};this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),d=0;d<f;d++)e.setValue(d,c.getValue(d));e.setSliceCount(f)}};VVVV.Nodes.IOBoxNode.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchNodeInput=function(b,g){this.constructor(b,"Switch (Node Input)",g);this.meta=
{authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};this.auto_nil=!1;var c=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],d=this.addOutputPin("Output",[],VVVV.PinTypes.Node);this.initialize=function(){for(var a=e.getValue(0),d=f.length;d<a;d++)f[d]=this.addInputPin("Input "+(d+1),[],VVVV.PinTypes.Node);f.length=a};this.evaluate=function(){e.pinIsChanged()&&
this.initialize();if(void 0==c.getValue(0))d.setValue(0,void 0);else{for(var a=f[Math.round(Math.abs(c.getValue(0)))%f.length],h=a.getSliceCount(),m=0;m<h;m++)d.setValue(m,a.getValue(m));d.setSliceCount(h)}}};VVVV.Nodes.SwitchNodeInput.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.BoundsSpectral=function(b,g){this.constructor(b,"Bounds (Spectral)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Center",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Width",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Minimum",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Maximum",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),g=0,b=0,n,l,k,s=0;s<m||0<e.getValue(0)&&(0<b||0!=g%e.values.length);s++)n=c.getValue(s),0==b&&(center=l=k=n,width=0),l=Math.min(n,l),k=Math.max(n,k),b++,0<e.getValue(0)&&b>=e.getValue(g)&&(a.setValue(g,l),h.setValue(g,k),f.setValue(g,l+(k-l)/2),d.setValue(g,Math.abs(k-l)),g++,b=0);-1==e.getValue(0)&&(a.setValue(g,l),h.setValue(g,k),f.setValue(g,l+(k-l)/2),d.setValue(g,Math.abs(k-l)));f.setSliceCount(g+(0<b));
d.setSliceCount(g+(0<b));a.setSliceCount(g+(0<b));h.setSliceCount(g+(0<b))}};VVVV.Nodes.BoundsSpectral.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.GetSliceSpreads=function(b,g){this.constructor(b,"GetSlice (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value),f=this.addInputPin("Index",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=f.getSliceCount(),h,m,g=0,b=0;b<a;b++)if(m=e.getValue(b),
h=c.getValue(Math.round(f.getValue(b)),m),1<m)for(m=0;m<h.length;m++)d.setValue(g,parseFloat(h[m])),g++;else d.setValue(b,parseFloat(h)),g++;d.setSliceCount(g)}};VVVV.Nodes.GetSliceSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.SetSliceSpreads=function(b,g){this.constructor(b,"SetSlice (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Spread",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input",
[0],VVVV.PinTypes.Value),f=this.addInputPin("Index",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=c.getSliceCount(),h=0;h<a;h++)d.setValue(h,c.getValue(h));size=Math.max(e.getSliceCount(),f.getSliceCount());for(h=0;h<size;h++)d.setValue(f.getValue(h)%a,e.getValue(h));d.setSliceCount(a)}};VVVV.Nodes.SetSliceSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.RandomSpread=function(b,g){function c(e){var c=[],d=0,a=0;(function(a){for(var d=
0;256>d;d++)c[d]=d;for(var e=0,d=0;256>d;d++){var e=(e+c[d]+a.charCodeAt(d%a.length))%256,g=c[d];c[d]=c[e];c[e]=g}})(e);this.getRandomNumber=function(){for(var h=0,e=1,g=0;8>g;g++){d=(d+1)%256;a=(a+c[d])%256;var b=c[d];c[d]=c[a];c[a]=b;h+=c[(c[d]+c[a])%256]*e;e*=256}return h/1.8446744073709552E19}}this.constructor(b,"RandomSpread (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:["http://www.webdeveloper.com/forum/showthread.php?t=140572"],compatibility_issues:["Doesnt handle spreaded inputs",
"random result will differ from original vvvv node because of different algorithm"]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.addInputPin("Random Seed",[0],VVVV.PinTypes.Value);this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var e=parseInt(this.inputPins["Spread Count"].getValue(0)),f=parseFloat(this.inputPins.Input.getValue(0)),d=parseFloat(this.inputPins.Width.getValue(0)),
a=parseInt(this.inputPins["Random Seed"].getValue(0));rng=new c(a.toString());this.outputPins.Output.setSliceCount(e);for(a=0;a<e;a++)this.outputPins.Output.setValue(a,rng.getRandomNumber()*d-d/2+f)}};VVVV.Nodes.RandomSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.SortSpreads=function(b,g){this.constructor(b,"Sort (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Output",
[0],VVVV.PinTypes.Value);this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=_(this.inputPins.Input.values).map(function(e,d){return[e,d]}),c=_(c).sortBy(function(e){return e[0]}),e=0;e<c.length;e++)this.outputPins.Output.setValue(e,c[e][0]),this.outputPins["Former Index"].setValue(e,c[e][1]);this.outputPins.Output.setSliceCount(c.length);this.outputPins["Former Index"].setSliceCount(c.length)}};VVVV.Nodes.SortSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearSpread=
function(b,g){this.constructor(b,"LinearSpread (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["phase does not work with Block alignment"]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Width",[1],VVVV.PinTypes.Value),f=this.addInputPin("Alignment",["Centered"],VVVV.PinTypes.Enum);f.enumOptions=["Centered","Block","LeftJustified","RightJustified"];var d=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),
a=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),g=0,b=0;b<m;b++){var n=parseInt(a.getValue(b)),l=parseFloat(e.getValue(b)),k=parseFloat(d.getValue(b)),s=parseFloat(c.getValue(b)),u=f.getValue(b);""==u&&(u="Centered");var z=l/n;"Block"==u&&(z=l/(n-1));var y=z/2;if("Block"==u||"LeftJustified"==u)y=0;"RightJustified"==u&&(y=z);for(var w,v=0;v<n;v++)w=v*z+y,"Block"!=u&&0!=l&&
(w=(w+k*l)%l),w=s-l/2+w,h.setValue(g,w.toFixed(4)),g++}h.setSliceCount(g)}};VVVV.Nodes.LinearSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.AvoidNil=function(b,g){this.constructor(b,"AvoidNIL (Spreads)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Default",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=
function(){if(c.pinIsChanged()||e.pinIsChanged()){var d=c;void 0==c.values[0]&&(d=e);for(var a=0;a<d.values.length;a++)f.setValue(a,d.getValue(a));f.setSliceCount(d.getSliceCount())}}};VVVV.Nodes.AvoidNil.prototype=new VVVV.Core.Node;VVVV.Nodes.SwapDim=function(b,g){this.constructor(b,"SwapDim (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["BinSize not implemented"]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Column Count",
[0],VVVV.PinTypes.Value),f=this.addInputPin("Row Count",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=parseInt(e.getValue(0)),h=parseInt(f.getValue(0)),m=a*h,g=0;g<m;g++)d.setValue(g%a*h+parseInt(g/a),c.getValue(g));d.setSliceCount(m)}};VVVV.Nodes.SwapDim.prototype=new VVVV.Core.Node;VVVV.Nodes.I=function(b,g){this.constructor(b,"I (Spreads)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:["Matthias Zauner, M\u00f3r\u00e1sz D\u00e1vid (micro.D)"],
compatibility_issues:[]};var c=this.addInputPin("[ From ..",[0],VVVV.PinTypes.Value),e=this.addInputPin(".. To [",[1],VVVV.PinTypes.Value),f=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,m=0;m<a;m++){var g=Math.round(c.getValue(m)),b=Math.round(e.getValue(m)),n=parseFloat(f.getValue(m)),l=b-g,k=Math.abs(l);if(g<=b)for(b=0;b<k;b++,h++){var s=parseFloat(b)-k*n,s=Math.round(s)%
l;0>s&&(s=l+s);s+=g;d.setValue(h,s)}else for(b=k;0<b;b--,h++)s=parseFloat(b)-k*n,s=Math.round(s)%l,0>l&&(s*=-1),0>s&&(s=l-s),s+=g,d.setValue(h,s)}d.setSliceCount(h)}};VVVV.Nodes.I.prototype=new VVVV.Core.Node;VVVV.Nodes.CircularSpread=function(b,g){this.constructor(b,"CircularSpread (Spreads)",g);this.meta={authors:["Matija Miloslavich, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.xIn=this.addInputPin("Input X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Input Y",
[0],VVVV.PinTypes.Value);this.widthIn=this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.heightIn=this.addInputPin("Height",[1],VVVV.PinTypes.Value);this.factorIn=this.addInputPin("Factor",[1],VVVV.PinTypes.Value);this.phaseIn=this.addInputPin("Phase",[0],VVVV.PinTypes.Value);this.sprcntIn=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.xOut=this.addOutputPin("Output X",[0],VVVV.PinTypes.Value);this.yOut=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=
2*Math.PI,e=0,f=0;f<this.getMaxInputSliceCount();f++)for(var d=parseFloat(this.xIn.getValue(f)),a=parseFloat(this.yIn.getValue(f)),h=0.5*parseFloat(this.widthIn.getValue(f)),m=0.5*parseFloat(this.heightIn.getValue(f)),g=parseFloat(this.factorIn.getValue(f)),b=parseFloat(this.phaseIn.getValue(f))*c,n=parseInt(this.sprcntIn.getValue(f)),l=0;l<n;l++){var k=b+c*(l/n)*g,s=d+Math.cos(k)*h,k=a+Math.sin(k)*m;this.xOut.setValue(e,s);this.yOut.setValue(e,k);e++}this.xOut.setSliceCount(e);this.yOut.setSliceCount(e)}};
VVVV.Nodes.CircularSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.ReverseSpreads=function(b,g){this.constructor(b,"Reverse (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=c.getSliceCount(),d=0;d<f;d++){var a=c.getValue(d);e.setValue(f-d-1,a)}e.setSliceCount(f)}};
VVVV.Nodes.ReverseSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IntegralSpreads=function(b,g){this.constructor(b,"Integral (Spreads)",g);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),f=this.addInputPin("Offset",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=
this.addOutputPin("Output Bin Size",[2],VVVV.PinTypes.Value);this.evaluate=function(){var h=c.getSliceCount(),m=Math.max(e.getSliceCount(),f.getSliceCount()),g=0,b=0,n=[];if(0<m)for(;g<m||b<h;){var l=parseInt(e.getValue(g));0>l&&(l=parseInt(Math.round(h/parseFloat(Math.abs(l)))));b+=l;n[g]=l;g++}n.splice(g);for(b=m=h=0;b<g;b++){l=n[b];a.setValue(b,l+1);for(var k=parseFloat(f.getValue(b)),s=0;s<l;s++)d.setValue(m,k),m++,k+=parseFloat(c.getValue(h+s));h+=l;d.setValue(m,k);m++}d.setSliceCount(m);a.setSliceCount(g)}};
VVVV.Nodes.IntegralSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.DifferentialSpreads=function(b,g){this.constructor(b,"Differential (Spreads)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output Bin Size",[0],VVVV.PinTypes.Value),
a=this.addOutputPin("Offset",[0],VVVV.PinTypes.Value);this.evaluate=function(){var h=c.getSliceCount(),m=e.getSliceCount(),g=0,b=0,n=[];if(0<m)for(;g<m||b<h;){var l=parseInt(e.getValue(g));0>l&&(l=parseInt(Math.round(h/parseFloat(Math.abs(l)))));b+=l;n[g]=l;g++}n.splice(g);for(b=m=h=0;b<g;b++){var l=n[b]-1,k=c.getValue(h);d.setValue(b,l);a.setValue(b,k);for(var s=0;s<l;s++){var u=parseFloat(c.getValue(h+s+1));f.setValue(m,u-k);k=u;m++}h+=l+1}f.setSliceCount(m);d.setSliceCount(g);a.setSliceCount(g)}};
VVVV.Nodes.DifferentialSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.ConsSpreads=function(b,g){this.constructor(b,"Cons (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=[],e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,d,function(a){return this.addInputPin("Input "+
(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var d=0,a=0;a<c.length;a++)for(var h=0;h<c[a].getSliceCount();h++)e.setValue(d++,c[a].getValue(h));e.setSliceCount(d)}};VVVV.Nodes.ConsSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IntervalSpreads=function(b,g){this.constructor(b,"Interval (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",
[0.5],VVVV.PinTypes.Value),e=this.addInputPin("Intervals",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Index",[0],VVVV.PinTypes.Value),d=0;this.evaluate=function(){var a=c.getSliceCount(),h=e.getSliceCount();if(e.pinIsChanged()){d=void 0;for(var m=0;m<h;m++)if(e.getValue(m)<d||void 0==d)d=e.getValue(m)}for(m=0;m<a;m++){var g=c.getValue(m);if(g<d)f.setValue(m,-1);else{for(var b=0;b<h-1&&!(g>=e.getValue(b)&&g<e.getValue(b+1));b++);f.setValue(m,b)}}f.setSliceCount(a)}};VVVV.Nodes.IntervalSpreads.prototype=
new VVVV.Core.Node;VVVV.Nodes.QueueSpreads=function(b,g){this.constructor(b,"Queue (Spreads)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Insert",[0],VVVV.PinTypes.Value),f=this.addInputPin("Frame Count",[1],VVVV.PinTypes.Value),d=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[],VVVV.PinTypes.Value),h=this.addOutputPin("Output Bin Size",
[],VVVV.PinTypes.Value);this.evaluate=function(){var m=e.getValue(0),g=f.getValue(0),b=d.getValue(0),n=!1;if(0.5<=m&&0.5>b){m=c.getSliceCount();for(n=m-1;0<=n;n--)a.values.unshift(c.getValue(n));h.values.unshift(m);n=!0}if(f.pinIsChanged()||n){for(n=currFrameCount=h.values.length;n>g;n--)a.values.splice(-h.values[n-1]);h.values.splice(g);n=!0}if(n){for(n=0;n<a.values.length;n++)a.setValue(n,a.values[n]);for(n=0;n<h.values.length;n++)h.setValue(n,h.values[n])}0.5<=b&&(a.setSliceCount(0),h.setSliceCount(0))}};
VVVV.Nodes.QueueSpreads.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.IOBoxString=function(b,g){this.constructor(b,"IOBox (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addInputPin("SliceOffset",[0],VVVV.PinTypes.Value);this.addInputPin("Input String",[""],VVVV.PinTypes.String);this.addOutputPin("Output String",[""],VVVV.PinTypes.String);this.evaluate=function(){this.outputPins["Output String"].setSliceCount(this.inputPins["Input String"].getSliceCount());
for(var c=0;c<this.inputPins["Input String"].getSliceCount();c++)this.outputPins["Output String"].setValue(c,this.inputPins["Input String"].values[c])}};VVVV.Nodes.IOBoxString.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchStringInput=function(b,g){this.constructor(b,"Switch (String Input)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),
f=[],d=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.initialize=function(){var a=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,f,a,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)d.setValue(h,f[Math.round(Math.abs(e.getValue(h)))%f.length].getValue(h));d.setSliceCount(a)}};VVVV.Nodes.SwitchStringInput.prototype=new VVVV.Core.Node;
VVVV.Nodes.AddString=function(b,g){this.constructor(b,"Add (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet","Intersperse *Enum* not implemented"]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),d=this.addOutputPin("Output",["texttext"],VVVV.PinTypes.String);this.initialize=function(){var a=Math.max(2,c.getValue(0));
VVVV.Helpers.dynamicPins(this,e,a,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++){var g=[],b=f.getValue(h);void 0==b&&(b="");for(var q=0;q<e.length;q++)g.push(e[q].getValue(h));d.setValue(h,g.join(b))}d.setSliceCount(a)}};VVVV.Nodes.AddString.prototype=new VVVV.Core.Node;VVVV.Nodes.GetSliceString=function(b,g){this.constructor(b,"GetSlice (String)",
g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Bin Size not implemented"]};var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value);var e=this.addInputPin("Index",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){for(var d=0;d<e.values.length;d++)f.setValue(d,c.getValue(Math.round(e.getValue(d))));f.setSliceCount(e.getSliceCount())}};
VVVV.Nodes.GetSliceString.prototype=new VVVV.Core.Node;VVVV.Nodes.AsValue=function(b,g){this.constructor(b,"AsValue (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[],VVVV.PinTypes.String),e=this.addInputPin("Default",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){var h=c.getValue(a);/^\s*-?[0-9.e]+\s*$/.test(h)?
f.setValue(a,parseFloat(h)):f.setValue(a,parseFloat(e.getValue(a)))}f.setSliceCount(d)}};VVVV.Nodes.AsValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SortString=function(b,g){this.constructor(b,"Sort (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Reverse Sorting",[0],VVVV.PinTypes.Value);var e=this.addOutputPin("Output",["text"],
VVVV.PinTypes.String),f=this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){xxx=c.values;for(var d=_(c.values).map(function(a,d){return[a,d]}),d=_(d).sortBy(function(a){return a[0]}),a=0;a<d.length;a++)e.setValue(a,d[a][0]),f.setValue(a,d[a][1]);e.setSliceCount(d.length);f.setSliceCount(d.length)}};VVVV.Nodes.SortString.prototype=new VVVV.Core.Node;VVVV.Nodes.LengthString=function(b,g){this.constructor(b,"Length (String)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),e=this.addOutputPin("Count",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),d=0;d<f;d++){var a=c.getValue(d);e.setValue(d,a.length)}e.setSliceCount(f)}};VVVV.Nodes.LengthString.prototype=new VVVV.Core.Node;VVVV.Nodes.SiftString=function(b,g){this.constructor(b,"Sift (String)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),e=this.addInputPin("Filter",["text"],VVVV.PinTypes.String),f=this.addInputPin("Comparison",["Matches"],VVVV.PinTypes.Enum);f.enumOptions=["Matches","Contains","MatchesAny","ContainsAny"];var d=this.addInputPin("Case Sensitive",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Input Index",[0],VVVV.PinTypes.Value),
m=this.addOutputPin("Filter Index",[0],VVVV.PinTypes.Value),t=this.addOutputPin("Found At Position",[0],VVVV.PinTypes.Value);this.evaluate=function(){var g=this.getMaxInputSliceCount();a.setSliceCount(g);var b=f.getValue(0);d.getValue(0);for(var l=0,k=0;k<g;k++){var s=c.getValue(k),u=1;if("MatchesAny"==b||"ContainsAny"==b)u=e.getSliceCount();for(var z=0,y=0;y<u;y++){var w=e.getValue(y+k),v=[];if("Matches"==b||"MatchesAny"==b)w==s&&v.push(-1);else for(var w=RegExp(w,"gi"),p;p=w.exec(s);)v.push(p.index);
for(w=0;w<v.length;w++)h.setValue(l,k%c.getSliceCount()),m.setValue(l,(k+y)%e.getSliceCount()),t.setValue(l,v[w]+1),l++,z++}a.setValue(k,z)}h.setSliceCount(l);m.setSliceCount(l);t.setSliceCount(l)}};VVVV.Nodes.SiftString.prototype=new VVVV.Core.Node;VVVV.Nodes.SeparateString=function(b,g){this.constructor(b,"Separate (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Quotes don't work"]};this.auto_evaluate=!1;var c=this.addInputPin("Input",
["text"],VVVV.PinTypes.String),e=this.addInputPin("Intersperse",["None"],VVVV.PinTypes.Enum);e.enumOptions="None Space Comma CommaPlusSpace Semicolon Colon Pipe UnixPath DosPath Dash NewLineAutoDetection Dot UnderScore Minus".split(" ");var f=this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),d=this.addInputPin("Ignore between",["Double"],VVVV.PinTypes.Enum);d.enumOptions=["Single","Double"];var a=this.addInputPin("Keep Quotes",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Output",["text"],
VVVV.PinTypes.String),m=this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value),k={None:"",Space:" ",Comma:",",CommaPlusSpace:", ",Semicolon:";",Colon:":",Pipe:"|",UnixPath:"/",DosPath:"\\",Dash:"-",NewLineAutoDetection:"\n",Dot:".",UnderScore:"_",Minus:"-"},q={Single:"'",Double:'"'};this.evaluate=function(){for(var g=this.getMaxInputSliceCount(),b=0,r=0;r<g;r++){var s=c.getValue(r),u=k[e.getValue(r)],z=f.getValue(r),y=q[d.getValue(r)],w=a.getValue(r);""==u&&(u=z);""==u&&(u=void 0);s=s.split(u);
u=s.length;y=RegExp("[^"+y+"]*","g");for(z=0;z<u;z++)1==w?h.setValue(b,s[z]):h.setValue(b,s[z].match(y).join("")),m.setValue(b,r),b++}h.setSliceCount(b);m.setSliceCount(b)}};VVVV.Nodes.SeparateString.prototype=new VVVV.Core.Node;VVVV.Nodes.EQString=function(b,g){this.constructor(b,"EQ (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input 1",[""],VVVV.PinTypes.String),e=this.addInputPin("Input 2",
[""],VVVV.PinTypes.String),f=this.addInputPin("Case Sensitive",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),g=0;g<h;g++){var b=c.getValue(g),q=e.getValue(g),n=f.getValue(g),b=b==q||0==n&&b.toLowerCase()==q.toLowerCase()?1:0;d.setValue(g,b);a.setValue(g,1-b)}d.setSliceCount(h);a.setSliceCount(h)}};VVVV.Nodes.EQString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SelectString=function(b,g){this.constructor(b,"Select (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[""],VVVV.PinTypes.String),e=this.addInputPin("Select",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[""],VVVV.PinTypes.String),d=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,g=0;g<a;g++)for(var b=
0;b<e.getValue(g);b++)f.setValue(h,c.getValue(g)),d.setValue(h,g),h++;f.setSliceCount(h);d.setSliceCount(h)}};VVVV.Nodes.SelectString.prototype=new VVVV.Core.Node;VVVV.Nodes.CountString=function(b,g){this.constructor(b,"Count (String)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[""],VVVV.PinTypes.String);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);
this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountString.prototype=new VVVV.Core.Node;VVVV.Nodes.CleanString=function(b,g){this.constructor(b,"Clean (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",["text"],
VVVV.PinTypes.String),e=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){for(var f=this.getMaxInputSliceCount(),d=0;d<f;d++)c.getValue(d)?e.setValue(d,c.getValue(d).trim()):e.setValue(d,void 0);e.setSliceCount(f)}};VVVV.Nodes.CleanString.prototype=new VVVV.Core.Node;VVVV.Nodes.AvoidNilString=function(b,g){this.constructor(b,"AvoidNIL (String)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};
var c=this.addInputPin("Input",["text"],VVVV.PinTypes.String),e=this.addInputPin("Default",["text"],VVVV.PinTypes.String),f=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){if(c.pinIsChanged()||e.pinIsChanged()){var d=c;void 0==c.values[0]&&(d=e);for(var a=0;a<d.values.length;a++)f.setValue(a,d.getValue(a));f.setSliceCount(d.getSliceCount())}}};VVVV.Nodes.AvoidNilString.prototype=new VVVV.Core.Node;VVVV.Nodes.FormatValueString=function(b,g){this.constructor(b,"FormatValue (String)",
g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:["pad function: http://stackoverflow.com/a/10073788","thousands separator regex: http://stackoverflow.com/a/2901298"],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Characters before Comma",[1],VVVV.PinTypes.Value),f=this.addInputPin("Characters after Comma",[0],VVVV.PinTypes.Value),d=this.addInputPin("Thousands Symbol",["None"],VVVV.PinTypes.Enum);
d.enumOptions=["None","Dot","Comma","Space"];var a=this.addInputPin("Comma Symbol",["Dot"],VVVV.PinTypes.Enum);a.enumOptions=["Dot","Comma"];var h=this.addInputPin("Leading Zeroes",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Output",["0"],VVVV.PinTypes.String),k={Dot:".",Comma:",",None:"",Space:" "};this.evaluate=function(){for(var g=this.getMaxInputSliceCount(),b=0;b<g;b++){var l=c.getValue(b),r=parseInt(e.getValue(b)),s=parseInt(f.getValue(b)),u=d.getValue(b),z=a.getValue(b),y=h.getValue(b),r=
r+s+(0<s),l=parseFloat(l).toFixed(s),y=y=0.5<=y?"0":" ",l=l+"",l=l.length>=r?l:Array(r-l.length+1).join(y)+l,l=l.replace(".",k[z]).replace(/\B(?=(\d{3})+(?!\d))/g,k[u]);m.setValue(b,l)}m.setSliceCount(g)}};VVVV.Nodes.FormatValueString.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.MouseGlobal=function(b,g){this.constructor(b,"Mouse (System Global)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var c=this.addOutputPin("X",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),d=
this.addOutputPin("Left Button",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Middle Button",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value),m=0,t=0,q=0,n=0,l=0,r=0;k(document).mousemove(function(a){m=2*a.pageX/parseInt(k("body").css("width"))-1;t=-(2*a.pageY/parseInt(k("body").css("height"))-1)});k(document).bind("mousewheel",function(a){q+=a.originalEvent.wheelDelta/120});k(document).bind("DOMMouseScroll",function(a){q+=-a.originalEvent.detail/3});k(document).mousedown(function(a){switch(a.which){case 1:n=
1;break;case 2:l=1;break;case 3:r=1}});k(document).mouseup(function(a){switch(a.which){case 1:n=0;break;case 2:l=0;break;case 3:r=0}});this.evaluate=function(){c.getValue(0)!=m&&c.setValue(0,m);e.getValue(0)!=t&&e.setValue(0,t);f.getValue(0)!=q&&f.setValue(0,q);d.getValue(0)!=n&&d.setValue(0,n);a.getValue(0)!=l&&a.setValue(0,l);h.getValue(0)!=r&&h.setValue(0,r)}};VVVV.Nodes.MouseGlobal.prototype=new VVVV.Core.Node;VVVV.Nodes.MouseWindow=function(b,g){this.constructor(b,"Mouse (System Window)",g);
this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var c=this.addOutputPin("X",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Left Button",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Middle Button",[0],
VVVV.PinTypes.Value),h=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value);this.evaluate=function(){c.getValue(0)!=VVVV.MousePositions._all.x&&c.setValue(0,VVVV.MousePositions._all.x);e.getValue(0)!=VVVV.MousePositions._all.y&&e.setValue(0,VVVV.MousePositions._all.y);f.getValue(0)!=VVVV.MousePositions._all.wheel&&f.setValue(0,VVVV.MousePositions._all.wheel);d.getValue(0)!=VVVV.MousePositions._all.lb&&d.setValue(0,VVVV.MousePositions._all.lb);a.getValue(0)!=VVVV.MousePositions._all.mb&&a.setValue(0,
VVVV.MousePositions._all.mb);h.getValue(0)!=VVVV.MousePositions._all.rb&&h.setValue(0,VVVV.MousePositions._all.rb)}};VVVV.Nodes.MouseWindow.prototype=new VVVV.Core.Node;VVVV.Nodes.ShellExecute=function(b,g){this.constructor(b,"ShellExecute (Windows)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["This actually does something completely different from the original node: the origin node executes a shell command, this node evals javascript code"]};
var c=this.addInputPin("File",[0],VVVV.PinTypes.String),e=this.addInputPin("Do Execute",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Result",[""],VVVV.PinTypes.String);this.evaluate=function(){if(1<=Math.round(e.getValue(0))){var d=eval(c.getValue(0));d instanceof Array||d instanceof Object||(d=[d]);if(void 0!=d)for(var a=0;a<d.length;a++)f.setValue(a,d[a])}}};VVVV.Nodes.ShellExecute.prototype=new VVVV.Core.Node;VVVV.Nodes.ScreenInfo=function(b,g){this.constructor(b,"ScreenInfo (Windows)",g);this.meta=
{authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:["Outputs the window size (ResolutionXY) and the document size (Working AreaXY) only","no Bits per pixel"]};var c=this.addOutputPin("ResolutionXY",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Working AreaXY",[0],VVVV.PinTypes.Value),f=0,d=0,a=0,h=0;k(document).ready(function(){d=k(window).height();f=k(window).width();h=k(document).height();a=k(document).width()});k(window).resize(function(){d=
k(window).height();f=k(window).width();h=k(document).height();a=k(document).width()});this.evaluate=function(){if(c.getValue(0)!=f||c.getValue(1)!=d)c.setValue(0,f),c.setValue(1,d);if(e.getValue(0)!=a||e.getValue(1)!=h)e.setValue(0,a),e.setValue(1,h)}};VVVV.Nodes.ScreenInfo.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Transform={typeName:"Transform",reset_on_disconnect:!0,defaultValue:function(){return mat4.identity(mat4.create())}};VVVV.Nodes.Rotate=function(b,g){this.constructor(b,"Rotate (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);
this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=0;f<e;f++){var d=this.inputPins["Transform In"].getValue(f),a=parseFloat(this.inputPins.X.getValue(f)),h=parseFloat(this.inputPins.Y.getValue(f)),
g=parseFloat(this.inputPins.Z.getValue(f));mat4.rotate(d,2*h*Math.PI,[0,1,0],c[f]);mat4.rotate(c[f],2*a*Math.PI,[1,0,0]);mat4.rotate(c[f],2*g*Math.PI,[0,0,1]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.Rotate.prototype=new VVVV.Core.Node;VVVV.Nodes.Translate=function(b,g){this.constructor(b,"Translate (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",
[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<
c.length&&(c.length=e);for(f=0;f<e;f++){var d=parseFloat(this.xIn.getValue(f)),a=parseFloat(this.yIn.getValue(f)),h=parseFloat(this.zIn.getValue(f));mat4.translate(this.trIn.getValue(f),[d,a,h],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.Translate.prototype=new VVVV.Core.Node;VVVV.Nodes.Scale=function(b,g){this.constructor(b,"Scale (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=
this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[1],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[1],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<
e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=0;f<e;f++){var d=parseFloat(this.inputPins.X.getValue(f)),a=parseFloat(this.inputPins.Y.getValue(f)),h=parseFloat(this.inputPins.Z.getValue(f));mat4.scale(this.trIn.getValue(f),[d,a,h],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.Scale.prototype=new VVVV.Core.Node;VVVV.Nodes.UniformScale=function(b,g){this.constructor(b,"UniformScale (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xyzIn=this.addInputPin("XYZ",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?this.getMaxInputSliceCount():this.xyzIn.getSliceCount();if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=0;f<e;f++){var d=parseFloat(this.inputPins.XYZ.getValue(f));
mat4.scale(this.trIn.getValue(f),[d,d,d],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.UniformScale.prototype=new VVVV.Core.Node;VVVV.Nodes.Trapeze=function(b,g){this.constructor(b,"Trapeze (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[],e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);
this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var f=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(f>c.length)for(var d=c.length;d++<f;)c.push(mat4.create());else f<c.length&&(c.length=f);for(d=0;d<f;d++){var a=2*parseFloat(this.inputPins.X.getValue(d)),
h=2*parseFloat(this.inputPins.Y.getValue(d)),g=2*parseFloat(this.inputPins.Z.getValue(d));e[3]=a;e[7]=h;e[11]=g;mat4.multiply(this.inputPins["Transform In"].getValue(d),e,c[d]);this.trOut.setValue(d,c[d])}this.trOut.setSliceCount(f)}};VVVV.Nodes.Trapeze.prototype=new VVVV.Core.Node;VVVV.Nodes.Transform2d=function(b,g){this.constructor(b,"Transform (Transform 2d)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",
[],VVVV.PinTypes.Transform);this.txIn=this.addInputPin("TranslateX",[0],VVVV.PinTypes.Value);this.tyIn=this.addInputPin("TranslateY",[0],VVVV.PinTypes.Value);this.sxIn=this.addInputPin("ScaleX",[1],VVVV.PinTypes.Value);this.syIn=this.addInputPin("ScaleY",[1],VVVV.PinTypes.Value);this.rIn=this.addInputPin("Rotate",[0],VVVV.PinTypes.Value);this.cxIn=this.addInputPin("CenterX",[0],VVVV.PinTypes.Value);this.cyIn=this.addInputPin("CenterY",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",
[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.getMaxInputSliceCount();if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=0;f<e;f++){var d=parseFloat(this.inputPins.TranslateX.getValue(f)),a=parseFloat(this.inputPins.TranslateY.getValue(f)),h=parseFloat(this.inputPins.ScaleX.getValue(f)),g=parseFloat(this.inputPins.ScaleY.getValue(f)),b=parseFloat(this.inputPins.Rotate.getValue(f)),q=parseFloat(this.inputPins.CenterX.getValue(f)),n=parseFloat(this.inputPins.CenterY.getValue(f));
mat4.translate(this.inputPins["Transform In"].getValue(f),[d,a,0],c[f]);mat4.rotate(c[f],2*b*Math.PI,[0,0,1]);mat4.scale(c[f],[h,g,1]);mat4.translate(c[f],[-q,-n,0]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.Transform2d.prototype=new VVVV.Core.Node;VVVV.Nodes.AspectRatio=function(b,g){this.constructor(b,"AspectRatio (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[];this.trIn=this.addInputPin("Transform In",
[],VVVV.PinTypes.Transform);this.wIn=this.addInputPin("Aspect Width",[1],VVVV.PinTypes.Value);this.hIn=this.addInputPin("Aspect Height",[1],VVVV.PinTypes.Value);this.sIn=this.addInputPin("Uniform Scale",[1],VVVV.PinTypes.Value);this.alignmentIn=this.addInputPin("Alignment",["FitIn"],VVVV.PinTypes.Enum);this.alignmentIn.enumOptions=["FitIn","FitWidth","FitHeight","FitOut"];this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.trIn.isConnected()?
this.getMaxInputSliceCount():Math.max(this.wIn.getSliceCount(),this.hIn.getSliceCount(),this.sIn.getSliceCount(),this.alignmentIn.getSliceCount());if(e>c.length)for(var f=c.length;f++<e;)c.push(mat4.create());else e<c.length&&(c.length=e);for(f=0;f<e;f++){var d=parseFloat(this.inputPins["Aspect Width"].getValue(f)),a=parseFloat(this.inputPins["Aspect Height"].getValue(f)),h=parseFloat(this.inputPins["Uniform Scale"].getValue(f)),g=h,b=h;switch(this.alignmentIn.getValue(f)){case "FitIn":d>a?b*=a/d:
g*=d/a;break;case "FitWidth":b*=a/d;break;case "FitHeight":g*=d/a;break;case "FitOut":d<a?b*=a/d:g*=d/a}mat4.scale(this.inputPins["Transform In"].getValue(f),[g,b,h],c[f]);this.trOut.setValue(f,c[f])}this.trOut.setSliceCount(e)}};VVVV.Nodes.AspectRatio.prototype=new VVVV.Core.Node;VVVV.Nodes.Perspective=function(b,g){this.constructor(b,"Perspective (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable"]};mat4.identity(mat4.create());
this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.addInputPin("FOV",[0.25],VVVV.PinTypes.Value);this.addInputPin("Near Plane",[0.05],VVVV.PinTypes.Value);this.addInputPin("Far Plane",[100],VVVV.PinTypes.Value);this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=parseFloat(this.inputPins.FOV.getValue(0)),e=parseFloat(this.inputPins["Near Plane"].getValue(0)),f=parseFloat(this.inputPins["Far Plane"].getValue(0)),d=mat4.create();mat4.identity(d);
mat4.perspective(360*c,1,e,f,d);this.inputPins["Transform In"].isConnected()&&(c=this.inputPins["Transform In"].getValue(0),mat4.multiply(c,d,d));this.outputPins["Transform Out"].setValue(0,d)}};VVVV.Nodes.Perspective.prototype=new VVVV.Core.Node;VVVV.Nodes.InverseTransform=function(b,g){this.constructor(b,"Inverse (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[],e=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),
f=this.addInputPin("Source",[],VVVV.PinTypes.Transform),d=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var a=this.getMaxInputSliceCount();if(a>c.length)for(var h=c.length;h++<a;)c.push(mat4.create());else a<c.length&&(c.length=a);for(h=0;h<a;h++)mat4.set(f.getValue(h),c[h]),mat4.multiply(e.getValue(h),mat4.inverse(c[h],c[h]),c[h]),d.setValue(h,c[h]);d.setSliceCount(a)}};VVVV.Nodes.InverseTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.LookAtTransformVector=
function(b,g){this.constructor(b,"LookAt (Transform Vector)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),e=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),f=this.addInputPin("LookAt XYZ",[0,0,1],VVVV.PinTypes.Value),d=this.addInputPin("UpVector XYZ",[0,1,0],VVVV.PinTypes.Value),a=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform),
h=mat4.create();mat4.identity(h);mat4.scale(h,[-1,1,-1]);var m=[];this.evaluate=function(){var g=Math.max(c.getSliceCount(),Math.max(e.getSliceCount()/3,Math.max(f.getSliceCount()/3,d.getSliceCount()/3))),g=Math.ceil(g);if(g>m.length)for(var b=m.length;b++<g;)m.push(mat4.create());else g<m.length&&(m.length=g);for(b=0;b<g;b++){var n=e.getValue(b,3),l=f.getValue(b,3),k=d.getValue(b,3);mat4.lookAt(n,l,k,m[b]);mat4.multiply(h,m[b],m[b]);c.isConnected()&&mat4.multiply(c.getValue(b),m[b],m[b]);a.setValue(b,
m[b])}a.setSliceCount(g)}};VVVV.Nodes.LookAtTransformVector.prototype=new VVVV.Core.Node;VVVV.Nodes.LookAtTransform=function(b,g){this.constructor(b,"LookAt (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),e=this.addInputPin("Position X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Position Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Position Z",
[0],VVVV.PinTypes.Value),a=this.addInputPin("LookAt X",[0],VVVV.PinTypes.Value),h=this.addInputPin("LookAt Y",[0],VVVV.PinTypes.Value),m=this.addInputPin("LookAt Z",[1],VVVV.PinTypes.Value),k=this.addInputPin("UpVector X",[0],VVVV.PinTypes.Value),q=this.addInputPin("UpVector Y",[1],VVVV.PinTypes.Value),n=this.addInputPin("UpVector Z",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform),r=mat4.create();mat4.identity(r);mat4.scale(r,[-1,1,-1]);var s=[],u=vec3.create(),
z=vec3.create(),y=vec3.create();this.evaluate=function(){var g=this.getMaxInputSliceCount();if(g>s.length)for(var b=s.length;b++<g;)s.push(mat4.create());else g<s.length&&(s.length=g);for(b=0;b<g;b++)u[0]=e.getValue(b),u[1]=f.getValue(b),u[2]=d.getValue(b),z[0]=a.getValue(b),z[1]=h.getValue(b),z[2]=m.getValue(b),y[0]=k.getValue(b),y[1]=q.getValue(b),y[2]=n.getValue(b),mat4.lookAt(u,z,y,s[b]),mat4.multiply(r,s[b],s[b]),c.isConnected()&&mat4.multiply(c.getValue(b),s[b],s[b]),l.setValue(b,s[b]);l.setSliceCount(g)}};
VVVV.Nodes.LookAtTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.MultiplyTransform=function(b,g){this.constructor(b,"Multiply (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[],e=2;this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);var f=this.addInvisiblePin("Transform In Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){e=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,d,e,function(a){return this.addInputPin("Transform In "+
(a+1),[],VVVV.PinTypes.Transform)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();var a=this.getMaxInputSliceCount();if(a>c.length)for(var h=c.length;h++<a;)c.push(mat4.create());else a<c.length&&(c.length=a);for(h=0;h<a;h++){mat4.identity(c[h]);for(var b=e-1;0<=b;b--)if(d[b].isConnected()){var g=d[b].getValue(h);mat4.multiply(c[h],g,c[h])}this.trOut.setValue(h,c[h])}this.trOut.setSliceCount(a)}};VVVV.Nodes.MultiplyTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.ApplyTransform=function(b,
g){this.constructor(b,"ApplyTransform (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),e=this.addInputPin("X UnTransformed",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y UnTransformed",[0],VVVV.PinTypes.Value),d=this.addInputPin("Z UnTransformed",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X Transformed",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y Transformed",
[0],VVVV.PinTypes.Value),m=this.addOutputPin("Z Transformed",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),g=0;g<b;g++){var n=c.getValue(g),l=[];l[0]=e.getValue(g);l[1]=f.getValue(g);l[2]=d.getValue(g);mat4.multiplyVec3(n,l);a.setValue(g,l[0]);h.setValue(g,l[1]);m.setValue(g,l[2])}a.setSliceCount(b);h.setSliceCount(b);m.setSliceCount(b)}};VVVV.Nodes.ApplyTransform.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.AddValue=function(b,g){this.constructor(b,"Add (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,d,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){c.pinIsChanged()&&this.initialize();var d=this.getMaxInputSliceCount();f.setSliceCount(d);for(var a=0;a<d;a++){for(var h=parseFloat(e[0].getValue(a)),b=1;b<e.length;b++)h+=parseFloat(e[b].getValue(a));f.setValue(a,h)}}};VVVV.Nodes.AddValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SubtractValue=function(b,g){this.constructor(b,"Subtract (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInvisiblePin("Input Count",
[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,d,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();var d=this.getMaxInputSliceCount();f.setSliceCount(d);for(var a=0;a<d;a++){for(var h=parseFloat(e[0].getValue(a)),b=1;b<e.length;b++)h-=parseFloat(e[b].getValue(a));f.setValue(a,h)}}};
VVVV.Nodes.SubtractValue.prototype=new VVVV.Core.Node;VVVV.Nodes.EqValue=function(b,g){this.constructor(b,"EQ (Value)",g);this.meta={authors:["Matthias Zauner","Fibo"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),b=0;b<h;b++){var g=0;Math.abs(c.getValue(b)-e.getValue(b))<=Math.abs(f.getValue(b))&&(g=1);d.setValue(b,g);a.setValue(b,1-g)}d.setSliceCount(h);a.setSliceCount(h)}};VVVV.Nodes.EqValue.prototype=new VVVV.Core.Node;VVVV.Nodes.GtValue=function(b,g){this.constructor(b,"GT (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var c=this.addInputPin("Input 1",
[0],VVVV.PinTypes.Value),e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){var h=0;parseFloat(c.getValue(a))>parseFloat(e.getValue(a))&&(h=1);f.setValue(a,h)}f.setSliceCount(d)}};VVVV.Nodes.GtValue.prototype=new VVVV.Core.Node;VVVV.Nodes.LtValue=function(b,g){this.constructor(b,"LT (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:["No dynamic pin count yet"]};var c=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){var h=0;parseFloat(c.getValue(a))<parseFloat(e.getValue(a))&&(h=1);f.setValue(a,h)}f.setSliceCount(d)}};VVVV.Nodes.LtValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MultiplyValue=function(b,g){this.constructor(b,
"Multiply (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,e,d,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();var d=this.getMaxInputSliceCount();
f.setSliceCount(d);for(var a=0;a<d;a++){for(var h=parseFloat(e[0].getValue(a)),b=1;b<e.length;b++)h*=parseFloat(e[b].getValue(a));f.setValue(a,h)}}};VVVV.Nodes.MultiplyValue.prototype=new VVVV.Core.Node;VVVV.Nodes.DivideValue=function(b,g){this.constructor(b,"Divide (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Inputs Count",[2],VVVV.PinTypes.Value);var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),
e=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++)0==e.getValue(a)?f.setValue(a,1):f.setValue(a,c.getValue(a)/e.getValue(a));f.setSliceCount(d)}};VVVV.Nodes.DivideValue.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxValueAdvanced=function(b,g){this.constructor(b,"IOBox (Value Advanced)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.addInputPin("Y Input Value",[0],VVVV.PinTypes.Value);this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addOutputPin("Y Output Value",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.inputPins["Y Input Value"].getSliceCount(),e,f=0;f<c;f++)e=parseFloat(this.inputPins["Y Input Value"].getValue(f)),isFinite(e)||(e=0),this.outputPins["Y Output Value"].setValue(f,e);this.outputPins["Y Output Value"].setSliceCount(this.inputPins["Y Input Value"].getSliceCount())}};
VVVV.Nodes.IOBoxValueAdvanced.prototype=new VVVV.Core.Node;VVVV.Nodes.CountValue=function(b,g){this.constructor(b,"Count (Value)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,
this.inputPins.Input.values.length),this.outputPins.High.setValue(0,this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchValueInput=function(b,g){this.constructor(b,"Switch (Value Input)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),f=
[];this.initialize=function(){var a=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,f,a,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};var d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)d.setValue(h,f[Math.round(Math.abs(e.getValue(h)))%f.length].getValue(h));d.setSliceCount(a)}};VVVV.Nodes.SwitchValueInput.prototype=new VVVV.Core.Node;VVVV.Nodes.SelectValue=
function(b,g){this.constructor(b,"Select (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Select",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,b=0;b<a;b++)for(var g=0;g<e.getValue(b);g++)f.setValue(h,
parseFloat(c.getValue(b))),d.setValue(h,b),h++;f.setSliceCount(h);d.setSliceCount(h)}};VVVV.Nodes.SelectValue.prototype=new VVVV.Core.Node;VVVV.Nodes.AsString=function(b,g){this.constructor(b,"AsString (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["SubType not implemented, always returns float formatting"]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("SubType",["Real (MinFloat .. MaxFloat)"],VVVV.PinTypes.Enum);
e.enumOptions=["Real (MinFloat .. MaxFloat)","Integer (MinInt .. MaxInt)"];var f=this.addOutputPin("Output",[0],VVVV.PinTypes.String);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){subtype=e.getValue(a).match(/^(.+) \(/)[1];var h;switch(subtype){case "Real":h=parseFloat(c.getValue(a)).toFixed(4);break;case "Integer":h=parseInt(c.getValue(a)).toFixed(0)}f.setValue(a,h)}f.setSliceCount(d)}};VVVV.Nodes.AsString.prototype=new VVVV.Core.Node;VVVV.Nodes.Frac=function(b,g){this.constructor(b,
"Frac (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Whole Part",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Real Part",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){var h=parseFloat(c.getValue(a));e.setValue(a,Math.floor(h));f.setValue(a,h-Math.floor(h))}e.setSliceCount(d);f.setSliceCount(d)}};
VVVV.Nodes.Frac.prototype=new VVVV.Core.Node;VVVV.Nodes.AddValueSpectral=function(b,g){this.constructor(b,"Add (Value Spectral)",g);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),e=0,f=0,
d=0;d<c||0<this.inputPins["Bin Size"].getValue(0)&&(0<f||0!=e%this.inputPins["Bin Size"].values.length);d++){if(0==f)var a=0;a+=parseFloat(this.inputPins.Input.getValue(d));f++;0<this.inputPins["Bin Size"].getValue(0)?f>=this.inputPins["Bin Size"].getValue(e)&&(this.outputPins.Output.setValue(e,a),e++,f=0):this.outputPins.Output.setValue(0,a)}this.outputPins.Output.setSliceCount(e+(0<f))}};VVVV.Nodes.AddValueSpectral.prototype=new VVVV.Core.Node;VVVV.Nodes.WaveShaperValue=function(b,g){this.constructor(b,
"WaveShaper (Value)",g);this.meta={authors:["sebl"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Shape",["Linear"],VVVV.PinTypes.Enum);e.enumOptions=["Linear","Inverse","Triangle","Sine","Rectangle"];var f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){var h=parseFloat(c.getValue(a));
switch(e.getValue(a)){case "Linear":f.setValue(a,h);break;case "Inverse":f.setValue(a,1-h);break;case "Triangle":0.5>h?f.setValue(a,2*h):f.setValue(a,2*(1-h));break;case "Sine":inp=6.28318530717959*((h+0.25)%1);f.setValue(a,Math.sin(inp)/2+0.5);break;case "Rectangle":0.5>h?f.setValue(a,0):f.setValue(a,1)}}f.setSliceCount(d)}};VVVV.Nodes.WaveShaperValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MapValue=function(b,g){this.constructor(b,"Map (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:["Mirror Mapping Mode not implemented"]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0.5],VVVV.PinTypes.Value),e=this.addInputPin("Source Minimum",[0],VVVV.PinTypes.Value),f=this.addInputPin("Source Maximum",[1],VVVV.PinTypes.Value),d=this.addInputPin("Destination Minimum",[0],VVVV.PinTypes.Value),a=this.addInputPin("Destination Maximum",[1],VVVV.PinTypes.Value),h=this.addInputPin("Mapping",["Float"],VVVV.PinTypes.Enum);h.enumOptions=["Float","Wrap","Clamp"];
var m=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),g=0;g<b;g++){var n=parseFloat(c.getValue(g)),l=parseFloat(e.getValue(g)),k=parseFloat(f.getValue(g)),s=parseFloat(d.getValue(g)),u=parseFloat(a.getValue(g)),z=h.getValue(g);if(k==l)m.setValue(g,s);else{n-=l;k-=l;switch(z){case "Clamp":n=Math.max(0,Math.min(k,n));break;case "Wrap":n=(k+n%k)%k}m.setValue(g,n*((u-s)/k)+s)}}m.setSliceCount(b)}};VVVV.Nodes.MapValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MinValue=function(b,g){this.constructor(b,"Min (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var d=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,d,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){e.pinIsChanged()&&this.initialize();for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){for(var h=void 0,b=0;b<f.length;b++)if(void 0==h||f[b].getValue(a)<h)h=f[b].getValue(a);c.setValue(a,h)}c.setSliceCount(d)}};VVVV.Nodes.MinValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MaxValue=function(b,g){this.constructor(b,"Max (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addOutputPin("Output",
[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var d=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,d,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){for(var h=void 0,b=0;b<f.length;b++)if(void 0==h||f[b].getValue(a)>h)h=f[b].getValue(a);c.setValue(a,h)}c.setSliceCount(d)}};
VVVV.Nodes.MaxValue.prototype=new VVVV.Core.Node;VVVV.Nodes.ModValue=function(b,g){this.constructor(b,"Mod (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var d=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,d,function(a){return this.addInputPin("Input "+
(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){for(var h=f[0].getValue(a),b=1;b<f.length;b++)h=0==f[b].getValue(a)?0:h%f[b].getValue(a);c.setValue(a,h)}c.setSliceCount(d)}};VVVV.Nodes.ModValue.prototype=new VVVV.Core.Node;VVVV.Nodes.PowerValue=function(b,g){this.constructor(b,"Power (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};
this.auto_evaluate=!1;var c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[];this.initialize=function(){var d=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,f,d,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){for(var h=f[0].getValue(a),b=1;b<f.length;b++)h=Math.pow(h,f[b].getValue(a));
c.setValue(a,h)}c.setSliceCount(d)}};VVVV.Nodes.PowerValue.prototype=new VVVV.Core.Node;VVVV.Nodes.RandomValue=function(b,g){this.constructor(b,"Random (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var c=this.addInputPin("Enabled",[1],VVVV.PinTypes.Value),e=this.addInputPin("Is Integer",[0],VVVV.PinTypes.Value),f=this.addInputPin("Scale",[1],VVVV.PinTypes.Value),d=this.addInputPin("Prevent from doubles",
[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),b=0;b<h;b++){var g=c.getValue(b),k=e.getValue(b),n=f.getValue(b),l=d.getValue(b),r=a.values[b];void 0==r&&a.setValue(b,0);if(0.5<=g){r=a.values[b];do g=Math.random()*n,0.5<=k&&(g=Math.round(g));while(0.5<=l&&g==r);a.setValue(b,g)}}a.setSliceCount(h)}};VVVV.Nodes.RandomValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SignValue=function(b,g){this.constructor(b,
"Sign (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Sign Part",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Absolute Part",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),a=0;a<d;a++){var h=c.getValue(a);e.setValue(a,0==h?0:h/Math.abs(h));f.setValue(a,Math.abs(h))}f.setSliceCount(d)}};VVVV.Nodes.SignValue.prototype=
new VVVV.Core.Node;VVVV.Nodes.InputMorphValue=function(b,g){this.constructor(b,"InputMorph (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,d,
a,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h,b,g,k=0;k<a;k++)h=c.getValue(k),b=((Math.floor(h)+d.length)%d.length+d.length)%d.length,g=((Math.ceil(h)+d.length)%d.length+d.length)%d.length,h-=Math.floor(h),e.setValue(k,(1-h)*d[b].getValue(k)+h*d[g].getValue(k));e.setSliceCount(a)}};VVVV.Nodes.InputMorphValue.prototype=new VVVV.Core.Node;VVVV.Nodes.Sift=function(b,
g){this.constructor(b,"Sift (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Filter",[0],VVVV.PinTypes.Value),f=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),d=this.addInputPin("Find",["First"],VVVV.PinTypes.Enum);d.enumOptions=["First","Last","All"];var a=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Input Index",
[0],VVVV.PinTypes.Value),m=this.addOutputPin("Filter Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.getMaxInputSliceCount();var b=c.getSliceCount(),g=e.getSliceCount();a.setSliceCount(b);f.getValue(0);for(var k=d.getValue(0),l={},r=0,s=0;s<b;s++){var u=s;"Last"==k&&(u=b-s-1);var z=c.getValue(u);if("All"!=k){if(l[z]){a.setValue(u,0);continue}l[z]=!0}for(var y=0,w=0;w<g;w++)if(filter=e.getValue(w),filter==z){h.setValue(r,u);m.setValue(r,w);r++;y++;break}a.setValue(u,y)}h.setSliceCount(r);
m.setSliceCount(r)}};VVVV.Nodes.Sift.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){function b(){function b(a){return 0<a?parseInt(a):parseInt(a-1)}function c(a,d,e,c,b){return a[0]*d+a[1]*e+a[2]*c+a[3]*b}var e=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,1]],f=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],
[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],d=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,
18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,
128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,
202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],a=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,
0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],
[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]];this.noise2d=function(a,c){var f,k,n;n=0.5*(Math.sqrt(3)-1);n*=a+c;var l=b(a+n),r=b(c+n),s=(3-Math.sqrt(3))/6;n=(l+r)*s;f=a-(l-n);var u=c-(r-n),z,y;f>u?(z=1,y=0):(z=0,y=1);k=f-z+s;var w=u-y+s;n=f-1+2*s;var s=u-1+2*s,v=l&255,r=r&255,l=d[v+d[r]]%12;z=d[v+z+d[r+y]]%12;y=d[v+1+d[r+1]]%12;r=0.5-f*f-u*u;0>r?f=0:(r*=r,f=r*r*(e[l][0]*f+e[l][1]*u));u=0.5-k*k-w*w;0>u?k=0:(u*=u,k=u*u*(e[z][0]*k+e[z][1]*w));w=0.5-n*n-s*s;0>w?n=0:
(w*=w,n=w*w*(e[y][0]*n+e[y][1]*s));return 70*(f+k+n)};this.noise3d=function(a,c,f){var k,n,l,r=(a+c+f)*(1/3),s=b(a+r),u=b(c+r),z=b(f+r),r=1/6;l=(s+u+z)*r;k=a-(s-l);n=c-(u-l);var y=f-(z-l),w,v,p,A,B,C;k>=n?n>=y?(w=1,p=v=0,B=A=1,C=0):(k>=y?(w=1,p=v=0):(v=w=0,p=1),A=1,B=0,C=1):n<y?(v=w=0,p=1,A=0,C=B=1):k<y?(w=0,v=1,A=p=0,C=B=1):(w=0,v=1,p=0,B=A=1,C=0);var F=k-w+r,D=n-v+r,H=y-p+r;l=k-A+2*r;a=n-B+2*r;var L=y-C+2*r;f=k-1+3*r;c=n-1+3*r;var r=y-1+3*r,s=s&255,I=u&255,G=z&255,u=d[s+d[I+d[G]]]%12,z=d[s+w+d[I+
v+d[G+p]]]%12;A=d[s+A+d[I+B+d[G+C]]]%12;s=d[s+1+d[I+1+d[G+1]]]%12;B=0.6-k*k-n*n-y*y;0>B?k=0:(B*=B,k=B*B*(e[u][0]*k+e[u][1]*n+e[u][2]*y));n=0.6-F*F-D*D-H*H;0>n?n=0:(n*=n,n=n*n*(e[z][0]*F+e[z][1]*D+e[z][2]*H));F=0.6-l*l-a*a-L*L;0>F?l=0:(F*=F,l=F*F*(e[A][0]*l+e[A][1]*a+e[A][2]*L));a=0.6-f*f-c*c-r*r;0>a?f=0:(a*=a,f=a*a*(e[s][0]*f+e[s][1]*c+e[s][2]*r));return 32*(k+n+l+f)};this.noise4d=function(e,m,k,q){var n=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20,r,s,u,n=(e+m+k+q)*n,z=b(e+n),y=b(m+n),w=b(k+n),v=b(q+
n),n=(z+y+w+v)*l;r=e-(z-n);s=m-(y-n);var p=k-(w-n),A=q-(v-n);q=(r>s?32:0)+(r>p?16:0)+(s>p?8:0)+(r>A?4:0)+(s>A?2:0)+(p>A?1:0);var B,C,F,D,H,L,I,G,J,E,K,O;B=3<=a[q][0]?1:0;C=3<=a[q][1]?1:0;F=3<=a[q][2]?1:0;D=3<=a[q][3]?1:0;H=2<=a[q][0]?1:0;L=2<=a[q][1]?1:0;I=2<=a[q][2]?1:0;G=2<=a[q][3]?1:0;J=1<=a[q][0]?1:0;E=1<=a[q][1]?1:0;K=1<=a[q][2]?1:0;O=1<=a[q][3]?1:0;var P=r-B+l,Q=s-C+l,R=p-F+l,S=A-D+l;u=r-H+2*l;var M=s-L+2*l,T=p-I+2*l,U=A-G+2*l,n=r-J+3*l;e=s-E+3*l;var V=p-K+3*l,W=A-O+3*l;q=r-1+4*l;k=s-1+4*l;
m=p-1+4*l;var l=A-1+4*l,z=z&255,y=y&255,N=w&255,v=v&255,w=d[z+d[y+d[N+d[v]]]]%32;B=d[z+B+d[y+C+d[N+F+d[v+D]]]]%32;H=d[z+H+d[y+L+d[N+I+d[v+G]]]]%32;J=d[z+J+d[y+E+d[N+K+d[v+O]]]]%32;v=d[z+1+d[y+1+d[N+1+d[v+1]]]]%32;y=0.6-r*r-s*s-p*p-A*A;0>y?r=0:(y*=y,r=y*y*c(f[w],r,s,p,A));s=0.6-P*P-Q*Q-R*R-S*S;0>s?s=0:(s*=s,s=s*s*c(f[B],P,Q,R,S));p=0.6-u*u-M*M-T*T-U*U;0>p?u=0:(p*=p,u=p*p*c(f[H],u,M,T,U));M=0.6-n*n-e*e-V*V-W*W;0>M?n=0:(M*=M,n=M*M*c(f[J],n,e,V,W));e=0.6-q*q-k*k-m*m-l*l;0>e?q=0:(e*=e,q=e*e*c(f[v],q,k,
m,l));return 27*(r+s+u+n+q)}}VVVV.Nodes.Join2dVector=function(b,c){this.constructor(b,"Vector (2d Join)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),d=this.addOutputPin("XY",[0,0],VVVV.PinTypes.Value);this.evaluate=function(){var a=this.getMaxInputSliceCount();d.setSliceCount(2*a);for(var c=0;c<a;c++)d.setValue(2*c,e.getValue(c)),d.setValue(2*
c+1,f.getValue(c))}};VVVV.Nodes.Join2dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Join3dVector=function(b,c){this.constructor(b,"Vector (3d Join)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Z",[0],VVVV.PinTypes.Value),a=this.addOutputPin("XYZ",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){var c=this.getMaxInputSliceCount();
a.setSliceCount(3*c);for(var b=0;b<c;b++)a.setValue(3*b,e.getValue(b)),a.setValue(3*b+1,f.getValue(b)),a.setValue(3*b+2,d.getValue(b))}};VVVV.Nodes.Join3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Join4dVector=function(b,c){this.constructor(b,"Vector (4d Join)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Z",[0],
VVVV.PinTypes.Value),a=this.addInputPin("W",[0],VVVV.PinTypes.Value),h=this.addOutputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value);this.evaluate=function(){var c=this.getMaxInputSliceCount();h.setSliceCount(4*c);for(var b=0;b<c;b++)h.setValue(4*b,e.getValue(b)),h.setValue(4*b+1,f.getValue(b)),h.setValue(4*b+2,d.getValue(b)),h.setValue(4*b+3,a.getValue(b))}};VVVV.Nodes.Join4dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split2dVector=function(b,c){this.constructor(b,"Vector (2d Split)",c);this.meta={authors:["Julien Vulliet"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("XY",[0],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0,b=0;b<a;b+=2)f.setValue(c,e.getValue(b)),d.setValue(c,e.getValue(b+1)),c++;f.setSliceCount(c);d.setSliceCount(c)}};VVVV.Nodes.Split2dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split3dVector=function(b,c){this.constructor(b,
"Vector (3d Split)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("XYZ",[0],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Z",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),b=0,g=0;g<c;g+=3)f.setValue(b,e.getValue(g)),d.setValue(b,e.getValue(g+1)),a.setValue(b,e.getValue(g+2)),
b++;f.setSliceCount(b);d.setSliceCount(b);a.setSliceCount(b)}};VVVV.Nodes.Split3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split4dVector=function(b,c){this.constructor(b,"Vector (4d Split)",c);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var e=this.addInputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Z",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("W",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),b=0,g=0;g<c;g+=4)f.setValue(b,e.getValue(g)),d.setValue(b,e.getValue(g+1)),a.setValue(b,e.getValue(g+2)),h.setValue(b,e.getValue(g+3)),b++;f.setSliceCount(b);d.setSliceCount(b);a.setSliceCount(b);h.setSliceCount(b)}};VVVV.Nodes.Split4dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Simplex2d=function(g,c){this.constructor(g,"Simplex (2d)",c);this.meta={authors:["woei"],original_authors:["tonfilm"],
credits:[],compatibility_issues:[]};var e=this.addInputPin("Position Input XY",[0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),d=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=new b;this.evaluate=function(){for(var c=Math.ceil(Math.max(0.5*e.getSliceCount())),b=parseInt(f.getValue(0)),g=d.getValue(0),l=a.getValue(0),k=0;k<c;k++){for(var s=
e.getValue(2*k),u=e.getValue(2*k+1),z=0,y=0;y<=b;y++)var w=Math.pow(g,y),z=z+m.noise2d(s*w,u*w)*Math.pow(l,y);h.setValue(k,z)}h.setSliceCount(c)}};VVVV.Nodes.Simplex2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Simplex3d=function(g,c){this.constructor(g,"Simplex (3d)",c);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Position Input XYZ",[0.5,0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),d=this.addInputPin("Frequency",
[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=new b;this.evaluate=function(){for(var c=Math.ceil(Math.max(e.getSliceCount()/3)),b=parseInt(f.getValue(0)),g=d.getValue(0),k=a.getValue(0),r=0;r<c;r++){for(var s=e.getValue(3*r),u=e.getValue(3*r+1),z=e.getValue(3*r+2),y=0,w=0;w<=b;w++)var v=Math.pow(g,w),y=y+m.noise3d(s*v,u*v,z*v)*Math.pow(k,w);h.setValue(r,y)}h.setSliceCount(c)}};VVVV.Nodes.Simplex3d.prototype=
new VVVV.Core.Node;VVVV.Nodes.Simplex4d=function(g,c){this.constructor(g,"Simplex (4d)",c);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Position Input XYZW",[0.5,0.5,0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),d=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=new b;this.evaluate=
function(){for(var c=Math.ceil(Math.max(e.getSliceCount()/3)),b=parseInt(f.getValue(0)),g=d.getValue(0),k=a.getValue(0),r=0;r<c;r++){for(var s=e.getValue(4*r),u=e.getValue(4*r+1),z=e.getValue(4*r+2),y=e.getValue(4*r+3),w=0,v=0;v<=b;v++)var p=Math.pow(g,v),w=w+m.noise4d(s*p,u*p,z*p,y*p)*Math.pow(k,v);h.setValue(r,w)}h.setSliceCount(c)}};VVVV.Nodes.Simplex4d.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.ShaderCodeResources={};VVVV.Types.ShaderCodeResource=function(){var b="";this.relatedNodes=[];this.definingNode=void 0;this.setSourceCode=function(c){b=c;for(c=0;c<this.relatedNodes.length;c++)this.relatedNodes[c].shaderSourceUpdated(b)};this.addRelatedNode=function(c){this.relatedNodes.push(c);""!=b&&c.shaderSourceUpdated(b)}};mat4.identity(mat4.create());VVVV.Types.WebGlRenderState=function(){this.alphaBlending=!0;this.srcBlendMode="SRC_ALPHA";this.destBlendMode="ONE_MINUS_SRC_ALPHA";
this.enableZWrite=!0;this.depthFunc="LEQUAL";this.depthOffset=0;this.polygonDrawMode="TRIANGLES";this.copy_attributes=function(b){this.alphaBlending=b.alphaBlending;this.alphaFunc=b.alphaFunc;this.srcBlendMode=b.srcBlendMode;this.destBlendMode=b.destBlendMode;this.enableZwrite=b.enableZWrite;this.depthFunc=b.depthFunc;this.depthOffset=b.depthOffset;this.polygonDrawMode=b.polygonDrawMode};this.apply=function(b){this.alphaBlending?b.enable(b.BLEND):b.disable(b.BLEND);b.blendFunc(b[this.srcBlendMode],
b[this.destBlendMode]);b.depthMask(this.enableZWrite)}};VVVV.Types.VertexBuffer=function(b,c){this.vbo=void 0;this.subBuffers={};this.length=0;this.setSubBuffer=function(b,c,d){this.subBuffers[b]={usage:b,data:new Float32Array(d),size:c,offset:this.length};this.length+=this.subBuffers[b].data.byteLength};this.setSubBuffer("POSITION",3,c);this.create=function(){this.vbo=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.vbo);b.bufferData(b.ARRAY_BUFFER,this.length,b.STATIC_DRAW);_(this.subBuffers).each(function(c){b.bufferSubData(b.ARRAY_BUFFER,
c.offset,c.data)})}};VVVV.Types.Mesh=function(b,c,e){this.vertexBuffer=c;this.indexBuffer=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),b.STATIC_DRAW);this.numIndices=e.length};VVVV.Types.Layer=function(){this.mesh=null;this.textures=[];this.shader=null;this.uniforms={};this.uniformNames=[];this.renderState=b;this.toString=function(){return"Layer"}};VVVV.PinTypes.WebGlResource={typeName:"WebGlResource",reset_on_disconnect:!0,
connectionChangedHandlers:{webglresource:function(){function b(d){return"WebGlResource"==d||"WebGlTexture"==d}if(this.direction!=VVVV.PinDirection.Input){var c=this.node,e=c.findDownstreamNodes("Renderer (EX9)");c.renderContexts||(c.renderContexts=[]);void 0==c.contextChanged&&(c.contextChanged=!1);for(var f=0;f<e.length;f++)c.contextChanged|=!c.renderContexts[f]||c.renderContexts[f].canvas.id!=e[f].ctxt.id,c.renderContexts[f]=e[f].ctxt,c.dirty=!0;c.renderContexts.length!=e.length&&(c.renderContexts.length=
e.length,c.contextChanged=!0,c.dirty=!0);c.isSubpatch||_(c.inputPins).each(function(d){var a;d.markPinAsChanged();"Renderer (EX9)"!=c.nodename&&d.isConnected()&&(0<d.links.length?a=d.links[0].fromPin:0<d.masterPin.links[0].fromPin.links.length&&(a=d.masterPin.links[0].fromPin),a&&b(a.typeName)&&a.connectionChanged())});this.masterPin&&b(this.masterPin.typeName)&&this.masterPin.connectionChanged()}}},defaultValue:function(){return new VVVV.Types.Layer}};VVVV.PinTypes.WebGlTexture={typeName:"WebGlTexture",
reset_on_disconnect:!0,connectionChangedHandlers:{webglresource:VVVV.PinTypes.WebGlResource.connectionChangedHandlers.webglresource},defaultValue:function(){return VVVV.DefaultTexture}};var b=new VVVV.Types.WebGlRenderState;VVVV.PinTypes.WebGlRenderState={typeName:"WebGlRenderState",reset_on_disconnect:!0,defaultValue:function(){return b}};VVVV.DefaultTexture="Empty Texture";VVVV.Types.ShaderProgram=function(){this.uniformSpecs={};this.attributeSpecs={};this.attribSemanticMap={};this.uniformSemanticMap=
{};var b="",c="",e,f;this.isSetup=!1;this.shaderProgram=void 0;this.log="";var d=this;this.extractSemantics=function(a){d.attributeSpecs={};d.attribSemanticMap={};d.uniformSpecs={};d.uniformSemanticMap={};for(var b=/(uniform|attribute) ([a-zA-Z]+)([0-9xD]*) ([a-zA-Z0-9_]+)( : ([A-Z0-9]+))?( = \{?([^;\}]+)\}?)?;/g,c;c=b.exec(a);)"attribute"!=c[1]||d.attributeSpecs[c[4]]?"uniform"!=c[1]||d.uniformSpecs[c[4]]||(d.uniformSpecs[c[4]]={varname:c[4],semantic:c[6],position:0,type:c[2],defaultValue:c[8],dimension:""==
c[3]?1:c[3]},void 0!=c[6]&&(d.uniformSemanticMap[c[6]]=c[4])):(d.attributeSpecs[c[4]]={varname:c[4],semantic:c[6],position:0},void 0!=c[6]&&(d.attribSemanticMap[c[6]]=c[4]))};this.setVertexShader=function(a){b=a};this.setFragmentShader=function(a){c=a};this.setup=function(a){this.log="";e=a.createShader(a.VERTEX_SHADER);a.shaderSource(e,b.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));a.compileShader(e);a.getShaderParameter(e,a.COMPILE_STATUS)||(this.log=a.getShaderInfoLog(e),
console.log(this.log));f=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(f,c.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));a.compileShader(f);a.getShaderParameter(f,a.COMPILE_STATUS)||(this.log=a.getShaderInfoLog(f),console.log(this.log));this.shaderProgram=a.createProgram();a.attachShader(this.shaderProgram,e);a.attachShader(this.shaderProgram,f);a.linkProgram(this.shaderProgram);a.getProgramParameter(this.shaderProgram,a.LINK_STATUS)||console.log("Could not initialise shaders");
_(this.attributeSpecs).each(function(b){b.position=a.getAttribLocation(d.shaderProgram,b.varname)});_(this.uniformSpecs).each(function(b){b.position=a.getUniformLocation(d.shaderProgram,b.varname)});this.isSetup=!0;return""==this.log}};VVVV.Nodes.FileTexture=function(b,c){this.constructor(b,"FileTexture (EX9.Texture)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Always loads in background","No reload pin","No preload pin (preloading handled by browser)",
"No up and running pin","No texture info outputs"]};this.auto_evaluate=!1;var e=this.addInputPin("Filename",[""],VVVV.PinTypes.String),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),d=this.addInvisiblePin("Type",["Texture"],VVVV.PinTypes.Enum);d.enumOptions=["Texture","Cube Texture"];var a=[];this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){if(this.contextChanged){for(var c=0;c<a.length;c++)a[c].context.deleteTexture(a[c]);a=[]}if(e.pinIsChanged()||
d.pinIsChanged()||this.contextChanged){for(var g=d.getValue(0),q=this.getMaxInputSliceCount(),c=0;c<q;c++){var n=VVVV.Helpers.prepareFilePath(e.getValue(c),this.parentPatch);0===n.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(n=VVVV.ImageProxyPrefix+encodeURI(n));a[c]=b.createTexture();a[c].context=b;"Texture"==g?(a[c].image=new Image,a[c].image.onload=function(d){return function(){b.bindTexture(b.TEXTURE_CUBE_MAP,null);b.bindTexture(b.TEXTURE_2D,a[d]);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,
b.UNSIGNED_BYTE,a[d].image);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,null);f.setValue(d,a[d])}}(c),a[c].image.src=n):"Cube Texture"==g&&(a[c].image=new Image,a[c].image.onload=function(d){return function(){var c=[{face:b.TEXTURE_CUBE_MAP_POSITIVE_X,offset:[2,1]},{face:b.TEXTURE_CUBE_MAP_NEGATIVE_X,offset:[0,1]},{face:b.TEXTURE_CUBE_MAP_POSITIVE_Y,offset:[1,0]},{face:b.TEXTURE_CUBE_MAP_NEGATIVE_Y,
offset:[1,2]},{face:b.TEXTURE_CUBE_MAP_POSITIVE_Z,offset:[1,1]},{face:b.TEXTURE_CUBE_MAP_NEGATIVE_Z,offset:[3,1]}];b.bindTexture(b.TEXTURE_CUBE_MAP,a[d]);var e=k('<canvas style="display:none" width="'+this.width/4+'" height="'+this.height/3+'"></canvas>');k("body").append(e);for(var g=e.get(0).getContext("2d"),m=0;6>m;m++)g.save(),g.translate(-this.width/4*c[m].offset[0],-this.height/3*c[m].offset[1]),g.drawImage(this,0,0),b.texImage2D(c[m].face,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,e.get(0)),b.texParameteri(b.TEXTURE_CUBE_MAP,
b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MIN_FILTER,b.NEAREST),g.restore();b.bindTexture(b.TEXTURE_CUBE_MAP,null);e.remove();f.setValue(d,a[d])}}(c),a[c].image.src=n);f.setValue(c,VVVV.defaultTexture)}f.setSliceCount(q)}this.contextChanged=!1}}};this.destroy=function(){for(var b=0;b<a.length;b++)a[b].context.deleteTexture(a[b])}};VVVV.Nodes.FileTexture.prototype=new VVVV.Core.Node;VVVV.Nodes.DX9Texture=function(b,c){this.constructor(b,"DX9Texture (EX9.Texture)",
c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Using WebGL renderer as source doesnt work correctly in Chrome."]};var e=this.addInputPin("Source",[],VVVV.PinTypes.WebGlResource),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),d;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){this.contextChanged&&d&&(d.context.deleteTexture(d),d=void 0);if(e.isConnected()){var b=e.getValue(0);
if(!b)return;0==(b.width&b.width-1)&&0==(b.height&b.height-1)||console.log("Warning: Source renderer's width/height is not a power of 2. DX9Texture will most likely not work.");b instanceof WebGLTexture?f.setValue(0,b):(void 0==d&&(d=a.createTexture(),d.context=a),a.bindTexture(a.TEXTURE_2D,d),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.bindTexture(a.TEXTURE_2D,
null),f.setValue(0,d))}else delete d,a.deleteTexture(d),f.setValue(0,void 0);this.contextChanged=!1}}};this.destroy=function(){d&&d.context.deleteTexture(d)}};VVVV.Nodes.DX9Texture.prototype=new VVVV.Core.Node;VVVV.Nodes.VideoTexture=function(b,c){this.constructor(b,"VideoTexture (EX9.Texture VMR9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Only supports power-of-2 sized videos","Has no output pins for meta data"]};
var e=this.addInputPin("Video",[],this),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),d;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a)if(e.isConnected()){var b=e.getValue(0);0==(b.videoWidth&b.videoWidth-1)&&0==(b.videoHeight&b.videoHeight-1)||console.log("Warning: Video width/height is not a power of 2. VideoTexture will most likely not work.");if(void 0==d||this.contextChanged)d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texImage2D(a.TEXTURE_2D,
0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.bindTexture(a.TEXTURE_2D,null);f.setValue(0,d);this.contextChanged=!1}else delete d,a.deleteTexture(d),f.setValue(0,void 0)}}};VVVV.Nodes.VideoTexture.prototype=new VVVV.Core.Node;VVVV.Nodes.VertexBufferJoin=function(b,c){this.constructor(b,"VertexBuffer (EX9.Geometry Join)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};var e=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),f=this.addInputPin("Normal XYZ",[0,0,0],VVVV.PinTypes.Value),d=this.addInputPin("Texture Coordinate 0 XY",[0,0],VVVV.PinTypes.Value),a=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),h=this.addOutputPin("Vertex Buffer",[],VVVV.PinTypes.WebGlResource),m=null;this.evaluate=function(){var b=this.renderContexts[0];if(b&&0.5<=a.getValue(0)){for(var c=[],g=[],k=[],r=0;r<this.getMaxInputSliceCount();r++)c[r]=
parseFloat(e.getValue(r)),g[r]=parseFloat(d.getValue(r)),k[r]=parseFloat(f.getValue(r));m=new VVVV.Types.VertexBuffer(b,c);m.setSubBuffer("TEXCOORD0",2,g);m.setSubBuffer("NORMAL",3,k);m.create();h.setValue(0,m)}}};VVVV.Nodes.VertexBufferJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.MeshJoin=function(b,c){this.constructor(b,"Mesh (EX9.Geometry Join)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Vertex Buffer",
[],VVVV.PinTypes.WebGlResource),f=this.addInputPin("Indices",[0],VVVV.PinTypes.Value),d=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),h=null;this.evaluate=function(){var b=this.renderContexts[0];b&&0.5<=d.getValue(0)&&(e.isConnected()?(h=new VVVV.Types.Mesh(b,e.getValue(0),f.values),a.setValue(0,h)):(a.setValue(0,void 0),delete h))}};VVVV.Nodes.MeshJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.Grid=function(b,c){this.constructor(b,"Grid (EX9.Geometry)",
c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Resolution X",[2],VVVV.PinTypes.Value),f=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value),d=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),a=null;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){for(var c=parseInt(e.getValue(0)),g=parseInt(f.getValue(0)),k=[],n=[],l=[],r=0,s=0;s<g;s++)for(var u=0;u<
c;u++)k.push(parseFloat(u)/(c-1)-0.5),k.push(0.5-parseFloat(s)/(g-1)),k.push(0),r++,n.push(0),n.push(0),n.push(1),l.push(parseFloat(u)/(c-1)),l.push(parseFloat(s)/(g-1));k=new VVVV.Types.VertexBuffer(b,k);k.setSubBuffer("TEXCOORD0",2,l);k.setSubBuffer("NORMAL",3,n);k.create();n=[];for(s=0;s<g-1;s++)for(u=0;u<c-1;u++)l=u+c*s,n.push(l),n.push(l+1),n.push(l+c+1),n.push(l+c+1),n.push(l+c),n.push(l);a=new VVVV.Types.Mesh(b,k,n);d.setValue(0,a)}}}};VVVV.Nodes.Grid.prototype=new VVVV.Core.Node;VVVV.Nodes.Sphere=
function(b,c){this.constructor(b,"Sphere (EX9.Geometry)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Radius",[0.5],VVVV.PinTypes.Value),f=this.addInputPin("Resolution X",[15],VVVV.PinTypes.Value),d=this.addInputPin("Resolution Y",[15],VVVV.PinTypes.Value),a=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),h=null;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];
if(b){for(var c=parseInt(f.getValue(0)),g=parseInt(d.getValue(0)),k=parseFloat(e.getValue(0)),l=[],r=[],s=[],u=0;u<g+1;u++)for(var z=Math.cos(-parseFloat(u)/g*Math.PI),y=0;y<c;y++){var w=Math.cos(2*(parseFloat(y)/c)*Math.PI)*Math.cos(Math.asin(z)),v=Math.sin(2*(parseFloat(y)/c)*Math.PI)*Math.cos(Math.asin(z));l.push(w*k);l.push(z*k);l.push(v*k);r.push(w);r.push(z);r.push(v);s.push(parseFloat(y)/c);s.push(parseFloat(u)/g)}k=new VVVV.Types.VertexBuffer(b,l);k.setSubBuffer("TEXCOORD0",2,s);k.setSubBuffer("NORMAL",
3,r);k.create();r=[];for(u=0;u<g;u++)for(y=0;y<c;y++)s=c*u,l=y+s,r.push(l),r.push((l+1)%c+s),r.push((l+1)%c+c+s),r.push((l+1)%c+c+s),r.push(l+c),r.push(l);h=new VVVV.Types.Mesh(b,k,r);a.setValue(0,h)}}}};VVVV.Nodes.Sphere.prototype=new VVVV.Core.Node;VVVV.Nodes.Cylinder=function(b,c){this.constructor(b,"Cylinder (EX9.Geometry)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Radius 1",[0.5],VVVV.PinTypes.Value),
f=this.addInputPin("Radius 2",[0.5],VVVV.PinTypes.Value),d=this.addInputPin("Length",[1],VVVV.PinTypes.Value),a=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),h=this.addInputPin("Caps",[1],VVVV.PinTypes.Value),m=this.addInputPin("Resolution X",[15],VVVV.PinTypes.Value),k=this.addInputPin("Resolution Y",[1],VVVV.PinTypes.Value),q=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),n=null;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){var c=parseInt(m.getValue(0)),
g=parseInt(k.getValue(0)),u=parseFloat(e.getValue(0)),z=parseFloat(f.getValue(0)),y=parseFloat(d.getValue(0)),w=parseFloat(a.getValue(0)),v=[],p=[],A=[];v.push(0);v.push(y/2);v.push(0);p.push(0);p.push(1);p.push(0);A.push(0);A.push(0);v.push(0);v.push(-y/2);v.push(0);p.push(0);p.push(-1);p.push(0);A.push(0);A.push(0);for(var B=0;B<g+1;B++)for(var C=parseFloat(B)/g,F=(C-0.5)*-y,D=0;D<c+1;D++){var H=Math.cos(2*(parseFloat(D)/c)*Math.PI*w-Math.PI*w-Math.PI/2),L=Math.sin(2*(parseFloat(D)/c)*Math.PI*w-
Math.PI*w-Math.PI/2),I=C*z+(1-C)*u;v.push(H*I);v.push(F);v.push(L*I);p.push(H);p.push(0);p.push(L);A.push(parseFloat(D)/c);A.push(parseFloat(B)/g)}u=new VVVV.Types.VertexBuffer(b,v);u.setSubBuffer("TEXCOORD0",2,A);u.setSubBuffer("NORMAL",3,p);u.create();p=[];if(0.5<h.getValue(0))for(C=0;2>C;C++)for(D=0;D<c;D++)p.push(C),p.push(2+D+C+C*g*(c+1)),p.push(2+D+(1-C)+C*g*(c+1));for(B=0;B<g;B++)for(D=0;D<c;D++)C=D+(c+1)*B+2,p.push(C),p.push(C+1),p.push(C+c+2),p.push(C+c+2),p.push(C+c+1),p.push(C);n=new VVVV.Types.Mesh(b,
u,p);q.setValue(0,n)}}}};VVVV.Nodes.Cylinder.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendWebGLAdvanced=function(b,c){function e(a){switch(a){case "One":return"ONE";case "Zero":return"ZERO";case "SrcAlpha":return"SRC_ALPHA";case "InvSrcAlpha":return"ONE_MINUS_SRC_ALPHA";case "DestAlpha":return"DST_ALPHA";case "InvDestAlpha":return"ONE_MINUS_DST_ALPHA";case "SrcColor":return"SRC_COLOR";case "InvSrcColor":return"ONE_MINUS_SRC_COLOR";case "DestColor":return"DST_COLOR";case "InvDestColor":return"ONE_MINUS_DST_COLOR"}return null}
this.constructor(b,"Blend (EX9.RenderState Advanced)",c);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),d=this.addInputPin("Alpha Blending",[1],VVVV.PinTypes.Value),a=this.addInputPin("Source Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum),h=this.addInputPin("Destination Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum);a.enumOptions=h.enumOptions="One Zero SrcAlpha InvSrcAlpha DestAlpha InvDestAlpha SrcColor InvSrcColor DestColor InvDestColor".split(" ");
var m=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),k=[];this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),c=0;c<b;c++)void 0==k[c]&&(k[c]=new VVVV.Types.WebGlRenderState),k[c].copy_attributes(f.getValue(c)),k[c].alphaBlending=0.5<parseFloat(d.getValue(c)),k[c].srcBlendMode=e(a.getValue(c)),k[c].destBlendMode=e(h.getValue(c)),m.setValue(c,k[c]);m.setSliceCount(b)}};VVVV.Nodes.BlendWebGLAdvanced.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendWebGL=function(b,c){this.constructor(b,
"Blend (EX9.RenderState)",c);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Draw Mode",["Blend"],VVVV.PinTypes.Enum);f.enumOptions=["Add","Blend","ColorAsAlphaAdd","ColorAsAlphaBlend","Multiply"];var d=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),
c=0;c<b;c++){void 0==a[c]&&(a[c]=new VVVV.Types.WebGlRenderState);a[c].copy_attributes(e.getValue(c));switch(f.getValue(c)){case "Add":a[c].srcBlendMode="SRC_ALPHA";a[c].destBlendMode="ONE";break;case "Blend":a[c].srcBlendMode="SRC_ALPHA";a[c].destBlendMode="ONE_MINUS_SRC_ALPHA";break;case "ColorAsAlphaAdd":a[c].srcBlendMode="SRC_COLOR";a[c].destBlendMode="ONE";break;case "ColorAsAlphaBlend":a[c].srcBlendMode="SRC_COLOR";a[c].destBlendMode="ONE_MINUS_SRC_COLOR";break;case "Multiply":a[c].srcBlendMode=
"ZERO",a[c].destBlendMode="SRC_COLOR"}d.setValue(c,a[c])}d.setSliceCount(b)}};VVVV.Nodes.BlendWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.FillWebGL=function(b,c){this.constructor(b,"Fill (EX9.RenderState)",c);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["does not actually draw wireframe, because this is not supported in WebGL, but makes renderer use gl.LINE instead of gl.TRIANGLES when drawing"]};var e=this.addInputPin("Render State In",
[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Fill Mode",["Solid"],VVVV.PinTypes.Enum);f.enumOptions=["Point","Solid","WireFrame"];var d=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),c=0;c<b;c++){void 0==a[c]&&(a[c]=new VVVV.Types.WebGlRenderState);a[c].copy_attributes(e.getValue(c));switch(f.getValue(c)){case "Point":a[c].polygonDrawMode="POINTS";break;case "Solid":a[c].polygonDrawMode="TRIANGLES";
break;case "WireFrame":a[c].polygonDrawMode="LINES"}d.setValue(c,a[c])}d.setSliceCount(b)}};VVVV.Nodes.FillWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.ZWriteEnableWebGL=function(b,c){function e(a){switch(a){case "Never":return"NEVER";case "Less":return"LESS";case "LessEqual":return"LEQUAL";case "Equal":return"EQUAL";case "NotEqual":return"NOTEQUAL";case "Greater":return"GREATER";case "GreaterEqual":return"GEQUAL";case "Always":return"ALWAYS"}return null}this.constructor(b,"ZWriteEnable (EX9.RenderState)",
c);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),d=this.addInputPin("ZWrite Enable",[1],VVVV.PinTypes.Value),a=this.addInputPin("Compare Function",["Always"],VVVV.PinTypes.Enum);a.enumOptions="Never Less LessEqual Equal NotEqual Greater GreaterEqual Always".split(" ");var h=this.addInputPin("Depth Bias",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Render State Out",
[],VVVV.PinTypes.WebGlRenderState),t=[];this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),c=0;c<b;c++)void 0==t[c]&&(t[c]=new VVVV.Types.WebGlRenderState),t[c].copy_attributes(f.getValue(c)),t[c].enableZWrite=0.5<parseFloat(d.getValue(c)),t[c].depthFunc=e(a.getValue(c)),t[c].depthOffset=parseFloat(h.getValue(0)),k.setValue(c,t[c]);k.setSliceCount(b)}};VVVV.Nodes.ZWriteEnableWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.GenericShader=function(b,c){this.constructor(b,"GenericShader (EX9.Effect)",
c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.shaderFile="";var e=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Mesh",[],VVVV.PinTypes.WebGlResource),d=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Technique",[""],VVVV.PinTypes.Enum);a.enumOptions=[""];this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var h=[],m=null,t,q=!1,n=[],l=this;
this.initialize=function(){var a=["Render State","Mesh","Transform","Technique"];_(l.inputPins).each(function(b){0>a.indexOf(b.pinname)&&(b.unvalidated=!0,n.push(b))});void 0==VVVV.ShaderCodeResources[l.shaderFile]?(VVVV.ShaderCodeResources[l.shaderFile]=new VVVV.Types.ShaderCodeResource,VVVV.ShaderCodeResources[l.shaderFile].addRelatedNode(l),k.ajax({url:VVVV.Helpers.prepareFilePath(l.shaderFile,l.parentPatch),async:!1,dataType:"text",success:function(a){VVVV.ShaderCodeResources[l.shaderFile].setSourceCode(a)},
error:function(){console.log("ERROR: Could not load shader file "+l.shaderFile.replace("%VVVV%",VVVV.Root));VVVV.onNotImplemented("Could not load shader file "+l.shaderFile.replace("%VVVV%",VVVV.Root))}})):VVVV.ShaderCodeResources[l.shaderFile].addRelatedNode(l)};this.shaderSourceUpdated=function(a){t=a;m||(m=new VVVV.Types.ShaderProgram);l.addUniformPins();l.setupShader();_(l.inputPins).each(function(a){a.markPinAsChanged()});q=!0;this.parentPatch.afterUpdate()};this.addUniformPins=function(){m.extractSemantics(t);
for(var a=[],b=0;b<n.length;b++)m.uniformSpecs[n[b].pinname.replace(/ /g,"_")]||(l.removeInputPin(n[b].pinname),a.push(b));for(b=0;b<a.length;b++)n.splice(a[b],1);_(m.uniformSpecs).each(function(a){if("VIEW"!=a.semantic&&"PROJECTION"!=a.semantic&&"WORLD"!=a.semantic){var b=VVVV.PinTypes.Value,c=[];switch(a.type){case "mat":b=VVVV.PinTypes.Transform;break;case "samplerCube":case "sampler":b=VVVV.PinTypes.WebGlTexture;break;default:"COLOR"==a.semantic?(b=VVVV.PinTypes.Color,c=["1.0, 1.0, 1.0, 1.0"]):
c=[0],a.defaultValue&&(c="COLOR"!=a.semantic?_(a.defaultValue.split(",")).map(function(a){return parseFloat(a)}):[a.defaultValue])}for(var d=0;d<n.length;d++)if(n[d].pinname==a.varname.replace(/_/g," ")){n[d].dimensions=a.dimension;n[d].unvalidated&&!n[d].isConnected()&&(n[d].values=l.defaultPinValues[n[d].pinname]?l.defaultPinValues[n[d].pinname].slice():c);n[d].typeName!=b.typeName&&(a=n[d].values.slice(),n[d].setType(b),n[d].unvalidated&&(b.primitive&&!n[d].isConnected())&&(n[d].values=a),n[d].isConnected()&&
!n[d].unvalidated&&(n[d].connectionChanged(),n[d].links[0].destroy()));n[d].unvalidated=!1;return}b=l.addInputPin(a.varname.replace(/_/g," "),c,b);b.dimensions=a.dimension;n.push(b)}})};this.setupShader=function(){var b=a.getValue(0),b=b.replace(/^\s*/,"").replace(/\s*$/,""),c=RegExp(/(vertex_shader|fragment_shader)\{([^\}]+)\}/g);a.enumOptions=[];for(var d;null!=(d=c.exec(t));)a.enumOptions=a.enumOptions.concat(d[2].replace(/\s/g,"").split(","));a.enumOptions=a.enumOptions.filter(function(a,b,c){return c.indexOf(a)===
b});0==a.enumOptions.length&&a.enumOptions.push("");if(""==b||0>a.enumOptions.indexOf(b))b=a.enumOptions[0],a.setValue(0,b);var e=RegExp("vertex_shader(\\{([a-zA-Z0-9]+,\\s*)*"+b+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)"),c=RegExp("fragment_shader(\\{([a-zA-Z0-9]+,\\s*)*"+b+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)");d=/STARTOFSTRING((\r?\n|.)*?)(vertex_shader|fragment_shader)/.exec("STARTOFSTRING"+t);var f=d[1];void 0==(d=e.exec(t+"\nfragment_shader"))?
console.log("ERROR: No vertex shader code for technique "+b+" found"):(e=d[4],void 0==(d=c.exec(t+"\nfragment_shader"))?console.log("ERROR: No fragment shader code for technique "+b+" found"):(m.setFragmentShader(f+d[4]),m.setVertexShader(f+e)))};this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b&&m){if(!m.isSetup||this.contextChanged||a.pinIsChanged())this.setupShader(),m.setup(b)?VVVV.ShaderCodeResources[l.shaderFile].definingNode&&VVVV.ShaderCodeResources[l.shaderFile].definingNode.showStatus("success",
"Successfully compiled"):VVVV.ShaderCodeResources[l.shaderFile].definingNode&&VVVV.ShaderCodeResources[l.shaderFile].definingNode.showStatus("error",m.log);var c=0;_(this.inputPins).each(function(a){var b=a.getSliceCount();a=a.pinname.replace(/ /g,"_");m.uniformSpecs[a]&&("vec"==m.uniformSpecs[a].type&&"COLOR"!=m.uniformSpecs[a].semantic)&&(b=parseInt(b/m.uniformSpecs[a].dimension));b>c&&(c=b)});f.isConnected()&&void 0!=f.getValue(0)||(c=0);var g=h.length;if(this.contextChanged||q)g=0;c<g&&h.splice(c,
g-c);for(var k=g;k<c;k++)h[k]=new VVVV.Types.Layer,h[k].mesh=f.getValue(0),h[k].shader=m,_(m.uniformSpecs).each(function(a){h[k].uniformNames.push(a.varname);h[k].uniforms[a.varname]={uniformSpec:a,value:void 0}});if(f.pinIsChanged())for(k=0;k<c;k++)h[k].mesh=f.getValue(0);for(k=0;k<c;k++)h[k].shader=m;for(b=0;b<n.length;b++){var t=n[b].pinname.replace(/ /g,"_");if(n[b].pinIsChanged()||g<c)for(k=0;k<c;k++)if("vec"==m.uniformSpecs[t].type){var w="COLOR"==m.uniformSpecs[t].semantic?_(n[b].getValue(k).split(",")).map(function(a){return parseFloat(a)}):
n[b].getValue(k,n[b].dimensions);h[k].uniforms[t].value=new Float32Array(w)}else w=n[b].getValue(k),h[k].uniforms[t].value=w}if(e.pinIsChanged()||g<c)for(b=0;b<c;b++)e.isConnected()?h[b].renderState=e.getValue(b):h[b].renderState=VVVV.DefaultRenderState;if(d.pinIsChanged()||g<c)for(b=0;b<c;b++)g=this.inputPins.Transform.getValue(b),h[b].uniforms[h[b].shader.uniformSemanticMap.WORLD].value=g;this.outputPins.Layer.setSliceCount(c);for(b=0;b<c;b++)this.outputPins.Layer.setValue(b,h[b]);q=this.contextChanged=
!1}}};this.openUIWindow=function(){VVVV.ShaderCodeResources[l.shaderFile].definingNode&&VVVV.ShaderCodeResources[l.shaderFile].definingNode.openUIWindow()}};VVVV.Nodes.GenericShader.prototype=new VVVV.Core.Node;VVVV.Nodes.Quad=function(b,c){this.constructor(b,"Quad (DX9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No Sampler States","No texture coord mapping","No enable pin","Transprent pixels are discarded by default"]};
this.auto_evaluate=!1;var e=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",[],VVVV.PinTypes.WebGlTexture);this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var f=[],d=null,a=null;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];
if(b){if(this.contextChanged){var c=new VVVV.Types.VertexBuffer(b,[0.5,0.5,0,-0.5,0.5,0,0.5,-0.5,0,-0.5,-0.5,0]);c.setSubBuffer("TEXCOORD0",2,[1,0,0,0,1,1,0,1]);c.create();d=new VVVV.Types.Mesh(b,c,[0,1,2,1,3,2]);c="#ifdef GL_ES\nprecision highp float;\n#endif\n";c+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";a=new VVVV.Types.ShaderProgram;
a.extractSemantics(c+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");a.setFragmentShader(c);a.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
a.setup(b)}b=this.getMaxInputSliceCount();c=f.length;this.contextChanged&&(c=0);b<c&&f.splice(b,c-b);for(var g=c;g<b;g++)f[g]=new VVVV.Types.Layer,f[g].mesh=d,f[g].shader=a,_(a.uniformSpecs).each(function(a){f[g].uniformNames.push(a.varname);f[g].uniforms[a.varname]={uniformSpec:a,value:void 0}});var k=this.inputPins.Color.pinIsChanged(),n=this.inputPins.Transform.pinIsChanged(),l=this.inputPins.Texture.pinIsChanged(),r=this.inputPins["Texture Transform"].pinIsChanged();if(k||c<b)for(k=0;k<b;k++){var s=
this.inputPins.Color.getValue(k),s=_(s.split(",")).map(function(a){return parseFloat(a)});f[k].uniforms.col.value=new Float32Array(s)}if(e.pinIsChanged()||c<b)for(k=0;k<b;k++)e.isConnected()?f[k].renderState=e.getValue(k):f[k].renderState=VVVV.DefaultRenderState;if(n||c<b)for(k=0;k<b;k++)n=this.inputPins.Transform.getValue(k),f[k].uniforms[f[k].shader.uniformSemanticMap.WORLD].value=n;if(l||c<b)for(k=0;k<b;k++)f[k].uniforms.Samp0.value=this.inputPins.Texture.getValue(k);if(r||c<b)for(k=0;k<b;k++)n=
this.inputPins["Texture Transform"].getValue(k),f[k].uniforms.tTex.value=n;this.outputPins.Layer.setSliceCount(b);for(k=0;k<b;k++)this.outputPins.Layer.setValue(k,f[k]);this.contextChanged=!1}}}};VVVV.Nodes.Quad.prototype=new VVVV.Core.Node;VVVV.Nodes.GridSegment=function(b,c){this.constructor(b,"GridSegment (DX9)",c);this.auto_nil=!1;this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);
this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",[],VVVV.PinTypes.WebGlTexture);this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);var f=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),d=this.addInputPin("Inner Radius",[0],VVVV.PinTypes.Value),a=this.addInputPin("Resolution X",[6],VVVV.PinTypes.Value),h=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value);this.addOutputPin("Layer",
[],VVVV.PinTypes.WebGlResource);var k=[],t=null;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){if(this.contextChanged){var c;c="#ifdef GL_ES\nprecision highp float;\n#endif\n";c+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";t=new VVVV.Types.ShaderProgram;t.extractSemantics(c+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
t.setFragmentShader(c);t.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");t.setup(b)}c=this.getMaxInputSliceCount();var g=k.length;if(this.contextChanged||a.pinIsChanged()||h.pinIsChanged()||f.pinIsChanged()||d.pinIsChanged())g=
0;c<g&&k.splice(c,g-c);for(var r=g;r<c;r++){k[r]=new VVVV.Types.Layer;for(var s=parseInt(a.getValue(r)),u=parseInt(h.getValue(r)),z=f.getValue(r),y=d.getValue(r),w=[],v=[],p=[],A=0,B=0;B<u;B++)for(var C=0;C<s;C++){var F=parseFloat(C)/(s-1),F=0.25-F*z,F=6.28318530718*F,D=parseFloat(B)/(u-1),D=y*(1-D)+D;w.push(0.5*Math.sin(F)*D);w.push(0.5*Math.cos(F)*D);w.push(0);A++;v.push(0);v.push(0);v.push(1);p.push(parseFloat(C)/(s-1));p.push(parseFloat(B)/(u-1))}z=new VVVV.Types.VertexBuffer(b,w);z.setSubBuffer("TEXCOORD0",
2,p);z.setSubBuffer("NORMAL",3,v);z.create();v=[];for(B=0;B<u-1;B++)for(C=0;C<s-1;C++)p=C+s*B,v.push(p),v.push(p+1),v.push(p+s+1),v.push(p+s+1),v.push(p+s),v.push(p);k[r].mesh=new VVVV.Types.Mesh(b,z,v);k[r].shader=t;_(t.uniformSpecs).each(function(a){k[r].uniformNames.push(a.varname);k[r].uniforms[a.varname]={uniformSpec:a,value:void 0}})}B=this.inputPins.Color.pinIsChanged();u=this.inputPins.Transform.pinIsChanged();b=this.inputPins.Texture.pinIsChanged();s=this.inputPins["Texture Transform"].pinIsChanged();
if(B||g<c)for(B=0;B<c;B++)C=this.inputPins.Color.getValue(B),C=_(C.split(",")).map(function(a){return parseFloat(a)}),k[B].uniforms.col.value=new Float32Array(C);if(e.pinIsChanged()||g<c)for(B=0;B<c;B++)e.isConnected()?k[B].renderState=e.getValue(B):k[B].renderState=VVVV.DefaultRenderState;if(u||g<c)for(B=0;B<c;B++)u=this.inputPins.Transform.getValue(B),k[B].uniforms[k[B].shader.uniformSemanticMap.WORLD].value=u;if(b||g<c)for(B=0;B<c;B++)k[B].uniforms.Samp0.value=this.inputPins.Texture.getValue(B);
if(s||g<c)for(B=0;B<c;B++)u=this.inputPins["Texture Transform"].getValue(B),k[B].uniforms.tTex.value=u;this.outputPins.Layer.setSliceCount(c);for(B=0;B<c;B++)this.outputPins.Layer.setValue(B,k[B]);this.contextChanged=!1}}}};VVVV.Nodes.GridSegment.prototype=new VVVV.Core.Node;VVVV.Nodes.Group=function(b,c){this.constructor(b,"Group (EX9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var e=[],f=this.addInputPin("Enabled",
[1],VVVV.PinTypes.Value),d=this.addInvisiblePin("Layer Template Count",[2],VVVV.PinTypes.Value),a=this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);this.initialize=function(){var a=Math.max(2,d.getValue(0));VVVV.Helpers.dynamicPins(this,e,a,function(a){return this.addInputPin("Layer "+(a+1),[],VVVV.PinTypes.WebGlResource)})};this.evaluate=function(){d.pinIsChanged()&&this.initialize();var b=0;if(0.5<f.getValue(0))for(var c=0;c<e.length;c++)for(var g=0;g<e[c].getSliceCount();g++)a.setValue(b++,
e[c].getValue(g));a.setSliceCount(b)}};VVVV.Nodes.Group.prototype=new VVVV.Core.Node;VVVV.Nodes.RendererWebGL=function(g,c){function e(){function a(b){switch(b.which){case 1:VVVV.MousePositions._all.lb=0;VVVV.MousePositions[w.id].lb=0;break;case 2:VVVV.MousePositions._all.mb=0;VVVV.MousePositions[w.id].mb=0;break;case 3:VVVV.MousePositions._all.rb=0,VVVV.MousePositions[w.id].rb=0}}k(w).detach("mousemove");k(w).detach("mousedown");k(w).detach("mouseup");VVVV.MousePositions[w.id]={x:0,y:0,wheel:0,lb:0,
mb:0,rb:0};k(w).mousemove(function(a){var b=2*(a.pageX-k(this).offset().left)/k(this).width()-1;a=-(2*(a.pageY-k(this).offset().top)/k(this).height()-1);VVVV.MousePositions._all.x=b;VVVV.MousePositions._all.y=a;VVVV.MousePositions[w.id].x=b;VVVV.MousePositions[w.id].y=a});k(w).bind("mousewheel",function(a){a=a.originalEvent.wheelDelta/120;VVVV.MousePositions[w.id].wheel+=a;VVVV.MousePositions._all.wheel+=a});k(w).bind("DOMMouseScroll",function(a){a=-a.originalEvent.detail/3;VVVV.MousePositions[w.id].wheel+=
a;VVVV.MousePositions._all.wheel+=a});k(w).mousedown(function(b){switch(b.which){case 1:VVVV.MousePositions._all.lb=1;VVVV.MousePositions[w.id].lb=1;break;case 2:VVVV.MousePositions._all.mb=1;VVVV.MousePositions[w.id].mb=1;break;case 3:VVVV.MousePositions._all.rb=1,VVVV.MousePositions[w.id].rb=1}k(document).unbind("mouseup",a);k(document).mouseup(a)})}this.constructor(g,"Renderer (EX9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Disabling Clear doesn't work in Chrome",
"No Fullscreen","No Enable Pin","No Aspect Ration and Viewport transform","No mouse output"]};this.addInputPin("Layers",[],VVVV.PinTypes.WebGlResource);var f=this.addInputPin("Clear",[1],VVVV.PinTypes.Value),d=this.addInputPin("Background Color",["0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color),a=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),h=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),m=this.addInputPin("View",[],VVVV.PinTypes.Transform),t=this.addInputPin("Projection",
[],VVVV.PinTypes.Transform),q=this.addInvisiblePin("Windowed Depthbuffer Format",["NONE"],VVVV.PinTypes.Enum);q.enumOptions=["NONE","DX16"];var n=this.addOutputPin("Actual Backbuffer Width",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Actual Backbuffer Height",[0],VVVV.PinTypes.Value),r=this.addOutputPin("EX9 Out",[],VVVV.PinTypes.WebGlResource),s=0,u=0,z,y,w,v=this.ctxt=void 0,p,A,B;this.getContexts=function(){if(this.invisiblePins["Descriptive Name"]){var b=this.invisiblePins["Descriptive Name"].getValue(0);
if((b=k(b).get(0))&&"CANVAS"==b.nodeName)w=k(b);else{var c=parseInt(a.getValue(0)),g=parseInt(h.getValue(0));w=k('<canvas width="'+(0<c?c:512)+'" height="'+(0<g?g:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');b||(b="body");k(b).append(w)}if(w){e();try{v=w.get(0).getContext("experimental-webgl",{preserveDrawingBuffer:!0}),v.viewportWidth=parseInt(w.get(0).width),v.viewportHeight=parseInt(w.get(0).height)}catch(l){console.log(l)}this.ctxt=
v;r.isConnected()&&this.renderContexts&&this.renderContexts[0]?(p=this.ctxt=this.renderContexts[0],A=p.createFramebuffer(),p.bindFramebuffer(p.FRAMEBUFFER,A),A.width=w.get(0).width,A.height=w.get(0).height,B=p.createTexture(),p.bindTexture(p.TEXTURE_2D,B),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!0),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR_MIPMAP_NEAREST),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,A.width,A.height,0,p.RGBA,p.UNSIGNED_BYTE,
null),p.generateMipmap(p.TEXTURE_2D),b=p.createRenderbuffer(),p.bindRenderbuffer(p.RENDERBUFFER,b),p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_COMPONENT16,A.width,A.height),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,B,0),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,b),p.bindTexture(p.TEXTURE_2D,null),p.bindRenderbuffer(p.RENDERBUFFER,null),p.bindFramebuffer(p.FRAMEBUFFER,null)):this.renderContexts&&this.renderContexts[0]&&(this.renderContexts[0].deleteTexture(B),
B=void 0);this.ctxt&&(s=parseInt(w.get(0).width),u=parseInt(w.get(0).height),p=this.ctxt,b=new Uint8Array([255,255,255]),p.DefaultTexture={},p.DefaultTexture["2D"]=p.createTexture(),p.bindTexture(p.TEXTURE_2D,p.DefaultTexture["2D"]),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.pixelStorei(p.UNPACK_ALIGNMENT,
1),p.texImage2D(p.TEXTURE_2D,0,p.RGB,1,1,0,p.RGB,p.UNSIGNED_BYTE,b),p.bindTexture(p.TEXTURE_2D,null),p.DefaultTexture.CUBE=p.createTexture(),p.bindTexture(p.TEXTURE_CUBE_MAP,p.DefaultTexture.CUBE),p.texParameteri(p.TEXTURE_CUBE_MAP,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_CUBE_MAP,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_CUBE_MAP,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_CUBE_MAP,p.TEXTURE_MAG_FILTER,p.NEAREST),p.pixelStorei(p.UNPACK_ALIGNMENT,
1),p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X,0,p.RGB,1,1,0,p.RGB,p.UNSIGNED_BYTE,b),p.texImage2D(p.TEXTURE_CUBE_MAP_NEGATIVE_X,0,p.RGB,1,1,0,p.RGB,p.UNSIGNED_BYTE,b),p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_Y,0,p.RGB,1,1,0,p.RGB,p.UNSIGNED_BYTE,b),p.texImage2D(p.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,p.RGB,1,1,0,p.RGB,p.UNSIGNED_BYTE,b),p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_Z,0,p.RGB,1,1,0,p.RGB,p.UNSIGNED_BYTE,b),p.texImage2D(p.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,p.RGB,1,1,0,p.RGB,p.UNSIGNED_BYTE,b),p.bindTexture(p.TEXTURE_CUBE_MAP,
null),this.inputPins.Layers.markPinAsChanged(),f.markPinAsChanged(),d.markPinAsChanged(),m.markPinAsChanged(),t.markPinAsChanged())}}};this.destroy=function(){k(w).remove()};var C=!1;this.evaluate=function(){p=this.ctxt;if(this.invisiblePins["Descriptive Name"].pinIsChanged()||this.contextChanged)v&&k(v.canvas).hasClass("vvvv-js-generated-renderer")&&k(v.canvas).remove(),this.getContexts(),this.inputPins.Layers.isConnected()&&this.inputPins.Layers.links[0].fromPin.connectionChanged();C||(n.setValue(0,
s),l.setValue(0,u),C=!0);if(void 0!=p){if(a.pinIsChanged()&&(!this.renderContexts||!this.renderContexts[0])){var c=parseInt(a.getValue(0));0<c&&(s=c,k(v.canvas).attr("width",s),n.setValue(0,s))}!h.pinIsChanged()||this.renderContexts&&this.renderContexts[0]||(c=parseInt(h.getValue(0)),0<c&&(u=c,k(v.canvas).attr("height",u),l.setValue(0,u)));this.renderContexts&&this.renderContexts[0]&&p==this.renderContexts[0]?p.bindFramebuffer(p.FRAMEBUFFER,A):p.bindFramebuffer(p.FRAMEBUFFER,null);d.pinIsChanged()&&
(c=_(d.getValue(0).split(",")).map(function(a){return parseFloat(a)}),p.clearColor(c[0],c[1],c[2],c[3]));p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT);"NONE"==q.getValue(0)?p.disable(p.DEPTH_TEST):p.enable(p.DEPTH_TEST);t.pinIsChanged()&&(t.isConnected()?(z=mat4.create(),mat4.set(t.getValue(0),z)):(z=mat4.create(),mat4.ortho(-1,1,-1,1,-100,100,z)),mat4.scale(z,[1,1,-1]),this.renderContexts&&this.renderContexts[0]&&mat4.scale(z,[1,-1,1]));m.pinIsChanged()&&(y=m.getValue(0));if(this.contextChanged)this.contextChanged=
!1;else{p.viewport(0,0,s,u);var e=c=null,f=null;if(this.inputPins.Layers.isConnected()){for(var g=this.inputPins.Layers.values,w=0;w<g.length;w++)if(layer=g[w],void 0!=layer.shader){c!=layer.shader.shaderProgram&&(p.useProgram(layer.shader.shaderProgram),p.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.PROJECTION].position,!1,z),p.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEW].position,!1,y));var G=layer.renderState;G||(G=b);G!=e&&G.apply(p);
if(layer.mesh!=f||layer.shader.shaderProgram!=c)p.bindBuffer(p.ARRAY_BUFFER,layer.mesh.vertexBuffer.vbo),_(layer.mesh.vertexBuffer.subBuffers).each(function(a){layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]]&&-1!=layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position&&(p.enableVertexAttribArray(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position),p.vertexAttribPointer(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position,
a.size,p.FLOAT,!1,0,a.offset))}),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,layer.mesh.indexBuffer);for(var e=layer.uniformNames.length,J=f=0;J<e;J++){var E=layer.uniforms[layer.uniformNames[J]];if(void 0!=E.value&&!(0<w&&layer.shader.shaderProgram==c&&g[w-1].uniforms[layer.uniformNames[J]]&&E.value==g[w-1].uniforms[layer.uniformNames[J]].value)){start=(new Date).getTime();switch(E.uniformSpec.type){case "mat":p["uniformMatrix"+E.uniformSpec.dimension+"fv"](E.uniformSpec.position,!1,E.value);break;case "vec":p["uniform"+
E.uniformSpec.dimension+"fv"](E.uniformSpec.position,E.value);break;case "int":p["uniform"+E.uniformSpec.dimension+"i"](E.uniformSpec.position,E.value);break;case "float":p["uniform"+E.uniformSpec.dimension+"f"](E.uniformSpec.position,E.value);break;case "sampler":var K=E.value;K==VVVV.DefaultTexture&&(K=p.DefaultTexture["2D"]);p.activeTexture(p["TEXTURE"+f]);p.bindTexture(p["TEXTURE_"+E.uniformSpec.dimension],K);p.uniform1i(E.uniformSpec.position,f);f++;break;case "samplerCube":K=E.value,K==VVVV.DefaultTexture&&
(K=p.DefaultTexture.CUBE),p.activeTexture(p["TEXTURE"+f]),p.bindTexture(p.TEXTURE_CUBE_MAP,K),p.uniform1i(E.uniformSpec.position,f),f++}loopstart=(new Date).getTime()}}p.drawElements(p[G.polygonDrawMode],layer.mesh.numIndices,p.UNSIGNED_SHORT,0);c=layer.shader.shaderProgram;e=G;f=layer.mesh}p.bindTexture(p.TEXTURE_2D,null);p.bindTexture(p.TEXTURE_CUBE_MAP,null)}this.renderContexts&&this.renderContexts[0]&&(p.bindTexture(p.TEXTURE_2D,B),p.generateMipmap(p.TEXTURE_2D),p.bindTexture(this.renderContexts[0].TEXTURE_2D,
null));r.setValue(0,B)}}}};VVVV.Nodes.RendererWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.DefineEffect=function(b,c){this.constructor(b,"DefineEffect (DX9)",c);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Matthias Zauner"],credits:[],compatibility_issues:["Not available in classic VVVV"]};this.auto_evaluate=!1;var e=this.addInputPin("Effect Descriptor",[""],VVVV.PinTypes.String),f=this.addInvisiblePin("Source Code",["#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 tW : WORLD;\nuniform mat4 tV : VIEW;\nuniform mat4 tP : PROJECTION;\n\nuniform vec4 Color : COLOR = {1.0, 1.0, 1.0, 1.0};\nuniform sampler2D Texture;\nuniform mat4 Texture_Transform;\nuniform float Alpha = 1.0;\n\nvarying vec2 vs2psTexCd;\n\nvertex_shader:\n\nattribute vec3 PosO : POSITION;\nattribute vec2 TexCd : TEXCOORD0;\n\nvoid main(void) {\n  gl_Position = tP * tV * tW * vec4(PosO, 1.0);\n  vs2psTexCd = (Texture_Transform * vec4(TexCd, 0, 1)).xy;\n}\n\n\nfragment_shader:\n\nvoid main(void) {\n  gl_FragColor = Color * texture2D(Texture, vs2psTexCd) * vec4(1.0, 1.0, 1.0, Alpha);\n}"],
VVVV.PinTypes.String),d="",a;this.evaluate=function(){if(""!=e.getValue(0)){if(e.pinIsChanged()){var b=e.getValue(0);if(""==b)return;""==d?void 0==VVVV.ShaderCodeResources["./"+b+".vvvvjs.fx"]&&(VVVV.ShaderCodeResources["./"+b+".vvvvjs.fx"]=new VVVV.Types.ShaderCodeResource):VVVV.ShaderCodeResources["./"+b+".vvvvjs.fx"]=VVVV.ShaderCodeResources[d];d="./"+b+".vvvvjs.fx";VVVV.ShaderCodeResources[d].definingNode=this;VVVV.ShaderCodeResources[d].setSourceCode(f.getValue(0));a&&k("#path",a.document).text((this.parentPatch.nodename||
"root")+" / "+(""!=d?d:"Untitled"))}f.pinIsChanged()&&VVVV.ShaderCodeResources[d]&&VVVV.ShaderCodeResources[d].setSourceCode(f.getValue(0))}};this.openUIWindow=function(){a=window.open("code_editor.html",d+" / VVVV.js Effect Editor","location=no, width=800, height=800, toolbar=no");var b=this;window.setTimeout(function(){a.document.title=d+" / VVVV.js Effect Editor";var c=b.parentPatch.nodename||"root",e=""!=d?d:"Untitled";k("#path",a.document).text(c+" / "+e);k("textarea",a.document).text(f.getValue(0));
k("#compile_button",a.document).click(function(){""==d?b.showStatus("error","Please provide a name for this shader first"):(f.setValue(0,k("textarea",a.document).val()),0<VVVV.ShaderCodeResources[d].relatedNodes.length?b.showStatus("notice","Compiling ..."):b.showStatus("notice","No instance of this shader found. Create a node (./"+d+") and connect it to a Renderer (EX9) to compile."))});a.focus()},500)};this.showStatus=function(b,c){a&&(k("#status",a.document).text(c),k("#status",a.document).attr("class",
b))}};VVVV.Nodes.DefineEffect.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.XPathXML=function(b,g){this.constructor(b,"XPath (XML)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["XML Index Output Pin not implemented","Query Index Output Pin not implemented"]};this.auto_evaluate=!1;var c=this.addInputPin("XML Input",["text"],VVVV.PinTypes.String),e=this.addInputPin("XPath Query",["text"],VVVV.PinTypes.String),f=this.addInputPin("Base Element",["text"],VVVV.PinTypes.String),d=this.addOutputPin("Output",
["text"],VVVV.PinTypes.String),a=this.addOutputPin("XML Index",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Query Index",[0],VVVV.PinTypes.Value),k;this.evaluate=function(){var b=c.getValue(0),g=e.getValue(0);f.getValue(0);c.pinIsChanged()&&(k=(new DOMParser).parseFromString(b,"text/xml"));for(var b=k.evaluate(g,k,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),g=0,n;n=b.iterateNext();)n.value?d.setValue(g,n.value):n.data?d.setValue(g,n.data):d.setValue(g,""),g++;a.setValue(g,0);h.setValue(g,0);
d.setSliceCount(g);a.setSliceCount(1);h.setSliceCount(1)}};VVVV.Nodes.XPathXML.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Value.makeLabel=VVVV.PinTypes.String.makeLabel=function(b,g){var c=g.IOBoxRows();g.IOBoxInputPin().getSliceCount();d3.select(b).selectAll(".vvvv-node-label").remove();for(var e=0;e<c;e++)d3.select(b).append("svg:text").text(g.IOBoxInputPin().getValue(e)).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(b){return 12*e+12}).attr("dx",4).attr("font-size",10).attr("font-family","Lucida Sans Unicode")};VVVV.PinTypes.Value.openInputBox=VVVV.PinTypes.String.openInputBox=
function(b,g,c,e){$inputbox=k("<input type='text' value='"+c.getValue(e)+"' class='pininputbox value resettable'/>");$inputbox.css("position",g.css("position"));$inputbox.css("width",g.css("width"));$inputbox.css("height",g.css("height"));$inputbox.css("left",g.css("left"));$inputbox.css("top",g.css("top"));g.replaceWith($inputbox);$inputbox.get(0).select();$inputbox.change(function(){c.setValue(e,k(this).val());c.node.parentPatch.editor.update(c.node.parentPatch,"<PATCH><NODE id='"+c.node.id+"'><PIN pinname='"+
c.pinname+"' values='"+_(c.values).map(function(b){return"|"+b.toString().replace(/\|/g,"||")+"|"}).join(",")+"'/></NODE>")});$inputbox.keydown(function(b){13==b.which&&(k(this).change(),k(this).remove())});if("Value"==this.typeName){var f=function(b,a,c){var e=k(b).val()%1;if(!isNaN(e)){var f;f=1;if(c.altKey||0!==e)f=0.01;a*=f;k(b).val(parseFloat(k(b).val())+a);k(b).change()}};$inputbox.bind("mousewheel",function(b){f(this,b.originalEvent.wheelDelta/120,b);b.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",
function(b){f(this,-b.originalEvent.detail/3,b);b.preventDefault();return!1})}$inputbox.bind("paste",function(b){b.stopPropagation()});$inputbox.bind("copy",function(b){b.stopPropagation()})};VVVV.PinTypes.Enum.openInputBox=function(b,g,c,e){$inputbox=k("<select class='pininputbox value resettable'>");for(b=0;b<c.enumOptions.length;b++)$opt=k('<option value="'+c.enumOptions[b]+'">'+c.enumOptions[b]+"</option>"),c.getValue(e)==c.enumOptions[b]&&$opt.attr("selected",!0),$inputbox.append($opt);$inputbox.css("position",
g.css("position"));$inputbox.css("width",g.css("width"));$inputbox.css("height",g.css("height"));$inputbox.css("left",g.css("left"));$inputbox.css("top",g.css("top"));g.replaceWith($inputbox);$inputbox.change(function(){c.setValue(e,k(this).val());c.node.parentPatch.editor.update(c.node.parentPatch,"<PATCH><NODE id='"+c.node.id+"'><PIN pinname='"+c.pinname+"' values='"+_(c.values).map(function(b){return"|"+b+"|"}).join(",")+"'/></NODE>")})};VVVV.PinTypes.Color.makeLabel=function(b,g){var c=g.IOBoxRows();
g.IOBoxInputPin().getSliceCount();d3.select(b).selectAll(".vvvv-node-label").remove();for(var e=0;e<c;e++)d3.select(b).append("svg:rect").attr("class","vvvv-node-label").attr("height",g.getHeight()/c-8).attr("width",g.getWidth()).attr("y",12*e+4).attr("fill",function(b){b=g.IOBoxInputPin().getValue(e).split(",");for(var c=0;c<b.length;c++)b[c]=parseInt(256*b[c]);return"rgba("+b.join(",")+")"})};VVVV.PinTypes.Color.openInputBox=function(b,g,c,e){function f(b){a=b.altKey&&b.shiftKey?3:b.altKey?1:b.shiftKey?
2:0}function d(b){var d=c.getValue(e).split(","),f=VVVV.PinTypes.Color.rgbToHsv(d[0],d[1],d[2]);f[3]=parseFloat(d[3]);f[a]+=0.01*b;0!=a&&(f[a]=Math.min(1,Math.max(0,f[a])));d=VVVV.PinTypes.Color.hsvToRgb(f[0],f[1],f[2]);d[3]=f[3];$inputbox.css("background-color","rgba("+_(d).map(function(a){return parseInt(255*a)}).join(",")+")");ibx=$inputbox;d.join(",");c.setValue(e,d.join(","));c.node.parentPatch.editor.update(c.node.parentPatch,"<PATCH><NODE id='"+c.node.id+"'><PIN pinname='"+c.pinname+"' values='"+
_(c.values).map(function(a){return"|"+a+"|"}).join(",")+"'/></NODE>")}var a=0;k(b.window.document).keydown(f).keyup(f);$inputbox=k('<div class="pininputbox color resettable"></div>');$inputbox.css("position",g.css("position"));$inputbox.css("width",g.css("width"));$inputbox.css("height",g.css("height"));$inputbox.css("left",g.css("left"));$inputbox.css("top",g.offset().top-8+"px");b=c.getValue(e).split(",");for(var h=0;h<b.length;h++)b[h]=parseInt(256*b[h]);$inputbox.css("background-color","rgba("+
b.join(",")+")");g.replaceWith($inputbox);$inputbox.on("mousewheel",function(a){d(a.originalEvent.wheelDelta/120);a.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",function(a){d(-a.originalEvent.detail/3);a.preventDefault();return!1})};VVVV.Editors.BrowserEditor={};VVVV.Editors.BrowserEditor.PatchWindow=function(b,g,c){function e(){a.selectAll(".vvvv-node.selected").attr("class",function(a){return a.isIOBox?"vvvv-node vvvv-iobox":"vvvv-node"});l=[]}var f=this.state=0,d=0,a,h,m,t,q,n=void 0,
l=[],r=b,s=0,u=VVVV.Root+"/patch.html",z=!1,y=0,w=0,v=0,p=0;this.window=c?window:window.open(u,b.nodename,"location=no, width="+b.windowWidth+", height="+b.windowHeight+", toolbar=no");var A=this;window.setTimeout(function(){for(var m=0;m<r.nodeList.length;m++)s=Math.max(s,r.nodeList[m].id);c?root=d3.select(k(c).get(0)):(A.window.document.title=b.nodename,root=d3.select(A.window.document.body));if(!c){k("body",A.window.document).on("copy",function(a){for(var b=k("<PATCH>"),c=[],d=_(l).map(function(a){return a.id}),
e=0;e<l.length;e++)b.append(l[e].serialize()),_(l[e].inputPins).each(function(a){for(var b=0;b<a.links.length;b++)0<=d.indexOf(a.links[b].fromPin.node.id)&&c.push(a.links[b])});for(e=0;e<c.length;e++)b.append(c[e].serialize());b='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n'+b.wrapAll("<d></d>").parent().html();b=b.replace(/<patch/g,"<PATCH");b=b.replace(/<\/patch>/g,"\n  </PATCH>");b=b.replace(/<node/g,"\n  <NODE");b=b.replace(/<\/node>/g,"\n  </NODE>");b=b.replace(/<bounds/g,
"\n  <BOUNDS");b=b.replace(/<\/bounds>/g,"\n  </BOUNDS>");b=b.replace(/<pin/g,"\n  <PIN");b=b.replace(/<\/pin>/g,"\n  </PIN>");b=b.replace(/<lonk/g,"\n  <LINK");b=b.replace(/<\/lonk>/g,"\n  </LINK>");a.originalEvent.clipboardData.setData("text/plain",b);a.preventDefault();return!1});var q=0,t=0;k("body",A.window.document).mousemove(function(a){q=a.pageX;t=a.pageY});k("body",A.window.document).on("paste",function(b){b=b.originalEvent.clipboardData.getData("text/plain");if(!b.match(/^<!DOCTYPE PATCH/))return!1;
$patch=k(b);var c=void 0,d=void 0;$patch.find("node bounds").each(function(){var a=parseInt(k(this).attr("left")),b=parseInt(k(this).attr("top"));if(!c||a<c)c=a;if(!d||b<d)d=b});var f={};$patch.find("node").each(function(){s++;f[k(this).attr("id")]=s;k(this).attr("createme","pronto");k(this).attr("id",s);var a=parseInt(k(this).find("bounds").attr("left"))-c+15*q,b=parseInt(k(this).find("bounds").attr("top"))-d+15*t;k(this).find("bounds").attr("left",a);k(this).find("bounds").attr("top",b)});$patch.find("link").each(function(){k(this).attr("createme",
"pronto");var a=k(this).attr("srcnodeid"),b=k(this).attr("dstnodeid");k(this).attr("srcnodeid",f[a]);k(this).attr("dstnodeid",f[b])});b=$patch.wrapAll("<d></d>").parent().html();g.update(r,b);e();var h=_(f).map(function(a){return a});a.selectAll(".vvvv-node").each(function(a){0<=h.indexOf(parseInt(a.id))&&(l.push(a),d3.select(this).attr("class","vvvv-node selected"))})})}a=root.append("svg:svg").attr("class","chart").attr("width",Math.max(r.windowWidth,r.boundingBox.width)).attr("height",Math.max(r.windowHeight,
r.boundingBox.height));m=a.append("svg:rect").attr("class","background").attr("width",Math.max(r.windowWidth,r.boundingBox.width)).attr("height",Math.max(r.windowHeight,r.boundingBox.height));c||(a.on("mousemove",function(){if(1==A.state)a.select(".vvvv-link.current-link").attr("x2",function(a){return d3.event.pageX+(d3.select(this).attr("x1")<d3.event.pageX?-1:1)}).attr("y2",function(a){return d3.event.pageY+(d3.select(this).attr("y1")<d3.event.pageY?-1:1)});else if(2==A.state){var b=d3.event.pageX-
f,c=d3.event.pageY-d;a.selectAll(".vvvv-node.selected").attr("transform",function(a){return"translate("+(a.x+b)+","+(a.y+c)+")"});for(var g=0;g<l.length;g++){var h=l[g];a.selectAll(".vvvv-link line").filter(function(a){return a.fromPin.node.id==h.id}).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+b}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+c});a.selectAll(".vvvv-link line").filter(function(a){return a.toPin.node.id==h.id}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+
b}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+c})}}else 5==A.state&&(v=d3.event.pageX,p=d3.event.pageY,a.select(".selection-area").attr("transform","translate("+Math.min(y,v)+", "+Math.min(w,p)+")").attr("width",Math.abs(v-y)).attr("height",Math.abs(p-w)),e(),a.selectAll(".vvvv-node").each(function(a){for(var b=[a.x,a.x+a.getWidth()],c=[a.y,a.y+a.getHeight()],d=!1,e=0;2>e;e++)for(var f=0;2>f;f++)b[e]>=Math.min(y,v)&&(b[e]<=Math.max(y,v)&&c[f]>=Math.min(w,p)&&c[f]<=Math.max(w,p))&&(d=!0);
d&&(d3.select(this).attr("class","vvvv-node selected"),l.push(a))}))}).on("contextmenu",function(){1==A.state&&(a.select(".vvvv-link.current-link").remove(),A.state=0);d3.event.stopPropagation();d3.event.preventDefault();return!1}).on("mouseup",function(){if(2==A.state){A.state=0;for(var b=d3.event.pageX-f,c=d3.event.pageY-d,e="<PATCH>",h=0;h<l.length;h++)var k=l[h],e=e+("<NODE componentmode='Node' id='"+k.id+"'><BOUNDS type='Node' left='"+15*(b+k.x)+"' top='"+15*(c+k.y)+"' width='"+k.width+"' height='"+
k.height+"'/></NODE>");g.update(r,e+"</PATCH>")}5==A.state&&(a.select(".selection-area").remove(),A.state=0)}).on("dblclick",function(){function a(b){f.empty();var c=e.find("#node_filter").val().toLowerCase();b=VVVV.NodeNames.concat(_(VVVV.ShaderCodeResources).map(function(a,b){return b.replace("%VVVV%/effects/","")}));b=_(_(b).filter(function(a){return 0<=VVVV.Helpers.translateOperators(a).toLowerCase().indexOf(c)})).sortBy(function(a){return a.toLowerCase().indexOf(c)});for(var d=0;d<b.length;d++)f.append(k("<option>"+
b[d]+"</option>"));f.find("option").first().attr("selected",!0)}function b(){var a=e.find("#node_filter").val(),f=e.find("#new_node option:selected").val(),h="";f||!a.match(/\.fx$/)&&!a.match(/\.v4p$/)||(f=a);if(f){var k;(k=f.match(/^(.*\/([^\.]+))(\.vvvvjs)?\.fx$/))?(f=k[2]+" (EX9.Effect)",h=k[1]+".fx"):(k=f.match("([^.]+)(.vvvvjs)?.fx$"))?(f=k[1]+" (EX9.Effect)",h="%VVVV%/effects/"+k[1]+".fx"):f.match("[^/].v4p$")&&(h=f=a);s++;f="<PATCH>"+("<NODE componentmode='Hidden' id='"+s+"' nodename='"+f+
"' systemname='"+f+"' "+(""!=h?"filename='"+h+"'":"")+">");f+="<BOUNDS type='Node' left='"+15*c+"' top='"+15*d+"' width='100' height='100'/>"}else s++,f="<PATCH>"+("<NODE componentmode='Hidden' id='"+s+"' nodename='IOBox (String)' systemname='IOBox (String)'>"),f+="<BOUNDS type='Node' left='"+15*c+"' top='"+15*d+"' width='100' height='100'/>",f+="<PIN pinname='Input String' values='|"+a+"|'/>";g.update(r,f+"</NODE>");e.remove()}k("#node_selection",A.window.document).remove();var c=d3.event.pageX,
d=d3.event.pageY,e=k('<div id="node_selection"><input type="text" id="node_filter"/></div>'),f=k('<select id="new_node" size="8">');e.append(f);e.css("left",c);e.css("top",d);k("body",A.window.document).append(e);e.find("input").bind("paste",function(a){a.stopPropagation()});e.find("#node_filter").get(0).focus();a();e.find("#node_filter").keyup(function(c){if(13==c.which)b();else{if(40==c.which)return f.find("option:selected").first().next().attr("selected",!0),!1;if(38==c.which)return f.find("option:selected").first().prev().attr("selected",
!0),!1;a()}});e.find("#new_node").click(b)}).on("mousedown",function(){0==A.state&&(A.state=5,y=v=d3.event.pageX+1,w=p=d3.event.pageY+1,a.append("svg:rect").attr("class","selection-area").attr("stroke","#000").attr("stroke-dasharray","2,2").attr("stroke-width",1).attr("fill","rgba(0,0,0,0)").attr("transform","translate("+y+", "+w+")").attr("width",0).attr("height",0),e())}),m.on("click",function(){A.state=0;k(".resettable",A.window.document).remove();k("#node_selection",A.window.document).remove();
e();n=void 0}),m=function(a){z=a.shiftKey},k(A.window.document).keydown(m),k(A.window.document).keyup(m),k(A.window.document).keydown(function(b){if(46==b.which&&0<l.length){var c="<PATCH>";for(b=0;b<l.length;b++){var d=l[b],c=c+("<NODE id='"+l[b].id+"' deleteme='pronto'/>");_(d.inputPins).each(function(a){_(a.links).each(function(a){c+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"})});
_(d.outputPins).each(function(a){_(a.links).each(function(a){c+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"})})}c+="</PATCH>";g.update(r,c);l=[]}else if(115!=b.which&&83!=b.which||!b.ctrlKey){if(73==b.which&&b.ctrlKey)return g.inspector?g.inspector.win.focus():g.openInspector("."),b.preventDefault(),!1;if(65==b.which&&b.ctrlKey)return e(),a.selectAll(".vvvv-node").each(function(a){l.push(a);
d3.select(this).attr("class","vvvv-node selected")}),b.preventDefault(),!1}else return g.save(r.nodename,r.toXML()),b.preventDefault(),!1}),k(A.window).resize(function(){r.windowWidth=k(this).width();r.windowHeight=k(this).height();r.boundingBox.width=Math.max(r.windowWidth,r.boundingBox.width);r.boundingBox.height=Math.max(r.windowHeight,r.boundingBox.height);r.afterUpdate()}));A.drawComplete();r.afterUpdate=function(){A.drawComplete();g.inspector&&window.setTimeout(g.inspector.update,100)};r.afterEvaluate=
function(){h.filter(function(a){return a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel}).each(function(a){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,a)})}},1E3);this.close=function(){this.window.close()};this.drawComplete=function(){h&&h.remove();q&&q.remove();c||r.windowWidth==k(A.window).width()&&r.windowHeight==k(A.window).height()||A.window.resizeTo(r.windowWidth,r.windowHeight);a.attr("width",Math.max(r.windowWidth,r.boundingBox.width)).attr("height",Math.max(r.windowHeight,
r.boundingBox.height));a.selectAll(".background").attr("width",Math.max(r.windowWidth,r.boundingBox.width)).attr("height",Math.max(r.windowHeight,r.boundingBox.height));var b=a.append("svg:g").attr("class","link-group");h=a.selectAll("g.vvvv-node").data(r.nodeList).enter().append("svg:g").attr("class",function(a){var b="vvvv-node";a.isIOBox&&(b+=" vvvv-iobox");0<=l.indexOf(a)&&(b+=" selected");return b}).attr("id",function(a){return"vvvv-node-"+a.id}).attr("transform",function(a){return"translate("+
a.x+","+a.y+")"});h.append("svg:rect").attr("class","vvvv-node-background").attr("height",function(a){return a.getHeight()}).attr("width",function(a){return a.getWidth()}).attr("fill",function(a){return a.isComment()?"rgba(0,0,0,0)":a.not_implemented?"rgba(255,0,0,1)":"#cdcdcd"});h.append("svg:rect").attr("class","vvvv-node-pinbar").attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});h.append("svg:rect").attr("class",
"vvvv-node-pinbar").attr("y",function(a){return a.isIOBox?a.getHeight()-2:a.getHeight()-4}).attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});h.append("svg:g").attr("class","descriptive-name-bg");h.append("svg:text").text(function(a){return a.invisiblePins["Descriptive Name"]?a.invisiblePins["Descriptive Name"].getValue(0):null}).attr("class","vvvv-node-descriptive-name").attr("shape-rendering",
"crispEdges").attr("dy",function(a){return a.getHeight()+12}).attr("dx",2).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","white");h.selectAll("g.descriptive-name-bg").append("svg:rect").attr("fill",function(a){return void 0==a.invisiblePins["Descriptive Name"]||""==a.invisiblePins["Descriptive Name"].getValue(0)?"rgba(0,0,0,0)":"rgba(0,0,0,1)"}).attr("y",function(a){return a.getHeight()}).attr("width",5).attr("height",14);h.each(function(a){if(a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,
a);for(var b=a.IOBoxRows(),d=a.IOBoxInputPin().getSliceCount(),e=this,f=0;f<b;f++)(function(f){var g=d3.select(e).append("svg:rect").attr("width",a.getWidth()+2).attr("height",a.getHeight()/b-4).attr("y",12*f+2).attr("fill","rgba(0,0,0,0)");if(!c)g.on("contextmenu",function(a){if(void 0!=a.IOBoxInputPin().getValue(0)&&!a.IOBoxInputPin().isConnected()){k(".resettable",A.window.document).remove();var c=k("<input type='text'/>");k("body",A.window.document).append(c);c.css("position","absolute");c.css("left",
k(this).offset().left);c.css("top",k(this).offset().top+2);c.css("width",a.getWidth());c.css("height",a.getHeight()/b-4);VVVV.PinTypes[a.IOBoxInputPin().typeName].openInputBox(A.window,c,a.IOBoxInputPin(),f%d)}d3.event.stopPropagation();d3.event.preventDefault();return!1})})(f)}else d3.select(this).append("svg:text").text(function(a){return a.label()}).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(a,b){return 12*b+12}).attr("dx",4).attr("font-size",10).attr("font-family",
"Lucida Sans Unicode")});m=h.selectAll("g.vvvv-input-pin").data(function(a){return a.isSubpatch?_(a.inputPins).sortBy(function(a){return a.slavePin?a.slavePin.node.x:1}).map(function(a,b){return a}):_(a.inputPins).map(function(a,b){return a})}).enter().append("svg:g").attr("class","vvvv-input-pin").attr("transform",function(a,b){pinOffset=0;1<_(a.node.inputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.inputPins).size()-1));a.y=0;a.x=b*pinOffset;return"translate("+a.x+", 0)"});m.append("svg:rect").attr("width",
4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-input-pin").filter(function(a,b){return b==c}).each(function(){d3.select(this).append("svg:rect").attr("class","vvvv-input-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);d3.select(this).append("svg:text").text(function(a){return 1<a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+
a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-input-pin text").remove();a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-input-pin rect.vvvv-input-pin-highlight").remove()});t=h.selectAll("g.vvvv-output-pin").data(function(a){return _(a.outputPins).map(function(a,b){return a})}).enter().append("svg:g").attr("class","vvvv-output-pin").attr("transform",
function(a,b){pinOffset=0;1<_(a.node.outputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.outputPins).size()-1));a.y=a.node.getHeight()-4;a.x=b*pinOffset;return"translate("+a.x+", "+a.y+")"});t.append("svg:rect").attr("width",4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin").filter(function(a,b){return b==c}).each(function(){d3.select(this).append("svg:rect").attr("class",
"vvvv-output-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);d3.select(this).append("svg:text").text(function(a){return 1<a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin text").remove();a.selectAll("#vvvv-node-"+
b.node.id+" g.vvvv-output-pin rect.vvvv-output-pin-highlight").remove()});q=b.selectAll("g.vvvv-link").data(r.linkList).enter().append("svg:g").attr("class","vvvv-link");q.append("svg:line").attr("stroke","rgba(0, 0, 0, 0)").attr("stroke-width",4).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});
q.append("svg:line").attr("stroke","#000").attr("stroke-width",1).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});k(".descriptive-name-bg rect",A.window.document).each(function(){k(this,A.window.document).attr("width",k(this,A.window.document).parent().next().get(0).getBBox().width+4)});c||(a.selectAll("g.vvvv-input-pin").on("contextmenu",
function(a,b){if(VVVV.PinTypes[a.typeName].openInputBox&&void 0!=a.getValue(0)){k(".resettable",A.window.document).remove();var c=k("<input type='text'/>");k("body",A.window.document).append(c);c.css("position","absolute");c.css("left",k(this).offset().left);c.css("top",k(this).offset().top-3);c.css("width",50);c.css("height",14);VVVV.PinTypes[a.typeName].openInputBox(A,c,a,0)}d3.event.stopPropagation();d3.event.preventDefault();return!1}),a.selectAll("g.vvvv-input-pin, g.vvvv-output-pin").on("click",
function(b,c){if(1!=A.state){n=b;A.state=1;a.append("svg:line").attr("class","vvvv-link current-link resettable").attr("stroke","#000").attr("stroke-width",1).attr("x1",b.x+b.node.x+2+0.5).attr("y1",b.y+b.node.y+2+0.5).attr("x2",b.x+b.node.x+2+0.5).attr("y2",b.y+b.node.y+2+0.5);var d=n.direction==PinDirection.Output?"input":"output",e=n.node.getUpstreamNodes();a.selectAll("g.vvvv-"+d+"-pin").filter(function(a){return a.typeName!=n.typeName&&("Node"!=n.typeName||VVVV.PinTypes[a.typeName].primitive&&
("Node"!=a.typeName||VVVV.PinTypes[n.typeName].primitive))||0<=e.indexOf(a.node)||a.node==n.node?!1:!0}).append("svg:rect").attr("class","vvvv-connection-highlight resettable").attr("width",4).attr("height",3).attr("fill","rgba(0,0,0,1)").attr("y",function(a){return a.direction==PinDirection.Input?-3:3})}else{if(n.direction==PinDirection.Input)var d=b,f=n;else d=n,f=b;if(d.typeName==f.typeName&&d.direction!=f.direction||"Node"==d.typeName&&!VVVV.PinTypes[f.typeName].primitive||"Node"==f.typeName&&
!VVVV.PinTypes[d.typeName].primitive){var h="<PATCH>";_(f.links).each(function(a){h+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"});h+="<LINK createme='pronto' srcnodeid='"+d.node.id+"' srcpinname='"+d.pinname+"' dstnodeid='"+f.node.id+"' dstpinname='"+f.pinname+"'/>";h+="</PATCH>";g.update(r,h);a.select(".vvvv-link.current-link").remove();a.select(".vvvv-connection-highlight").remove();
A.state=0}r.afterUpdate()}d3.event.stopPropagation()}).on("mousedown",function(){d3.event.stopPropagation()}),a.selectAll("g.vvvv-link").on("contextmenu",function(a){g.update(r,"<PATCH><LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/></PATCH>");d3.event.preventDefault()}),h.on("mousedown",function(a){k(".resettable",A.window.document).remove();A.state=2;0>l.indexOf(a)&&(z||e(),d3.select(this).attr("class",
"vvvv-node selected"),l.push(a));f=d3.event.pageX;d=d3.event.pageY;g.inspector&&g.inspector.setNode(a);d3.event.preventDefault();d3.event.stopPropagation();return!1}).on("contextmenu",function(a){a.isSubpatch?g.openPatch(a):a.openUIWindow&&a.openUIWindow();d3.event.preventDefault();d3.event.stopPropagation();return!1}))}};VVVV.Editors.BrowserEditor.Inspector=function(b){function g(){d=void 0;k(a.win.document).find("#pins, #values").empty();k(a.win.document).find("#pins").append('<div class="row heading">Configuration</div>');
k(a.win.document).find("#values").append('<div class="row heading"></div>');_(f.invisiblePins).each(function(a){c(a)});k(a.win.document).find("#pins").append('<div class="row heading">Input Pins</div>');k(a.win.document).find("#values").append('<div class="row heading"></div>');_(f.inputPins).each(function(a){c(a)});k(a.win.document).find("#pins").append('<div class="row heading">Output Pins</div>');k(a.win.document).find("#values").append('<div class="row heading"></div>');_(f.outputPins).each(function(a){c(a)})}
function c(b){var c=k('<a class="row pin" href="#">'+b.pinname+"</a>");k(a.win.document).find("#pins").append(c);c.click(function(c){k(a.win.document).find("a.pin.active").removeClass("active");k(this).addClass("active");VVVV.PinTypes[b.typeName].openInputBox&&e(b);c.preventDefault();return!1});VVVV.PinTypes[b.typeName].openInputBox&&b.direction!=PinDirection.Output&&!b.isConnected()&&void 0!=b.getValue(0)?(c=k('<div class="row value"><div style="height:100%">'+b.getValue(0)+"</div></div>"),c.find("div").click(function(){VVVV.PinTypes[b.typeName].openInputBox(a.win,
k(this),b,0)})):c=k('<div class="row value readonlyvalue"><div style="height:100%">'+b.getValue(0)+"</div></div>");"Color"==b.typeName&&c.find("div").css("background-color","rgba("+_(b.getValue(0).split(",")).map(function(a){return parseInt(255*a)}).join(",")+")");k(a.win.document).find("#values").append(c)}function e(b){var c=d!=b;d=b;var e=b.getSliceCount(),f=k('<div class="row heading"><input type="text" value="'+e+'"/ size="3"/> Slices</div>');b.direction!=PinDirection.Input&&f.find("input").attr("disabled",
!0);var g=k(a.win.document).find("#values .row").first();0<g.length?g.replaceWith(f):k(a.win.document).find("#values").append(f);f.find("input").change(function(a){for(var b=Math.max(1,parseInt(k(this).val())),c=d.getSliceCount();c<b;c++)d.setValue(c,VVVV.PinTypes[d.typeName].defaultValue());d.setSliceCount(b);d.node.parentPatch.afterUpdate();a.preventDefault();return!1});for(f=f=0;f<e;f++)if(g=k(a.win.document).find("#values .row").eq(f+1),c||!g.children().first().hasClass("pininputbox")){if(VVVV.PinTypes[b.typeName].openInputBox&&
b.direction!=PinDirection.Output&&!b.isConnected()&&void 0!=b.getValue(0)){var l=k('<div class="row value"><div style="height:100%">'+b.getValue(f)+"</div></div>");(function(c){l.find("div").click(function(){VVVV.PinTypes[b.typeName].openInputBox(a.win,k(this),b,c)})})(f)}else l=k('<div class="row value readonlyvalue"><div style="height:100%">'+b.getValue(f)+"</div></div>");0<g.length?g.replaceWith(l):k(a.win.document).find("#values").append(l);"Color"==b.typeName&&l.find("div").css("background-color",
"rgba("+_(b.getValue(f).split(",")).map(function(a){return parseInt(255*a)}).join(",")+")")}f++;for(g=k(a.win.document).find("#values .row");f<g.length;f++)g.eq(f).remove()}this.win=window.open(b+"/inspektor.html","inspektor","location=no, width=250, height=600, toolbar=no");var f,d;insw=this.win;var a=this;this.update=function(){f&&(d?e(d):g())};this.setNode=function(a){f=a;g()};this.close=function(){this.win.close()}};VVVV.Editors.BrowserEditor.Interface=function(){function b(){return"Are you sure you want to leave? Unsaved changes in your patches will be lost."}
var g=[],c={};this.inspector=void 0;this.enable=function(c,d){d=d||{};this.addPatch(c);this.openPatch(c,d.selector);if(!d.selector){var a=this;k(window).bind("beforeunload",b);k(window).unload(function(){a.disable()});this.openInspector(VVVV.Root);g[0].window?d&&d.success&&d.success():d&&d.error&&d.error()}};this.openInspector=function(b,c){if(!this.inspector){this.inspector=new VVVV.Editors.BrowserEditor.Inspector(b);var a=this;k(this.inspector.win).bind("beforeunload",function(){console.log("closing inspektor");
a.inspector=void 0})}};var e=[];this.addPatch=function(b){for(var d=b.id,a=b;void 0!=(a=a.parentPatch);)d+="-"+a.id;if(!(0<=e.indexOf(d)))for(e.push(d),b.editor=this,d=VVVV.Helpers.prepareFilePath(b.nodename,b.parentPatch),void 0==c[d]&&(c[d]=[]),c[d].push(b),b=b.getSubPatches(),d=0;d<b.length;d++)this.addPatch(b[d])};this.removePatch=function(b){for(var d=b.getSubPatches(),a=0;a<d.length;a++)this.removePatch(d[a]);d=VVVV.Helpers.prepareFilePath(b.nodename,b.parentPatch);c[d].splice(c[d].indexOf(b),
1);0==c[d].length&&delete c[d];console.log(c)};this.openPatch=function(b,c){g.push(new VVVV.Editors.BrowserEditor.PatchWindow(b,this,c))};this.update=function(b,d){for(var a=VVVV.Helpers.prepareFilePath(b.nodename,b.parentPatch),e=c[a].length,g=0;g<e;g++)c[a][g].doLoad(d),c[a][g].afterUpdate()};this.disable=function(){for(var c=0;c<g.length;c++)g[c].close();this.inspector&&this.inspector.close();k(window).unbind("beforeunload",b)};this.save=function(b,c){var a=k("<a>save</a>");k("body").append(a);
a.attr("href","data:application/octet-stream;charset=utf-8,"+encodeURIComponent(c));a.attr("download",b);a[0].click();a.remove()};this.sendUndo=function(){}};VVVV.VVVViewer=function(b,g){(new VVVV.Editors.BrowserEditor.Interface).enable(b,{selector:g})};VVVV.Editors.edit=VVVV.Editors.BrowserEditor.Interface})(vvvvjs_jquery);VVVV.Themes=VVVV.Themes||{};
VVVV.Themes.Tron={scaleX:1.2,scaleY:1.8,categoryColors:{Value:"#78B4A8",Animation:"#51de3a","3d":"#78B4A8",Boolean:"#78B4A8",Complex:"#78B4A8","2d":"#78B4A8",Spreads:"#78B4A8",String:"#d54c70",EX9:"#d6bf00",Canvas:"#d6bf00",HTML5:"#d6bf00",Transform:"#ba4b36","default":"#AAAAAA"},chart:function(k){},background:function(k){k.attr("fill","#666666")},node:function(k){k.attr("x",-1).attr("width",function(b){return b.getWidth()*VVVV.Themes.Tron.scaleX+2}).attr("rx",1).attr("ry",1).attr("stroke","rgba(127, 190, 183, 1.0)").attr("stroke-width",
1).attr("fill",function(b){return b.isComment()?"rgba(0,0,0,0)":b.not_implemented?"rgba(255,0,0,1)":"rgba(127, 190, 183, 0.6)"})},inputPinBar:function(k){k.attr("height",2).attr("fill","rgba(0,0,0,0)")},outputPinBar:function(k){k.attr("y",function(b){return b.getHeight()*VVVV.Theme.scaleY-2}).attr("height",2).attr("fill","rgba(0,0,0,0)")},descriptiveNameText:function(k){k.attr("shape-rendering","crispEdges").attr("dy",function(b){return b.getHeight()*VVVV.Theme.scaleY+12}).attr("dx",2).attr("font-size",
10).attr("font-family","Lucida Sans Unicode").attr("fill","white")},descriptiveNameBackground:function(k){k.attr("fill",function(b){return void 0==b.invisiblePins["Descriptive Name"]||""==b.invisiblePins["Descriptive Name"].getValue(0)?"rgba(0,0,0,0)":"rgba(0,0,0,1)"}).attr("y",function(b){return b.getHeight()*VVVV.Theme.scaleY}).attr("width",5).attr("height",14)},nodeLabel:function(k){k.attr("fill","white").attr("shape-rendering","crispEdges").attr("dy",function(b,g){return 18*g+19}).attr("dx",4).attr("font-size",
11).attr("font-family","Lucida Sans Unicode")},inputPin:function(k){k.attr("y",-2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(b){return b.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},inputPinHover:function(k){k.attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-6)},inputPinValue:function(k){k.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},outputPin:function(k){k.attr("y",
2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(b){return b.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},outputPinHover:function(k){k.attr("width",4).attr("height",4).attr("fill","rgba(1,1,1,1)").attr("y",6)},outputPinValue:function(k){k.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},connectablePin:function(k){k.attr("width",4).attr("height",3).attr("fill","rgba(1,1,1,1)").attr("y",
function(b){return b.direction==PinDirection.Input?-3:3})},link:function(k){k.append("svg:path").attr("stroke","rgba(0, 0, 0, 0)").attr("fill","rgba(0,0,0,0)").attr("stroke-width",4).attr("d",function(b){var g=(b.toPin.node.y-b.fromPin.node.y-b.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>g&&(g=30);return"M"+(b.fromPin.x+b.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(b.fromPin.y+b.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(b.fromPin.x+b.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(b.fromPin.y+
b.fromPin.node.y*VVVV.Theme.scaleY+4+g)+" "+(b.toPin.x+b.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(b.toPin.y+b.toPin.node.y*VVVV.Theme.scaleY-g)+" "+(b.toPin.x+b.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(b.toPin.y+b.toPin.node.y*VVVV.Theme.scaleY+0.5)});k.append("svg:path").attr("stroke","#FFF").attr("fill","rgba(0,0,0,0)").attr("stroke-width",0.5).attr("d",function(b){var g=(b.toPin.node.y-b.fromPin.node.y-b.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>g&&(g=30);return"M"+(b.fromPin.x+b.fromPin.node.x*
VVVV.Theme.scaleX+2+0.5)+","+(b.fromPin.y+b.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(b.fromPin.x+b.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(b.fromPin.y+b.fromPin.node.y*VVVV.Theme.scaleY+4+g)+" "+(b.toPin.x+b.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(b.toPin.y+b.toPin.node.y*VVVV.Theme.scaleY-g)+" "+(b.toPin.x+b.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(b.toPin.y+b.toPin.node.y*VVVV.Theme.scaleY+0.5)})},currentLink:function(k){k.attr("stroke","#FFF").attr("stroke-width",1)}};
VVVV.Theme=VVVV.Themes.Tron;
