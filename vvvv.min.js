var VVVV_ENV="production";$.ajaxPrefilter(function(a,b){if("script"==a.dataType||"script"==b.dataType)a.cache=!0});window.console||(window.console={log:function(){}});
VVVV={Nodes:{},PinTypes:{},Types:{},NodeLibrary:{},NodeNames:[],Patches:{},Editors:{},onNotImplemented:function(a){console.log("Warning: "+a+" is not implemented.")},loadCounter:0,loadScript:function(a,b){var g=document.getElementsByTagName("head")[0],f=document.createElement("script");f.async=!1;f.src=VVVV.Root+"/"+a;b&&f.addEventListener("load",b);VVVV.loadCounter++;g.appendChild(f)},init:function(a,b,g){function f(){var d=new VVVV.Core.Patch("");_(VVVV.Nodes).each(function(c){var h=new c(0,d);
"development"==VVVV_ENV&&console.log("Registering "+h.nodename);VVVV.NodeLibrary[h.nodename.toLowerCase()]=c;VVVV.NodeNames.push(h.nodename)});"development"==VVVV_ENV&&console.log("done ...");VVVV.MainLoops=[];$("script[language='VVVV']").each(function(c){var d=new VVVV.Core.Patch($(this).attr("src"),function(){var c=new VVVV.Core.MainLoop(this);VVVV.MainLoops.push(c)});VVVV.Patches[c]=d});"function"===typeof g&&g.call()}VVVV.Root=a||"./";"development"==VVVV_ENV&&console.log("loading vvvv.js ...");
if("development"==VVVV_ENV){document.getElementsByTagName("head");var e=function(d){d.target.removeEventListener("load",e);0>=--VVVV.loadCounter&&f()};0==$("script[src*=thirdparty]").length&&VVVV.loadScript("thirdparty.js",e);0==$("script[src*=underscore]").length&&VVVV.loadScript("lib/underscore/underscore-min.js",e);0==$('script[src*="d3.js"]').length&&("full"==b||"vvvviewer"==b)&&VVVV.loadScript("lib/d3-v3/d3.v3.min.js",e);0==$("script[src*=glMatrix]").length&&("full"==b||"run"==b)&&VVVV.loadScript("lib/glMatrix-0.9.5.min.js",
e);if(0==$('script[src*="vvvv.core.js"]').length){VVVV.loadScript("core/vvvv.core.js",e);if("run"==b||"full"==b)VVVV.loadScript("mainloop/vvvv.mainloop.js",e),VVVV.loadScript("mainloop/vvvv.dominterface.js",e),VVVV.loadScript("nodes/vvvv.nodes.value.js",e),VVVV.loadScript("nodes/vvvv.nodes.string.js",e),VVVV.loadScript("nodes/vvvv.nodes.boolean.js",e),VVVV.loadScript("nodes/vvvv.nodes.color.js",e),VVVV.loadScript("nodes/vvvv.nodes.spreads.js",e),VVVV.loadScript("nodes/vvvv.nodes.spectral.js",e),VVVV.loadScript("nodes/vvvv.nodes.animation.js",
e),VVVV.loadScript("nodes/vvvv.nodes.network.js",e),VVVV.loadScript("nodes/vvvv.nodes.system.js",e),VVVV.loadScript("nodes/vvvv.nodes.canvas.js",e),VVVV.loadScript("nodes/vvvv.nodes.html5.js",e),VVVV.loadScript("nodes/vvvv.nodes.transform.js",e),VVVV.loadScript("nodes/vvvv.nodes.vectors.js",e),VVVV.loadScript("nodes/vvvv.nodes.webgl.js",e),VVVV.loadScript("nodes/vvvv.nodes.complex.js",e),VVVV.loadScript("nodes/vvvv.nodes.enumerations.js",e),VVVV.loadScript("nodes/vvvv.nodes.2d.js",e),VVVV.loadScript("nodes/vvvv.nodes.3d.js",
e),VVVV.loadScript("nodes/vvvv.nodes.node.js",e),VVVV.loadScript("nodes/vvvv.nodes.astronomy.js",e),VVVV.loadScript("nodes/vvvv.nodes.xml.js",e),VVVV.loadScript("nodes/vvvv.nodes.differential.js",e);VVVV.loadScript("editors/vvvv.editors.browser_editor.js",e)}}"production"==VVVV_ENV&&f()}};VVVV.MousePositions={_all:{x:0,y:0,wheel:0,lb:0,mb:0,rb:0}};var PinDirection={Input:0,Output:1,Configuration:2};VVVV.PinTypes.Generic={typeName:"Generic",reset_on_disconnect:!0,defaultValue:function(){return"0"}};VVVV.PinTypes.Value={typeName:"Value",reset_on_disconnect:!1,defaultValue:function(){return 0},primitive:!0};VVVV.PinTypes.String={typeName:"String",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0};
VVVV.PinTypes.Enum={typeName:"Enum",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0};
VVVV.Helpers={translateOperators:function(a){a=a.replace("Add","+");a=a.replace("Subtract","-");a=a.replace("Multiply","*");a=a.replace("Divide","/");a=a.replace("EQ","=");a=a.replace("GT",">");a=a.replace("GTE",">=");a=a.replace("LT","<");return a=a.replace("LTE","<=")},prepareFilePath:function(a,b){a=a.replace(/\\/g,"/");return a.match(/^%VVVV%/)?a.replace("%VVVV%",VVVV.Root):a.match(/^%PAGE%/)?a.replace("%PAGE%",location.pathname):a.match(/^(\/|.+:\/\/)/)?a:b?b.getAbsolutePath()+a:a},dynamicPins:function(a,
b,g,f){for(var e=b.length;e<g;e++)b[e]=f.call(a,e);for(e=g;e<b.length;e++)a.removeInputPin(b[e].pinname);b.length=g;a.parentPatch.afterUpdate()}};
VVVV.Core={Pin:function(a,b,g,f,e){this.direction=b;this.pinname=a;this.links=[];this.values=[];this.node=f;this.changed=!0;this.reset_on_disconnect=this.active=!1;this.masterPin=this.slavePin=void 0;this.connectionChangedHandlers={};this.enumOptions=[];this.getValue=function(d,c){if(!c||1==c)return this.values[d%this.values.length];for(var h=[],e=0;e<c;e++)h.push(this.values[(d*c+e)%this.values.length]);return h};this.setValue=function(d,c,h){if(this.direction==PinDirection.Output||0==this.links.length)if(h=
h||!1,this.values[d]=c,this.direction==PinDirection.Output)for(var e=this.links.length,f=0;f<e;f++)this.links[f].toPin.setValue(d,c);this.changed=!0;this.node.dirty=!0;this.slavePin&&!h&&this.slavePin.setValue(d,c);this.direction==PinDirection.Input&&(this.masterPin&&!this.isConnected())&&this.masterPin.setValue(d,c,!0);this.node.isIOBox&&"Descriptive Name"==this.pinname&&(this.node.parentPatch.domInterface?this.node.parentPatch.domInterface.connect(this.node):this.node.parentPatch.parentPatch&&this.node.registerInterfacePin())};
this.markPinAsChanged=function(){this.changed=!0;this.node.dirty=!0;if(this.direction==PinDirection.Output)for(var d=this.links.length,c=0;c<d;c++)this.links[c].toPin.markPinAsChanged();this.slavePin&&this.slavePin.markPinAsChanged()};this.pinIsChanged=function(){var d=this.changed;this.changed=!1;return d};this.connect=function(d){this.values=d.values;this.markPinAsChanged()};this.disconnect=function(){this.values=this.values.slice(0)};this.isConnected=function(){return 0<this.links.length||this.masterPin&&
this.masterPin.isConnected()};this.getSliceCount=function(){return this.values.length};this.setSliceCount=function(d){this.slavePin&&this.slavePin.setSliceCount(d);if(this.values.length!=d&&(this.changed=!0,this.node.dirty=!0,this.direction==PinDirection.Output||0==this.links.length))if(this.values.length=d,this.direction==PinDirection.Output)for(var c=this.links.length,h=0;h<c;h++)this.links[h].toPin.setSliceCount(d)};this.setType=function(d){if(d.typeName!=this.typeName){var c=this;delete this.connectionChangedHandlers.nodepin;
delete this.connectionChangedHandlers.webglresource;_(d.connectionChangedHandlers).each(function(h,e){c.connectionChangedHandlers[e]=d.connectionChangedHandlers[e]});this.typeName=d.typeName;this.defaultValue=d.defaultValue;this.direction==PinDirection.Input&&(this.defaultValue&&!this.isConnected())&&(this.setValue(0,this.defaultValue()),this.setSliceCount(1));void 0!=d.reset_on_disconnect&&(this.reset_on_disconnect=d.reset_on_disconnect)}};void 0==e&&(e=VVVV.PinTypes.Generic,this.unvalidated=!0);
this.setType(e);g&&0<g.length&&(this.values=g.slice(0));this.reset=function(){this.values=[];this.defaultValue?(this.setValue(0,this.defaultValue()),this.setSliceCount(1)):this.values=g.slice(0);this.markPinAsChanged()};this.connectionChanged=function(){var d=this;_(this.connectionChangedHandlers).each(function(c){d.f=c;d.f()})}},Node:function(a,b,g){this.nodename=b;this.id=a;this.height=this.width=this.y=this.x=0;this.isShader=this.isIOBox=!1;this.resourcesPending=0;this.auto_nil=!0;this.setupObject=
function(){this.inputPins={};this.outputPins={};this.invisiblePins={};this.defaultPinValues={}};this.setupObject();this.delays_output=this.auto_evaluate=!1;this.dirty=!0;(this.parentPatch=g)&&(this.parentPatch.nodeMap[a]=this);this.addDefault=function(f,e){this.defaultPinValues[f]=e};this.addInputPin=function(f,e,d){e=new VVVV.Core.Pin(f,PinDirection.Input,e,this,d);this.inputPins[f]=e;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_in_"+f]=e);this.applyPinValuesFromXML(f);return e};this.addOutputPin=
function(f,e,d){e=new VVVV.Core.Pin(f,PinDirection.Output,e,this,d);this.outputPins[f]=e;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_out_"+f]=e);return e};this.removeInputPin=function(f){if(this.inputPins[f]){var e=this.inputPins[f].links[0];e&&(e.fromPin.connectionChanged(),e.destroy());delete this.inputPins[f];this.dirty=!0}};this.removeOutputPin=function(f){if(this.outputPins[f]){for(var e=this.outputPins[f].links.length,d=0;d<e;d++){var c=this.outputPins[f].links[d];c.toPin.connectionChanged();
c.destroy()}delete this.outputPins[f];this.dirty=!0}};this.addInvisiblePin=function(f,e,d){e=new VVVV.Core.Pin(f,PinDirection.Configuration,e,this,d);this.invisiblePins[f]=e;this.parentPatch.pinMap[this.id+"_inv_"+f]=e;void 0!=this.defaultPinValues[f]&&(e.values=this.defaultPinValues[f]);return e};this.IOBoxType=function(){var f=/^IOBox \((.*)\)/.exec(this.nodename);return f&&1<f.length?f[1]:""};this.IOBoxInputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.inputPins["Y Input Value"];
case "String":return this.inputPins["Input String"];case "Color":return this.inputPins["Color Input"];case "Node":return this.inputPins["Input Node"]}};this.IOBoxOutputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.outputPins["Y Output Value"];case "String":return this.outputPins["Output String"];case "Color":return this.outputPins["Color Output"];case "Node":return this.outputPins["Output Node"]}};this.IOBoxRows=function(){return this.invisiblePins.Rows?this.invisiblePins.Rows.getValue(0):
1};this.isComment=function(){return this.isIOBox&&0==_(this.outputPins).size()};this.label=function(){if(this.isIOBox)return this.IOBoxInputPin().getValue(0)?this.IOBoxInputPin().getValue(0).toString():"";if(this.isSubpatch)return"||"+this.nodename.match(/([^\/]+)\.v4p$/)[1];var f=this.nodename.replace(/\s\(.+\)/,"");return f=VVVV.Helpers.translateOperators(f)};this.getWidth=function(){var f;f=100==this.width||0==this.width?this.isIOBox?60:Math.max(18,6*(this.label().length+2)):this.width/15;return f=
Math.max(f,12*(_(this.inputPins).size()-1)+4)};this.getHeight=function(){return this.isIOBox&&100==this.height?18*this.IOBoxRows():100==this.height||this.isSubpatch?18:Math.max(18,this.height/15)};this.getUpstreamNodes=function(){var f=[];_(this.inputPins).each(function(e){0<e.links.length&&f.push(e.links[0].fromPin.node)});return f};this.getDownstreamNodes=function(){var f=[];_(this.outputPins).each(function(e){for(var d=0;d<e.links.length;d++)f.push(e.links[d].toPin.node)});return f};this.findDownstreamNodes=
function(f){var e=[];_(this.outputPins).each(function(d){for(var c=0;c<d.links.length;c++)d.links[c].toPin.node.nodename==f?e.push(d.links[c].toPin.node):e=d.links[c].toPin.slavePin?e.concat(d.links[c].toPin.slavePin.node.findDownstreamNodes(f)):d.links[c].toPin.node.isIOBox&&d.links[c].toPin.node.IOBoxOutputPin().slavePin?e.concat(d.links[c].toPin.node.IOBoxOutputPin().slavePin.node.findDownstreamNodes(f)):e.concat(d.links[c].toPin.node.findDownstreamNodes(f))});return e};this.hasNilInputs=function(){var f=
!1;_(this.inputPins).each(function(e){0==e.getSliceCount()&&(f=!0)});return f};this.getMaxInputSliceCount=function(){var f=0;_(this.inputPins).each(function(e){e.getSliceCount()>f&&(f=e.values.length)});return f};this.applyPinValuesFromXML=function(f){if(this.inputPins[f]){var e=this.inputPins[f];f=this.defaultPinValues[f];if(void 0!=f&&(!e.reset_on_disconnect||1<f.length||""!=f[0])){for(var d=0;d<f.length;d++)e.values[d]!=f[d]&&e.setValue(d,f[d]);e.setSliceCount(f.length)}}};this.registerInterfacePin=
function(){var f=this;if(this.isIOBox&&this.parentPatch.parentPatch&&""!=this.invisiblePins["Descriptive Name"].getValue(0)){var e=this.invisiblePins["Descriptive Name"].getValue(0);this.IOBoxInputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.masterPin){"development"==VVVV_ENV&&console.log("deleting "+e+" input pin because node has input connection...");for(var d=0;d<this.masterPin.links.length;d++)this.masterPin.links[d].destroy();f.parentPatch.removeInputPin(e);
this.masterPin=void 0}0==f.IOBoxOutputPin().links.length&&(f.IOBoxOutputPin().slavePin?f.IOBoxOutputPin().slavePin.pinname!=e&&("development"==VVVV_ENV&&console.log("renaming "+f.IOBoxOutputPin().slavePin.pinname+" to "+e),f.parentPatch.outputPins[e]=f.parentPatch.outputPins[f.IOBoxOutputPin().slavePin.pinname],f.parentPatch.removeOutputPin(f.IOBoxOutputPin().slavePin.pinname),f.IOBoxOutputPin().slavePin.pinname=e):("development"==VVVV_ENV&&console.log("interfacing output pin detected: "+e),d=f.parentPatch.outputPins[e],
void 0==d&&(d=f.parentPatch.addOutputPin(e,f.IOBoxOutputPin().values)),d.setType(VVVV.PinTypes[f.IOBoxOutputPin().typeName]),f.IOBoxOutputPin().slavePin=d,d.masterPin=f.IOBoxOutputPin()));this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxInputPin().connectionChanged();this.IOBoxOutputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.slavePin){"development"==VVVV_ENV&&console.log("deleting "+e+" output pin because node "+f.id+" has output connection...");
for(var d=0;d<this.slavePin.links.length;d++)this.slavePin.links[d].destroy();f.parentPatch.removeOutputPin(e);this.slavePin=void 0}if(0==f.IOBoxInputPin().links.length)if(f.IOBoxInputPin().masterPin)f.IOBoxInputPin().masterPin.pinname!=e&&(console.log("renaming "+f.IOBoxInputPin().masterPin.pinname+" to "+e),f.parentPatch.inputPins[e]=f.parentPatch.inputPins[f.IOBoxInputPin().masterPin.pinname],f.parentPatch.removeInputPin(f.IOBoxInputPin().masterPin.pinname),f.IOBoxInputPin().masterPin.pinname=
e);else{"development"==VVVV_ENV&&console.log("interfacing input pin detected: "+e);var c=f.parentPatch.inputPins[e];if(void 0==c)"development"==VVVV_ENV&&console.log("creating new input pin at parent patch, using IOBox values"),c=f.parentPatch.addInputPin(e,f.IOBoxInputPin().values);else{slicecount=c.getSliceCount();for(d=0;d<slicecount;d++)f.IOBoxInputPin().setValue(d,c.getValue(d));0<slicecount&&f.IOBoxInputPin().setSliceCount(c.getSliceCount())}d=c.values.slice();c.setType(VVVV.PinTypes[f.IOBoxInputPin().typeName]);
c.unvalidated&&VVVV.PinTypes[c.typeName].primitive&&!c.isConnected()&&(c.values=d);c.unvalidated=!1;c.slavePin=f.IOBoxInputPin();f.IOBoxInputPin().masterPin=c}this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxOutputPin().connectionChanged()}};this.setup=function(){this.addInvisiblePin("Descriptive Name",[""],VVVV.PinTypes.String)};this.initialize=function(){};this.evaluate=function(){_(this.outputPins).each(function(f){f.setValue(0,"not calculated")})};this.destroy=function(){this.isIOBox&&
(this.IOBoxInputPin().masterPin&&(this.parentPatch.removeInputPin(this.IOBoxInputPin().masterPin.pinname),this.parentPatch.parentPatch.afterUpdate()),this.IOBoxOutputPin().slavePin&&(this.parentPatch.removeOutputPin(this.IOBoxOutputPin().slavePin.pinname),this.parentPatch.parentPatch.afterUpdate()))};this.serialize=function(){var f=$("<NODE>");f.attr("id",this.id);f.attr("nodename",this.nodename);f.attr("systemname",this.nodename);this.shaderFile&&f.attr("filename",this.shaderFile.replace(".vvvvjs.fx",
".fx").replace("%VVVV%/effects","%VVVV%/lib/nodes/effects"));this.isSubpatch&&(f.attr("filename",this.nodename),f.attr("systemname",this.nodename.match("(.*).v4p$")[1]));this.isIOBox?f.attr("componentmode","InABox"):f.attr("componentmode","Hidden");var e=$("<BOUNDS>");this.isIOBox?e.attr("type","Box"):e.attr("type","Node");e.attr("left",parseInt(15*this.x));e.attr("top",parseInt(15*this.y));e.attr("width",parseInt(this.width));e.attr("height",parseInt(this.height));f.append(e);var d=this;_(this.inputPins).each(function(c){var e=
$("<PIN>");e.attr("pinname",c.pinname);e.attr("visible","1");(!c.isConnected()||c.masterPin)&&(VVVV.PinTypes[c.typeName].primitive&&d.defaultPinValues[c.pinname])&&e.attr("values",_(d.defaultPinValues[c.pinname]).map(function(c){return"|"+c.toString().replace(/\|/g,"||")+"|"}).join(","));f.append(e)});_(this.invisiblePins).each(function(c){var d=$("<PIN>");d.attr("pinname",c.pinname);d.attr("visible","0");VVVV.PinTypes[c.typeName].primitive&&d.attr("values",_(c.values).map(function(c){return"|"+c.toString().replace(/\|/g,
"||")+"|"}).join(","));f.append(d)});return f}},Link:function(a,b){this.fromPin=a;this.toPin=b;this.fromPin.links.push(this);this.toPin.links.push(this);this.destroy=function(){this.fromPin.links.splice(this.fromPin.links.indexOf(this),1);this.toPin.links.splice(this.toPin.links.indexOf(this),1);this.fromPin.node.parentPatch.linkList.splice(this.fromPin.node.parentPatch.linkList.indexOf(this),1);this.toPin.reset_on_disconnect?this.toPin.reset():(this.toPin.disconnect(),this.toPin.node.defaultPinValues[this.toPin.pinname]=
this.toPin.values.slice(0))};this.serialize=function(){var g=$("<LONK>");g.attr("srcnodeid",this.fromPin.node.id);g.attr("srcpinname",this.fromPin.pinname);g.attr("dstnodeid",this.toPin.node.id);g.attr("dstpinname",this.toPin.pinname);return g}},Patch:function(a,b,g,f,e){function d(c){if(void 0==c)return[];if("45_26">=this.vvvv_version)return separator=/\|/.test(c)?"|":",",c.split(separator).filter(function(c){return""!=c});for(var d=[],e="",h=!1,f=c.length,l=0;l<f;l++)","==c[l]&&!h?(d.push(e),e=
""):"|"==c[l]?"|"!=c[l+1]||l+1==c.length-1?h=!h:e+=c[++l]:e+=c[l];d.push(e);return d}function c(){var c=window.location.hash.match("#([^/]+)/"+k.ressource+"$");c&&(console.log("launching editor ..."),(new VVVV.Editors[c[1]]).enable(k))}this.ressource=a;this.vvvv_version="45_26.1";this.boundingBox={width:0,height:0};this.windowHeight=this.windowWidth=500;this.pinMap={};this.nodeMap={};this.nodeList=[];this.linkList=[];this.evaluationRecipe=[];this.mainloop=void 0;this.success=b;this.error=g;this.editor=
void 0;this.setupObject();f&&(this.parentPatch=f);e&&(this.id=e);var h=!1;this.getAbsolutePath=function(){var c=this.getRelativePath();this.parentPatch&&(c=this.parentPatch.getAbsolutePath()+c);return c};this.getRelativePath=function(){return this.nodename.match(/(.*\/)?[^/]+\.v4p/)[1]||""};this.destroy=function(){for(var c=0;c<this.nodeList.length;c++)this.nodeList[c].destroy(),delete this.nodeMap[this.nodeList[c].id],delete this.nodeList[c]};if("45_26">=this.vvvv_version)var l={},p={},j={},q={};
var k=this;this.doLoad=function(c,e){function h(c){"complete"==g&&(p={});$(c).find('link[deleteme="pronto"]').each(function(){for(var c=!1,d=0;d<k.linkList.length;d++)k.linkList[d].fromPin.node.id==$(this).attr("srcnodeid")&&(k.linkList[d].fromPin.pinname==$(this).attr("srcpinname")&&k.linkList[d].toPin.node.id==$(this).attr("dstnodeid")&&k.linkList[d].toPin.pinname==$(this).attr("dstpinname"))&&(c=k.linkList[d]);if(c){"development"==VVVV_ENV&&console.log("removing "+c.fromPin.pinname+" -> "+c.toPin.pinname);
var d=c.fromPin,e=c.toPin;c.destroy();d.connectionChanged();e.connectionChanged();e.markPinAsChanged()}});$(c).find('link[deleteme!="pronto"]').each(function(){var c=k.pinMap[$(this).attr("srcnodeid")+"_out_"+$(this).attr("srcpinname")],d=k.pinMap[$(this).attr("dstnodeid")+"_in_"+$(this).attr("dstpinname")];void 0==c&&k.nodeMap[$(this).attr("srcnodeid")]&&(c=k.nodeMap[$(this).attr("srcnodeid")].addOutputPin($(this).attr("srcpinname"),void 0));void 0==d&&k.nodeMap[$(this).attr("dstnodeid")]&&(d=k.nodeMap[$(this).attr("dstnodeid")].addInputPin($(this).attr("dstpinname"),
void 0));if(c&&d){for(var e=!1,h=0;h<k.linkList.length;h++)k.linkList[h].fromPin.node.id==c.node.id&&(k.linkList[h].fromPin.pinname==c.pinname&&k.linkList[h].toPin.node.id==d.node.id&&k.linkList[h].toPin.pinname==d.pinname)&&(e=k.linkList[h]);e||(e=new VVVV.Core.Link(c,d),c.connectionChanged(),d.connectionChanged(),k.linkList.push(e),d.connect(c));"complete"==g&&(p[c.node.id+"_"+c.pinname+"-"+d.node.id+"_"+d.pinname]=e)}});"complete"==g&&(_(l).each(function(c,d){if(void 0==p[d]){"development"==VVVV_ENV&&
console.log("removing "+c.fromPin.pinname+" -> "+c.toPin.pinname);var e=c.fromPin,h=c.toPin;c.destroy();e.connectionChanged();h.connectionChanged();h.markPinAsChanged();h.reset_on_disconnect&&h.reset()}}),l={},_(p).each(function(c,d){l[d]=c}))}var f=this;do f.dirty=!0;while(f=f.parentPatch);if(f=/^<!DOCTYPE\s+PATCH\s+SYSTEM\s+"(.+)\\(.+)\.dtd/.exec(c))k.vvvv_version=f[2].replace(/[a-zA-Z]+/,"_");var g="diff";if(/\s<PATCH/.test(c)||"45_26">=k.vvvv_version)g="complete","development"==VVVV_ENV&&console.log("complete: "+
this.nodename);f=$(c).find('bounds[type="Window"]').first();0<f.length&&(k.windowWidth=f.attr("width")/15,k.windowHeight=f.attr("height")/15);"complete"==g&&(q={});$(c).find("node").each(function(){if("pronto"==$(this).attr("createme")&&void 0!=k.nodeMap[$(this).attr("id")]){var f=k.nodeMap[$(this).attr("id")];"development"==VVVV_ENV&&console.log("node renamed, so deleting node "+f.id+" / "+f.nodename);_(f.inputPins).each(function(c){_(c.links).each(function(c){c.destroy();c.fromPin.connectionChanged()})});
_(f.outputPins).each(function(c){_(c.links).each(function(c){c.destroy();c.toPin.connectionChanged();c.toPin.markPinAsChanged()})});k.nodeList.splice(k.nodeList.indexOf(f),1);delete k.nodeMap[f.id]}var l;l="InABox"==$(this).attr("componentmode")?$(this).find('bounds[type="Box"]').first():$(this).find('bounds[type="Node"]').first();var j=void 0!=k.nodeMap[$(this).attr("id")];if(j)f=k.nodeMap[$(this).attr("id")];else{var a=""!=$(this).attr("systemname")?$(this).attr("systemname"):$(this).attr("nodename");
if(void 0==a)return;if(void 0!=VVVV.NodeLibrary[a.toLowerCase()])f=new (VVVV.NodeLibrary[a.toLowerCase()])($(this).attr("id"),k),VVVV.NodeLibrary[a.toLowerCase()].requirements&&(k.resourcesPending++,_(VVVV.NodeLibrary[a.toLowerCase()].requirements).each(function(c){void 0===VVVV.LoadedLibs[c]&&VVVV.loadScript(VVVV.ThirdPartyLibs[c],function(){k.resourcesPending--})}));else if(/.fx$/.test($(this).attr("filename")))f=new VVVV.Nodes.GenericShader($(this).attr("id"),k),f.isShader=!0,f.shaderFile=$(this).attr("filename").replace(/\\/g,
"/").replace(/\.fx$/,".vvvvjs.fx").replace("lib/nodes/",""),f.nodename=a;else if(/.v4p$/.test($(this).attr("filename"))){k.resourcesPending++;var p=this,f=new VVVV.Core.Patch($(this).attr("filename"),function(){k.resourcesPending--;"development"==VVVV_ENV&&console.log(this.nodename+"invoking update links");h(c);k.editor&&k.editor.addPatch(this);if(this.auto_evaluate){var d=k;do d.auto_evaluate=!0;while(d=d.parentPatch)}this.setMainloop(k.mainloop);k.afterUpdate();k.updateEvaluationRecipe();0>=k.resourcesPending&&
e&&(e(),e=void 0)},function(){k.resourcesPending--;this.not_implemented=!0;VVVV.onNotImplemented(a);h(c);k.afterUpdate();k.updateEvaluationRecipe();0>=k.resourcesPending&&e&&(e(),e=void 0)},k,$(p).attr("id"));f.isSubpatch=!0;k.editor&&!f.editor&&k.editor.addPatch(f);k.nodeMap[f.id]=f}else f=new VVVV.Core.Node($(this).attr("id"),a,k),f.not_implemented=!0,"diff"==g&&!0==VVVV.Config.auto_undo&&k.editor.sendUndo(),VVVV.onNotImplemented(a);"development"==VVVV_ENV&&"complete"!=g&&console.log(k.nodename+
": inserted new node "+f.nodename)}if(f.auto_evaluate){p=k;do p.auto_evaluate=!0;while(p=p.parentPatch)}if("pronto"==$(this).attr("deleteme")){"development"==VVVV_ENV&&console.log("removing node "+f.id);if(f.isSubpatch){f.editor&&f.editor.removePatch(f);p=f.getSubPatches();p.push(f);for(var b,n=0;n<p.length;n++)b=VVVV.Helpers.prepareFilePath(p[n].nodename,p[n].parentPatch),VVVV.Patches[b].splice(VVVV.Patches[b].indexOf(f),1),0==VVVV.Patches[b].length&&delete VVVV.Patches[b]}k.nodeList.splice(k.nodeList.indexOf(f),
1);f.destroy();delete k.nodeMap[f.id]}0<l.length&&(l.attr("left")&&(f.x=l.attr("left")/15,f.y=l.attr("top")/15,k.boundingBox.width=Math.max(k.boundingBox.width,f.x+100),k.boundingBox.height=Math.max(k.boundingBox.height,f.y+100)),l.attr("width")&&(f.width=l.attr("width"),f.height=l.attr("height")));/^iobox/.test(f.nodename.toLowerCase())&&(f.isIOBox=!0);j||f.setup();p=this;$(this).find("pin").each(function(){var e=$(this).attr("pinname"),h=d($(this).attr("values"));void 0!=h&&0<h.length&&f.addDefault(e,
h);if(void 0==f.outputPins[e])if(void 0!=f.inputPins[e])f.inputPins[e].isConnected()||f.applyPinValuesFromXML(e);else if(void 0!=f.invisiblePins[e]){if(void 0!=h){for(var l=0;l<h.length;l++)f.invisiblePins[e].values[l]!=h[l]&&f.invisiblePins[e].setValue(l,h[l]);f.invisiblePins[e].setSliceCount(h.length)}}else 1==$(this).attr("visible")&&"Configuration"!=$(this).attr("pintype")||f.isSubpatch?"Output"==$(this).attr("pintype")||0<$(c).find("link[srcnodeid="+f.id+"]").filter("link[srcpinname='"+e.replace(/[\[\]]/,
"")+"']").length?void 0==f.outputPins[e]&&f.addOutputPin(e,h):void 0==f.inputPins[e]&&void 0==f.invisiblePins[e]&&f.addInputPin(e,h):void 0==f.inputPins[e]&&void 0==f.invisiblePins[e]&&f.addInvisiblePin(e,h)});j||(f.initialize(),k.nodeList.push(f));"complete"==g&&(q[f.id]=f)});"complete"==g&&(_(j).each(function(c,d){void 0==q[d]&&("development"==VVVV_ENV&&console.log("removing node "+c.id),k.nodeList.splice(k.nodeList.indexOf(c),1),delete k.nodeMap[c.id])}),j={},_(q).each(function(c,d){j[d]=c}));
0===this.resourcesPending&&h(c);this.updateEvaluationRecipe();0>=this.resourcesPending&&e&&(e(),e=void 0)};this.getSubPatches=function(){for(var c=[],d=0;d<this.nodeList.length;d++)this.nodeList[d].isSubpatch&&(c.push(this.nodeList[d]),c=c.concat(this.nodeList[d].getSubPatches()));return c};this.setMainloop=function(c){this.mainloop=c;for(var d=0;d<this.nodeList.length;d++)this.nodeList[d].isSubpatch&&this.nodeList[d].setMainloop(c)};this.afterEvaluate=function(){};this.afterUpdate=function(){};this.toXML=
function(){var c=$("<PATCH>"),d=$("<BOUNDS>");d.attr("type","Window");d.attr("width",parseInt(15*this.windowWidth));d.attr("height",parseInt(15*this.windowHeight));c.append(d);for(d=0;d<this.nodeList.length;d++)c.append(this.nodeList[d].serialize());for(d=0;d<this.linkList.length;d++)c.append(this.linkList[d].serialize());c='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n  '+c.wrapAll("<d></d>").parent().html();c=c.replace(/<patch/g,"<PATCH");c=c.replace(/<\/patch>/g,"\n  </PATCH>");
c=c.replace(/<node/g,"\n  <NODE");c=c.replace(/<\/node>/g,"\n  </NODE>");c=c.replace(/<bounds/g,"\n  <BOUNDS");c=c.replace(/<\/bounds>/g,"\n  </BOUNDS>");c=c.replace(/<pin/g,"\n  <PIN");c=c.replace(/<\/pin>/g,"\n  </PIN>");c=c.replace(/<lonk/g,"\n  <LINK");return c=c.replace(/<\/lonk>/g,"\n  </LINK>")};this.updateEvaluationRecipe=function(){function c(f){if(0>e.indexOf(f.id)){e.push(f.id);var l=f.getUpstreamNodes();_(l).each(function(e){void 0==d[e.id]&&c(e)});e.pop()}if(0>e.indexOf(f.id)||f.delays_output)h.push(f),
d[f.id]=f}this.evaluationRecipe=[];for(var d={},e=[],h=this.evaluationRecipe,f=0;f<this.nodeList.length;f++)(0==this.nodeList[f].getDownstreamNodes().length||this.nodeList[f].auto_evaluate||this.nodeList[f].delays_output)&&void 0==d[this.nodeList[f].id]&&c(this.nodeList[f])};this.evaluate=function(){if(!(0<this.resourcesPending)){if(h)var c={},d=(new Date).getTime(),e=0;for(var f=0;f<this.evaluationRecipe.length;f++){var l=this.evaluationRecipe[f];h&&console.log(l.nodename);if(l.dirty||l.auto_evaluate||
l.isSubpatch){h&&(d=(new Date).getTime());if(l.auto_nil&&!l.isSubpatch&&l.hasNilInputs())_(l.outputPins).each(function(c){c.setSliceCount(0)});else{try{l.evaluate()}catch(j){console.log("VVVV.Js / Error evaluating "+l.nodename+": "+j.message)}l.dirty=!1;_(l.inputPins).each(function(c){c.changed=!1})}h&&(c[l.nodename]||(c[l.nodename]={count:0,dt:0}),e=(new Date).getTime()-d,c[l.nodename].count++,c[l.nodename].dt+=e,console.log(l.nodename+" / "+l.id+": "+e+"ms"))}}h&&(_(c).each(function(c,d){console.log(c.count+
"x "+d+": "+c.dt+"ms")}),d=(new Date).getTime());this.afterEvaluate();h&&console.log("patch rendering: "+((new Date).getTime()-d)+"ms");h=!1}};$(window).keydown(function(c){84==c.which&&(c.altKey&&c.ctrlKey)&&(h=!0)});if(/\.v4p[^<>\s]*$/.test(a)){this.nodename=a;var n=this,r=a;this.parentPatch&&(r=VVVV.Helpers.prepareFilePath(a,this.parentPatch));VVVV.Patches[r]?n.doLoad(VVVV.Patches[r][0].toXML(),function(){VVVV.Patches[r].push(n);n.success&&n.success();n.afterUpdate()}):$.ajax({url:r,type:"get",
dataType:"text",success:function(c){n.doLoad(c,function(){VVVV.Patches[r]=VVVV.Patches[r]||[];VVVV.Patches[r].push(n);n.success&&n.success();n.afterUpdate()})},error:function(){n.error&&n.error()}})}else this.doLoad(a,function(){this.success&&this.success()});c();$(window).bind("hashchange",function(){c()})}};VVVV.Core.Patch.prototype=new VVVV.Core.Node;VVVV.Core.DOMInterface=function(a){var b={},g={};a.domInterface=this;this.connect=function(e){_(b).each(function(c,d){c.node.id==e.id&&("event"==c.property_class&&$(c.selector).unbind(c.property),delete b[d])});_(g).each(function(c,d){c.node.id==e.id&&delete g[d]});var d=/([^\/]+)(\/(event|attribute|style)\/(.+))?/.exec(e.invisiblePins["Descriptive Name"].getValue(0));if(null!=d){var c={selector:d[1],property_class:d[3],property:d[4],values:[],node:e};0!=$(c.selector).length&&(0==e.getUpstreamNodes().length?
b[d[0]]=c:0==e.getDownstreamNodes().length&&(g[d[0]]=c),"event"==c.property_class&&(d=c.selector,"window"==d&&(d=window),"document"==d&&(d=document),$(d).each(function(d){c.values[d]=0;$(this).bind(c.property,function(){c.values[d]=1;return!1})})))}};var f=this;_(a.nodeList).each(function(e){e.isIOBox&&void 0!=e.invisiblePins["Descriptive Name"]&&(f.connect(e),e.IOBoxInputPin().connectionChanged=function(){f.connect(e)})});this.populateInputConnectors=function(){var e=this;_(b).each(function(d){switch(d.property_class){case "event":d.values.length!=
d.node.IOBoxInputPin().values.length&&d.node.IOBoxInputPin().setSliceCount(d.values.length);for(var c=0;c<d.values.length;c++)(void 0==d.node.IOBoxInputPin().values[c]||d.values[c]!=d.node.IOBoxInputPin().values[c])&&d.node.IOBoxInputPin().setValue(c,d.values[c]);break;default:e.fetchValuesFromDOM(d);d.values.length!=d.node.IOBoxInputPin().values.length&&d.node.IOBoxInputPin().setSliceCount(d.values.length);for(c=0;c<d.values.length;c++)d.node.IOBoxInputPin().getValue(c)!=d.values[c]&&d.node.IOBoxInputPin().setValue(c,
d.values[c])}})};this.processOutputConnectors=function(){var e=this;_(g).each(function(d){switch(d.property_class){default:e.setDOMByIOBox(d)}});_(b).each(function(d){if("event"==d.property_class)for(var c=0;c<d.values.length;c++)d.values[c]=0})};this.fetchValuesFromDOM=function(e){e.values.length=0;$(e.selector).each(function(d){var c;if(void 0==e.property_class)switch(this.nodeName){case "INPUT":"text"==$(this).attr("type")&&(c=$(this).val());"checkbox"==$(this).attr("type")&&(c=$(this).attr("checked")?
1:0);break;default:c=$(this).text()}"attribute"==e.property_class&&(c=$(this).attr(e.property));"style"==e.property_class&&(c=$(this).css(e.property));e.values[d]=c})};this.setDOMByIOBox=function(e){if(e.node.IOBoxOutputPin().pinIsChanged()){var d=e.node.IOBoxInputPin().values,c=$(e.selector).length;void 0==e.property_class&&($(e.selector).empty(),$(e.selector).val(""));for(var h=0;h<Math.max(d.length,c);h++){var f=h%c,g=h%d.length,j=$(e.selector).eq(f);if(0!=j.length){if(void 0==e.property_class)switch(j[0].nodeName){case "INPUT":j.val($(e.selector).eq(f).val()+
d[g]);break;default:j.html($(e.selector).eq(f).html()+d[g])}"attribute"==e.property_class&&j.attr(e.property,d[g]);"style"==e.property_class&&j.css(e.property,d[g])}}}}};VVVV.fps=60;
VVVV.Core.MainLoop=function(a,b){function g(){if(0==a.resourcesPending){f++;var j=(new Date).getTime();c&&(p.deltaT=j-c);c=j;e.populateInputConnectors();a.evaluate();e.processOutputConnectors();j=(new Date).getTime()-c;0==f%10&&(l&&(console.log(1/((c-h)/1E4)+"fps"),l=!1),h=c)}d&&window.setTimeout(g,Math.max(0,Math.round(1E3/VVVV.fps-j)))}VVVV.fps=b||60;var f=0,e=new VVVV.Core.DOMInterface(a),d=!0,c=void 0,h=0,l=!1;this.deltaT=1E3/VVVV.fps;a.setMainloop(this);var p=this;this.stop=function(){d=!1};
this.start=function(){d||(d=!0,g())};this.isRunning=function(){return d};g();$(window).keydown(function(c){if((102==c.which||70==c.which)&&c.altKey&&c.ctrlKey)l=!0})};VVVV.Nodes.Cross2d=function(a,b){this.constructor(a,"Cross (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X In",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y In",[0],VVVV.PinTypes.Value),e=this.addInputPin("Include Upper",[1],VVVV.PinTypes.Value),d=this.addInputPin("Include Lower",[1],VVVV.PinTypes.Value),c=this.addInputPin("Include Equal",[1],VVVV.PinTypes.Value),h=this.addOutputPin("X Out",
[0],VVVV.PinTypes.Value),l=this.addOutputPin("Y Out",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=0,j=0;j<f.getSliceCount();j++)for(var b=0;b<g.getSliceCount();b++)!(0.5>e.getValue(0)&&j>b)&&(!(0.5>d.getValue(0)&&j<b)&&!(0.5>c.getValue(0)&&j==b))&&(h.setValue(a,g.getValue(b)),l.setValue(a,f.getValue(j)),a++);h.setSliceCount(a);l.setSliceCount(a)}};VVVV.Nodes.Cross2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Polar2d=function(a,b){this.constructor(a,"Polar (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[1],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),h=0;h<
c;h++){var l=g.getValue(h),a=f.getValue(h);e.setValue(h,Math.atan2(a,l)/(2*Math.PI));d.setValue(h,Math.sqrt(l*l+a*a))}e.setSliceCount(c);d.setSliceCount(c)}};VVVV.Nodes.Polar2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Cartesian2d=function(a,b){this.constructor(a,"Cartesian (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),f=this.addInputPin("Length",[1],VVVV.PinTypes.Value),e=this.addOutputPin("X",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),h=0;h<c;h++){var l=g.getValue(h),
a=f.getValue(h);e.setValue(h,a*Math.cos(2*l*Math.PI));d.setValue(h,a*Math.sin(2*l*Math.PI))}e.setSliceCount(c);d.setSliceCount(c)}};VVVV.Nodes.Cartesian2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Points2Vector2d=function(a,b){this.constructor(a,"Points2Vector (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X1",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y1",[0],VVVV.PinTypes.Value),e=this.addInputPin("X2",[1],VVVV.PinTypes.Value),d=this.addInputPin("Y2",[0],VVVV.PinTypes.Value),c=this.addOutputPin("X",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),
l=this.addOutputPin("Length",[1],VVVV.PinTypes.Value),p=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var j=this.getMaxInputSliceCount(),a=0;a<j;a++){var k=parseFloat(g.getValue(a)),b=parseFloat(f.getValue(a)),r=parseFloat(e.getValue(a)),u=parseFloat(d.getValue(a)),r=r-k,u=u-b;c.setValue(a,k+r/2);h.setValue(a,b+u/2);l.setValue(a,Math.sqrt(r*r+u*u));p.setValue(a,Math.atan2(u,r)/(2*Math.PI))}c.setSliceCount(j);h.setSliceCount(j);l.setSliceCount(j);p.setSliceCount(j)}};
VVVV.Nodes.Points2Vector2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Vector2Points2d=function(a,b){this.constructor(a,"Vector2Points (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addInputPin("Length",[1],VVVV.PinTypes.Value),d=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),c=this.addOutputPin("X1",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y1",[0],VVVV.PinTypes.Value),
l=this.addOutputPin("X2",[0],VVVV.PinTypes.Value),p=this.addOutputPin("Y2",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var j=this.getMaxInputSliceCount(),a=0;a<j;a++){var k=parseFloat(g.getValue(a)),b=parseFloat(f.getValue(a)),r=parseFloat(e.getValue(a)),u=2*parseFloat(d.getValue(a)-0.25)*Math.PI,s=r/2*Math.sin(u),r=-r/2*Math.cos(u);c.setValue(a,k+s);h.setValue(a,b+r);l.setValue(a,k-s);p.setValue(a,b-r)}c.setSliceCount(j);h.setSliceCount(j);l.setSliceCount(j);p.setSliceCount(j)}};
VVVV.Nodes.Vector2Points2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Attractor2d=function(a,b){this.constructor(a,"Attractor (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addInputPin("Attractor X",[0],VVVV.PinTypes.Value),d=this.addInputPin("Attractor Y",[0],VVVV.PinTypes.Value),c=this.addInputPin("Attractor Strength",[1],VVVV.PinTypes.Value),h=this.addInputPin("Attractor Power",
[1],VVVV.PinTypes.Value),l=this.addInputPin("Attractor Radius",[0.1],VVVV.PinTypes.Value),p=this.addOutputPin("Output X",[0],VVVV.PinTypes.Value),j=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=Math.max(g.getSliceCount(),f.getSliceCount()),k=Math.max(e.getSliceCount(),d.getSliceCount()),b,r,u,s,w,m,t=0;t<a;t++){b=parseFloat(g.getValue(t));r=parseFloat(f.getValue(t));for(var y=0;y<k;y++)if(u=parseFloat(e.getValue(y)),s=parseFloat(d.getValue(y)),attractorstrength=
parseFloat(c.getValue(y)),w=parseFloat(h.getValue(y)),m=parseFloat(l.getValue(y)),u=b-u,s=r-s,0!=u||0!=s){var v=Math.sqrt(Math.pow(u,2)+Math.pow(s,2)),z=0;v<=m&&(m=v/m,z=attractorstrength*(Math.pow(m,w)*(0>m?-1:0<m?1:0)/m-1));b+=u*z;r+=s*z}p.setValue(t,b);j.setValue(t,r)}p.setSliceCount(a);j.setSliceCount(a)}};VVVV.Nodes.Attractor2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.ConnectAll2d=function(a,b){this.constructor(a,"ConnectAll (2d)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X In",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y In",[0],VVVV.PinTypes.Value),e=this.addOutputPin("X1 Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Y1 Out",[0],VVVV.PinTypes.Value),c=this.addOutputPin("X2 Out",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y2 Out",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var l=this.getMaxInputSliceCount(),a=0,j=0;j<l;j++)for(var b=j+1;b<l;b++)e.setValue(a,g.getValue(j)),d.setValue(a,f.getValue(j)),c.setValue(a,g.getValue(b)),h.setValue(a,f.getValue(b)),a++;e.setSliceCount(a);d.setSliceCount(a);c.setSliceCount(a);h.setSliceCount(a)}};VVVV.Nodes.ConnectAll2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Polar3d=function(a,b){this.constructor(a,"Polar (3d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addInputPin("Z",[-1],VVVV.PinTypes.Value),d=this.addOutputPin("Pitch",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Yaw",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);
this.evaluate=function(){for(var l=this.getMaxInputSliceCount(),a=0;a<l;a++){var j=g.getValue(a),b=f.getValue(a),k=e.getValue(a),n=Math.sqrt(j*j+b*b+k*k);c.setValue(a,Math.atan2(-j,-k)/(2*Math.PI));d.setValue(a,0==n?0:Math.acos(-b/n)/(2*Math.PI)-0.25);h.setValue(a,n)}c.setSliceCount(l);d.setSliceCount(l);h.setSliceCount(l)}};VVVV.Nodes.Polar3d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Cartesian3d=function(a,b){this.constructor(a,"Cartesian (3d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Pitch",[0],VVVV.PinTypes.Value),f=this.addInputPin("Yaw",[0],VVVV.PinTypes.Value),e=this.addInputPin("Length",[1],VVVV.PinTypes.Value),d=this.addOutputPin("X",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Z",[1],VVVV.PinTypes.Value);
this.evaluate=function(){for(var l=this.getMaxInputSliceCount(),a=0;a<l;a++){var j=2*(g.getValue(a)+0.25)*Math.PI,b=2*f.getValue(a)*Math.PI,k=e.getValue(a);h.setValue(a,-k*Math.cos(b)*Math.sin(j));d.setValue(a,-k*Math.sin(b)*Math.sin(j));c.setValue(a,-k*Math.cos(j))}d.setSliceCount(l);c.setSliceCount(l);h.setSliceCount(l)}};VVVV.Nodes.Cartesian3d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Normalize3d=function(a,b){this.constructor(a,"Normalize (3d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[1],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addInputPin("Z",[0],VVVV.PinTypes.Value),d=this.addOutputPin("NormalizedX",[1],VVVV.PinTypes.Value),c=this.addOutputPin("NormalizedY",[0],VVVV.PinTypes.Value),h=this.addOutputPin("NormalizedZ",
[0],VVVV.PinTypes.Value),l=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),j=0;j<a;j++){var b=g.getValue(j),k=f.getValue(j),n=e.getValue(j),r=Math.sqrt(b*b+k*k+n*n);d.setValue(j,0==r?0:b/r);c.setValue(j,0==r?0:k/r);h.setValue(j,0==r?0:n/r);l.setValue(j,r)}d.setSliceCount(a);c.setSliceCount(a);h.setSliceCount(a);l.setSliceCount(a)}};VVVV.Nodes.Normalize3d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Normalize3dVector=function(a,b){this.constructor(a,"Normalize (3d Vector)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("XYZ",[],VVVV.PinTypes.Value),f=this.addOutputPin("NormalizedXYZ",[],VVVV.PinTypes.Value),e=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d/3;c++){var h=g.getValue(c,3),l=Math.sqrt(h[0]*
h[0]+h[1]*h[1]+h[2]*h[2]);f.setValue(3*c,0==l?0:h[0]/l);f.setValue(3*c+1,0==l?0:h[1]/l);f.setValue(3*c+2,0==l?0:h[2]/l);e.setValue(c,l)}f.setSliceCount(3*Math.ceil(d/3));e.setSliceCount(Math.ceil(d/3))}};VVVV.Nodes.Normalize3dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Multiply3dCross=function(a,b){this.constructor(a,"Multiply (3d Cross)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),f=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),e=this.addOutputPin("Output XYZ",[],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d/3;c++){var h=g.getValue(c,3),l=f.getValue(c,
3);e.setValue(3*c+0,h[1]*l[2]-h[2]*l[1]);e.setValue(3*c+1,-(h[0]*l[2]-h[2]*l[0]));e.setValue(3*c+2,h[0]*l[1]-h[1]*l[0])}e.setSliceCount(3*Math.ceil(d/3))}};VVVV.Nodes.Multiply3dCross.prototype=new VVVV.Core.Node;
VVVV.Nodes.Multiply3dDot=function(a,b){this.constructor(a,"Multiply (3d Dot)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),f=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d/3;c++){var h=g.getValue(c,3),l=f.getValue(c,3);e.setValue(c,
h[0]*l[0]+h[1]*l[1]+h[2]*l[2])}e.setSliceCount(Math.ceil(d/3))}};VVVV.Nodes.Multiply3dDot.prototype=new VVVV.Core.Node;
VVVV.Nodes.Multiply3dVector=function(a,b){this.constructor(a,"Multiply (3d Vector)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),f=this.addInputPin("XYZ UnTransformed",[0,0,0],VVVV.PinTypes.Value),e=this.addOutputPin("XYZ Transformed",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=Math.max(g.getSliceCount(),f.getSliceCount()/3),c=0;c<
d;c++){var h=f.getValue(3*c,3),l=g.getValue(c);mat4.multiplyVec3(l,h);e.setValue(3*c+0,h[0]);e.setValue(3*c+1,h[1]);e.setValue(3*c+2,h[2])}e.setSliceCount(Math.ceil(3*d))}};VVVV.Nodes.Multiply3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.LFO=function(a,b){this.constructor(a,"LFO (Animation)",b);this.meta={authors:["Matthias Zauner, sebl, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable yet"]};this.auto_evaluate=!0;var g=this.addInputPin("Period",[1],VVVV.PinTypes.Value),f=this.addInputPin("Pause",[0],VVVV.PinTypes.Value),e=this.addInputPin("Reverse",[0],VVVV.PinTypes.Value),d=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),c=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Output",
[0],VVVV.PinTypes.Value),l=this.addOutputPin("Change",[0],VVVV.PinTypes.Value),p=this.addOutputPin("Cycles",[0],VVVV.PinTypes.Value),j=[],q=[],k=(new Date).getTime(),n=(new Date).getTime();this.evaluate=function(){var a=this.getMaxInputSliceCount();k=(new Date).getTime()-n;for(var b=0;b<a;b++){var s=g.getValue(b%g.values.length),w=f.getValue(b%f.values.length),m=e.getValue(b%e.values.length),t=d.getValue(b%d.values.length),y=c.getValue(b%c.values.length),v=0;void 0==j[b]&&(j[b]=0);void 0==q[b]&&(q[b]=
0);0.5>w&&(0!=s&&isFinite(s))&&(dv=1/(1E3*s)*k,0<m&&(dv*=-1),j[b]+=dv,0>j[b]&&(q[b]-=Math.ceil(-j[b]),j[b]=1+j[b],v=1),1<j[b]&&(q[b]+=Math.floor(j[b]),v=1));n=(new Date).getTime();0.5<=t&&(j[b]=0,q[b]=0,v=1);if(0.5>w||0.5<=t)h.setValue(b,(j[b]+y)%1),l.setValue(b,v),p.setValue(b,q[b]);j[b]%=1}h.setSliceCount(a);l.setSliceCount(a);p.setSliceCount(a);j.splice(a);q.splice(a)}};VVVV.Nodes.LFO.prototype=new VVVV.Core.Node;
VVVV.Nodes.LinearFilter=function(a,b){this.constructor(a,"LinearFilter (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var g=this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),f=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),e=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);
this.addOutputPin("Acceleration Out",[0],VVVV.PinTypes.Value);var c=[],h=[],l=[],p=[],j=[],q=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=g.pinIsChanged()||f.pinIsChanged(),r=0;r<a;r++){void 0==c[r]&&(c[r]=(new Date).getTime());var u=this.parentPatch.mainloop.deltaT,s=parseFloat(g.getValue(r)),w=parseFloat(f.getValue(r));void 0==p[r]&&(p[r]=s);if(s!=h[r]||w!=l[r])q[r]=void 0,h[r]=s,l[r]=w,j[r]=0<l[r]?(h[r]-p[r])/(1E3*l[r]):0;p[r]=Math.abs(j[r]*u)>Math.abs(h[r]-p[r])?h[r]:p[r]+
j[r]*u;0!=q[r]&&(e.setValue(r,p[r]),d.setValue(r,j[r]));q[r]=h[r]-p[r];c[r]=(new Date).getTime()}b&&e.getSliceCount()!=a&&(h.splice(a),l.splice(a),c.splice(a),p.splice(a),j.splice(a),q.splice(a),e.setSliceCount(a))}};VVVV.Nodes.LinearFilter.prototype=new VVVV.Core.Node;
VVVV.Nodes.Damper=function(a,b){this.constructor(a,"Damper (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var g=this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),f=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),e=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);
this.addOutputPin("Acceleration Out",[0],VVVV.PinTypes.Value);var c=[],h=[],l=[],p=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=g.pinIsChanged()||f.pinIsChanged(),k=0;k<a;k++){void 0==c[k]&&(c[k]=(new Date).getTime());var n=this.parentPatch.mainloop.deltaT,r=parseFloat(g.getValue(k)),u=parseFloat(f.getValue(k));void 0==h[k]&&(h[k]=r);l[k]=0<u?(r-h[k])/(1E3*u):0;h[k]=Math.abs(l[k]*n)>Math.abs(r-h[k])?r:h[k]+l[k]*n;0!=p[k]&&(e.setValue(k,h[k]),d.setValue(k,l[k]));p[k]=r-h[k];
c[k]=(new Date).getTime()}b&&e.getSliceCount()!=a&&(c.splice(a),h.splice(a),l.splice(a),p.splice(a),e.setSliceCount(a))}};VVVV.Nodes.Damper.prototype=new VVVV.Core.Node;
VVVV.Nodes.Delay=function(a,b){this.constructor(a,"Delay (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Reset not implemented","Linear Mode not implemented"]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Time",[1],VVVV.PinTypes.Value),e=this.addInputPin("Insert",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),c=[],h=Array(1024);this.evaluate=
function(){var l=this.getMaxInputSliceCount();now=(new Date).getTime();var a=g.pinIsChanged();if(void 0==g.getValue(0))a&&d.setValue(0,void 0);else{if(1==e.getValue(0)&&(a||f.pinIsChanged())){h.pop();h.unshift(now);for(a=0;a<l;a++){if(void 0==c[a]){c[a]=Array(1024);for(var j=1024;j--;)c[a][j]=0}1024<=c[a].length&&c[a].pop();c[a].unshift(g.getValue(a))}}for(a=0;a<l;a++){for(var b=now-1E3*f.getValue(a),k=!1,j=0;1024>j;j++)if(h[j]<=b){d.values[a]!=c[a][j]&&d.setValue(a,c[a][j]);k=!0;break}!k&&0!=d.values[a]&&
d.setValue(a,0)}d.setSliceCount(l);c.splice(l)}}};VVVV.Nodes.Delay.prototype=new VVVV.Core.Node;
VVVV.Nodes.Change=function(a,b){this.constructor(a,"Change (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addOutputPin("OnChange",[0],VVVV.PinTypes.Value),e=[];this.evaluate=function(){var d=this.getMaxInputSliceCount();if(g.pinIsChanged()){for(var c=0;c<d;c++)e[c]!=g.getValue(c)?f.setValue(c,1):1==f.getValue(c)&&f.setValue(c,0),e[c]=g.getValue(c);
f.setSliceCount(d)}else{for(c=0;c<d;c++)1==f.getValue(c)&&(f.setValue(c,0),f.setSliceCount(d));e[c]=g.getValue(c)}}};VVVV.Nodes.Change.prototype=new VVVV.Core.Node;
VVVV.Nodes.TogEdge=function(a,b){this.constructor(a,"TogEdge (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Up Edge",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Down Edge",[0],VVVV.PinTypes.Value),d=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),h=0;h<c;h++)(0>=Math.round(d[h])||void 0==d[h])&&1<=Math.round(g.getValue(h))?
f.setValue(h,1):0!=f.values[h]&&f.setValue(h,0),1<=Math.round(d[h])&&0>=Math.round(g.getValue(h))?e.setValue(h,1):0!=e.values[h]&&e.setValue(h,0),d[h]=g.getValue(h);f.setSliceCount(c);e.setSliceCount(c)}};VVVV.Nodes.TogEdge.prototype=new VVVV.Core.Node;
VVVV.Nodes.FlipFlop=function(a,b){this.constructor(a,"FlipFlop (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Set",[0],VVVV.PinTypes.Value),f=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),c=!1;this.evaluate=function(){var h=this.getMaxInputSliceCount(),l=e.getSliceCount();if(h>l)for(;l<
h;l++)e.setValue(l,0),d.setValue(l,1);for(l=0;l<h;l++){var a=void 0;1<=Math.round(f.getValue(l))&&(a=0);1<=Math.round(g.getValue(l))&&(a=1);void 0!=a?(e.setValue(l,a),d.setValue(l,1-a)):c||(e.setValue(l,0),d.setValue(l,1))}e.setSliceCount(h);d.setSliceCount(h);c=!0}};VVVV.Nodes.FlipFlop.prototype=new VVVV.Core.Node;
VVVV.Nodes.MonoFlop=function(a,b){this.constructor(a,"MonoFlop (Animation)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Set",[0],VVVV.PinTypes.Value),f=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),e=this.addInputPin("Time",[0],VVVV.PinTypes.Value),d=this.addInputPin("Retriggerable",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Inverse Output",
[1],VVVV.PinTypes.Value),l=[];this.evaluate=function(){var a=this.getMaxInputSliceCount(),j=c.getSliceCount();if(a>j)for(;j<a;j++)c.setValue(j,0),h.setValue(j,1);for(j=0;j<a;j++)if(void 0==l[j]&&(l[j]=0),void 0==c.getValue(j)&&c.setValue(j,0),1==c.getValue(j)){if(l[j]+=this.parentPatch.mainloop.deltaT/1E3,1==g.getValue(j)&&1==d.getValue(j)&&(l[j]=0),l[j]>=parseFloat(e.getValue(j))||1==f.getValue(j))l[j]=0,c.setValue(j,0),h.setValue(j,1)}else 1==g.getValue(j)&&(c.setValue(j,1),h.setValue(j,0));c.setSliceCount(a);
h.setSliceCount(a);l.splice(a)}};VVVV.Nodes.MonoFlop.prototype=new VVVV.Core.Node;
VVVV.Nodes.SampleAndHold=function(a,b){this.constructor(a,"S+H (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["different output slice count in pure VVVV, if Set pin has only one slice"]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Set",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(f.pinIsChanged()||
g.pinIsChanged()){for(var c=0;c<d;c++)void 0==e.values[c]&&e.setValue(c,0),1<=Math.round(f.getValue(c))&&e.setValue(c,g.getValue(c));e.setSliceCount(d)}}};VVVV.Nodes.SampleAndHold.prototype=new VVVV.Core.Node;
VVVV.Nodes.FrameDelay=function(a,b){this.constructor(a,"FrameDelay (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["no dynamice pin count"]};this.auto_evaluate=this.delays_output=!0;var g=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),f=this.addInputPin("Default 1",[0],VVVV.PinTypes.Value),e=this.addInputPin("Initialize",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output 1",[0],VVVV.PinTypes.Value),c=[];this.evaluate=function(){for(var h=
this.getMaxInputSliceCount(),a=0;a<h;a++)0.5<e.getValue(a)||void 0==c[a]?d.setValue(a,f.getValue(a)):d.setValue(a,c[a]);for(a=0;a<h;a++)c[a]=g.getValue(a);d.setSliceCount(h)}};VVVV.Nodes.FrameDelay.prototype=new VVVV.Core.Node;
VVVV.Nodes.Toggle=function(a,b){this.constructor(a,"Toggle (Animation)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),c=!1;this.evaluate=function(){var h=this.getMaxInputSliceCount(),
a=e.getSliceCount();if(h>a)for(;a<h;a++)e.setValue(a,0),d.setValue(a,1);for(a=0;a<h;a++){var b=void 0;1<=Math.round(f.getValue(a))&&(b=0);1<=Math.round(g.getValue(a))&&(b=1-parseFloat(e.getValue(a)));void 0!=b&&e.getValue(a)!=b?(e.setValue(a,b),d.setValue(a,1-b)):c||(e.setValue(a,0),d.setValue(a,1))}e.setSliceCount(h);d.setSliceCount(h);c=!0}};VVVV.Nodes.Toggle.prototype=new VVVV.Core.Node;
VVVV.Nodes.Counter=function(a,b){this.constructor(a,"Counter (Animation)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Up",[0],VVVV.PinTypes.Value),f=this.addInputPin("Down",[0],VVVV.PinTypes.Value),e=this.addInputPin("Minimum",[0],VVVV.PinTypes.Value),d=this.addInputPin("Maximum",[15],VVVV.PinTypes.Value),c=this.addInputPin("Increment",[1],VVVV.PinTypes.Value),
h=this.addInputPin("Default",[0],VVVV.PinTypes.Value),l=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),p=this.addInputPin("Mode",["Wrap"],VVVV.PinTypes.Enum);p.enumOptions=["Wrap","Unlimited","Clamp"];var j=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),q=this.addOutputPin("Underflow",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Overflow",[0],VVVV.PinTypes.Value),n=!1;this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=e.pinIsChanged()||d.pinIsChanged()||h.pinIsChanged()||l.pinIsChanged()||
p.pinIsChanged(),s=0;s<a;s++)(1==k.getValue(s)||!n)&&k.setValue(s,0),(1==q.getValue(s)||!n)&&q.setValue(s,0),n||j.setValue(s,0),b=b||0.5<=g.getValue(s)||0.5<=f.getValue(s);if(b){for(s=0;s<a;s++){var b=parseFloat(c.getValue(s)),w=s>=j.getSliceCount()?0:parseFloat(j.getValue(s)),m=parseFloat(d.getValue(s)),t=parseFloat(e.getValue(s)),y=0;"Unlimited"==p.getValue(s)&&(y=1);"Clamp"==p.getValue(s)&&(y=2);switch(y){case 1:0.5<=g.getValue(s)&&(w+=b);0.5<=f.getValue(s)&&(w-=b);break;case 2:0.5<=g.getValue(s)&&
(w+=b);0.5<=f.getValue(s)&&(w-=b);w>m&&(w=m,k.setValue(s,1));w<t&&(w=t,q.setValue(s,1));break;default:0.5<=g.getValue(s)&&(w+=b),0.5<=f.getValue(s)&&(w-=b),w>m&&(w=t,k.setValue(s,1)),w<t&&(w=m,q.setValue(s,1))}j.getValue(s)!=w&&j.setValue(s,w);0.5<=l.getValue(s)&&j.setValue(s,h.getValue(s))}j.setSliceCount(a);q.setSliceCount(a);k.setSliceCount(a)}n=!0}};VVVV.Nodes.Counter.prototype=new VVVV.Core.Node;VVVV.Nodes.CurrentTimeAstronomy=function(a,b){this.constructor(a,"CurrentTime (Astronomy)",b);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:["http://javascript.about.com/library/bldst.htm"],compatibility_issues:["Time Zone index differs from classic VVVV","Time Zone Name does not work in Firefox"]};this.auto_evaluate=!0;var g=new Date,f=this.addOutputPin("GMT",[],VVVV.PinTypes.Value),e=this.addOutputPin("Time Zone",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Time Zone Name",
[""],VVVV.PinTypes.String);this.addOutputPin("Daylight Saving Time",[g.getTimezoneOffset()<function(c){var d=new Date(c.getFullYear(),0,1);c=new Date(c.getFullYear(),6,1);return Math.max(d.getTimezoneOffset(),c.getTimezoneOffset())}(g)?1:0],VVVV.PinTypes.Value);var c=this.addOutputPin("Current Time",[],VVVV.PinTypes.Value);this.evaluate=function(){var h=new Date,a=36E5*h.getTimezoneOffset(),b=h.getTime();f.setValue(0,b/1E3/60/60/24+25569);e.setValue(0,a/1E3/60/60);h.toString().match(/\((.+)\)$/)?
d.setValue(0,h.toString().match(/\((.+)\)$/)[1]):d.setValue(0,"n/a");c.setValue(0,(b-a)/1E3/60/60/24+25569)}};VVVV.Nodes.CurrentTimeAstronomy.prototype=new VVVV.Core.Node;
VVVV.Nodes.GregorianAstronomySplit=function(a,b){this.constructor(a,"Gregorian (Astronomy Split)",b);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Time",[41491.4301],VVVV.PinTypes.Value),f=this.addOutputPin("Millisecond",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Second",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Minute",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Hour",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("DayOfWeek",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Day",[1],VVVV.PinTypes.Value),p=this.addOutputPin("Month",[1],VVVV.PinTypes.Value),j=this.addOutputPin("Year",[2E3],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++){var n=864E5*(g.getValue(b)-25569),n=new Date(n);x=n.getMilliseconds();x!=f.values[b]&&f.setValue(b,x);x=n.getSeconds();x!=e.values[b]&&e.setValue(b,x);x=n.getMinutes();x!=d.values[b]&&d.setValue(b,x);x=n.getHours();
x!=c.values[b]&&c.setValue(b,x);x=n.getDay();x!=h.values[b]&&h.setValue(b,x);x=n.getDate();x!=l.values[b]&&l.setValue(b,x);x=n.getMonth()+1;x!=p.values[b]&&p.setValue(b,x);x=n.getYear()+1900;x!=j.values[b]&&j.setValue(b,x)}f.setSliceCount(a);e.setSliceCount(a);d.setSliceCount(a);c.setSliceCount(a);h.setSliceCount(a);l.setSliceCount(a);p.setSliceCount(a);j.setSliceCount(a)}};VVVV.Nodes.GregorianAstronomySplit.prototype=new VVVV.Core.Node;VVVV.Nodes.And=function(a,b){this.constructor(a,"AND (Boolean)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],e=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,f,d,function(c){return this.addInputPin("Input "+(c+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){g.pinIsChanged()&&
this.initialize();for(var d=this.getMaxInputSliceCount(),c=f.length,h,a=0;a<d;a++){h=!0;for(var b=0;b<c;b++)h=h&&0.5<=f[b].getValue(a);e.setValue(a,h?1:0)}e.setSliceCount(d)}};VVVV.Nodes.And.prototype=new VVVV.Core.Node;
VVVV.Nodes.Or=function(a,b){this.constructor(a,"OR (Boolean)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],e=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,f,d,function(c){return this.addInputPin("Input "+(c+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){g.pinIsChanged()&&
this.initialize();for(var d=this.getMaxInputSliceCount(),c=f.length,h,a=0;a<d;a++){h=!1;for(var b=0;b<c;b++)h=h||0.5<=f[b].getValue(a);e.setValue(a,h?1:0)}e.setSliceCount(d)}};VVVV.Nodes.Or.prototype=new VVVV.Core.Node;
VVVV.Nodes.Not=function(a,b){this.constructor(a,"NOT (Boolean)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[1],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++)f.setValue(d,1-Math.round(parseFloat(g.getValue(d))));f.setSliceCount(this.getMaxInputSliceCount())}};VVVV.Nodes.Not.prototype=new VVVV.Core.Node;
VVVV.Nodes.OrSpectral=function(a,b){this.constructor(a,"OR (Boolean Spectral)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0,h=0,a=!1,b=0;b<d||0<f.getValue(0)&&(0<h||0!=c%f.values.length);b++)0==h&&(a=!1),
a=a||0.5<=g.getValue(b),h++,0<f.getValue(0)?h>=f.getValue(c)&&(e.setValue(c,a?1:0),c++,h=0):e.setValue(0,a?1:0);e.setSliceCount(c+(0<h))}};VVVV.Nodes.OrSpectral.prototype=new VVVV.Core.Node;
VVVV.Nodes.AndSpectral=function(a,b){this.constructor(a,"AND (Boolean Spectral)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0,h=0,a=!1,b=0;b<d||0<f.getValue(0)&&(0<h||0!=c%f.values.length);b++)0==h&&(a=
!0),a=a&&0.5<=g.getValue(b),h++,0<f.getValue(0)?h>=f.getValue(c)&&(e.setValue(c,a?1:0),c++,h=0):e.setValue(0,a?1:0);e.setSliceCount(c+(0<h))}};VVVV.Nodes.AndSpectral.prototype=new VVVV.Core.Node;VVVV.Types.CanvasTexture={imageObject:void 0,loaded:!1};
VVVV.Types.CanvasRenderState=function(){this.fillColor=[1,1,1,1];this.strokeColor=[0,0,0,0];this.lineWidth=1;this.capStyle="butt";this.joinStyle="miter";this.gradient={type:"none"};this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0;this.shadowColor=[0,0,0,1];this.blendMode="source-over";this.copy_attributes=function(a){this.fillColor=a.fillColor;this.strokeColor=a.strokeColor;this.lineWidth=a.lineWidth;this.capStyle=a.capStyle;this.joinStyle=a.joinStyle;this.gradient=a.gradient;this.shadowOffsetX=
a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.blendMode=a.blendMode};this.apply=function(a){if("none"!=this.gradient.type){if("linear"==this.gradient.type)var b=a.createLinearGradient(this.gradient.startX,this.gradient.startY,this.gradient.endX,this.gradient.endY);for(var g=Math.max(this.gradient.colors.length,this.gradient.colorPositions.length),f=0;f<g;f++){var e=this.gradient.colors[f];b.addColorStop(this.gradient.colorPositions[f],
"rgba("+parseInt(255*e[0])+","+parseInt(255*e[1])+","+parseInt(255*e[2])+","+e[3]+")")}a.fillStyle=b}else a.fillStyle="rgba("+parseInt(255*this.fillColor[0])+","+parseInt(255*this.fillColor[1])+","+parseInt(255*this.fillColor[2])+","+this.fillColor[3]+")";a.strokeStyle="rgba("+parseInt(255*this.strokeColor[0])+","+parseInt(255*this.strokeColor[1])+","+parseInt(255*this.strokeColor[2])+","+this.strokeColor[3]+")";a.lineWidth=this.lineWidth/a.canvas.height;a.lineCap=this.capStyle;a.lineJoin=this.joinStyle;
a.shadowOffsetX=this.shadowOffsetX;a.shadowOffsetY=this.shadowOffsetY;a.shadowBlur=this.shadowBlur;a.shadowColor="rgba("+parseInt(255*this.shadowColor[0])+","+parseInt(255*this.shadowColor[1])+","+parseInt(255*this.shadowColor[2])+","+this.shadowColor[3]+")";a.globalCompositeOperation=this.blendMode}};var defaultRenderState=new VVVV.Types.CanvasRenderState,invisibleRenderState=new VVVV.Types.CanvasRenderState;invisibleRenderState.fillColor=[0,0,0,0];
VVVV.PinTypes.CanvasRenderState={typeName:"CanvasRenderState",reset_on_disconnect:!0,defaultValue:function(){return defaultRenderState}};var defaultCanvasLayer=function(){this.draw=function(){}};VVVV.PinTypes.CanvasLayer={typeName:"CanvasLayer",reset_on_disconnect:!0,defaultValue:defaultCanvasLayer};
VVVV.Nodes.FillCanvas=function(a,b){this.constructor(a,"Fill (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color),e=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),d=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),h=0;h<c;h++)void 0==d[h]&&
(d[h]=new VVVV.Types.CanvasRenderState),d[h].copy_attributes(g.getValue(h)),d[h].fillColor=f.getValue(h).split(","),e.setValue(h,d[h]);e.setSliceCount(c)}};VVVV.Nodes.FillCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.StrokeCanvas=function(a,b){this.constructor(a,"Stroke (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color),e=this.addInputPin("Width",[1],VVVV.PinTypes.Value),d=this.addInputPin("Cap Style",["butt"],VVVV.PinTypes.Enum);d.enumOptions=["butt","round","square"];var c=this.addInputPin("Join Style",
["miter"],VVVV.PinTypes.Enum);c.enumOptions=["miter","round","bevel"];var h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),l=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==l[b]&&(l[b]=new VVVV.Types.CanvasRenderState),l[b].copy_attributes(g.getValue(b)),l[b].strokeColor=f.getValue(b).split(","),l[b].lineWidth=e.getValue(b),l[b].capStyle=d.getValue(b),l[b].joinStyle=c.getValue(b),h.setValue(b,l[b]);h.setSliceCount(a)}};
VVVV.Nodes.StrokeCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.ShadowCanvas=function(a,b){this.constructor(a,"Shadow (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Color",["0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color),e=this.addInputPin("Offset X",[0],VVVV.PinTypes.Value),d=this.addInputPin("Offset Y",[0],VVVV.PinTypes.Value),c=this.addInputPin("Blur",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),l=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==l[b]&&(l[b]=new VVVV.Types.CanvasRenderState),l[b].copy_attributes(g.getValue(b)),l[b].shadowOffsetX=e.getValue(b),l[b].shadowOffsetY=d.getValue(b),l[b].shadowBlur=c.getValue(b),l[b].shadowColor=f.getValue(b).split(","),h.setValue(b,l[b]);h.setSliceCount(a)}};VVVV.Nodes.ShadowCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.BlendCanvas=function(a,b){this.constructor(a,"Blend (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Mode",["source-over"],VVVV.PinTypes.Enum);f.enumOptions="source-over source-out source-in source-atop destination-over destination-out destination-in destination-atop copy lighter xor".split(" ");var e=this.addOutputPin("Render State Out",
[],VVVV.PinTypes.CanvasRenderState),d=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),h=0;h<c;h++)void 0==d[h]&&(d[h]=new VVVV.Types.CanvasRenderState),d[h].copy_attributes(g.getValue(h)),d[h].blendMode=f.getValue(h),e.setValue(h,d[h]);e.setSliceCount(c)}};VVVV.Nodes.BlendCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.LinearGradientCanvas=function(a,b){this.constructor(a,"LinearGradient (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Start X",[0],VVVV.PinTypes.Value),e=this.addInputPin("Start Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("End X",[0],VVVV.PinTypes.Value),c=this.addInputPin("End Y",[0],VVVV.PinTypes.Value),h=this.addInputPin("Colors",
["1.0, 1.0, 1.0, 1.0","0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color),l=this.addInputPin("Color Positions",[0,1],VVVV.PinTypes.Value),p=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),j=[];this.evaluate=function(){for(var a=Math.max(g.values.length,f.values.length),a=Math.max(a,e.values.length),a=Math.max(a,d.values.length),a=Math.max(a,c.values.length),b=0;b<a;b++){void 0==j[b]&&(j[b]=new VVVV.Types.CanvasRenderState);j[b].copy_attributes(g.getValue(b));j[b].gradient={type:"linear"};
j[b].gradient.startX=f.getValue(b);j[b].gradient.startY=e.getValue(b);j[b].gradient.endX=d.getValue(b);j[b].gradient.endY=c.getValue(b);j[b].gradient.colors=[];j[b].gradient.colorPositions=[];for(var n=Math.max(h.values.length,l.values.length),r=0;r<n;r++)j[b].gradient.colors.push(h.getValue(r).split(",")),j[b].gradient.colorPositions.push(l.getValue(r));p.setValue(b,j[b])}p.setSliceCount(a)}};VVVV.Nodes.LinearGradientCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.ArcCanvas=function(a,b){this.constructor(a,"Arc (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),e=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),d=this.addInputPin("Radius",[1],VVVV.PinTypes.Value),c=this.addInputPin("Start Angle",[0],VVVV.PinTypes.Value),h=this.addInputPin("End Angle",
[0.5],VVVV.PinTypes.Value),l=this.addInputPin("Draw Segment",[0],VVVV.PinTypes.Value),p=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),j=[],q=function(){this.transform=mat4.create();mat4.identity(this.transform);this.startAngle=0;this.endAngle=0.5;this.strokeColor=[1,1,1,1];this.lineWidth=1;this.renderState=defaultRenderState;this.clippingLayer=void 0;this.drawSegment=!1;this.draw=function(c,d){c.save();this.clippingLayer&&(this.clippingLayer.draw(c,!0),c.clip());c.save();this.transform&&
c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);c.beginPath();d?invisibleRenderState.apply(c):this.renderState.apply(c);this.drawSegment&&(c.moveTo(0,0),c.lineTo(Math.cos(this.startAngle)*this.radius,Math.sin(this.startAngle)*this.radius));c.arc(0,0,this.radius,this.startAngle,this.endAngle,!1);this.drawSegment&&(c.moveTo(Math.cos(this.endAngle)*this.radius,Math.sin(this.endAngle)*this.radius),c.lineTo(0,0));0<this.renderState.fillColor[3]&&
c.fill();0<this.renderState.strokeColor[3]&&c.stroke();c.restore();c.restore()}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==j[b]&&(j[b]=new q),j[b].transform=f.getValue(b),j[b].radius=parseFloat(d.getValue(b)),j[b].startAngle=2*parseFloat(c.getValue(b))*Math.PI,j[b].endAngle=2*parseFloat(h.getValue(b))*Math.PI,j[b].renderState=g.getValue(b),j[b].drawSegment=1==l.getValue(b),e.isConnected()&&(j[b].clippingLayer=e.getValue(b));for(b=0;b<j.length;b++)p.setValue(b,
j[b]);p.setSliceCount(a)}};VVVV.Nodes.ArcCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.RectangleCanvas=function(a,b){this.constructor(a,"Rectangle (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),e=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),d=this.addInputPin("Width",[1],VVVV.PinTypes.Value),c=this.addInputPin("Height",[1],VVVV.PinTypes.Value),h=this.addInputPin("Corner Radius",
[0],VVVV.PinTypes.Value),l=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),p=[],j=function(){this.transform=mat4.create();mat4.identity(this.transform);this.renderState=defaultRenderState;this.clippingLayer=void 0;this.draw=function(c,d){c.save();this.clippingLayer&&(this.clippingLayer.draw(c,!0),c.clip());c.save();this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);c.beginPath();d?invisibleRenderState.apply(c):
this.renderState.apply(c);var e=this.width/2,h=e-this.cornerRadius,f=this.height/2,a=f-this.cornerRadius,b=-e,l=-h,g=-f,j=-a;c.moveTo(l,g);c.lineTo(h,g);c.arc(h,j,this.cornerRadius,1.5*Math.PI,0,!1);c.lineTo(e,a);c.arc(h,a,this.cornerRadius,0,0.5*Math.PI,!1);c.lineTo(l,f);c.arc(l,a,this.cornerRadius,0.5*Math.PI,Math.PI,!1);c.lineTo(b,j);c.arc(l,j,this.cornerRadius,Math.PI,1.5*Math.PI,!1);c.closePath();0<this.renderState.fillColor[3]&&c.fill();0<this.renderState.strokeColor[3]&&c.stroke();c.restore();
c.restore()}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==p[b]&&(p[b]=new j),p[b].transform=f.getValue(b),p[b].width=d.getValue(b),p[b].height=c.getValue(b),p[b].cornerRadius=h.getValue(b),p[b].renderState=g.getValue(b),e.isConnected()&&(p[b].clippingLayer=e.getValue(b));for(b=0;b<p.length;b++)l.setValue(b,p[b]);l.setSliceCount(a)}};VVVV.Nodes.RectangleCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.TextCanvas=function(a,b){this.constructor(a,"Text (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),f=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),e=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),d=this.addInputPin("Text",["VVVV.js"],VVVV.PinTypes.String),c=this.addInputPin("Font",["10px sans-serif"],VVVV.PinTypes.String),
h=this.addInputPin("Align",["start"],VVVV.PinTypes.Enum);h.enumOptions=["start","left","end","right","center"];var l=this.addInputPin("Baseline",["alphabetic"],VVVV.PinTypes.Enum);l.enumOptions="top hanging middle alphabetic ideographic bottom".split(" ");var p=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),j=[],q=function(){this.transform=mat4.create();mat4.identity(this.transform);this.text="VVVV.js";this.font="sans-serif";this.align="start";this.baseline="top";this.renderState=defaultRenderState;
this.clippingLayer=void 0;this.draw=function(c,d){c.save();this.clippingLayer&&(this.clippingLayer.draw(c,!0),c.clip());c.save();this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);c.scale(0.01,-0.01);c.font="100px "+this.font;c.textAlign=this.align;c.textBaseline=this.baseline;d?invisibleRenderState.apply(c):this.renderState.apply(c);0<this.renderState.fillColor[3]&&c.fillText(this.text,0,0);0<this.renderState.strokeColor[3]&&
c.strokeText(this.text,0,0);c.restore();c.restore()}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==j[b]&&(j[b]=new q),j[b].transform=f.getValue(b),j[b].text=d.getValue(b),j[b].font=c.getValue(b),j[b].align=h.getValue(b),j[b].baseline=l.getValue(b),j[b].renderState=g.getValue(b),j[b].clippingLayer=e.getValue(b);for(b=0;b<j.length;b++)p.setValue(b,j[b]);p.setSliceCount(a)}};VVVV.Nodes.TextCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.BezierCurveCanvas=function(a,b){function g(c,d){c.x.splice(d);c.y.splice(d);c.c1x.splice(d);c.c1y.splice(d);c.c2x.splice(d);c.c2y.splice(d)}this.constructor(a,"BezierCurve (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),e=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),d=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),c=this.addInputPin("X",
[0],VVVV.PinTypes.Value),h=this.addInputPin("Y",[0],VVVV.PinTypes.Value),l=this.addInputPin("Control 1 X",[0],VVVV.PinTypes.Value),p=this.addInputPin("Control 1 Y",[0],VVVV.PinTypes.Value),j=this.addInputPin("Control 2 X",[0],VVVV.PinTypes.Value),q=this.addInputPin("Control 2 Y",[0],VVVV.PinTypes.Value),k=this.addInputPin("BinSize",[-1],VVVV.PinTypes.Value),n=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),r=[],u=function(){this.transform=mat4.create();mat4.identity(this.transform);this.x=
[];this.y=[];this.c1x=[];this.c1y=[];this.c2x=[];this.c2y=[];this.strokeColor=[1,1,1,1];this.lineWidth=1;this.fillColor=[1,1,1,1];this.renderState=defaultRenderState;this.clippingLayer=void 0;this.draw=function(c,d){if(!(1>this.x.length)){c.save();this.clippingLayer&&(this.clippingLayer.draw(c,!0),c.clip());d?invisibleRenderState.apply(c):this.renderState.apply(c);c.save();this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);
c.beginPath();c.moveTo(this.x[0],this.y[0]);for(var e=1;e<this.x.length;e++)c.bezierCurveTo(this.c1x[e-1]+this.x[e-1],this.c1y[e-1]+this.y[e-1],this.c2x[e]+this.x[e],this.c2y[e]+this.y[e],this.x[e],this.y[e]);0<this.renderState.fillColor[3]&&c.fill();0<this.renderState.strokeColor[3]&&c.stroke();c.restore();c.restore()}}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0,m=0,t=0;t<a||0<k.getValue(0)&&(0<m||0<b%e.getSliceCount());t++)void 0==r[b]&&(r[b]=new u),0==m&&(r[b].renderState=
f.getValue(b),r[b].transform=e.getValue(b),d.isConnected()&&(r[b].clippingLayer=d.getValue(b))),r[b].x[m]=parseFloat(c.getValue(t)),r[b].y[m]=parseFloat(h.getValue(t)),r[b].c1x[m]=parseFloat(l.getValue(t)),r[b].c1y[m]=parseFloat(p.getValue(t)),r[b].c2x[m]=parseFloat(j.getValue(t)),r[b].c2y[m]=parseFloat(q.getValue(t)),m++,0<k.getValue(0)&&m>=k.getValue(b)&&(m<r[b].x.length&&g(r[b],m),b++,m=0);0>k.getValue(0)?m<r[b].x.length&&(g(r[b],m),r.splice(1)):r.splice(b);for(a=0;a<r.length;a++)n.setValue(a,
r[a]);n.setSliceCount(r.length)}};VVVV.Nodes.BezierCurveCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.QuadCanvas=function(a,b){this.constructor(a,"Quad (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),f=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),e=this.addInputPin("Texture",[],VVVV.PinTypes.HTML5Texture),d=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color),c=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),h=[],l=
function(){this.transform=mat4.create();this.clippingLayer=void 0;mat4.identity(this.transform);this.texture=VVVV.PinTypes.HTML5Texture.defaultValue();this.color=[1,1,1,1];this.draw=function(c){c.save();this.clippingLayer&&(this.clippingLayer.draw(c,!0),c.clip());c.save();this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);"Empty Texture"!=this.texture?this.texture.loaded&&(c.globalAlpha=this.color[3],c.save(),
c.translate(-0.5,0.5),this.texture.videoWidth?c.scale(1/this.texture.videoWidth,-1/this.texture.videoHeight):c.scale(1/this.texture.width,-1/this.texture.height),c.drawImage(this.texture,0,0),c.restore(),c.fillStyle="rgba(0, 0, 0, .001)",c.fillRect(-0.5,-0.5,1,1),c.globalAlpha=1):(c.fillStyle="rgba("+parseInt(255*this.color[0])+", "+parseInt(255*this.color[1])+", "+parseInt(255*this.color[2])+", "+this.color[3]+")",c.fillRect(-0.5,-0.5,1,1));c.restore();c.restore()}};this.evaluate=function(){for(var b=
this.getMaxInputSliceCount(),a=0;a<b;a++)void 0==h[a]&&(h[a]=new l),h[a].transform=g.getValue(a),h[a].texture=e.getValue(a),h[a].color=d.getValue(a).split(","),f.isConnected()&&(h[a].clippingLayer=f.getValue(a));for(a=0;a<h.length;a++)c.setValue(a,h[a]);c.setSliceCount(b)}};VVVV.Nodes.QuadCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.GroupCanvas=function(a,b){this.constructor(a,"Group (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInvisiblePin("Layer Count",[2],VVVV.PinTypes.Value),f=[],e=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer);this.initialize=function(){var d=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,f,d,function(c){return this.addInputPin("Layer "+(c+1),[],VVVV.PinTypes.CanvasLayer)})};this.evaluate=function(){g.pinIsChanged()&&
this.initialize();for(var d=0,c=f.length,h,a=0;a<c;a++)if(f[a].isConnected()){h=f[a].getSliceCount();for(var b=0;b<h;b++)e.setValue(d++,f[a].getValue(b))}e.setSliceCount(d)}};VVVV.Nodes.GroupCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.RendererCanvas=function(a,b){this.constructor(a,"Renderer (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Layers",[],VVVV.PinTypes.CanvasLayer);this.addInputPin("Clear",[1],VVVV.PinTypes.Value);var f=this.addInputPin("Background Color",["0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color),e=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),d=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),
c=this.addInputPin("View",[],VVVV.PinTypes.Transform),h=this.addOutputPin("Canvas Out",[],this),l,p,j,q=[0,0,0,1],k;this.getContext=function(){var c=this.invisiblePins["Descriptive Name"].getValue(0),c=$(c).get(0);if(!c||"CANVAS"!=c.nodeName){var h=parseInt(e.getValue(0)),f=parseInt(d.getValue(0));k=$('<canvas width="'+(0<h?h:512)+'" height="'+(0<f?f:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');c||(c="body");$(c).append(k);k=k.get(0)}else k=
c;p=k.width;j=k.height;if(k&&k.getContext){var a=k,b=function(c){switch(c.which){case 1:VVVV.MousePositions._all.lb=0;VVVV.MousePositions[a.id].lb=0;break;case 2:VVVV.MousePositions._all.mb=0;VVVV.MousePositions[a.id].mb=0;break;case 3:VVVV.MousePositions._all.rb=0,VVVV.MousePositions[a.id].rb=0}};$(a).detach("mousemove");$(a).detach("mousedown");$(a).detach("mouseup");VVVV.MousePositions[a.id]={x:0,y:0,wheel:0,lb:0,mb:0,rb:0};$(a).mousemove(function(c){var d=2*(c.pageX-$(this).offset().left)/$(this).width()-
1;c=-(2*(c.pageY-$(this).offset().top)/$(this).height()-1);VVVV.MousePositions._all.x=d;VVVV.MousePositions._all.y=c;VVVV.MousePositions[a.id].x=d;VVVV.MousePositions[a.id].y=c});$(a).bind("mousewheel",function(c){c=c.originalEvent.wheelDelta/120;VVVV.MousePositions[a.id].wheel+=c;VVVV.MousePositions._all.wheel+=c});$(a).bind("DOMMouseScroll",function(c){c=-c.originalEvent.detail/3;VVVV.MousePositions[a.id].wheel+=c;VVVV.MousePositions._all.wheel+=c});$(a).mousedown(function(c){switch(c.which){case 1:VVVV.MousePositions._all.lb=
1;VVVV.MousePositions[a.id].lb=1;break;case 2:VVVV.MousePositions._all.mb=1;VVVV.MousePositions[a.id].mb=1;break;case 3:VVVV.MousePositions._all.rb=1,VVVV.MousePositions[a.id].rb=1}$(document).unbind("mouseup",b);$(document).mouseup(b)});l=k.getContext("2d");k.ctx=l}};this.destroy=function(){$(k).remove()};this.evaluate=function(){this.invisiblePins["Descriptive Name"].pinIsChanged()&&($(k).hasClass("vvvv-js-generated-renderer")&&$(k).remove(),this.getContext());if(l){if(e.pinIsChanged()){var a=parseInt(e.getValue(0));
0<a&&(p=a,$(k).attr("width",p))}d.pinIsChanged()&&(a=parseInt(d.getValue(0)),0<a&&(j=a,$(k).attr("height",j)));f.pinIsChanged()&&(q=f.getValue(0).split(","),q[0]=parseInt(255*q[0]),q[1]=parseInt(255*q[1]),q[2]=parseInt(255*q[2]));defaultRenderState.apply(l);l.clearRect(0,0,p,j);l.save();l.translate(p/2,j/2);l.scale(p/2,-j/2);c.isConnected()&&(a=c.getValue(0),l.transform(a[0],a[1],a[4],a[5],a[12],a[13]));if(g.isConnected())for(a=0;a<g.values.length;a++)g.getValue(a).draw(l);l.restore();defaultRenderState.apply(l);
l.globalCompositeOperation="destination-over";l.fillStyle="rgba("+q[0]+","+q[1]+","+q[2]+","+q[3]+")";l.fillRect(0,0,p,j);h.setValue(0,k);k.loaded=!0}}};VVVV.Nodes.RendererCanvas.prototype=new VVVV.Core.Node;VVVV.PinTypes.Color={typeName:"Color",reset_on_disconnect:!1,defaultValue:function(){return"1.0, 1.0, 1.0, 1.0"},primitive:!0,hsvToRgb:function(a,b,g){a=360*((a%1+1)%1);var f=Math.floor(a/60),e=a/60-f;a=g*(1-b);var d=g*(1-b*e);b=g*(1-b*(1-e));switch(f){case 1:return[d,g,a];case 2:return[a,g,b];case 3:return[a,d,g];case 4:return[b,a,g];case 5:return[g,a,d];default:return[g,b,a]}},rgbToHsv:function(a,b,g){var f=Math.max(a,Math.max(b,g)),e=Math.min(a,Math.min(b,g)),d;f==e?d=0:f==a?d=60*(0+(b-g)/(f-e)):
f==b?d=60*(2+(g-a)/(f-e)):f==g&&(d=60*(4+(a-b)/(f-e)));0>d&&(d+=360);a=0;0!=f&&(a=(f-e)/f);return[d/360,a,f]}};
VVVV.Nodes.RGBJoin=function(a,b){this.constructor(a,"RGB (Color Join)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Red",[1],VVVV.PinTypes.Value),f=this.addInputPin("Green",[1],VVVV.PinTypes.Value),e=this.addInputPin("Blue",[1],VVVV.PinTypes.Value),d=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),c=this.addOutputPin("Output",["1.0,1.0,1.0,1.0"],VVVV.PinTypes.Color);this.evaluate=function(){if(g.pinIsChanged()||
f.pinIsChanged||e.pinIsChanged()||d.pinIsChanged()){for(var h=this.getMaxInputSliceCount(),a=0;a<h;a++){var b=g.getValue(a)||0,j=f.getValue(a)||0,q=e.getValue(a)||0,k=d.getValue(a)||0;c.setValue(a,b+","+j+","+q+","+k)}c.setSliceCount(h)}}};VVVV.Nodes.RGBJoin.prototype=new VVVV.Core.Node;
VVVV.Nodes.HSVJoin=function(a,b){this.constructor(a,"HSV (Color Join)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Hue",[0.33],VVVV.PinTypes.Value),f=this.addInputPin("Saturation",[0],VVVV.PinTypes.Value),e=this.addInputPin("Value",[1],VVVV.PinTypes.Value),d=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),c=this.addOutputPin("Output",["1.0,1.0,1.0,1.0"],VVVV.PinTypes.Color);this.evaluate=function(){for(var h=
this.getMaxInputSliceCount(),a=0;a<h;a++){var b=g.getValue(a),j=f.getValue(a),q=e.getValue(a),k=d.getValue(a),b=VVVV.PinTypes.Color.hsvToRgb(b,j,q);c.setValue(a,b[0]+","+b[1]+","+b[2]+","+k)}c.setSliceCount(h)}};VVVV.Nodes.HSVJoin.prototype=new VVVV.Core.Node;
VVVV.Nodes.IOBoxColor=function(a,b){this.constructor(a,"IOBox (Color)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Color Input",["0.0, 1.0, 0.0, 1.0"],VVVV.PinTypes.Color),f=this.addOutputPin("Color Output",["0.0, 1.0, 0.0, 1.0"],VVVV.PinTypes.Color);this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++)f.setValue(d,
g.getValue(d));f.setSliceCount(e)}};VVVV.Nodes.IOBoxColor.prototype=new VVVV.Core.Node;
VVVV.Nodes.SetAlphaColor=function(a,b){this.constructor(a,"SetAlpha (Color)",b);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["0.0, 0.0, 0.0, 0.0"],VVVV.PinTypes.Color),f=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",["0.0, 0.0, 0.0, 1.0"],VVVV.PinTypes.Color);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var h=g.getValue(c),a=f.getValue(c);
e.setValue(c,h.replace(/[^, ]+$/,a))}e.setSliceCount(d)}};VVVV.Nodes.SetAlphaColor.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwitchColorInput=function(a,b){this.constructor(a,"Switch (Color Input)",b);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),f=[];f[0]=this.addInputPin("Input 1",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);f[1]=this.addInputPin("Input 2",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);var e=this.addOutputPin("Output",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);this.addInvisiblePin("Input Count",
[2],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(this.hasNilInputs())e.setSliceCount(0);else{for(var c=0;c<d;c++)e.setValue(c,f[Math.round(Math.abs(g.getValue(c)))%f.length].getValue(c));e.setSliceCount(d)}}};VVVV.Nodes.SwitchColorInput.prototype=new VVVV.Core.Node;VVVV.Nodes.Abs=function(a,b){this.constructor(a,"Abs (Complex)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input Real",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input Imagiary",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)e.setValue(c,Math.sqrt(Math.pow(parseFloat(g.getValue(c)),2)+Math.pow(parseFloat(f.getValue(c)),
2)));e.setSliceCount(d)}};VVVV.Nodes.Abs.prototype=new VVVV.Core.Node;VVVV.Nodes.Integrate=function(a,b){this.constructor(a,"Integrate (Differential)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Position In",[0],VVVV.PinTypes.Value),f=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value),c=[];this.evaluate=function(){dt=this.parentPatch.mainloop.deltaT/
1E3;for(var h=this.getMaxInputSliceCount(),a=0;a<h;a++){void 0==c[a]&&(c[a]=0);var b=parseFloat(g.getValue(a));c[a]+=b*dt;0.5<=f.getValue(a)&&(c[a]=0);e.setValue(a,c[a]);d.setValue(a,b)}e.setSliceCount(h);d.setSliceCount(h);c.splice(h)}};VVVV.Nodes.Integrate.prototype=new VVVV.Core.Node;VVVV.Nodes.String2Enum=function(a,b){this.constructor(a,"String2Enum (Enumerations)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Validation check does not work"]};var g=this.addInputPin("String Value",[],VVVV.PinTypes.String),f=this.addOutputPin("Enum",[],VVVV.PinTypes.Enum);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++)f.setValue(d,g.getValue(d));f.setSliceCount(e)}};VVVV.Nodes.String2Enum.prototype=new VVVV.Core.Node;VVVV.PinTypes.HTML5Texture={typeName:"HTML5Texture",reset_on_disconnect:!0,defaultValue:function(){return"Empty Texture"}};
VVVV.Nodes.FileTextureCanvas=function(a,b){this.constructor(a,"FileTexture (HTML5 VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Filename",[],VVVV.PinTypes.String),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.HTML5Texture),e=this.addOutputPin("Width",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Height",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Up and Running",[0],VVVV.PinTypes.Value),
h=[],l=!1;this.evaluate=function(){var a=this.getMaxInputSliceCount();if(g.pinIsChanged()){for(var b=0;b<a;b++){var q=VVVV.Helpers.prepareFilePath(g.getValue(b),this.parentPatch);0===q.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(q=VVVV.ImageProxyPrefix+encodeURI(q));if(void 0==h[b]||h[b].origSrc!=q)h[b]=new Image,h[b].loaded=!1,h[b].origSrc=q,h[b].onload=function(c){return function(){l=h[c].loaded=!0}}(b),h[b].src=q,c.setValue(b,0),f.setValue(b,h[b])}h.length=a;f.setSliceCount(a);e.setSliceCount(a);
d.setSliceCount(a);c.setSliceCount(a)}if(l){for(b=0;b<a;b++)f.setValue(b,h[b]),e.setValue(b,h[b].width),d.setValue(b,h[b].height),c.setValue(b,h[b].loaded?1:0);l=!1}}};VVVV.Nodes.FileTextureCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.FileStreamCanvas=function(a,b){this.constructor(a,"FileStream (HTML5 VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],f=["HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","HAVE_CURRENT_DATA"],e=this.addInputPin("Play",[1],VVVV.PinTypes.Value),d=this.addInputPin("Loop",[0],VVVV.PinTypes.Value),c=this.addInputPin("Start Time",
[0],VVVV.PinTypes.Value),h=this.addInputPin("End Time",[-1],VVVV.PinTypes.Value),l=this.addInputPin("Do Seek",[0],VVVV.PinTypes.Value),p=this.addInputPin("Seek Position",[0],VVVV.PinTypes.Value),j=this.addInputPin("Filename",["http://html5doctor.com/demos/video-canvas-magic/video.ogg"],VVVV.PinTypes.String),q=this.addOutputPin("Video",[],this),k=this.addOutputPin("Audio",[],this),n=this.addOutputPin("Duration",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Position",[0],VVVV.PinTypes.Value),u=this.addOutputPin("Video Width",
[0],VVVV.PinTypes.Value),s=this.addOutputPin("Video Height",[0],VVVV.PinTypes.Value),w=this.addOutputPin("Network Status",[""],VVVV.PinTypes.String),m=this.addOutputPin("Ready Status",[""],VVVV.PinTypes.String),t=[];this.evaluate=function(){var a=this.getMaxInputSliceCount();if(j.pinIsChanged())for(var b=0;b<a;b++){filename=VVVV.Helpers.prepareFilePath(j.getValue(b),this.parentPatch);if(void 0==t[b]){var z=$('<video style="display:none"><source src="" type=video/ogg></video>');$("body").append(z);
t[b]=z[0];t[b].volume=0;z=function(){return function(){}}(b);t[b].onprogress=z;t[b].oncanplay=z;t[b].oncanplaythrough=z}filename!=t[b].currentSrc&&($(t[b]).find("source").first().attr("src",filename),t[b].load(),0.5<e.getValue(b)?t[b].play():t[b].pause(),t[b].loaded=!0,q.setValue(b,t[b]),k.setValue(b,t[b]))}if(e.pinIsChanged())for(b=0;b<a;b++)0.5<e.getValue(b)?t[b].play():t[b].pause();if(l.pinIsChanged())for(b=0;b<a;b++)t[b%t.length].loaded&&0.5<=l.getValue(b)&&(t[b%t.length].currentTime=parseFloat(p.getValue(b)),
0.5<e.getValue(b)&&t[b].play());for(b=0;b<a;b++){if(!t[b].paused){q.setValue(b,t[b]);k.setValue(b,t[b]);n.getValue(b)!=t[b].duration&&n.setValue(b,t[b].duration);r.setValue(b,t[b].currentTime);var z=parseFloat(h.getValue(b)),B=parseFloat(c.getValue(b));t[b].currentTime<B&&(t[b].currentTime=B);if(t[b].currentTime>=t[b].duration||0<=z&&t[b].currentTime>=z)0.5<=d.getValue(b)?t[b].currentTime=B:t[b].pause()}if(t[b].videoWidth!=u.getValue(b)||t[b].videoHeight!=s.getValue(b))u.setValue(b,t[b].videoWidth),
s.setValue(b,t[b].videoHeight);w.getValue(b)!=g[t[b].networkState]&&w.setValue(b,g[t[b].networkState]);m.getValue(b)!=f[t[b].readyState]&&m.setValue(b,f[t[b].readyState])}q.setSliceCount(a);k.setSliceCount(a)}};VVVV.Nodes.FileStreamCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.AudioOutHTML5=function(a,b){this.constructor(a,"AudioOut (HTML5 VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Audio",[],this),f=this.addInputPin("Volume",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){var e=this.getMaxInputSliceCount();if(f.pinIsChanged())for(var d=0;d<e;d++)g.getValue(d).volume=Math.max(0,Math.min(1,parseFloat(f.getValue(d))))}};VVVV.Nodes.AudioOutHTML5.prototype=new VVVV.Core.Node;VVVV.Nodes.HTTPGet=function(a,b){this.constructor(a,"HTTP (Network Get)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Doesnt handle get variables yet","Doesnt support proxies","No header output pin yet"]};this.auto_evaluate=!0;var g=this.addInputPin("URL",["http://localhost"],VVVV.PinTypes.String),f=this.addInputPin("Name",[""],VVVV.PinTypes.String),e=this.addInputPin("Value",[""],VVVV.PinTypes.String),d=this.addInputPin("Refresh",[0],
VVVV.PinTypes.Value),c=this.addOutputPin("Status",[""],VVVV.PinTypes.String),h=this.addOutputPin("Body",[""],VVVV.PinTypes.String),l=this.addOutputPin("Fail",[0],VVVV.PinTypes.Value),p=this.addOutputPin("Success",[0],VVVV.PinTypes.Value),j,q,k,n=!1;this.evaluate=function(){this.getMaxInputSliceCount();var b=g.pinIsChanged()||f.pinIsChanged()||e.pinIsChanged()||d.pinIsChanged()&&1==d.getValue(0);1==p.getValue(0)&&p.setValue(0,0);1==l.getValue(0)&&l.setValue(0,0);n&&(h.setValue(0,j),c.setValue(0,void 0),
p.setValue(0,q),l.setValue(0,k),n=!1);b&&(void 0==g.getValue(0)?(h.setValue(0,""),c.setValue(0,"")):$.ajax({url:g.getValue(0),type:"get",success:function(c){j=c;q=1;n=!0},error:function(){j="";k=1;n=!0}}))}};VVVV.Nodes.HTTPGet.prototype=new VVVV.Core.Node;VVVV.PinTypes.Node={typeName:"Node"};
VVVV.Nodes.IOBoxNode=function(a,b){this.constructor(a,"IOBox (Node)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input Node",[],VVVV.PinTypes.Node),f=this.addOutputPin("Output Node",[],VVVV.PinTypes.Node);this.initialize=function(){g.connectionChangedHandlers.nodepin=function(){if(this.isConnected()){var e;0<this.links.length?e=this.links[0].fromPin:this.masterPin&&(e=this.masterPin);this.setType(VVVV.PinTypes[e.typeName]);
f.setType(VVVV.PinTypes[e.typeName]);f.slavePin&&f.slavePin.setType(VVVV.PinTypes[e.typeName])}else f.isConnected()||(this.setType(VVVV.PinTypes.Node),f.setType(VVVV.PinTypes.Node),f.slavePin&&f.slavePin.setType(VVVV.PinTypes.Node))};f.connectionChangedHandlers.nodepin=function(){if(this.isConnected()){var e;0<this.links.length?e=this.links[0].toPin:this.slavePin&&(e=this.slavePin);this.setType(VVVV.PinTypes[e.typeName]);g.setType(VVVV.PinTypes[e.typeName]);g.masterPin&&g.masterPin.setType(VVVV.PinTypes[e.typeName])}else g.isConnected()||
(this.setType(VVVV.PinTypes.Node),g.setType(VVVV.PinTypes.Node),g.masterPin&&g.masterPin.setType(VVVV.PinTypes.Node))}};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++)f.setValue(d,g.getValue(d));f.setSliceCount(e)}};VVVV.Nodes.IOBoxNode.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwitchNodeInput=function(a,b){this.constructor(a,"Switch (Node Input)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[],d=this.addOutputPin("Output",[0],VVVV.PinTypes.Node);this.initialize=function(){for(var c=f.getValue(0),d=e.length;d<c;d++)e[d]=this.addInputPin("Input "+(d+1),
[],VVVV.PinTypes.Node);e.length=c};this.evaluate=function(){f.pinIsChanged()&&this.initialize();if(void 0==g.getValue(0))d.setValue(0,void 0);else{for(var c=e[Math.round(Math.abs(g.getValue(0)))%e.length],b=c.getSliceCount(),a=0;a<b;a++)d.setValue(a,c.getValue(a));d.setSliceCount(b)}}};VVVV.Nodes.SwitchNodeInput.prototype=new VVVV.Core.Node;VVVV.Nodes.BoundsSpectral=function(a,b){this.constructor(a,"Bounds (Spectral)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),e=this.addOutputPin("Center",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Width",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Minimum",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Maximum",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0,j=0,q,k,n,r=0;r<b||0<f.getValue(0)&&(0<j||0!=a%f.values.length);r++)q=g.getValue(r),0==j&&(center=k=n=q,width=0),k=Math.min(q,k),n=Math.max(q,n),j++,0<f.getValue(0)&&j>=f.getValue(a)&&(c.setValue(a,k),h.setValue(a,n),e.setValue(a,k+(n-k)/2),d.setValue(a,Math.abs(n-k)),a++,j=0);-1==f.getValue(0)&&(c.setValue(a,k),h.setValue(a,n),e.setValue(a,k+(n-k)/2),d.setValue(a,Math.abs(n-k)));e.setSliceCount(a+(0<j));
d.setSliceCount(a+(0<j));c.setSliceCount(a+(0<j));h.setSliceCount(a+(0<j))}};VVVV.Nodes.BoundsSpectral.prototype=new VVVV.Core.Node;VVVV.Nodes.GetSliceSpreads=function(a,b){this.constructor(a,"GetSlice (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value),e=this.addInputPin("Index",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=e.getSliceCount(),b,a,p=0,j=0;j<c;j++)if(a=f.getValue(j),b=
g.getValue(Math.round(e.getValue(j)),a),1<a)for(a=0;a<b.length;a++)d.setValue(p,parseFloat(b[a])),p++;else d.setValue(j,parseFloat(b)),p++;d.setSliceCount(p)}};VVVV.Nodes.GetSliceSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.SetSliceSpreads=function(a,b){this.constructor(a,"SetSlice (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Spread",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),e=this.addInputPin("Index",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=g.getSliceCount(),b=0;b<c;b++)d.setValue(b,
g.getValue(b));size=Math.max(f.getSliceCount(),e.getSliceCount());for(b=0;b<size;b++)d.setValue(e.getValue(b)%c,f.getValue(b));d.setSliceCount(c)}};VVVV.Nodes.SetSliceSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.RandomSpread=function(a,b){function g(b){for(var e=[],d=0,c=0,a=0;256>a;a++)e[a]=a;for(var g=0,a=0;256>a;a++){var g=(g+e[a]+b.charCodeAt(a%b.length))%256,p=e[a];e[a]=e[g];e[g]=p}this.getRandomNumber=function(){for(var b=0,a=1,h=0;8>h;h++){d=(d+1)%256;c=(c+e[d])%256;var f=e[d];e[d]=e[c];e[c]=f;b+=e[(e[d]+e[c])%256]*a;a*=256}return b/1.8446744073709552E19}}this.constructor(a,"RandomSpread (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:["http://www.webdeveloper.com/forum/showthread.php?t=140572"],
compatibility_issues:["Doesnt handle spreaded inputs","random result will differ from original vvvv node because of different algorithm"]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.addInputPin("Random Seed",[0],VVVV.PinTypes.Value);this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var b=parseInt(this.inputPins["Spread Count"].getValue(0)),e=parseFloat(this.inputPins.Input.getValue(0)),
d=parseFloat(this.inputPins.Width.getValue(0)),c=parseInt(this.inputPins["Random Seed"].getValue(0));rng=new g(c.toString());this.outputPins.Output.setSliceCount(b);for(c=0;c<b;c++)this.outputPins.Output.setValue(c,rng.getRandomNumber()*d-d/2+e)}};VVVV.Nodes.RandomSpread.prototype=new VVVV.Core.Node;
VVVV.Nodes.SortSpreads=function(a,b){this.constructor(a,"Sort (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=_(this.inputPins.Input.values).map(function(b,d){return[b,d]}),b=_(b).sortBy(function(b){return b[0]}),a=0;a<b.length;a++)this.outputPins.Output.setValue(a,
b[a][0]),this.outputPins["Former Index"].setValue(a,b[a][1]);this.outputPins.Output.setSliceCount(b.length);this.outputPins["Former Index"].setSliceCount(b.length)}};VVVV.Nodes.SortSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.LinearSpread=function(a,b){this.constructor(a,"LinearSpread (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["phase does not work with Block alignment"]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Width",[1],VVVV.PinTypes.Value),e=this.addInputPin("Alignment",["Centered"],VVVV.PinTypes.Enum);e.enumOptions=["Centered","Block","LeftJustified","RightJustified"];var d=this.addInputPin("Phase",
[0],VVVV.PinTypes.Value),c=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0,j=0;j<b;j++){var q=parseInt(c.getValue(j)),k=parseFloat(f.getValue(j)),n=parseFloat(d.getValue(j)),r=parseFloat(g.getValue(j)),u=e.getValue(j);""==u&&(u="Centered");var s=k/q;"Block"==u&&(s=k/(q-1));var w=s/2;if("Block"==u||"LeftJustified"==u)w=0;"RightJustified"==u&&(w=s);for(var m,t=0;t<q;t++)m=
t*s+w,"Block"!=u&&0!=k&&(m=(m+n*k)%k),m=r-k/2+m,h.setValue(a,m.toFixed(4)),a++}h.setSliceCount(a)}};VVVV.Nodes.LinearSpread.prototype=new VVVV.Core.Node;
VVVV.Nodes.AvoidNil=function(a,b){this.constructor(a,"AvoidNIL (Spreads)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Default",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){if(g.pinIsChanged()||f.pinIsChanged()){var d=g;void 0==g.values[0]&&(d=f);for(var c=0;c<d.values.length;c++)e.setValue(c,
d.getValue(c));e.setSliceCount(d.getSliceCount())}}};VVVV.Nodes.AvoidNil.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwapDim=function(a,b){this.constructor(a,"SwapDim (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["BinSize not implemented"]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Column Count",[0],VVVV.PinTypes.Value),e=this.addInputPin("Row Count",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=parseInt(f.getValue(0)),b=parseInt(e.getValue(0)),
a=c*b,p=0;p<a;p++)d.setValue(p%c*b+parseInt(p/c),g.getValue(p));d.setSliceCount(a)}};VVVV.Nodes.SwapDim.prototype=new VVVV.Core.Node;
VVVV.Nodes.I=function(a,b){this.constructor(a,"I (Spreads)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:["Matthias Zauner, M\u00f3r\u00e1sz D\u00e1vid (micro.D)"],compatibility_issues:[]};var g=this.addInputPin("[ From ..",[0],VVVV.PinTypes.Value),f=this.addInputPin(".. To [",[1],VVVV.PinTypes.Value),e=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),b=
0,a=0;a<c;a++){var p=Math.round(g.getValue(a)),j=Math.round(f.getValue(a)),q=parseFloat(e.getValue(a)),k=j-p,n=Math.abs(k);if(p<=j)for(j=0;j<n;j++,b++){var r=parseFloat(j)-n*q,r=Math.round(r)%k;0>r&&(r=k+r);r+=p;d.setValue(b,r)}else for(j=n;0<j;j--,b++)r=parseFloat(j)-n*q,r=Math.round(r)%k,0>k&&(r*=-1),0>r&&(r=k-r),r+=p,d.setValue(b,r)}d.setSliceCount(b)}};VVVV.Nodes.I.prototype=new VVVV.Core.Node;
VVVV.Nodes.CircularSpread=function(a,b){this.constructor(a,"CircularSpread (Spreads)",b);this.meta={authors:["Matija Miloslavich, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.xIn=this.addInputPin("Input X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Input Y",[0],VVVV.PinTypes.Value);this.widthIn=this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.heightIn=this.addInputPin("Height",[1],VVVV.PinTypes.Value);this.factorIn=this.addInputPin("Factor",[1],VVVV.PinTypes.Value);
this.phaseIn=this.addInputPin("Phase",[0],VVVV.PinTypes.Value);this.sprcntIn=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.xOut=this.addOutputPin("Output X",[0],VVVV.PinTypes.Value);this.yOut=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=2*Math.PI,a=0,e=0;e<this.getMaxInputSliceCount();e++)for(var d=parseFloat(this.xIn.getValue(e)),c=parseFloat(this.yIn.getValue(e)),h=0.5*parseFloat(this.widthIn.getValue(e)),l=0.5*parseFloat(this.heightIn.getValue(e)),
p=parseFloat(this.factorIn.getValue(e)),j=parseFloat(this.phaseIn.getValue(e))*b,q=parseInt(this.sprcntIn.getValue(e)),k=0;k<q;k++){var n=j+b*(k/q)*p,r=d+Math.cos(n)*h,n=c+Math.sin(n)*l;this.xOut.setValue(a,r);this.yOut.setValue(a,n);a++}this.xOut.setSliceCount(a);this.yOut.setSliceCount(a)}};VVVV.Nodes.CircularSpread.prototype=new VVVV.Core.Node;
VVVV.Nodes.ReverseSpreads=function(a,b){this.constructor(a,"Reverse (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=g.getSliceCount(),d=0;d<b;d++){var c=g.getValue(d);f.setValue(b-d-1,c)}f.setSliceCount(b)}};VVVV.Nodes.ReverseSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.IntegralSpreads=function(a,b){this.constructor(a,"Integral (Spreads)",b);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),e=this.addInputPin("Offset",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Output Bin Size",[2],VVVV.PinTypes.Value);
this.evaluate=function(){var b=g.getSliceCount(),a=Math.max(f.getSliceCount(),e.getSliceCount()),p=0,j=0,q=[];if(0<a)for(;p<a||j<b;){var k=parseInt(f.getValue(p));0>k&&(k=parseInt(Math.round(b/parseFloat(Math.abs(k)))));j+=k;q[p]=k;p++}q.splice(p);for(j=a=b=0;j<p;j++){k=q[j];c.setValue(j,k+1);for(var n=parseFloat(e.getValue(j)),r=0;r<k;r++)d.setValue(a,n),a++,n+=parseFloat(g.getValue(b+r));b+=k;d.setValue(a,n);a++}d.setSliceCount(a);c.setSliceCount(p)}};VVVV.Nodes.IntegralSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.DifferentialSpreads=function(a,b){this.constructor(a,"Differential (Spreads)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output Bin Size",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Offset",[0],VVVV.PinTypes.Value);this.evaluate=
function(){var b=g.getSliceCount(),a=f.getSliceCount(),p=0,j=0,q=[];if(0<a)for(;p<a||j<b;){var k=parseInt(f.getValue(p));0>k&&(k=parseInt(Math.round(b/parseFloat(Math.abs(k)))));j+=k;q[p]=k;p++}q.splice(p);for(j=a=b=0;j<p;j++){var k=q[j]-1,n=g.getValue(b);d.setValue(j,k);c.setValue(j,n);for(var r=0;r<k;r++){var u=parseFloat(g.getValue(b+r+1));e.setValue(a,u-n);n=u;a++}b+=k+1}e.setSliceCount(a);d.setSliceCount(p);c.setSliceCount(p)}};VVVV.Nodes.DifferentialSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.ConsSpreads=function(a,b){this.constructor(a,"Cons (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=[],f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value);this.initialize=function(){var d=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,g,d,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};
this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var d=0,c=0;c<g.length;c++)for(var b=0;b<g[c].getSliceCount();b++)f.setValue(d++,g[c].getValue(b));f.setSliceCount(d)}};VVVV.Nodes.ConsSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.IntervalSpreads=function(a,b){this.constructor(a,"Interval (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0.5],VVVV.PinTypes.Value),f=this.addInputPin("Intervals",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Index",[0],VVVV.PinTypes.Value),d=0;this.evaluate=function(){var c=g.getSliceCount(),b=f.getSliceCount();if(f.pinIsChanged()){d=void 0;for(var a=0;a<b;a++)if(f.getValue(a)<
d||void 0==d)d=f.getValue(a)}for(a=0;a<c;a++){var p=g.getValue(a);if(p<d)e.setValue(a,-1);else{for(var j=0;j<b-1&&!(p>=f.getValue(j)&&p<f.getValue(j+1));j++);e.setValue(a,j)}}e.setSliceCount(c)}};VVVV.Nodes.IntervalSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.QueueSpreads=function(a,b){this.constructor(a,"Queue (Spreads)",b);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Insert",[0],VVVV.PinTypes.Value),e=this.addInputPin("Frame Count",[1],VVVV.PinTypes.Value),d=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[],VVVV.PinTypes.Value),h=this.addOutputPin("Output Bin Size",
[],VVVV.PinTypes.Value);this.evaluate=function(){var b=f.getValue(0),a=e.getValue(0),j=d.getValue(0),q=!1;if(0.5<=b&&0.5>j){b=g.getSliceCount();for(q=b-1;0<=q;q--)c.values.unshift(g.getValue(q));h.values.unshift(b);q=!0}if(e.pinIsChanged()||q){for(q=currFrameCount=h.values.length;q>a;q--)c.values.splice(-h.values[q-1]);h.values.splice(a);q=!0}if(q){for(q=0;q<c.values.length;q++)c.setValue(q,c.values[q]);for(q=0;q<h.values.length;q++)h.setValue(q,h.values[q])}0.5<=j&&(c.setSliceCount(0),h.setSliceCount(0))}};
VVVV.Nodes.QueueSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxString=function(a,b){this.constructor(a,"IOBox (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addInputPin("SliceOffset",[0],VVVV.PinTypes.Value);this.addInputPin("Input String",[""],VVVV.PinTypes.String);this.addOutputPin("Output String",[""],VVVV.PinTypes.String);this.evaluate=function(){this.outputPins["Output String"].setSliceCount(this.inputPins["Input String"].getSliceCount());
for(var b=0;b<this.inputPins["Input String"].getSliceCount();b++)this.outputPins["Output String"].setValue(b,this.inputPins["Input String"].values[b])}};VVVV.Nodes.IOBoxString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwitchStringInput=function(a,b){this.constructor(a,"Switch (String Input)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),e=[],d=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.initialize=function(){var c=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,e,c,function(c){return this.addInputPin("Input "+
(c+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){g.pinIsChanged()&&this.initialize();for(var c=this.getMaxInputSliceCount(),b=0;b<c;b++)d.setValue(b,e[Math.round(Math.abs(f.getValue(b)))%e.length].getValue(b));d.setSliceCount(c)}};VVVV.Nodes.SwitchStringInput.prototype=new VVVV.Core.Node;
VVVV.Nodes.AddString=function(a,b){this.constructor(a,"Add (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet","Intersperse *Enum* not implemented"]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],e=this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),d=this.addOutputPin("Output",["texttext"],VVVV.PinTypes.String);this.initialize=function(){var c=Math.max(2,g.getValue(0));
VVVV.Helpers.dynamicPins(this,f,c,function(c){return this.addInputPin("Input "+(c+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){g.pinIsChanged()&&this.initialize();for(var c=this.getMaxInputSliceCount(),b=0;b<c;b++){var a=[],p=e.getValue(b);void 0==p&&(p="");for(var j=0;j<f.length;j++)a.push(f[j].getValue(b));d.setValue(b,a.join(p))}d.setSliceCount(c)}};VVVV.Nodes.AddString.prototype=new VVVV.Core.Node;
VVVV.Nodes.GetSliceString=function(a,b){this.constructor(a,"GetSlice (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Bin Size not implemented"]};var g=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value);var f=this.addInputPin("Index",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){for(var d=0;d<f.values.length;d++)e.setValue(d,
g.getValue(Math.round(f.getValue(d))));e.setSliceCount(f.getSliceCount())}};VVVV.Nodes.GetSliceString.prototype=new VVVV.Core.Node;
VVVV.Nodes.AsValue=function(a,b){this.constructor(a,"AsValue (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[],VVVV.PinTypes.String),f=this.addInputPin("Default",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var b=g.getValue(c);/^\s*-?[0-9.e]+\s*$/.test(b)?e.setValue(c,parseFloat(b)):e.setValue(c,
parseFloat(f.getValue(c)))}e.setSliceCount(d)}};VVVV.Nodes.AsValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SortString=function(a,b){this.constructor(a,"Sort (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Reverse Sorting",[0],VVVV.PinTypes.Value);var f=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),e=this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){xxx=
g.values;for(var d=_(g.values).map(function(c,d){return[c,d]}),d=_(d).sortBy(function(c){return c[0]}),c=0;c<d.length;c++)f.setValue(c,d[c][0]),e.setValue(c,d[c][1]);f.setSliceCount(d.length);e.setSliceCount(d.length)}};VVVV.Nodes.SortString.prototype=new VVVV.Core.Node;
VVVV.Nodes.LengthString=function(a,b){this.constructor(a,"Length (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],VVVV.PinTypes.String),f=this.addOutputPin("Count",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),d=0;d<b;d++){var c=g.getValue(d);f.setValue(d,c.length)}f.setSliceCount(b)}};VVVV.Nodes.LengthString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SiftString=function(a,b){this.constructor(a,"Sift (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],VVVV.PinTypes.String),f=this.addInputPin("Filter",["text"],VVVV.PinTypes.String),e=this.addInputPin("Comparison",["Matches"],VVVV.PinTypes.Enum);e.enumOptions=["Matches","Contains","MatchesAny","ContainsAny"];var d=this.addInputPin("Case Sensitive",[0],VVVV.PinTypes.Value),
c=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Input Index",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Filter Index",[0],VVVV.PinTypes.Value),p=this.addOutputPin("Found At Position",[0],VVVV.PinTypes.Value);this.evaluate=function(){var b=this.getMaxInputSliceCount();c.setSliceCount(b);var a=e.getValue(0);d.getValue(0);for(var k=0,n=0;n<b;n++){var r=g.getValue(n),u=1;if("MatchesAny"==a||"ContainsAny"==a)u=f.getSliceCount();for(var s=0,w=0;w<u;w++){var m=f.getValue(w+n),
t=[];if("Matches"==a||"MatchesAny"==a)m==r&&t.push(-1);else for(var m=RegExp(m,"gi"),y;y=m.exec(r);)t.push(y.index);for(m=0;m<t.length;m++)h.setValue(k,n%g.getSliceCount()),l.setValue(k,(n+w)%f.getSliceCount()),p.setValue(k,t[m]+1),k++,s++}c.setValue(n,s)}h.setSliceCount(k);l.setSliceCount(k);p.setSliceCount(k)}};VVVV.Nodes.SiftString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SeparateString=function(a,b){this.constructor(a,"Separate (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Quotes don't work"]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],VVVV.PinTypes.String),f=this.addInputPin("Intersperse",["None"],VVVV.PinTypes.Enum);f.enumOptions="None Space Comma CommaPlusSpace Semicolon Colon Pipe UnixPath DosPath Dash NewLineAutoDetection Dot UnderScore Minus".split(" ");var e=
this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),d=this.addInputPin("Ignore between",["Double"],VVVV.PinTypes.Enum);d.enumOptions=["Single","Double"];var c=this.addInputPin("Keep Quotes",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),l=this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value),p={None:"",Space:" ",Comma:",",CommaPlusSpace:", ",Semicolon:";",Colon:":",Pipe:"|",UnixPath:"/",DosPath:"\\",Dash:"-",NewLineAutoDetection:"\n",Dot:".",
UnderScore:"_",Minus:"-"},j={Single:"'",Double:'"'};this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0,n=0;n<b;n++){var r=g.getValue(n),u=p[f.getValue(n)],s=e.getValue(n),w=j[d.getValue(n)],m=c.getValue(n);""==u&&(u=s);""==u&&(u=void 0);r=r.split(u);u=r.length;w=RegExp("[^"+w+"]*","g");for(s=0;s<u;s++)1==m?h.setValue(a,r[s]):h.setValue(a,r[s].match(w).join("")),l.setValue(a,n),a++}h.setSliceCount(a);l.setSliceCount(a)}};VVVV.Nodes.SeparateString.prototype=new VVVV.Core.Node;
VVVV.Nodes.EQString=function(a,b){this.constructor(a,"EQ (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input 1",[""],VVVV.PinTypes.String),f=this.addInputPin("Input 2",[""],VVVV.PinTypes.String),e=this.addInputPin("Case Sensitive",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);this.evaluate=
function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var p=g.getValue(a),j=f.getValue(a),q=e.getValue(a),p=p==j||0==q&&p.toLowerCase()==j.toLowerCase()?1:0;d.setValue(a,p);c.setValue(a,1-p)}d.setSliceCount(b);c.setSliceCount(b)}};VVVV.Nodes.EQString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SelectString=function(a,b){this.constructor(a,"Select (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[""],VVVV.PinTypes.String),f=this.addInputPin("Select",[1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[""],VVVV.PinTypes.String),d=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),b=0,a=0;a<c;a++)for(var p=
0;p<f.getValue(a);p++)e.setValue(b,g.getValue(a)),d.setValue(b,a),b++;e.setSliceCount(b);d.setSliceCount(b)}};VVVV.Nodes.SelectString.prototype=new VVVV.Core.Node;
VVVV.Nodes.CountString=function(a,b){this.constructor(a,"Count (String)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[""],VVVV.PinTypes.String);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,
this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountString.prototype=new VVVV.Core.Node;
VVVV.Nodes.CleanString=function(a,b){this.constructor(a,"Clean (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],VVVV.PinTypes.String),f=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),d=0;d<b;d++)g.getValue(d)?f.setValue(d,g.getValue(d).trim()):f.setValue(d,void 0);f.setSliceCount(b)}};
VVVV.Nodes.CleanString.prototype=new VVVV.Core.Node;
VVVV.Nodes.AvoidNilString=function(a,b){this.constructor(a,"AvoidNIL (String)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",["text"],VVVV.PinTypes.String),f=this.addInputPin("Default",["text"],VVVV.PinTypes.String),e=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){if(g.pinIsChanged()||f.pinIsChanged()){var b=g;void 0==g.values[0]&&(b=f);for(var c=0;c<b.values.length;c++)e.setValue(c,
b.getValue(c));e.setSliceCount(b.getSliceCount())}}};VVVV.Nodes.AvoidNilString.prototype=new VVVV.Core.Node;
VVVV.Nodes.FormatValueString=function(a,b){this.constructor(a,"FormatValue (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:["pad function: http://stackoverflow.com/a/10073788","thousands separator regex: http://stackoverflow.com/a/2901298"],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Characters before Comma",[1],VVVV.PinTypes.Value),e=this.addInputPin("Characters after Comma",
[0],VVVV.PinTypes.Value),d=this.addInputPin("Thousands Symbol",["None"],VVVV.PinTypes.Enum);d.enumOptions=["None","Dot","Comma","Space"];var c=this.addInputPin("Comma Symbol",["Dot"],VVVV.PinTypes.Enum);c.enumOptions=["Dot","Comma"];var h=this.addInputPin("Leading Zeroes",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Output",["0"],VVVV.PinTypes.String),p={Dot:".",Comma:",",None:"",Space:" "};this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var k=g.getValue(a),n=parseInt(f.getValue(a)),
r=parseInt(e.getValue(a)),u=d.getValue(a),s=c.getValue(a),w=h.getValue(a),n=n+r+(0<r),k=parseFloat(k).toFixed(r),w=w=0.5<=w?"0":" ",k=k+"",k=k.length>=n?k:Array(n-k.length+1).join(w)+k,k=k.replace(".",p[s]).replace(/\B(?=(\d{3})+(?!\d))/g,p[u]);l.setValue(a,k)}l.setSliceCount(b)}};VVVV.Nodes.FormatValueString.prototype=new VVVV.Core.Node;VVVV.Nodes.MouseGlobal=function(a,b){this.constructor(a,"Mouse (System Global)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var g=this.addOutputPin("X",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Left Button",
[0],VVVV.PinTypes.Value),c=this.addOutputPin("Middle Button",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value),l=0,p=0,j=0,q=0,k=0,n=0;$(document).mousemove(function(c){l=2*c.pageX/parseInt($("body").css("width"))-1;p=-(2*c.pageY/parseInt($("body").css("height"))-1)});$(document).bind("mousewheel",function(c){j+=c.originalEvent.wheelDelta/120});$(document).bind("DOMMouseScroll",function(c){j+=-c.originalEvent.detail/3});$(document).mousedown(function(c){switch(c.which){case 1:q=
1;break;case 2:k=1;break;case 3:n=1}});$(document).mouseup(function(c){switch(c.which){case 1:q=0;break;case 2:k=0;break;case 3:n=0}});this.evaluate=function(){g.getValue(0)!=l&&g.setValue(0,l);f.getValue(0)!=p&&f.setValue(0,p);e.getValue(0)!=j&&e.setValue(0,j);d.getValue(0)!=q&&d.setValue(0,q);c.getValue(0)!=k&&c.setValue(0,k);h.getValue(0)!=n&&h.setValue(0,n)}};VVVV.Nodes.MouseGlobal.prototype=new VVVV.Core.Node;
VVVV.Nodes.MouseWindow=function(a,b){this.constructor(a,"Mouse (System Window)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var g=this.addOutputPin("X",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Left Button",
[0],VVVV.PinTypes.Value),c=this.addOutputPin("Middle Button",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value);this.evaluate=function(){g.getValue(0)!=VVVV.MousePositions._all.x&&g.setValue(0,VVVV.MousePositions._all.x);f.getValue(0)!=VVVV.MousePositions._all.y&&f.setValue(0,VVVV.MousePositions._all.y);e.getValue(0)!=VVVV.MousePositions._all.wheel&&e.setValue(0,VVVV.MousePositions._all.wheel);d.getValue(0)!=VVVV.MousePositions._all.lb&&d.setValue(0,VVVV.MousePositions._all.lb);
c.getValue(0)!=VVVV.MousePositions._all.mb&&c.setValue(0,VVVV.MousePositions._all.mb);h.getValue(0)!=VVVV.MousePositions._all.rb&&h.setValue(0,VVVV.MousePositions._all.rb)}};VVVV.Nodes.MouseWindow.prototype=new VVVV.Core.Node;
VVVV.Nodes.ShellExecute=function(a,b){this.constructor(a,"ShellExecute (Windows)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["This actually does something completely different from the original node: the origin node executes a shell command, this node evals javascript code"]};var g=this.addInputPin("File",[0],VVVV.PinTypes.String),f=this.addInputPin("Do Execute",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Result",[""],VVVV.PinTypes.String);
this.evaluate=function(){if(1<=Math.round(f.getValue(0))){var b=eval(g.getValue(0));!(b instanceof Array)&&!(b instanceof Object)&&(b=[b]);if(void 0!=b)for(var c=0;c<b.length;c++)e.setValue(c,b[c])}}};VVVV.Nodes.ShellExecute.prototype=new VVVV.Core.Node;
VVVV.Nodes.ScreenInfo=function(a,b){this.constructor(a,"ScreenInfo (Windows)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:["Outputs the window size (ResolutionXY) and the document size (Working AreaXY) only","no Bits per pixel"]};var g=this.addOutputPin("ResolutionXY",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Working AreaXY",[0],VVVV.PinTypes.Value),e=0,d=0,c=0,h=0;$(document).ready(function(){d=$(window).height();
e=$(window).width();h=$(document).height();c=$(document).width()});$(window).resize(function(){d=$(window).height();e=$(window).width();h=$(document).height();c=$(document).width()});this.evaluate=function(){if(g.getValue(0)!=e||g.getValue(1)!=d)g.setValue(0,e),g.setValue(1,d);if(f.getValue(0)!=c||f.getValue(1)!=h)f.setValue(0,c),f.setValue(1,h)}};VVVV.Nodes.ScreenInfo.prototype=new VVVV.Core.Node;VVVV.PinTypes.Transform={typeName:"Transform",reset_on_disconnect:!0,defaultValue:function(){return mat4.identity(mat4.create())}};
VVVV.Nodes.Rotate=function(a,b){this.constructor(a,"Rotate (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);
this.evaluate=function(){for(var b=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount()),a=0;a<b;a++){var e=this.inputPins["Transform In"].getValue(a),d=parseFloat(this.inputPins.X.getValue(a)),c=parseFloat(this.inputPins.Y.getValue(a)),h=parseFloat(this.inputPins.Z.getValue(a)),l=mat4.create();mat4.identity(l);mat4.rotate(l,2*c*Math.PI,[0,1,0]);mat4.rotate(l,2*d*Math.PI,[1,0,0]);mat4.rotate(l,2*h*Math.PI,[0,0,1]);
this.trIn.isConnected()&&mat4.multiply(e,l,l);this.trOut.setValue(a,l)}this.trOut.setSliceCount(b)}};VVVV.Nodes.Rotate.prototype=new VVVV.Core.Node;
VVVV.Nodes.Translate=function(a,b){this.constructor(a,"Translate (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);
this.evaluate=function(){for(var b=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount()),a=0;a<b;a++){var e=parseFloat(this.xIn.getValue(a)),d=parseFloat(this.yIn.getValue(a)),c=parseFloat(this.zIn.getValue(a)),h=mat4.create();mat4.identity(h);mat4.translate(h,[e,d,c]);this.trIn.isConnected()&&(e=this.trIn.getValue(a),mat4.multiply(e,h,h));this.trOut.setValue(a,h)}this.trOut.setSliceCount(b)}};
VVVV.Nodes.Translate.prototype=new VVVV.Core.Node;
VVVV.Nodes.Scale=function(a,b){this.constructor(a,"Scale (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[1],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[1],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);
this.evaluate=function(){for(var b=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount()),a=0;a<b;a++){var e=parseFloat(this.inputPins.X.getValue(a)),d=parseFloat(this.inputPins.Y.getValue(a)),c=parseFloat(this.inputPins.Z.getValue(a)),h=mat4.create();mat4.identity(h);mat4.scale(h,[e,d,c]);this.inputPins["Transform In"].isConnected()&&(e=this.inputPins["Transform In"].getValue(a),mat4.multiply(e,h,h));this.trOut.setValue(a,
h)}this.trOut.setSliceCount(b)}};VVVV.Nodes.Scale.prototype=new VVVV.Core.Node;
VVVV.Nodes.UniformScale=function(a,b){this.constructor(a,"UniformScale (Transform)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xyzIn=this.addInputPin("XYZ",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){for(var b=this.trIn.isConnected()?this.getMaxInputSliceCount():
this.xyzIn.getSliceCount(),a=0;a<b;a++){var e=parseFloat(this.inputPins.XYZ.getValue(a)),d=mat4.create();mat4.identity(d);mat4.scale(d,[e,e,e]);this.inputPins["Transform In"].isConnected()&&(e=this.inputPins["Transform In"].getValue(a),mat4.multiply(e,d,d));this.trOut.setValue(a,d)}this.trOut.setSliceCount(b)}};VVVV.Nodes.UniformScale.prototype=new VVVV.Core.Node;
VVVV.Nodes.Trapeze=function(a,b){this.constructor(a,"Trapeze (Transform)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);
this.evaluate=function(){for(var b=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount()),a=0;a<b;a++){var e=2*parseFloat(this.inputPins.X.getValue(a)),d=2*parseFloat(this.inputPins.Y.getValue(a)),c=2*parseFloat(this.inputPins.Z.getValue(a)),e=mat4.create([1,0,0,e,0,1,0,d,0,0,1,c,0,0,0,1]);this.inputPins["Transform In"].isConnected()&&(d=this.inputPins["Transform In"].getValue(a),mat4.multiply(d,e,e));this.trOut.setValue(a,
e)}this.trOut.setSliceCount(b)}};VVVV.Nodes.Trapeze.prototype=new VVVV.Core.Node;
VVVV.Nodes.Transform2d=function(a,b){this.constructor(a,"Transform (Transform 2d)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.txIn=this.addInputPin("TranslateX",[0],VVVV.PinTypes.Value);this.tyIn=this.addInputPin("TranslateY",[0],VVVV.PinTypes.Value);this.sxIn=this.addInputPin("ScaleX",[1],VVVV.PinTypes.Value);this.syIn=this.addInputPin("ScaleY",
[1],VVVV.PinTypes.Value);this.rIn=this.addInputPin("Rotate",[0],VVVV.PinTypes.Value);this.cxIn=this.addInputPin("CenterX",[0],VVVV.PinTypes.Value);this.cyIn=this.addInputPin("CenterY",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){for(var b=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.txIn.getSliceCount(),this.tyIn.getSliceCount(),this.sxIn.getSliceCount(),this.syIn.getSliceCount(),this.rIn.getSliceCount(),
this.cxIn.getSliceCount(),this.cyIn.getSliceCount()),a=0;a<b;a++){var e=parseFloat(this.inputPins.TranslateX.getValue(a)),d=parseFloat(this.inputPins.TranslateY.getValue(a)),c=parseFloat(this.inputPins.ScaleX.getValue(a)),h=parseFloat(this.inputPins.ScaleY.getValue(a)),l=parseFloat(this.inputPins.Rotate.getValue(a)),p=parseFloat(this.inputPins.CenterX.getValue(a)),j=parseFloat(this.inputPins.CenterY.getValue(a)),q=mat4.create();mat4.identity(q);mat4.translate(q,[e,d,0]);mat4.rotate(q,2*l*Math.PI,
[0,0,1]);mat4.scale(q,[c,h,1]);mat4.translate(q,[-p,-j,0]);this.inputPins["Transform In"].isConnected()&&(e=this.inputPins["Transform In"].getValue(a),mat4.multiply(e,q,q));this.trOut.setValue(a,q)}this.trOut.setSliceCount(b)}};VVVV.Nodes.Transform2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.AspectRatio=function(a,b){this.constructor(a,"AspectRatio (Transform)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.wIn=this.addInputPin("Aspect Width",[1],VVVV.PinTypes.Value);this.hIn=this.addInputPin("Aspect Height",[1],VVVV.PinTypes.Value);this.sIn=this.addInputPin("Uniform Scale",[1],VVVV.PinTypes.Value);this.alignmentIn=this.addInputPin("Alignment",
["FitIn"],VVVV.PinTypes.Enum);this.alignmentIn.enumOptions=["FitIn","FitWidth","FitHeight","FitOut"];this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){for(var b=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.wIn.getSliceCount(),this.hIn.getSliceCount(),this.sIn.getSliceCount(),this.alignmentIn.getSliceCount()),a=0;a<b;a++){var e=parseFloat(this.inputPins["Aspect Width"].getValue(a)),d=parseFloat(this.inputPins["Aspect Height"].getValue(a)),
c=parseFloat(this.inputPins["Uniform Scale"].getValue(a)),h=c,l=c;switch(this.alignmentIn.getValue(a)){case "FitIn":e>d?l*=d/e:h*=e/d;break;case "FitWidth":l*=d/e;break;case "FitHeight":h*=e/d;break;case "FitOut":e<d?l*=d/e:h*=e/d}e=mat4.create();mat4.identity(e);mat4.scale(e,[h,l,c]);this.inputPins["Transform In"].isConnected()&&(c=this.inputPins["Transform In"].getValue(a),mat4.multiply(c,e,e));this.trOut.setValue(a,e)}this.trOut.setSliceCount(b)}};VVVV.Nodes.AspectRatio.prototype=new VVVV.Core.Node;
VVVV.Nodes.Perspective=function(a,b){this.constructor(a,"Perspective (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable"]};mat4.identity(mat4.create());this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.addInputPin("FOV",[0.25],VVVV.PinTypes.Value);this.addInputPin("Near Plane",[0.05],VVVV.PinTypes.Value);this.addInputPin("Far Plane",[100],VVVV.PinTypes.Value);this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);
this.evaluate=function(){var a=parseFloat(this.inputPins.FOV.getValue(0)),b=parseFloat(this.inputPins["Near Plane"].getValue(0)),e=parseFloat(this.inputPins["Far Plane"].getValue(0)),d=mat4.create();mat4.identity(d);mat4.perspective(360*a,1,b,e,d);this.inputPins["Transform In"].isConnected()&&(a=this.inputPins["Transform In"].getValue(0),mat4.multiply(a,d,d));this.outputPins["Transform Out"].setValue(0,d)}};VVVV.Nodes.Perspective.prototype=new VVVV.Core.Node;
VVVV.Nodes.InverseTransform=function(a,b){this.constructor(a,"Inverse (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),f=this.addInputPin("Source",[],VVVV.PinTypes.Transform),e=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){var b=mat4.create();mat4.set(f.getValue(c),b);
mat4.multiply(g.getValue(c),mat4.inverse(b,b),b);e.setValue(c,b)}e.setSliceCount(a)}};VVVV.Nodes.InverseTransform.prototype=new VVVV.Core.Node;
VVVV.Nodes.LookAtTransformVector=function(a,b){this.constructor(a,"LookAt (Transform Vector)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),f=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),e=this.addInputPin("LookAt XYZ",[0,0,1],VVVV.PinTypes.Value),d=this.addInputPin("UpVector XYZ",[0,1,0],VVVV.PinTypes.Value),c=this.addOutputPin("Transform Out",
[],VVVV.PinTypes.Transform),h=mat4.create();mat4.identity(h);mat4.scale(h,[-1,1,-1]);this.evaluate=function(){for(var a=Math.max(g.getSliceCount(),Math.max(f.getSliceCount()/3,Math.max(e.getSliceCount()/3,d.getSliceCount()/3))),a=Math.ceil(a),b=0;b<a;b++){var j=f.getValue(b,3),q=e.getValue(b,3),k=d.getValue(b,3),n=mat4.create();mat4.identity(n);mat4.lookAt(vec3.create(j),vec3.create(q),vec3.create(k),n);mat4.multiply(h,n,n);g.isConnected()&&mat4.multiply(g.getValue(b),n,n);c.setValue(b,n)}c.setSliceCount(a)}};
VVVV.Nodes.LookAtTransformVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.LookAtTransform=function(a,b){this.constructor(a,"LookAt (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),f=this.addInputPin("Position X",[0],VVVV.PinTypes.Value),e=this.addInputPin("Position Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Position Z",[0],VVVV.PinTypes.Value),c=this.addInputPin("LookAt X",[0],VVVV.PinTypes.Value),
h=this.addInputPin("LookAt Y",[0],VVVV.PinTypes.Value),l=this.addInputPin("LookAt Z",[1],VVVV.PinTypes.Value),p=this.addInputPin("UpVector X",[0],VVVV.PinTypes.Value),j=this.addInputPin("UpVector Y",[1],VVVV.PinTypes.Value),q=this.addInputPin("UpVector Z",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform),n=mat4.create();mat4.identity(n);mat4.scale(n,[-1,1,-1]);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var s=mat4.create();mat4.identity(s);
mat4.lookAt(vec3.create([f.getValue(a),e.getValue(a),d.getValue(a)]),vec3.create([c.getValue(a),h.getValue(a),l.getValue(a)]),vec3.create([p.getValue(a),j.getValue(a),q.getValue(a)]),s);mat4.multiply(n,s,s);g.isConnected()&&mat4.multiply(g.getValue(a),s,s);k.setValue(a,s)}k.setSliceCount(b)}};VVVV.Nodes.LookAtTransform.prototype=new VVVV.Core.Node;
VVVV.Nodes.MultiplyTransform=function(a,b){this.constructor(a,"Multiply (Transform)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=mat4.create(),f=2;this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);var e=this.addInvisiblePin("Transform In Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){f=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,d,f,function(c){return this.addInputPin("Transform In "+(c+
1),[],VVVV.PinTypes.Transform)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var c=this.getMaxInputSliceCount(),a=0;a<c;a++){g=mat4.identity(g);for(var b=f-1;0<=b;b--)if(d[b].isConnected()){var p=d[b].getValue(a);mat4.multiply(g,p,g)}this.trOut.setValue(a,g)}this.trOut.setSliceCount(c)}};VVVV.Nodes.MultiplyTransform.prototype=new VVVV.Core.Node;
VVVV.Nodes.ApplyTransform=function(a,b){this.constructor(a,"ApplyTransform (Transform)",b);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),f=this.addInputPin("X UnTransformed",[0],VVVV.PinTypes.Value),e=this.addInputPin("Y UnTransformed",[0],VVVV.PinTypes.Value),d=this.addInputPin("Z UnTransformed",[0],VVVV.PinTypes.Value),c=this.addOutputPin("X Transformed",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("Y Transformed",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Z Transformed",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++){var q=g.getValue(b),k=[];k[0]=f.getValue(b);k[1]=e.getValue(b);k[2]=d.getValue(b);mat4.multiplyVec3(q,k);c.setValue(b,k[0]);h.setValue(b,k[1]);l.setValue(b,k[2])}c.setSliceCount(a);h.setSliceCount(a);l.setSliceCount(a)}};VVVV.Nodes.ApplyTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.AddValue=function(a,b){this.constructor(a,"Add (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var a=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,f,a,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){g.pinIsChanged()&&
this.initialize();var a=this.getMaxInputSliceCount();e.setSliceCount(a);for(var c=0;c<a;c++){for(var b=parseFloat(f[0].getValue(c)),l=1;l<f.length;l++)b+=parseFloat(f[l].getValue(c));e.setValue(c,b)}}};VVVV.Nodes.AddValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SubtractValue=function(a,b){this.constructor(a,"Subtract (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var a=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,f,a,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){g.pinIsChanged()&&
this.initialize();var a=this.getMaxInputSliceCount();e.setSliceCount(a);for(var c=0;c<a;c++){for(var b=parseFloat(f[0].getValue(c)),l=1;l<f.length;l++)b-=parseFloat(f[l].getValue(c));e.setValue(c,b)}}};VVVV.Nodes.SubtractValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.EqValue=function(a,b){this.constructor(a,"EQ (Value)",b);this.meta={authors:["Matthias Zauner","Fibo"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),e=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),
b=0;b<a;b++){var p=0;Math.abs(g.getValue(b)-f.getValue(b))<=Math.abs(e.getValue(b))&&(p=1);d.setValue(b,p);c.setValue(b,1-p)}d.setSliceCount(a);c.setSliceCount(a)}};VVVV.Nodes.EqValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.GtValue=function(a,b){this.constructor(a,"GT (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){var b=0;parseFloat(g.getValue(c))>parseFloat(f.getValue(c))&&
(b=1);e.setValue(c,b)}e.setSliceCount(a)}};VVVV.Nodes.GtValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.LtValue=function(a,b){this.constructor(a,"LT (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){var b=0;parseFloat(g.getValue(c))<parseFloat(f.getValue(c))&&
(b=1);e.setValue(c,b)}e.setSliceCount(a)}};VVVV.Nodes.LtValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MultiplyValue=function(a,b){this.constructor(a,"Multiply (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=[],e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var a=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,f,a,function(c){return this.addInputPin("Input "+(c+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){g.pinIsChanged()&&
this.initialize();var a=this.getMaxInputSliceCount();e.setSliceCount(a);for(var c=0;c<a;c++){for(var b=parseFloat(f[0].getValue(c)),l=1;l<f.length;l++)b*=parseFloat(f[l].getValue(c));e.setValue(c,b)}}};VVVV.Nodes.MultiplyValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.DivideValue=function(a,b){this.constructor(a,"Divide (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Inputs Count",[2],VVVV.PinTypes.Value);var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),
c=0;c<a;c++)0==f.getValue(c)?e.setValue(c,1):e.setValue(c,g.getValue(c)/f.getValue(c));e.setSliceCount(a)}};VVVV.Nodes.DivideValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.IOBoxValueAdvanced=function(a,b){this.constructor(a,"IOBox (Value Advanced)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Y Input Value",[0],VVVV.PinTypes.Value);this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addOutputPin("Y Output Value",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.inputPins["Y Input Value"].getSliceCount(),b,e=0;e<a;e++)b=parseFloat(this.inputPins["Y Input Value"].getValue(e)),
isFinite(b)||(b=0),this.outputPins["Y Output Value"].setValue(e,b);this.outputPins["Y Output Value"].setSliceCount(this.inputPins["Y Input Value"].getSliceCount())}};VVVV.Nodes.IOBoxValueAdvanced.prototype=new VVVV.Core.Node;
VVVV.Nodes.CountValue=function(a,b){this.constructor(a,"Count (Value)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,
this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwitchValueInput=function(a,b){this.constructor(a,"Switch (Value Input)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),f=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),e=[];this.initialize=function(){var c=Math.max(2,g.getValue(0));VVVV.Helpers.dynamicPins(this,e,c,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};
var d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){g.pinIsChanged()&&this.initialize();for(var c=this.getMaxInputSliceCount(),a=0;a<c;a++)d.setValue(a,e[Math.round(Math.abs(f.getValue(a)))%e.length].getValue(a));d.setSliceCount(c)}};VVVV.Nodes.SwitchValueInput.prototype=new VVVV.Core.Node;
VVVV.Nodes.SelectValue=function(a,b){this.constructor(a,"Select (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Select",[1],VVVV.PinTypes.Value),e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),a=0,b=0;b<c;b++)for(var p=0;p<f.getValue(b);p++)e.setValue(a,
parseFloat(g.getValue(b))),d.setValue(a,b),a++;e.setSliceCount(a);d.setSliceCount(a)}};VVVV.Nodes.SelectValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.AsString=function(a,b){this.constructor(a,"AsString (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["SubType not implemented, always returns float formatting"]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("SubType",["Real (MinFloat .. MaxFloat)"],VVVV.PinTypes.Enum);f.enumOptions=["Real (MinFloat .. MaxFloat)","Integer (MinInt .. MaxInt)"];var e=this.addOutputPin("Output",[0],VVVV.PinTypes.String);
this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){subtype=f.getValue(c).match(/^(.+) \(/)[1];var b;switch(subtype){case "Real":b=parseFloat(g.getValue(c)).toFixed(4);break;case "Integer":b=parseInt(g.getValue(c)).toFixed(0)}e.setValue(c,b)}e.setSliceCount(a)}};VVVV.Nodes.AsString.prototype=new VVVV.Core.Node;
VVVV.Nodes.Frac=function(a,b){this.constructor(a,"Frac (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Whole Part",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Real Part",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){var b=parseFloat(g.getValue(c));f.setValue(c,Math.floor(b));e.setValue(c,b-Math.floor(b))}f.setSliceCount(a);
e.setSliceCount(a)}};VVVV.Nodes.Frac.prototype=new VVVV.Core.Node;
VVVV.Nodes.AddValueSpectral=function(a,b){this.constructor(a,"Add (Value Spectral)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0,e=0,d=0;d<a||0<this.inputPins["Bin Size"].getValue(0)&&
(0<e||0!=b%this.inputPins["Bin Size"].values.length);d++){if(0==e)var c=0;c+=parseFloat(this.inputPins.Input.getValue(d));e++;0<this.inputPins["Bin Size"].getValue(0)?e>=this.inputPins["Bin Size"].getValue(b)&&(this.outputPins.Output.setValue(b,c),b++,e=0):this.outputPins.Output.setValue(0,c)}this.outputPins.Output.setSliceCount(b+(0<e))}};VVVV.Nodes.AddValueSpectral.prototype=new VVVV.Core.Node;
VVVV.Nodes.WaveShaperValue=function(a,b){this.constructor(a,"WaveShaper (Value)",b);this.meta={authors:["sebl"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Shape",["Linear"],VVVV.PinTypes.Enum);f.enumOptions=["Linear","Inverse","Triangle","Sine","Rectangle"];var e=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var a=
this.getMaxInputSliceCount(),c=0;c<a;c++){var b=parseFloat(g.getValue(c));switch(f.getValue(c)){case "Linear":e.setValue(c,b);break;case "Inverse":e.setValue(c,1-b);break;case "Triangle":0.5>b?e.setValue(c,2*b):e.setValue(c,2*(1-b));break;case "Sine":inp=6.28318530717959*((b+0.25)%1);e.setValue(c,Math.sin(inp)/2+0.5);break;case "Rectangle":0.5>b?e.setValue(c,0):e.setValue(c,1)}}e.setSliceCount(a)}};VVVV.Nodes.WaveShaperValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MapValue=function(a,b){this.constructor(a,"Map (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Mirror Mapping Mode not implemented"]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0.5],VVVV.PinTypes.Value),f=this.addInputPin("Source Minimum",[0],VVVV.PinTypes.Value),e=this.addInputPin("Source Maximum",[1],VVVV.PinTypes.Value),d=this.addInputPin("Destination Minimum",[0],VVVV.PinTypes.Value),c=this.addInputPin("Destination Maximum",
[1],VVVV.PinTypes.Value),h=this.addInputPin("Mapping",["Float"],VVVV.PinTypes.Enum);h.enumOptions=["Float","Wrap","Clamp"];var l=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var q=parseFloat(g.getValue(a)),k=parseFloat(f.getValue(a)),n=parseFloat(e.getValue(a)),r=parseFloat(d.getValue(a)),u=parseFloat(c.getValue(a)),s=h.getValue(a);if(n==k)l.setValue(a,r);else{q-=k;n-=k;switch(s){case "Clamp":q=Math.max(0,Math.min(n,
q));break;case "Wrap":q=(n+q%n)%n}l.setValue(a,q*((u-r)/n)+r)}}l.setSliceCount(b)}};VVVV.Nodes.MapValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MinValue=function(a,b){this.constructor(a,"Min (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[];this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,e,a,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){for(var b=void 0,l=0;l<e.length;l++)if(void 0==b||e[l].getValue(c)<b)b=e[l].getValue(c);g.setValue(c,b)}g.setSliceCount(a)}};VVVV.Nodes.MinValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MaxValue=function(a,b){this.constructor(a,"Max (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[];this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,e,a,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){for(var b=void 0,l=0;l<e.length;l++)if(void 0==b||e[l].getValue(c)>b)b=e[l].getValue(c);g.setValue(c,b)}g.setSliceCount(a)}};VVVV.Nodes.MaxValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.ModValue=function(a,b){this.constructor(a,"Mod (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[];this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,e,a,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){for(var b=e[0].getValue(c),l=1;l<e.length;l++)b=0==e[l].getValue(c)?0:b%e[l].getValue(c);g.setValue(c,b)}g.setSliceCount(a)}};VVVV.Nodes.ModValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.PowerValue=function(a,b){this.constructor(a,"Power (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),e=[];this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,e,a,function(c){return this.addInputPin("Input "+(c+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){for(var b=e[0].getValue(c),l=1;l<e.length;l++)b=Math.pow(b,e[l].getValue(c));g.setValue(c,b)}g.setSliceCount(a)}};VVVV.Nodes.PowerValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.RandomValue=function(a,b){this.constructor(a,"Random (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Enabled",[1],VVVV.PinTypes.Value),f=this.addInputPin("Is Integer",[0],VVVV.PinTypes.Value),e=this.addInputPin("Scale",[1],VVVV.PinTypes.Value),d=this.addInputPin("Prevent from doubles",[1],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=
function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++){var p=g.getValue(b),j=f.getValue(b),q=e.getValue(b),k=d.getValue(b),n=c.values[b];void 0==n&&c.setValue(b,0);if(0.5<=p){n=c.values[b];do p=Math.random()*q,0.5<=j&&(p=Math.round(p));while(0.5<=k&&p==n);c.setValue(b,p)}}c.setSliceCount(a)}};VVVV.Nodes.RandomValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SignValue=function(a,b){this.constructor(a,"Sign (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Sign Part",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Absolute Part",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0;c<a;c++){var b=g.getValue(c);f.setValue(c,0==b?0:b/Math.abs(b));
e.setValue(c,Math.abs(b))}e.setSliceCount(a)}};VVVV.Nodes.SignValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.InputMorphValue=function(a,b){this.constructor(a,"InputMorph (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),e=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){var c=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,d,c,function(c){return this.addInputPin("Input "+
(c+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var c=this.getMaxInputSliceCount(),b,a,p,j=0;j<c;j++)b=g.getValue(j),a=((Math.floor(b)+d.length)%d.length+d.length)%d.length,p=((Math.ceil(b)+d.length)%d.length+d.length)%d.length,b-=Math.floor(b),f.setValue(j,(1-b)*d[a].getValue(j)+b*d[p].getValue(j));f.setSliceCount(c)}};VVVV.Nodes.InputMorphValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.Sift=function(a,b){this.constructor(a,"Sift (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],VVVV.PinTypes.Value),f=this.addInputPin("Filter",[0],VVVV.PinTypes.Value),e=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),d=this.addInputPin("Find",["First"],VVVV.PinTypes.Enum);d.enumOptions=["First","Last","All"];var c=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("Input Index",[0],VVVV.PinTypes.Value),l=this.addOutputPin("Filter Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.getMaxInputSliceCount();var b=g.getSliceCount(),a=f.getSliceCount();c.setSliceCount(b);e.getValue(0);for(var q=d.getValue(0),k={},n=0,r=0;r<b;r++){var u=r;"Last"==q&&(u=b-r-1);var s=g.getValue(u);if("All"!=q){if(k[s]){c.setValue(u,0);continue}k[s]=!0}for(var w=0,m=0;m<a;m++)if(filter=f.getValue(m),filter==s){h.setValue(n,u);l.setValue(n,m);n++;w++;break}c.setValue(u,
w)}h.setSliceCount(n);l.setSliceCount(n)}};VVVV.Nodes.Sift.prototype=new VVVV.Core.Node;VVVV.Nodes.Join2dVector=function(a,b){this.constructor(a,"Vector (2d Join)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addOutputPin("XY",[0,0],VVVV.PinTypes.Value);this.evaluate=function(){var b=this.getMaxInputSliceCount();e.setSliceCount(2*b);for(var c=0;c<b;c++)e.setValue(2*c,g.getValue(c)),e.setValue(2*c+1,f.getValue(c))}};
VVVV.Nodes.Join2dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Join3dVector=function(a,b){this.constructor(a,"Vector (3d Join)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addInputPin("Z",[0],VVVV.PinTypes.Value),d=this.addOutputPin("XYZ",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){var c=this.getMaxInputSliceCount();d.setSliceCount(3*c);for(var b=0;b<c;b++)d.setValue(3*
b,g.getValue(b)),d.setValue(3*b+1,f.getValue(b)),d.setValue(3*b+2,e.getValue(b))}};VVVV.Nodes.Join3dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Join4dVector=function(a,b){this.constructor(a,"Vector (4d Join)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("X",[0],VVVV.PinTypes.Value),f=this.addInputPin("Y",[0],VVVV.PinTypes.Value),e=this.addInputPin("Z",[0],VVVV.PinTypes.Value),d=this.addInputPin("W",[0],VVVV.PinTypes.Value),c=this.addOutputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value);this.evaluate=function(){var b=this.getMaxInputSliceCount();
c.setSliceCount(4*b);for(var a=0;a<b;a++)c.setValue(4*a,g.getValue(a)),c.setValue(4*a+1,f.getValue(a)),c.setValue(4*a+2,e.getValue(a)),c.setValue(4*a+3,d.getValue(a))}};VVVV.Nodes.Join4dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Split2dVector=function(a,b){this.constructor(a,"Vector (2d Split)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("XY",[0],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),c=0,a=0;a<b;a+=2)f.setValue(c,g.getValue(a)),e.setValue(c,g.getValue(a+1)),c++;f.setSliceCount(c);
e.setSliceCount(c)}};VVVV.Nodes.Split2dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Split3dVector=function(a,b){this.constructor(a,"Vector (3d Split)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("XYZ",[0],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Z",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),b=0,a=0;a<c;a+=3)f.setValue(b,g.getValue(a)),e.setValue(b,
g.getValue(a+1)),d.setValue(b,g.getValue(a+2)),b++;f.setSliceCount(b);e.setSliceCount(b);d.setSliceCount(b)}};VVVV.Nodes.Split3dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Split4dVector=function(a,b){this.constructor(a,"Vector (4d Split)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value),f=this.addOutputPin("X",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Z",[0],VVVV.PinTypes.Value),c=this.addOutputPin("W",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),
a=0,p=0;p<b;p+=4)f.setValue(a,g.getValue(p)),e.setValue(a,g.getValue(p+1)),d.setValue(a,g.getValue(p+2)),c.setValue(a,g.getValue(p+3)),a++;f.setSliceCount(a);e.setSliceCount(a);d.setSliceCount(a);c.setSliceCount(a)}};VVVV.Nodes.Split4dVector.prototype=new VVVV.Core.Node;
function SimplexNoise(){function a(c){return 0<c?parseInt(c):parseInt(c-1)}function b(c,b,a,d,e){return c[0]*b+c[1]*a+c[2]*d+c[3]*e}var g=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,1]],f=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,
-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,
169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,
128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,
202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],d=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,
0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],
[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]];this.noise2d=function(c,b){var d,f,j;j=0.5*(Math.sqrt(3)-1);j*=c+b;var q=a(c+j),k=a(b+j),n=(3-Math.sqrt(3))/6;j=(q+k)*n;d=c-(q-j);var r=b-(k-j),u,s;d>r?(u=1,s=0):(u=0,s=1);f=d-u+n;var w=r-s+n;j=d-1+2*n;var n=r-1+2*n,m=q&255,k=k&255,q=e[m+e[k]]%12;u=e[m+u+e[k+s]]%12;s=e[m+1+e[k+1]]%12;k=0.5-d*d-r*r;0>k?d=0:(k*=k,d=k*k*(g[q][0]*d+g[q][1]*r));r=0.5-f*f-w*w;0>r?f=0:(r*=r,f=r*r*(g[u][0]*f+g[u][1]*w));w=0.5-j*j-n*n;0>w?j=0:
(w*=w,j=w*w*(g[s][0]*j+g[s][1]*n));return 70*(d+f+j)};this.noise3d=function(c,b,d){var f,j,q,k=(c+b+d)*(1/3),n=a(c+k),r=a(b+k),u=a(d+k),k=1/6;q=(n+r+u)*k;f=c-(n-q);j=b-(r-q);var s=d-(u-q),w,m,t,y,v,z;f>=j?j>=s?(w=1,t=m=0,v=y=1,z=0):(f>=s?(w=1,t=m=0):(m=w=0,t=1),y=1,v=0,z=1):j<s?(m=w=0,t=1,y=0,z=v=1):f<s?(w=0,m=1,y=t=0,z=v=1):(w=0,m=1,t=0,v=y=1,z=0);var B=f-w+k,A=j-m+k,G=s-t+k;q=f-y+2*k;c=j-v+2*k;var E=s-z+2*k;d=f-1+3*k;b=j-1+3*k;var k=s-1+3*k,n=n&255,D=r&255,F=u&255,r=e[n+e[D+e[F]]]%12,u=e[n+w+e[D+
m+e[F+t]]]%12;y=e[n+y+e[D+v+e[F+z]]]%12;n=e[n+1+e[D+1+e[F+1]]]%12;v=0.6-f*f-j*j-s*s;0>v?f=0:(v*=v,f=v*v*(g[r][0]*f+g[r][1]*j+g[r][2]*s));j=0.6-B*B-A*A-G*G;0>j?j=0:(j*=j,j=j*j*(g[u][0]*B+g[u][1]*A+g[u][2]*G));B=0.6-q*q-c*c-E*E;0>B?q=0:(B*=B,q=B*B*(g[y][0]*q+g[y][1]*c+g[y][2]*E));c=0.6-d*d-b*b-k*k;0>c?d=0:(c*=c,d=c*c*(g[n][0]*d+g[n][1]*b+g[n][2]*k));return 32*(f+j+q+d)};this.noise4d=function(c,h,g,p){var j=(Math.sqrt(5)-1)/4,q=(5-Math.sqrt(5))/20,k,n,r,j=(c+h+g+p)*j,u=a(c+j),s=a(h+j),w=a(g+j),m=a(p+
j),j=(u+s+w+m)*q;k=c-(u-j);n=h-(s-j);var t=g-(w-j),y=p-(m-j);p=(k>n?32:0)+(k>t?16:0)+(n>t?8:0)+(k>y?4:0)+(n>y?2:0)+(t>y?1:0);var v,z,B,A,G,E,D,F,C,H,K,L;v=3<=d[p][0]?1:0;z=3<=d[p][1]?1:0;B=3<=d[p][2]?1:0;A=3<=d[p][3]?1:0;G=2<=d[p][0]?1:0;E=2<=d[p][1]?1:0;D=2<=d[p][2]?1:0;F=2<=d[p][3]?1:0;C=1<=d[p][0]?1:0;H=1<=d[p][1]?1:0;K=1<=d[p][2]?1:0;L=1<=d[p][3]?1:0;var M=k-v+q,N=n-z+q,O=t-B+q,P=y-A+q;r=k-G+2*q;var I=n-E+2*q,Q=t-D+2*q,R=y-F+2*q,j=k-C+3*q;c=n-H+3*q;var S=t-K+3*q,T=y-L+3*q;p=k-1+4*q;g=n-1+4*q;
h=t-1+4*q;var q=y-1+4*q,u=u&255,s=s&255,J=w&255,m=m&255,w=e[u+e[s+e[J+e[m]]]]%32;v=e[u+v+e[s+z+e[J+B+e[m+A]]]]%32;G=e[u+G+e[s+E+e[J+D+e[m+F]]]]%32;C=e[u+C+e[s+H+e[J+K+e[m+L]]]]%32;m=e[u+1+e[s+1+e[J+1+e[m+1]]]]%32;s=0.6-k*k-n*n-t*t-y*y;0>s?k=0:(s*=s,k=s*s*b(f[w],k,n,t,y));n=0.6-M*M-N*N-O*O-P*P;0>n?n=0:(n*=n,n=n*n*b(f[v],M,N,O,P));t=0.6-r*r-I*I-Q*Q-R*R;0>t?r=0:(t*=t,r=t*t*b(f[G],r,I,Q,R));I=0.6-j*j-c*c-S*S-T*T;0>I?j=0:(I*=I,j=I*I*b(f[C],j,c,S,T));c=0.6-p*p-g*g-h*h-q*q;0>c?p=0:(c*=c,p=c*c*b(f[m],p,g,
h,q));return 27*(k+n+r+j+p)}}
VVVV.Nodes.Simplex2d=function(a,b){this.constructor(a,"Simplex (2d)",b);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Position Input XY",[0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),e=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),d=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=new SimplexNoise;this.evaluate=function(){for(var b=
Math.ceil(Math.max(0.5*g.getSliceCount())),a=parseInt(f.getValue(0)),j=e.getValue(0),q=d.getValue(0),k=0;k<b;k++){for(var n=g.getValue(2*k),r=g.getValue(2*k+1),u=0,s=0;s<=a;s++)var w=Math.pow(j,s),u=u+h.noise2d(n*w,r*w)*Math.pow(q,s);c.setValue(k,u)}c.setSliceCount(b)}};VVVV.Nodes.Simplex2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Simplex3d=function(a,b){this.constructor(a,"Simplex (3d)",b);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Position Input XYZ",[0.5,0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),e=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),d=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=new SimplexNoise;this.evaluate=
function(){for(var b=Math.ceil(Math.max(g.getSliceCount()/3)),a=parseInt(f.getValue(0)),j=e.getValue(0),q=d.getValue(0),k=0;k<b;k++){for(var n=g.getValue(3*k),r=g.getValue(3*k+1),u=g.getValue(3*k+2),s=0,w=0;w<=a;w++)var m=Math.pow(j,w),s=s+h.noise3d(n*m,r*m,u*m)*Math.pow(q,w);c.setValue(k,s)}c.setSliceCount(b)}};VVVV.Nodes.Simplex3d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Simplex4d=function(a,b){this.constructor(a,"Simplex (4d)",b);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Position Input XYZW",[0.5,0.5,0.5,0.5],VVVV.PinTypes.Value),f=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),e=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),d=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),h=new SimplexNoise;this.evaluate=
function(){for(var b=Math.ceil(Math.max(g.getSliceCount()/3)),a=parseInt(f.getValue(0)),j=e.getValue(0),q=d.getValue(0),k=0;k<b;k++){for(var n=g.getValue(4*k),r=g.getValue(4*k+1),u=g.getValue(4*k+2),s=g.getValue(4*k+3),w=0,m=0;m<=a;m++)var t=Math.pow(j,m),w=w+h.noise4d(n*t,r*t,u*t,s*t)*Math.pow(q,m);c.setValue(k,w)}c.setSliceCount(b)}};VVVV.Nodes.Simplex4d.prototype=new VVVV.Core.Node;VVVV.ShaderCodeResources={};VVVV.Types.ShaderCodeResource=function(){var a="";this.relatedNodes=[];this.definingNode=void 0;this.setSourceCode=function(b){a=b;for(b=0;b<this.relatedNodes.length;b++)this.relatedNodes[b].shaderSourceUpdated(a)};this.addRelatedNode=function(b){this.relatedNodes.push(b);""!=a&&b.shaderSourceUpdated(a)}};var identity=mat4.identity(mat4.create());
VVVV.Types.WebGlRenderState=function(){this.alphaBlending=!0;this.srcBlendMode="SRC_ALPHA";this.destBlendMode="ONE_MINUS_SRC_ALPHA";this.enableZWrite=!0;this.depthFunc="LEQUAL";this.depthOffset=0;this.polygonDrawMode="TRIANGLES";this.copy_attributes=function(a){this.alphaBlending=a.alphaBlending;this.alphaFunc=a.alphaFunc;this.srcBlendMode=a.srcBlendMode;this.destBlendMode=a.destBlendMode;this.enableZwrite=a.enableZWrite;this.depthFunc=a.depthFunc;this.depthOffset=a.depthOffset;this.polygonDrawMode=
a.polygonDrawMode};this.apply=function(a){this.alphaBlending?a.enable(a.BLEND):a.disable(a.BLEND);a.blendFunc(a[this.srcBlendMode],a[this.destBlendMode]);a.depthMask(this.enableZWrite)}};
VVVV.Types.VertexBuffer=function(a,b){this.vbo=void 0;this.subBuffers={};this.length=0;this.setSubBuffer=function(b,a,e){this.subBuffers[b]={usage:b,data:new Float32Array(e),size:a,offset:this.length};this.length+=this.subBuffers[b].data.byteLength};this.setSubBuffer("POSITION",3,b);this.create=function(){this.vbo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.vbo);a.bufferData(a.ARRAY_BUFFER,this.length,a.STATIC_DRAW);_(this.subBuffers).each(function(b){a.bufferSubData(a.ARRAY_BUFFER,b.offset,
b.data)})}};VVVV.Types.Mesh=function(a,b,g){this.vertexBuffer=b;this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),a.STATIC_DRAW);this.numIndices=g.length};VVVV.Types.Layer=function(){this.mesh=null;this.textures=[];this.shader=null;this.uniforms={};this.uniformNames=[];this.renderState=defaultWebGlRenderState;this.toString=function(){return"Layer"}};
VVVV.PinTypes.WebGlResource={typeName:"WebGlResource",reset_on_disconnect:!0,connectionChangedHandlers:{webglresource:function(){function a(b){return"WebGlResource"==b||"WebGlTexture"==b}if(this.direction!=PinDirection.Input){var b=this.node,g=b.findDownstreamNodes("Renderer (EX9)");b.renderContexts||(b.renderContexts=[]);void 0==b.contextChanged&&(b.contextChanged=!1);for(var f=0;f<g.length;f++)b.contextChanged|=!b.renderContexts[f]||b.renderContexts[f].canvas.id!=g[f].ctxt.id,b.renderContexts[f]=
g[f].ctxt,b.dirty=!0;b.renderContexts.length!=g.length&&(b.renderContexts.length=g.length,b.contextChanged=!0,b.dirty=!0);b.isSubpatch||_(b.inputPins).each(function(e){var d;e.markPinAsChanged();"Renderer (EX9)"!=b.nodename&&e.isConnected()&&(0<e.links.length?d=e.links[0].fromPin:0<e.masterPin.links[0].fromPin.links.length&&(d=e.masterPin.links[0].fromPin),d&&a(d.typeName)&&d.connectionChanged())});this.masterPin&&a(this.masterPin.typeName)&&this.masterPin.connectionChanged()}}},defaultValue:function(){return new VVVV.Types.Layer}};
VVVV.PinTypes.WebGlTexture={typeName:"WebGlTexture",reset_on_disconnect:!0,connectionChangedHandlers:{webglresource:VVVV.PinTypes.WebGlResource.connectionChangedHandlers.webglresource},defaultValue:function(){return VVVV.DefaultTexture}};var defaultWebGlRenderState=new VVVV.Types.WebGlRenderState;VVVV.PinTypes.WebGlRenderState={typeName:"WebGlRenderState",reset_on_disconnect:!0,defaultValue:function(){return defaultWebGlRenderState}};VVVV.DefaultTexture="Empty Texture";
VVVV.Types.ShaderProgram=function(){this.uniformSpecs={};this.attributeSpecs={};this.attribSemanticMap={};this.uniformSemanticMap={};var a="",b="",g,f;this.isSetup=!1;this.shaderProgram=void 0;this.log="";var e=this;this.extractSemantics=function(b){e.attributeSpecs={};e.attribSemanticMap={};e.uniformSpecs={};e.uniformSemanticMap={};for(var c=/(uniform|attribute) ([a-zA-Z]+)([0-9xD]*) ([a-zA-Z0-9_]+)( : ([A-Z0-9]+))?( = \{?([^;\}]+)\}?)?;/g,a;a=c.exec(b);)"attribute"==a[1]&&!e.attributeSpecs[a[4]]?
(e.attributeSpecs[a[4]]={varname:a[4],semantic:a[6],position:0},void 0!=a[6]&&(e.attribSemanticMap[a[6]]=a[4])):"uniform"==a[1]&&!e.uniformSpecs[a[4]]&&(e.uniformSpecs[a[4]]={varname:a[4],semantic:a[6],position:0,type:a[2],defaultValue:a[8],dimension:""==a[3]?1:a[3]},void 0!=a[6]&&(e.uniformSemanticMap[a[6]]=a[4]))};this.setVertexShader=function(b){a=b};this.setFragmentShader=function(a){b=a};this.setup=function(d){this.log="";g=d.createShader(d.VERTEX_SHADER);d.shaderSource(g,a.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,
"$1"));d.compileShader(g);d.getShaderParameter(g,d.COMPILE_STATUS)||(this.log=d.getShaderInfoLog(g),console.log(this.log));f=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(f,b.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));d.compileShader(f);d.getShaderParameter(f,d.COMPILE_STATUS)||(this.log=d.getShaderInfoLog(f),console.log(this.log));this.shaderProgram=d.createProgram();d.attachShader(this.shaderProgram,g);d.attachShader(this.shaderProgram,f);d.linkProgram(this.shaderProgram);
d.getProgramParameter(this.shaderProgram,d.LINK_STATUS)||console.log("Could not initialise shaders");_(this.attributeSpecs).each(function(b){b.position=d.getAttribLocation(e.shaderProgram,b.varname)});_(this.uniformSpecs).each(function(b){b.position=d.getUniformLocation(e.shaderProgram,b.varname)});this.isSetup=!0;return""==this.log}};
VVVV.Nodes.FileTexture=function(a,b){this.constructor(a,"FileTexture (EX9.Texture)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Always loads in background","No reload pin","No preload pin (preloading handled by browser)","No up and running pin","No texture info outputs"]};this.auto_evaluate=!1;var g=this.addInputPin("Filename",[""],VVVV.PinTypes.String),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),
e=this.addInvisiblePin("Type",["Texture"],VVVV.PinTypes.Enum);e.enumOptions=["Texture","Cube Texture"];var d=[];this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){if(this.contextChanged){for(var a=0;a<d.length;a++)d[a].context.deleteTexture(d[a]);d=[]}if(g.pinIsChanged()||e.pinIsChanged()||this.contextChanged){for(var l=e.getValue(0),p=this.getMaxInputSliceCount(),a=0;a<p;a++){var j=VVVV.Helpers.prepareFilePath(g.getValue(a),this.parentPatch);0===j.indexOf("http://")&&
void 0!==VVVV.ImageProxyPrefix&&(j=VVVV.ImageProxyPrefix+encodeURI(j));d[a]=b.createTexture();d[a].context=b;"Texture"==l?(d[a].image=new Image,d[a].image.onload=function(a){return function(){b.bindTexture(b.TEXTURE_CUBE_MAP,null);b.bindTexture(b.TEXTURE_2D,d[a]);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,d[a].image);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,null);f.setValue(a,
d[a])}}(a),d[a].image.src=j):"Cube Texture"==l&&(d[a].image=new Image,d[a].image.onload=function(a){return function(){var e=[{face:b.TEXTURE_CUBE_MAP_POSITIVE_X,offset:[2,1]},{face:b.TEXTURE_CUBE_MAP_NEGATIVE_X,offset:[0,1]},{face:b.TEXTURE_CUBE_MAP_POSITIVE_Y,offset:[1,0]},{face:b.TEXTURE_CUBE_MAP_NEGATIVE_Y,offset:[1,2]},{face:b.TEXTURE_CUBE_MAP_POSITIVE_Z,offset:[1,1]},{face:b.TEXTURE_CUBE_MAP_NEGATIVE_Z,offset:[3,1]}];b.bindTexture(b.TEXTURE_CUBE_MAP,d[a]);var h=$('<canvas style="display:none" width="'+
this.width/4+'" height="'+this.height/3+'"></canvas>');$("body").append(h);for(var g=h.get(0).getContext("2d"),j=0;6>j;j++)g.save(),g.translate(-this.width/4*e[j].offset[0],-this.height/3*e[j].offset[1]),g.drawImage(this,0,0),b.texImage2D(e[j].face,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,h.get(0)),b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MIN_FILTER,b.NEAREST),g.restore();b.bindTexture(b.TEXTURE_CUBE_MAP,null);h.remove();f.setValue(a,d[a])}}(a),
d[a].image.src=j);f.setValue(a,VVVV.defaultTexture)}f.setSliceCount(p)}this.contextChanged=!1}}};this.destroy=function(){for(var b=0;b<d.length;b++)d[b].context.deleteTexture(d[b])}};VVVV.Nodes.FileTexture.prototype=new VVVV.Core.Node;
VVVV.Nodes.DX9Texture=function(a,b){this.constructor(a,"DX9Texture (EX9.Texture)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Using WebGL renderer as source doesnt work correctly in Chrome."]};var g=this.addInputPin("Source",[],VVVV.PinTypes.WebGlResource),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),e;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){this.contextChanged&&
e&&(e.context.deleteTexture(e),e=void 0);if(g.isConnected()){var a=g.getValue(0);if(!a)return;(0!=(a.width&a.width-1)||0!=(a.height&a.height-1))&&console.log("Warning: Source renderer's width/height is not a power of 2. DX9Texture will most likely not work.");a instanceof WebGLTexture?f.setValue(0,a):(void 0==e&&(e=b.createTexture(),e.context=b),b.bindTexture(b.TEXTURE_2D,e),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MIN_FILTER,b.LINEAR),b.bindTexture(b.TEXTURE_2D,null),f.setValue(0,e))}else delete e,b.deleteTexture(e),f.setValue(0,void 0);this.contextChanged=!1}}};this.destroy=function(){e&&e.context.deleteTexture(e)}};VVVV.Nodes.DX9Texture.prototype=new VVVV.Core.Node;
VVVV.Nodes.VideoTexture=function(a,b){this.constructor(a,"VideoTexture (EX9.Texture VMR9)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Only supports power-of-2 sized videos","Has no output pins for meta data"]};var g=this.addInputPin("Video",[],this),f=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),e;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b)if(g.isConnected()){var a=
g.getValue(0);(0!=(a.videoWidth&a.videoWidth-1)||0!=(a.videoHeight&a.videoHeight-1))&&console.log("Warning: Video width/height is not a power of 2. VideoTexture will most likely not work.");if(void 0==e||this.contextChanged)e=b.createTexture();b.bindTexture(b.TEXTURE_2D,e);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,null);f.setValue(0,
e);this.contextChanged=!1}else delete e,b.deleteTexture(e),f.setValue(0,void 0)}}};VVVV.Nodes.VideoTexture.prototype=new VVVV.Core.Node;
VVVV.Nodes.VertexBufferJoin=function(a,b){this.constructor(a,"VertexBuffer (EX9.Geometry Join)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),f=this.addInputPin("Normal XYZ",[0,0,0],VVVV.PinTypes.Value),e=this.addInputPin("Texture Coordinate 0 XY",[0,0],VVVV.PinTypes.Value),d=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),c=this.addOutputPin("Vertex Buffer",
[],VVVV.PinTypes.WebGlResource),h=null;this.evaluate=function(){var b=this.renderContexts[0];if(b&&0.5<=d.getValue(0)){for(var a=[],j=[],q=[],k=0;k<this.getMaxInputSliceCount();k++)a[k]=parseFloat(g.getValue(k)),j[k]=parseFloat(e.getValue(k)),q[k]=parseFloat(f.getValue(k));h=new VVVV.Types.VertexBuffer(b,a);h.setSubBuffer("TEXCOORD0",2,j);h.setSubBuffer("NORMAL",3,q);h.create();c.setValue(0,h)}}};VVVV.Nodes.VertexBufferJoin.prototype=new VVVV.Core.Node;
VVVV.Nodes.MeshJoin=function(a,b){this.constructor(a,"Mesh (EX9.Geometry Join)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Vertex Buffer",[],VVVV.PinTypes.WebGlResource),f=this.addInputPin("Indices",[0],VVVV.PinTypes.Value),e=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),c=null;this.evaluate=function(){var b=this.renderContexts[0];
b&&0.5<=e.getValue(0)&&(g.isConnected()?(c=new VVVV.Types.Mesh(b,g.getValue(0),f.values),d.setValue(0,c)):(d.setValue(0,void 0),delete c))}};VVVV.Nodes.MeshJoin.prototype=new VVVV.Core.Node;
VVVV.Nodes.Grid=function(a,b){this.constructor(a,"Grid (EX9.Geometry)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Resolution X",[2],VVVV.PinTypes.Value),f=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value),e=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),d=null;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){for(var a=parseInt(g.getValue(0)),
l=parseInt(f.getValue(0)),p=[],j=[],q=[],k=0,n=0;n<l;n++)for(var r=0;r<a;r++)p.push(parseFloat(r)/(a-1)-0.5),p.push(0.5-parseFloat(n)/(l-1)),p.push(0),k++,j.push(0),j.push(0),j.push(1),q.push(parseFloat(r)/(a-1)),q.push(parseFloat(n)/(l-1));p=new VVVV.Types.VertexBuffer(b,p);p.setSubBuffer("TEXCOORD0",2,q);p.setSubBuffer("NORMAL",3,j);p.create();j=[];for(n=0;n<l-1;n++)for(r=0;r<a-1;r++)q=r+a*n,j.push(q),j.push(q+1),j.push(q+a+1),j.push(q+a+1),j.push(q+a),j.push(q);d=new VVVV.Types.Mesh(b,p,j);e.setValue(0,
d)}}}};VVVV.Nodes.Grid.prototype=new VVVV.Core.Node;
VVVV.Nodes.Sphere=function(a,b){this.constructor(a,"Sphere (EX9.Geometry)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Radius",[0.5],VVVV.PinTypes.Value),f=this.addInputPin("Resolution X",[15],VVVV.PinTypes.Value),e=this.addInputPin("Resolution Y",[15],VVVV.PinTypes.Value),d=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),c=null;this.evaluate=function(){if(this.renderContexts){var b=
this.renderContexts[0];if(b){for(var a=parseInt(f.getValue(0)),p=parseInt(e.getValue(0)),j=parseFloat(g.getValue(0)),q=[],k=[],n=[],r=0;r<p+1;r++)for(var u=Math.cos(-parseFloat(r)/p*Math.PI),s=0;s<a;s++){var w=Math.cos(2*(parseFloat(s)/a)*Math.PI)*Math.cos(Math.asin(u)),m=Math.sin(2*(parseFloat(s)/a)*Math.PI)*Math.cos(Math.asin(u));q.push(w*j);q.push(u*j);q.push(m*j);k.push(w);k.push(u);k.push(m);n.push(parseFloat(s)/a);n.push(parseFloat(r)/p)}j=new VVVV.Types.VertexBuffer(b,q);j.setSubBuffer("TEXCOORD0",
2,n);j.setSubBuffer("NORMAL",3,k);j.create();k=[];for(r=0;r<p;r++)for(s=0;s<a;s++)n=a*r,q=s+n,k.push(q),k.push((q+1)%a+n),k.push((q+1)%a+a+n),k.push((q+1)%a+a+n),k.push(q+a),k.push(q);c=new VVVV.Types.Mesh(b,j,k);d.setValue(0,c)}}}};VVVV.Nodes.Sphere.prototype=new VVVV.Core.Node;
VVVV.Nodes.Cylinder=function(a,b){this.constructor(a,"Cylinder (EX9.Geometry)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Radius 1",[0.5],VVVV.PinTypes.Value),f=this.addInputPin("Radius 2",[0.5],VVVV.PinTypes.Value),e=this.addInputPin("Length",[1],VVVV.PinTypes.Value),d=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),c=this.addInputPin("Caps",[1],VVVV.PinTypes.Value),h=this.addInputPin("Resolution X",
[15],VVVV.PinTypes.Value),l=this.addInputPin("Resolution Y",[1],VVVV.PinTypes.Value),p=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),j=null;this.evaluate=function(){if(this.renderContexts){var b=this.renderContexts[0];if(b){var a=parseInt(h.getValue(0)),n=parseInt(l.getValue(0)),r=parseFloat(g.getValue(0)),u=parseFloat(f.getValue(0)),s=parseFloat(e.getValue(0)),w=parseFloat(d.getValue(0)),m=[],t=[],y=[];m.push(0);m.push(s/2);m.push(0);t.push(0);t.push(1);t.push(0);y.push(0);y.push(0);m.push(0);
m.push(-s/2);m.push(0);t.push(0);t.push(-1);t.push(0);y.push(0);y.push(0);for(var v=0;v<n+1;v++)for(var z=parseFloat(v)/n,B=(z-0.5)*-s,A=0;A<a+1;A++){var G=Math.cos(2*(parseFloat(A)/a)*Math.PI*w-Math.PI*w-Math.PI/2),E=Math.sin(2*(parseFloat(A)/a)*Math.PI*w-Math.PI*w-Math.PI/2),D=z*u+(1-z)*r;m.push(G*D);m.push(B);m.push(E*D);t.push(G);t.push(0);t.push(E);y.push(parseFloat(A)/a);y.push(parseFloat(v)/n)}r=new VVVV.Types.VertexBuffer(b,m);r.setSubBuffer("TEXCOORD0",2,y);r.setSubBuffer("NORMAL",3,t);r.create();
t=[];if(0.5<c.getValue(0))for(z=0;2>z;z++)for(A=0;A<a;A++)t.push(z),t.push(2+A+z+z*n*(a+1)),t.push(2+A+(1-z)+z*n*(a+1));for(v=0;v<n;v++)for(A=0;A<a;A++)z=A+(a+1)*v+2,t.push(z),t.push(z+1),t.push(z+a+2),t.push(z+a+2),t.push(z+a+1),t.push(z);j=new VVVV.Types.Mesh(b,r,t);p.setValue(0,j)}}}};VVVV.Nodes.Cylinder.prototype=new VVVV.Core.Node;
VVVV.Nodes.BlendWebGLAdvanced=function(a,b){function g(b){switch(b){case "One":return"ONE";case "Zero":return"ZERO";case "SrcAlpha":return"SRC_ALPHA";case "InvSrcAlpha":return"ONE_MINUS_SRC_ALPHA";case "DestAlpha":return"DST_ALPHA";case "InvDestAlpha":return"ONE_MINUS_DST_ALPHA";case "SrcColor":return"SRC_COLOR";case "InvSrcColor":return"ONE_MINUS_SRC_COLOR";case "DestColor":return"DST_COLOR";case "InvDestColor":return"ONE_MINUS_DST_COLOR"}return null}this.constructor(a,"Blend (EX9.RenderState Advanced)",
b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),e=this.addInputPin("Alpha Blending",[1],VVVV.PinTypes.Value),d=this.addInputPin("Source Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum),c=this.addInputPin("Destination Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum);d.enumOptions=c.enumOptions="One Zero SrcAlpha InvSrcAlpha DestAlpha InvDestAlpha SrcColor InvSrcColor DestColor InvDestColor".split(" ");
var h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),l=[];this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)void 0==l[a]&&(l[a]=new VVVV.Types.WebGlRenderState),l[a].copy_attributes(f.getValue(a)),l[a].alphaBlending=0.5<parseFloat(e.getValue(a)),l[a].srcBlendMode=g(d.getValue(a)),l[a].destBlendMode=g(c.getValue(a)),h.setValue(a,l[a]);h.setSliceCount(b)}};VVVV.Nodes.BlendWebGLAdvanced.prototype=new VVVV.Core.Node;
VVVV.Nodes.BlendWebGL=function(a,b){this.constructor(a,"Blend (EX9.RenderState)",b);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Draw Mode",["Blend"],VVVV.PinTypes.Enum);f.enumOptions=["Add","Blend","ColorAsAlphaAdd","ColorAsAlphaBlend","Multiply"];var e=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),d=[];this.evaluate=
function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){void 0==d[a]&&(d[a]=new VVVV.Types.WebGlRenderState);d[a].copy_attributes(g.getValue(a));switch(f.getValue(a)){case "Add":d[a].srcBlendMode="SRC_ALPHA";d[a].destBlendMode="ONE";break;case "Blend":d[a].srcBlendMode="SRC_ALPHA";d[a].destBlendMode="ONE_MINUS_SRC_ALPHA";break;case "ColorAsAlphaAdd":d[a].srcBlendMode="SRC_COLOR";d[a].destBlendMode="ONE";break;case "ColorAsAlphaBlend":d[a].srcBlendMode="SRC_COLOR";d[a].destBlendMode="ONE_MINUS_SRC_COLOR";
break;case "Multiply":d[a].srcBlendMode="ZERO",d[a].destBlendMode="SRC_COLOR"}e.setValue(a,d[a])}e.setSliceCount(b)}};VVVV.Nodes.BlendWebGL.prototype=new VVVV.Core.Node;
VVVV.Nodes.FillWebGL=function(a,b){this.constructor(a,"Fill (EX9.RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["does not actually draw wireframe, because this is not supported in WebGL, but makes renderer use gl.LINE instead of gl.TRIANGLES when drawing"]};var g=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Fill Mode",["Solid"],VVVV.PinTypes.Enum);f.enumOptions=["Point","Solid","WireFrame"];
var e=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),d=[];this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){void 0==d[a]&&(d[a]=new VVVV.Types.WebGlRenderState);d[a].copy_attributes(g.getValue(a));switch(f.getValue(a)){case "Point":d[a].polygonDrawMode="POINTS";break;case "Solid":d[a].polygonDrawMode="TRIANGLES";break;case "WireFrame":d[a].polygonDrawMode="LINES"}e.setValue(a,d[a])}e.setSliceCount(b)}};VVVV.Nodes.FillWebGL.prototype=new VVVV.Core.Node;
VVVV.Nodes.ZWriteEnableWebGL=function(a,b){function g(b){switch(b){case "Never":return"NEVER";case "Less":return"LESS";case "LessEqual":return"LEQUAL";case "Equal":return"EQUAL";case "NotEqual":return"NOTEQUAL";case "Greater":return"GREATER";case "GreaterEqual":return"GEQUAL";case "Always":return"ALWAYS"}return null}this.constructor(a,"ZWriteEnable (EX9.RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",
[],VVVV.PinTypes.WebGlRenderState),e=this.addInputPin("ZWrite Enable",[1],VVVV.PinTypes.Value),d=this.addInputPin("Compare Function",["Always"],VVVV.PinTypes.Enum);d.enumOptions="Never Less LessEqual Equal NotEqual Greater GreaterEqual Always".split(" ");var c=this.addInputPin("Depth Bias",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),l=[];this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)void 0==l[a]&&(l[a]=new VVVV.Types.WebGlRenderState),
l[a].copy_attributes(f.getValue(a)),l[a].enableZWrite=0.5<parseFloat(e.getValue(a)),l[a].depthFunc=g(d.getValue(a)),l[a].depthOffset=parseFloat(c.getValue(0)),h.setValue(a,l[a]);h.setSliceCount(b)}};VVVV.Nodes.ZWriteEnableWebGL.prototype=new VVVV.Core.Node;
VVVV.Nodes.GenericShader=function(a,b){this.constructor(a,"GenericShader (EX9.Effect)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.shaderFile="";var g=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState),f=this.addInputPin("Mesh",[],VVVV.PinTypes.WebGlResource),e=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),d=this.addInputPin("Technique",[""],VVVV.PinTypes.Enum);d.enumOptions=[""];this.addOutputPin("Layer",
[],VVVV.PinTypes.WebGlResource);var c=[],h=null,l,p=!1,j=[],q=this;this.initialize=function(){var a=["Render State","Mesh","Transform","Technique"];_(q.inputPins).each(function(b){0>a.indexOf(b.pinname)&&(b.unvalidated=!0,j.push(b))});void 0==VVVV.ShaderCodeResources[q.shaderFile]?(VVVV.ShaderCodeResources[q.shaderFile]=new VVVV.Types.ShaderCodeResource,VVVV.ShaderCodeResources[q.shaderFile].addRelatedNode(q),$.ajax({url:VVVV.Helpers.prepareFilePath(q.shaderFile,q.parentPatch),async:!1,dataType:"text",
success:function(a){VVVV.ShaderCodeResources[q.shaderFile].setSourceCode(a)},error:function(){console.log("ERROR: Could not load shader file "+q.shaderFile.replace("%VVVV%",VVVV.Root));VVVV.onNotImplemented("Could not load shader file "+q.shaderFile.replace("%VVVV%",VVVV.Root))}})):VVVV.ShaderCodeResources[q.shaderFile].addRelatedNode(q)};this.shaderSourceUpdated=function(a){l=a;h||(h=new VVVV.Types.ShaderProgram);q.addUniformPins();q.setupShader();_(q.inputPins).each(function(a){a.markPinAsChanged()});
p=!0;this.parentPatch.afterUpdate()};this.addUniformPins=function(){h.extractSemantics(l);for(var a=[],b=0;b<j.length;b++)h.uniformSpecs[j[b].pinname.replace(/ /g,"_")]||(q.removeInputPin(j[b].pinname),a.push(b));for(b=0;b<a.length;b++)j.splice(a[b],1);_(h.uniformSpecs).each(function(a){if(!("VIEW"==a.semantic||"PROJECTION"==a.semantic||"WORLD"==a.semantic)){var b=VVVV.PinTypes.Value,c=[];switch(a.type){case "mat":b=VVVV.PinTypes.Transform;break;case "samplerCube":case "sampler":b=VVVV.PinTypes.WebGlTexture;
break;default:"COLOR"==a.semantic?(b=VVVV.PinTypes.Color,c=["1.0, 1.0, 1.0, 1.0"]):c=[0],a.defaultValue&&(c="COLOR"!=a.semantic?_(a.defaultValue.split(",")).map(function(a){return parseFloat(a)}):[a.defaultValue])}for(var d=0;d<j.length;d++)if(j[d].pinname==a.varname.replace(/_/g," ")){j[d].dimensions=a.dimension;j[d].unvalidated&&!j[d].isConnected()&&(j[d].values=q.defaultPinValues[j[d].pinname]?q.defaultPinValues[j[d].pinname].slice():c);j[d].typeName!=b.typeName&&(a=j[d].values.slice(),j[d].setType(b),
j[d].unvalidated&&(b.primitive&&!j[d].isConnected())&&(j[d].values=a),j[d].isConnected()&&!j[d].unvalidated&&(j[d].connectionChanged(),j[d].links[0].destroy()));j[d].unvalidated=!1;return}b=q.addInputPin(a.varname.replace(/_/g," "),c,b);b.dimensions=a.dimension;j.push(b)}})};this.setupShader=function(){var a=d.getValue(0),a=a.replace(/^\s*/,"").replace(/\s*$/,""),b=RegExp(/(vertex_shader|fragment_shader)\{([^\}]+)\}/g);d.enumOptions=[];for(var c;null!=(c=b.exec(l));)d.enumOptions=d.enumOptions.concat(c[2].replace(/\s/g,
"").split(","));d.enumOptions=d.enumOptions.filter(function(a,b,c){return c.indexOf(a)===b});0==d.enumOptions.length&&d.enumOptions.push("");if(""==a||0>d.enumOptions.indexOf(a))a=d.enumOptions[0],d.setValue(0,a);var e=RegExp("vertex_shader(\\{([a-zA-Z0-9]+,\\s*)*"+a+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)"),b=RegExp("fragment_shader(\\{([a-zA-Z0-9]+,\\s*)*"+a+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)");c=/STARTOFSTRING((\r?\n|.)*?)(vertex_shader|fragment_shader)/.exec("STARTOFSTRING"+
l);var f=c[1];void 0==(c=e.exec(l+"\nfragment_shader"))?console.log("ERROR: No vertex shader code for technique "+a+" found"):(e=c[4],void 0==(c=b.exec(l+"\nfragment_shader"))?console.log("ERROR: No fragment shader code for technique "+a+" found"):(h.setFragmentShader(f+c[4]),h.setVertexShader(f+e)))};this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a&&h){if(!h.isSetup||this.contextChanged||d.pinIsChanged())this.setupShader(),h.setup(a)?VVVV.ShaderCodeResources[q.shaderFile].definingNode&&
VVVV.ShaderCodeResources[q.shaderFile].definingNode.showStatus("success","Successfully compiled"):VVVV.ShaderCodeResources[q.shaderFile].definingNode&&VVVV.ShaderCodeResources[q.shaderFile].definingNode.showStatus("error",h.log);var b=0;_(this.inputPins).each(function(a){var c=a.getSliceCount();a=a.pinname.replace(/ /g,"_");h.uniformSpecs[a]&&("vec"==h.uniformSpecs[a].type&&"COLOR"!=h.uniformSpecs[a].semantic)&&(c=parseInt(c/h.uniformSpecs[a].dimension));c>b&&(b=c)});if(!f.isConnected()||void 0==
f.getValue(0))b=0;var l=c.length;if(this.contextChanged||p)l=0;b<l&&c.splice(b,l-b);for(var u=l;u<b;u++)c[u]=new VVVV.Types.Layer,c[u].mesh=f.getValue(0),c[u].shader=h,_(h.uniformSpecs).each(function(a){c[u].uniformNames.push(a.varname);c[u].uniforms[a.varname]={uniformSpec:a,value:void 0}});if(f.pinIsChanged())for(u=0;u<b;u++)c[u].mesh=f.getValue(0);for(u=0;u<b;u++)c[u].shader=h;for(a=0;a<j.length;a++){var s=j[a].pinname.replace(/ /g,"_");if(j[a].pinIsChanged()||l<b)for(u=0;u<b;u++)if("vec"==h.uniformSpecs[s].type){var w=
"COLOR"==h.uniformSpecs[s].semantic?_(j[a].getValue(u).split(",")).map(function(a){return parseFloat(a)}):j[a].getValue(u,j[a].dimensions);c[u].uniforms[s].value=new Float32Array(w)}else w=j[a].getValue(u),c[u].uniforms[s].value=w}if(g.pinIsChanged()||l<b)for(a=0;a<b;a++)c[a].renderState=g.isConnected()?g.getValue(a):VVVV.DefaultRenderState;if(e.pinIsChanged()||l<b)for(a=0;a<b;a++)l=this.inputPins.Transform.getValue(a),c[a].uniforms[c[a].shader.uniformSemanticMap.WORLD].value=l;this.outputPins.Layer.setSliceCount(b);
for(a=0;a<b;a++)this.outputPins.Layer.setValue(a,c[a]);p=this.contextChanged=!1}}};this.openUIWindow=function(){VVVV.ShaderCodeResources[q.shaderFile].definingNode&&VVVV.ShaderCodeResources[q.shaderFile].definingNode.openUIWindow()}};VVVV.Nodes.GenericShader.prototype=new VVVV.Core.Node;
VVVV.Nodes.Quad=function(a,b){this.constructor(a,"Quad (DX9)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No Sampler States","No texture coord mapping","No enable pin","Transprent pixels are discarded by default"]};this.auto_evaluate=!1;var g=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",[],VVVV.PinTypes.WebGlTexture);
this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var f=[],e=null,d=null;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){if(this.contextChanged){var b=new VVVV.Types.VertexBuffer(a,[0.5,0.5,0,-0.5,0.5,0,0.5,-0.5,0,-0.5,-0.5,0]);b.setSubBuffer("TEXCOORD0",2,[1,0,0,0,1,1,0,1]);b.create();e=new VVVV.Types.Mesh(a,b,[0,1,2,1,3,
2]);b="#ifdef GL_ES\nprecision highp float;\n#endif\n";b+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";d=new VVVV.Types.ShaderProgram;d.extractSemantics(b+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
d.setFragmentShader(b);d.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");d.setup(a)}a=this.getMaxInputSliceCount();b=f.length;this.contextChanged&&(b=0);a<b&&f.splice(a,b-a);for(var l=b;l<a;l++)f[l]=new VVVV.Types.Layer,
f[l].mesh=e,f[l].shader=d,_(d.uniformSpecs).each(function(a){f[l].uniformNames.push(a.varname);f[l].uniforms[a.varname]={uniformSpec:a,value:void 0}});var p=this.inputPins.Color.pinIsChanged(),j=this.inputPins.Transform.pinIsChanged(),q=this.inputPins.Texture.pinIsChanged(),k=this.inputPins["Texture Transform"].pinIsChanged();if(p||b<a)for(p=0;p<a;p++){var n=this.inputPins.Color.getValue(p),n=_(n.split(",")).map(function(a){return parseFloat(a)});f[p].uniforms.col.value=new Float32Array(n)}if(g.pinIsChanged()||
b<a)for(p=0;p<a;p++)f[p].renderState=g.isConnected()?g.getValue(p):VVVV.DefaultRenderState;if(j||b<a)for(p=0;p<a;p++)j=this.inputPins.Transform.getValue(p),f[p].uniforms[f[p].shader.uniformSemanticMap.WORLD].value=j;if(q||b<a)for(p=0;p<a;p++)f[p].uniforms.Samp0.value=this.inputPins.Texture.getValue(p);if(k||b<a)for(p=0;p<a;p++)j=this.inputPins["Texture Transform"].getValue(p),f[p].uniforms.tTex.value=j;this.outputPins.Layer.setSliceCount(a);for(p=0;p<a;p++)this.outputPins.Layer.setValue(p,f[p]);this.contextChanged=
!1}}}};VVVV.Nodes.Quad.prototype=new VVVV.Core.Node;
VVVV.Nodes.GridSegment=function(a,b){this.constructor(a,"GridSegment (DX9)",b);this.auto_nil=!1;this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",[],VVVV.PinTypes.WebGlTexture);this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],VVVV.PinTypes.Color);
var f=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),e=this.addInputPin("Inner Radius",[0],VVVV.PinTypes.Value),d=this.addInputPin("Resolution X",[6],VVVV.PinTypes.Value),c=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value);this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var h=[],l=null;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){if(this.contextChanged){var b;b="#ifdef GL_ES\nprecision highp float;\n#endif\n";b+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";
l=new VVVV.Types.ShaderProgram;l.extractSemantics(b+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");l.setFragmentShader(b);l.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
l.setup(a)}b=this.getMaxInputSliceCount();var q=h.length;if(this.contextChanged||d.pinIsChanged()||c.pinIsChanged()||f.pinIsChanged()||e.pinIsChanged())q=0;b<q&&h.splice(b,q-b);for(var k=q;k<b;k++){h[k]=new VVVV.Types.Layer;for(var n=parseInt(d.getValue(k)),r=parseInt(c.getValue(k)),u=f.getValue(k),s=e.getValue(k),w=[],m=[],t=[],y=0,v=0;v<r;v++)for(var z=0;z<n;z++){var B=parseFloat(z)/(n-1),B=0.25-B*u,B=6.28318530718*B,A=parseFloat(v)/(r-1),A=s*(1-A)+A;w.push(0.5*Math.sin(B)*A);w.push(0.5*Math.cos(B)*
A);w.push(0);y++;m.push(0);m.push(0);m.push(1);t.push(parseFloat(z)/(n-1));t.push(parseFloat(v)/(r-1))}u=new VVVV.Types.VertexBuffer(a,w);u.setSubBuffer("TEXCOORD0",2,t);u.setSubBuffer("NORMAL",3,m);u.create();m=[];for(v=0;v<r-1;v++)for(z=0;z<n-1;z++)t=z+n*v,m.push(t),m.push(t+1),m.push(t+n+1),m.push(t+n+1),m.push(t+n),m.push(t);h[k].mesh=new VVVV.Types.Mesh(a,u,m);h[k].shader=l;_(l.uniformSpecs).each(function(a){h[k].uniformNames.push(a.varname);h[k].uniforms[a.varname]={uniformSpec:a,value:void 0}})}v=
this.inputPins.Color.pinIsChanged();r=this.inputPins.Transform.pinIsChanged();a=this.inputPins.Texture.pinIsChanged();n=this.inputPins["Texture Transform"].pinIsChanged();if(v||q<b)for(v=0;v<b;v++)z=this.inputPins.Color.getValue(v),z=_(z.split(",")).map(function(a){return parseFloat(a)}),h[v].uniforms.col.value=new Float32Array(z);if(g.pinIsChanged()||q<b)for(v=0;v<b;v++)h[v].renderState=g.isConnected()?g.getValue(v):VVVV.DefaultRenderState;if(r||q<b)for(v=0;v<b;v++)r=this.inputPins.Transform.getValue(v),
h[v].uniforms[h[v].shader.uniformSemanticMap.WORLD].value=r;if(a||q<b)for(v=0;v<b;v++)h[v].uniforms.Samp0.value=this.inputPins.Texture.getValue(v);if(n||q<b)for(v=0;v<b;v++)r=this.inputPins["Texture Transform"].getValue(v),h[v].uniforms.tTex.value=r;this.outputPins.Layer.setSliceCount(b);for(v=0;v<b;v++)this.outputPins.Layer.setValue(v,h[v]);this.contextChanged=!1}}}};VVVV.Nodes.GridSegment.prototype=new VVVV.Core.Node;
VVVV.Nodes.Group=function(a,b){this.constructor(a,"Group (EX9)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=[],f=this.addInputPin("Enabled",[1],VVVV.PinTypes.Value),e=this.addInvisiblePin("Layer Template Count",[2],VVVV.PinTypes.Value),d=this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);this.initialize=function(){var a=Math.max(2,e.getValue(0));VVVV.Helpers.dynamicPins(this,g,a,function(a){return this.addInputPin("Layer "+
(a+1),[],VVVV.PinTypes.WebGlResource)})};this.evaluate=function(){e.pinIsChanged()&&this.initialize();var a=0;if(0.5<f.getValue(0))for(var b=0;b<g.length;b++)for(var l=0;l<g[b].getSliceCount();l++)d.setValue(a++,g[b].getValue(l));d.setSliceCount(a)}};VVVV.Nodes.Group.prototype=new VVVV.Core.Node;
VVVV.Nodes.RendererWebGL=function(a,b){this.constructor(a,"Renderer (EX9)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Disabling Clear doesn't work in Chrome","No Fullscreen","No Enable Pin","No Aspect Ration and Viewport transform","No mouse output"]};this.addInputPin("Layers",[],VVVV.PinTypes.WebGlResource);var g=this.addInputPin("Clear",[1],VVVV.PinTypes.Value),f=this.addInputPin("Background Color",["0.0, 0.0, 0.0, 1.0"],
VVVV.PinTypes.Color),e=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),d=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),c=this.addInputPin("View",[],VVVV.PinTypes.Transform),h=this.addInputPin("Projection",[],VVVV.PinTypes.Transform),l=this.addInvisiblePin("Windowed Depthbuffer Format",["NONE"],VVVV.PinTypes.Enum);l.enumOptions=["NONE","DX16"];var p=this.addOutputPin("Actual Backbuffer Width",[0],VVVV.PinTypes.Value),j=this.addOutputPin("Actual Backbuffer Height",[0],VVVV.PinTypes.Value),
q=this.addOutputPin("EX9 Out",[],VVVV.PinTypes.WebGlResource),k=0,n=0,r,u,s,w=this.ctxt=void 0,m,t,y;this.getContexts=function(){if(this.invisiblePins["Descriptive Name"]){var a=this.invisiblePins["Descriptive Name"].getValue(0),a=$(a).get(0);if(!a||"CANVAS"!=a.nodeName){var b=parseInt(e.getValue(0)),j=parseInt(d.getValue(0));s=$('<canvas width="'+(0<b?b:512)+'" height="'+(0<j?j:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');a||(a="body");
$(a).append(s)}else s=$(a);if(s){var l=function(a){switch(a.which){case 1:VVVV.MousePositions._all.lb=0;VVVV.MousePositions[s.id].lb=0;break;case 2:VVVV.MousePositions._all.mb=0;VVVV.MousePositions[s.id].mb=0;break;case 3:VVVV.MousePositions._all.rb=0,VVVV.MousePositions[s.id].rb=0}};$(s).detach("mousemove");$(s).detach("mousedown");$(s).detach("mouseup");VVVV.MousePositions[s.id]={x:0,y:0,wheel:0,lb:0,mb:0,rb:0};$(s).mousemove(function(a){var b=2*(a.pageX-$(this).offset().left)/$(this).width()-1;
a=-(2*(a.pageY-$(this).offset().top)/$(this).height()-1);VVVV.MousePositions._all.x=b;VVVV.MousePositions._all.y=a;VVVV.MousePositions[s.id].x=b;VVVV.MousePositions[s.id].y=a});$(s).bind("mousewheel",function(a){a=a.originalEvent.wheelDelta/120;VVVV.MousePositions[s.id].wheel+=a;VVVV.MousePositions._all.wheel+=a});$(s).bind("DOMMouseScroll",function(a){a=-a.originalEvent.detail/3;VVVV.MousePositions[s.id].wheel+=a;VVVV.MousePositions._all.wheel+=a});$(s).mousedown(function(a){switch(a.which){case 1:VVVV.MousePositions._all.lb=
1;VVVV.MousePositions[s.id].lb=1;break;case 2:VVVV.MousePositions._all.mb=1;VVVV.MousePositions[s.id].mb=1;break;case 3:VVVV.MousePositions._all.rb=1,VVVV.MousePositions[s.id].rb=1}$(document).unbind("mouseup",l);$(document).mouseup(l)});try{w=s.get(0).getContext("experimental-webgl",{preserveDrawingBuffer:!0}),w.viewportWidth=parseInt(s.get(0).width),w.viewportHeight=parseInt(s.get(0).height)}catch(p){console.log(p)}this.ctxt=w;q.isConnected()&&this.renderContexts&&this.renderContexts[0]?(m=this.ctxt=
this.renderContexts[0],t=m.createFramebuffer(),m.bindFramebuffer(m.FRAMEBUFFER,t),t.width=s.get(0).width,t.height=s.get(0).height,y=m.createTexture(),m.bindTexture(m.TEXTURE_2D,y),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!0),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR_MIPMAP_NEAREST),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,t.width,t.height,0,m.RGBA,m.UNSIGNED_BYTE,null),m.generateMipmap(m.TEXTURE_2D),a=m.createRenderbuffer(),m.bindRenderbuffer(m.RENDERBUFFER,
a),m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,t.width,t.height),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,y,0),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,a),m.bindTexture(m.TEXTURE_2D,null),m.bindRenderbuffer(m.RENDERBUFFER,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):this.renderContexts&&this.renderContexts[0]&&(this.renderContexts[0].deleteTexture(y),y=void 0);this.ctxt&&(k=parseInt(s.get(0).width),n=parseInt(s.get(0).height),
m=this.ctxt,a=new Uint8Array([255,255,255]),m.DefaultTexture={},m.DefaultTexture["2D"]=m.createTexture(),m.bindTexture(m.TEXTURE_2D,m.DefaultTexture["2D"]),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.pixelStorei(m.UNPACK_ALIGNMENT,1),m.texImage2D(m.TEXTURE_2D,0,m.RGB,1,1,0,m.RGB,m.UNSIGNED_BYTE,
a),m.bindTexture(m.TEXTURE_2D,null),m.DefaultTexture.CUBE=m.createTexture(),m.bindTexture(m.TEXTURE_CUBE_MAP,m.DefaultTexture.CUBE),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_MAG_FILTER,m.NEAREST),m.pixelStorei(m.UNPACK_ALIGNMENT,1),m.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X,0,m.RGB,1,1,0,m.RGB,
m.UNSIGNED_BYTE,a),m.texImage2D(m.TEXTURE_CUBE_MAP_NEGATIVE_X,0,m.RGB,1,1,0,m.RGB,m.UNSIGNED_BYTE,a),m.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_Y,0,m.RGB,1,1,0,m.RGB,m.UNSIGNED_BYTE,a),m.texImage2D(m.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,m.RGB,1,1,0,m.RGB,m.UNSIGNED_BYTE,a),m.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_Z,0,m.RGB,1,1,0,m.RGB,m.UNSIGNED_BYTE,a),m.texImage2D(m.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,m.RGB,1,1,0,m.RGB,m.UNSIGNED_BYTE,a),m.bindTexture(m.TEXTURE_CUBE_MAP,null),this.inputPins.Layers.markPinAsChanged(),
g.markPinAsChanged(),f.markPinAsChanged(),c.markPinAsChanged(),h.markPinAsChanged())}}};this.destroy=function(){$(s).remove()};var v=!1;this.evaluate=function(){m=this.ctxt;if(this.invisiblePins["Descriptive Name"].pinIsChanged()||this.contextChanged)w&&$(w.canvas).hasClass("vvvv-js-generated-renderer")&&$(w.canvas).remove(),this.getContexts(),this.inputPins.Layers.isConnected()&&this.inputPins.Layers.links[0].fromPin.connectionChanged();v||(p.setValue(0,k),j.setValue(0,n),v=!0);if(void 0!=m){if(e.pinIsChanged()&&
(!this.renderContexts||!this.renderContexts[0])){var a=parseInt(e.getValue(0));0<a&&(k=a,$(w.canvas).attr("width",k),p.setValue(0,k))}if(d.pinIsChanged()&&(!this.renderContexts||!this.renderContexts[0]))a=parseInt(d.getValue(0)),0<a&&(n=a,$(w.canvas).attr("height",n),j.setValue(0,n));this.renderContexts&&this.renderContexts[0]&&m==this.renderContexts[0]?m.bindFramebuffer(m.FRAMEBUFFER,t):m.bindFramebuffer(m.FRAMEBUFFER,null);a=_(f.getValue(0).split(",")).map(function(a){return parseFloat(a)});m.clearColor(a[0],
a[1],a[2],a[3]);m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);"NONE"==l.getValue(0)?m.disable(m.DEPTH_TEST):m.enable(m.DEPTH_TEST);h.pinIsChanged()&&(h.isConnected()?(r=mat4.create(),mat4.set(h.getValue(0),r)):(r=mat4.create(),mat4.ortho(-1,1,-1,1,-100,100,r)),mat4.scale(r,[1,1,-1]),this.renderContexts&&this.renderContexts[0]&&mat4.scale(r,[1,-1,1]));c.pinIsChanged()&&(u=c.getValue(0));if(this.contextChanged)this.contextChanged=!1;else{m.viewport(0,0,k,n);var b=a=null,g=null;if(this.inputPins.Layers.isConnected()){for(var s=
this.inputPins.Layers.values,E=0;E<s.length;E++)if(layer=s[E],void 0!=layer.shader){a!=layer.shader.shaderProgram&&(m.useProgram(layer.shader.shaderProgram),m.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.PROJECTION].position,!1,r),m.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEW].position,!1,u));var D=layer.renderState;D||(D=defaultWebGlRenderState);D!=b&&D.apply(m);if(layer.mesh!=g||layer.shader.shaderProgram!=a)m.bindBuffer(m.ARRAY_BUFFER,
layer.mesh.vertexBuffer.vbo),_(layer.mesh.vertexBuffer.subBuffers).each(function(a){layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]]&&-1!=layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position&&(m.enableVertexAttribArray(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position),m.vertexAttribPointer(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position,a.size,m.FLOAT,!1,0,a.offset))}),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,
layer.mesh.indexBuffer);for(var b=layer.uniformNames.length,F=g=0;F<b;F++){var C=layer.uniforms[layer.uniformNames[F]];if(void 0!=C.value&&!(0<E&&layer.shader.shaderProgram==a&&s[E-1].uniforms[layer.uniformNames[F]]&&C.value==s[E-1].uniforms[layer.uniformNames[F]].value)){start=(new Date).getTime();switch(C.uniformSpec.type){case "mat":m["uniformMatrix"+C.uniformSpec.dimension+"fv"](C.uniformSpec.position,!1,C.value);break;case "vec":m["uniform"+C.uniformSpec.dimension+"fv"](C.uniformSpec.position,
C.value);break;case "int":m["uniform"+C.uniformSpec.dimension+"i"](C.uniformSpec.position,C.value);break;case "float":m["uniform"+C.uniformSpec.dimension+"f"](C.uniformSpec.position,C.value);break;case "sampler":var H=C.value;H==VVVV.DefaultTexture&&(H=m.DefaultTexture["2D"]);m.activeTexture(m["TEXTURE"+g]);m.bindTexture(m["TEXTURE_"+C.uniformSpec.dimension],H);m.uniform1i(C.uniformSpec.position,g);g++;break;case "samplerCube":H=C.value,H==VVVV.DefaultTexture&&(H=m.DefaultTexture.CUBE),m.activeTexture(m["TEXTURE"+
g]),m.bindTexture(m.TEXTURE_CUBE_MAP,H),m.uniform1i(C.uniformSpec.position,g),g++}loopstart=(new Date).getTime()}}m.drawElements(m[D.polygonDrawMode],layer.mesh.numIndices,m.UNSIGNED_SHORT,0);a=layer.shader.shaderProgram;b=D;g=layer.mesh}m.bindTexture(m.TEXTURE_2D,null);m.bindTexture(m.TEXTURE_CUBE_MAP,null)}this.renderContexts&&this.renderContexts[0]&&(m.bindTexture(m.TEXTURE_2D,y),m.generateMipmap(m.TEXTURE_2D),m.bindTexture(this.renderContexts[0].TEXTURE_2D,null));q.setValue(0,y)}}}};
VVVV.Nodes.RendererWebGL.prototype=new VVVV.Core.Node;
VVVV.Nodes.DefineEffect=function(a,b){this.constructor(a,"DefineEffect (DX9)",b);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Matthias Zauner"],credits:[],compatibility_issues:["Not available in classic VVVV"]};this.auto_evaluate=!1;var g=this.addInputPin("Effect Descriptor",[""],VVVV.PinTypes.String),f=this.addInvisiblePin("Source Code",["#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 tW : WORLD;\nuniform mat4 tV : VIEW;\nuniform mat4 tP : PROJECTION;\n\nuniform vec4 Color : COLOR = {1.0, 1.0, 1.0, 1.0};\nuniform sampler2D Texture;\nuniform mat4 Texture_Transform;\nuniform float Alpha = 1.0;\n\nvarying vec2 vs2psTexCd;\n\nvertex_shader:\n\nattribute vec3 PosO : POSITION;\nattribute vec2 TexCd : TEXCOORD0;\n\nvoid main(void) {\n  gl_Position = tP * tV * tW * vec4(PosO, 1.0);\n  vs2psTexCd = (Texture_Transform * vec4(TexCd, 0, 1)).xy;\n}\n\n\nfragment_shader:\n\nvoid main(void) {\n  gl_FragColor = Color * texture2D(Texture, vs2psTexCd) * vec4(1.0, 1.0, 1.0, Alpha);\n}"],VVVV.PinTypes.String),
e="",d;this.evaluate=function(){if(""!=g.getValue(0)){if(g.pinIsChanged()){var a=g.getValue(0);if(""==a)return;""==e?void 0==VVVV.ShaderCodeResources["./"+a+".vvvvjs.fx"]&&(VVVV.ShaderCodeResources["./"+a+".vvvvjs.fx"]=new VVVV.Types.ShaderCodeResource):VVVV.ShaderCodeResources["./"+a+".vvvvjs.fx"]=VVVV.ShaderCodeResources[e];e="./"+a+".vvvvjs.fx";VVVV.ShaderCodeResources[e].definingNode=this;VVVV.ShaderCodeResources[e].setSourceCode(f.getValue(0));d&&$("#path",d.document).text((this.parentPatch.nodename||
"root")+" / "+(""!=e?e:"Untitled"))}f.pinIsChanged()&&VVVV.ShaderCodeResources[e]&&VVVV.ShaderCodeResources[e].setSourceCode(f.getValue(0))}};this.openUIWindow=function(){d=window.open("code_editor.html",e+" / VVVV.js Effect Editor","location=no, width=800, height=800, toolbar=no");var a=this;window.setTimeout(function(){d.document.title=e+" / VVVV.js Effect Editor";var b=a.parentPatch.nodename||"root",g=""!=e?e:"Untitled";$("#path",d.document).text(b+" / "+g);$("textarea",d.document).text(f.getValue(0));
$("#compile_button",d.document).click(function(){""==e?a.showStatus("error","Please provide a name for this shader first"):(f.setValue(0,$("textarea",d.document).val()),0<VVVV.ShaderCodeResources[e].relatedNodes.length?a.showStatus("notice","Compiling ..."):a.showStatus("notice","No instance of this shader found. Create a node (./"+e+") and connect it to a Renderer (EX9) to compile."))});d.focus()},500)};this.showStatus=function(a,b){d&&($("#status",d.document).text(b),$("#status",d.document).attr("class",
a))}};VVVV.Nodes.DefineEffect.prototype=new VVVV.Core.Node;VVVV.Nodes.XPathXML=function(a,b){this.constructor(a,"XPath (XML)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["XML Index Output Pin not implemented","Query Index Output Pin not implemented"]};this.auto_evaluate=!1;var g=this.addInputPin("XML Input",["text"],VVVV.PinTypes.String),f=this.addInputPin("XPath Query",["text"],VVVV.PinTypes.String),e=this.addInputPin("Base Element",["text"],VVVV.PinTypes.String),d=this.addOutputPin("Output",
["text"],VVVV.PinTypes.String),c=this.addOutputPin("XML Index",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Query Index",[0],VVVV.PinTypes.Value),l;this.evaluate=function(){var a=g.getValue(0),b=f.getValue(0);e.getValue(0);g.pinIsChanged()&&(l=(new DOMParser).parseFromString(a,"text/xml"));for(var a=l.evaluate(b,l,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),b=0,q;q=a.iterateNext();)q.value?d.setValue(b,q.value):q.data?d.setValue(b,q.data):d.setValue(b,""),b++;c.setValue(b,0);h.setValue(b,0);
d.setSliceCount(b);c.setSliceCount(1);h.setSliceCount(1)}};VVVV.Nodes.XPathXML.prototype=new VVVV.Core.Node;var UIState={Idle:0,Connecting:1,Moving:2,Creating:3,Changing:4,AreaSelecting:5};
VVVV.PinTypes.Value.makeLabel=VVVV.PinTypes.String.makeLabel=function(a,b){var g=b.IOBoxRows();b.IOBoxInputPin().getSliceCount();d3.select(a).selectAll(".vvvv-node-label").remove();for(var f=0;f<g;f++)d3.select(a).append("svg:text").text(b.IOBoxInputPin().getValue(f)).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(){return 12*f+12}).attr("dx",4).attr("font-size",10).attr("font-family","Lucida Sans Unicode")};
VVVV.PinTypes.Value.openInputBox=VVVV.PinTypes.String.openInputBox=function(a,b,g,f){$inputbox=$("<input type='text' value='"+g.getValue(f)+"' class='pininputbox value resettable'/>");$inputbox.css("position",b.css("position"));$inputbox.css("width",b.css("width"));$inputbox.css("height",b.css("height"));$inputbox.css("left",b.css("left"));$inputbox.css("top",b.css("top"));b.replaceWith($inputbox);$inputbox.get(0).select();$inputbox.change(function(){g.setValue(f,$(this).val());g.node.parentPatch.editor.update(g.node.parentPatch,
"<PATCH><NODE id='"+g.node.id+"'><PIN pinname='"+g.pinname+"' values='"+_(g.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(",")+"'/></NODE>")});$inputbox.keydown(function(a){13==a.which&&($(this).change(),$(this).remove())});if("Value"==this.typeName){var e=function(a,b,e){var f=$(a).val()%1;if(!isNaN(f)){var g;g=1;if(e.altKey||0!==f)g=0.01;b*=g;$(a).val(parseFloat($(a).val())+b);$(a).change()}};$inputbox.bind("mousewheel",function(a){e(this,a.originalEvent.wheelDelta/
120,a);a.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",function(a){e(this,-a.originalEvent.detail/3,a);a.preventDefault();return!1})}$inputbox.bind("paste",function(a){a.stopPropagation()});$inputbox.bind("copy",function(a){a.stopPropagation()})};
VVVV.PinTypes.Enum.openInputBox=function(a,b,g,f){$inputbox=$("<select class='pininputbox value resettable'>");for(a=0;a<g.enumOptions.length;a++)$opt=$('<option value="'+g.enumOptions[a]+'">'+g.enumOptions[a]+"</option>"),g.getValue(f)==g.enumOptions[a]&&$opt.attr("selected",!0),$inputbox.append($opt);$inputbox.css("position",b.css("position"));$inputbox.css("width",b.css("width"));$inputbox.css("height",b.css("height"));$inputbox.css("left",b.css("left"));$inputbox.css("top",b.css("top"));b.replaceWith($inputbox);
$inputbox.change(function(){g.setValue(f,$(this).val());g.node.parentPatch.editor.update(g.node.parentPatch,"<PATCH><NODE id='"+g.node.id+"'><PIN pinname='"+g.pinname+"' values='"+_(g.values).map(function(a){return"|"+a+"|"}).join(",")+"'/></NODE>")})};
VVVV.PinTypes.Color.makeLabel=function(a,b){var g=b.IOBoxRows();b.IOBoxInputPin().getSliceCount();d3.select(a).selectAll(".vvvv-node-label").remove();for(var f=0;f<g;f++)d3.select(a).append("svg:rect").attr("class","vvvv-node-label").attr("height",b.getHeight()/g-8).attr("width",b.getWidth()).attr("y",12*f+4).attr("fill",function(){for(var a=b.IOBoxInputPin().getValue(f).split(","),d=0;d<a.length;d++)a[d]=parseInt(256*a[d]);return"rgba("+a.join(",")+")"})};
VVVV.PinTypes.Color.openInputBox=function(a,b,g,f){function e(a){c=a.altKey&&a.shiftKey?3:a.altKey?1:a.shiftKey?2:0}function d(a){var b=g.getValue(f).split(","),d=VVVV.PinTypes.Color.rgbToHsv(b[0],b[1],b[2]);d[3]=parseFloat(b[3]);d[c]+=0.01*a;0!=c&&(d[c]=Math.min(1,Math.max(0,d[c])));b=VVVV.PinTypes.Color.hsvToRgb(d[0],d[1],d[2]);b[3]=d[3];$inputbox.css("background-color","rgba("+_(b).map(function(a){return parseInt(255*a)}).join(",")+")");ibx=$inputbox;b.join(",");g.setValue(f,b.join(","));g.node.parentPatch.editor.update(g.node.parentPatch,
"<PATCH><NODE id='"+g.node.id+"'><PIN pinname='"+g.pinname+"' values='"+_(g.values).map(function(a){return"|"+a+"|"}).join(",")+"'/></NODE>")}var c=0;$(a.window.document).keydown(e).keyup(e);$inputbox=$('<div class="pininputbox color resettable"></div>');$inputbox.css("position",b.css("position"));$inputbox.css("width",b.css("width"));$inputbox.css("height",b.css("height"));$inputbox.css("left",b.css("left"));$inputbox.css("top",b.offset().top-8+"px");a=g.getValue(f).split(",");for(var h=0;h<a.length;h++)a[h]=
parseInt(256*a[h]);$inputbox.css("background-color","rgba("+a.join(",")+")");b.replaceWith($inputbox);$inputbox.on("mousewheel",function(a){d(a.originalEvent.wheelDelta/120);a.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",function(a){d(-a.originalEvent.detail/3);a.preventDefault();return!1})};VVVV.Editors.BrowserEditor={};
VVVV.Editors.BrowserEditor.PatchWindow=function(a,b,g){function f(){c.selectAll(".vvvv-node.selected").attr("class",function(a){return a.isIOBox?"vvvv-node vvvv-iobox":"vvvv-node"});k=[]}this.state=UIState.Idle;var e=0,d=0,c,h,l,p,j,q=void 0,k=[],n=a,r=0,u=VVVV.Root+"/patch.html",s=!1,w=0,m=0,t=0,y=0;this.window=g?window:window.open(u,a.nodename,"location=no, width="+a.windowWidth+", height="+a.windowHeight+", toolbar=no");var v=this;window.setTimeout(function(){for(var j=0;j<n.nodeList.length;j++)r=
Math.max(r,n.nodeList[j].id);g?root=d3.select($(g).get(0)):(v.window.document.title=a.nodename,root=d3.select(v.window.document.body));if(!g){$("body",v.window.document).on("copy",function(a){for(var b=$("<PATCH>"),c=[],d=_(k).map(function(a){return a.id}),e=0;e<k.length;e++)b.append(k[e].serialize()),_(k[e].inputPins).each(function(a){for(var b=0;b<a.links.length;b++)0<=d.indexOf(a.links[b].fromPin.node.id)&&c.push(a.links[b])});for(e=0;e<c.length;e++)b.append(c[e].serialize());b='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n'+
b.wrapAll("<d></d>").parent().html();b=b.replace(/<patch/g,"<PATCH");b=b.replace(/<\/patch>/g,"\n  </PATCH>");b=b.replace(/<node/g,"\n  <NODE");b=b.replace(/<\/node>/g,"\n  </NODE>");b=b.replace(/<bounds/g,"\n  <BOUNDS");b=b.replace(/<\/bounds>/g,"\n  </BOUNDS>");b=b.replace(/<pin/g,"\n  <PIN");b=b.replace(/<\/pin>/g,"\n  </PIN>");b=b.replace(/<lonk/g,"\n  <LINK");b=b.replace(/<\/lonk>/g,"\n  </LINK>");a.originalEvent.clipboardData.setData("text/plain",b);a.preventDefault();return!1});var l=0,p=0;
$("body",v.window.document).mousemove(function(a){l=a.pageX;p=a.pageY});$("body",v.window.document).on("paste",function(a){a=a.originalEvent.clipboardData.getData("text/plain");if(!a.match(/^<!DOCTYPE PATCH/))return!1;$patch=$(a);var d=void 0,e=void 0;$patch.find("node bounds").each(function(){var a=parseInt($(this).attr("left")),b=parseInt($(this).attr("top"));if(!d||a<d)d=a;if(!e||b<e)e=b});var g={};$patch.find("node").each(function(){r++;g[$(this).attr("id")]=r;$(this).attr("createme","pronto");
$(this).attr("id",r);var a=parseInt($(this).find("bounds").attr("left"))-d+15*l,b=parseInt($(this).find("bounds").attr("top"))-e+15*p;$(this).find("bounds").attr("left",a);$(this).find("bounds").attr("top",b)});$patch.find("link").each(function(){$(this).attr("createme","pronto");var a=$(this).attr("srcnodeid"),b=$(this).attr("dstnodeid");$(this).attr("srcnodeid",g[a]);$(this).attr("dstnodeid",g[b])});a=$patch.wrapAll("<d></d>").parent().html();b.update(n,a);f();var h=_(g).map(function(a){return a});
c.selectAll(".vvvv-node").each(function(a){0<=h.indexOf(parseInt(a.id))&&(k.push(a),d3.select(this).attr("class","vvvv-node selected"))})})}c=root.append("svg:svg").attr("class","chart").attr("width",Math.max(n.windowWidth,n.boundingBox.width)).attr("height",Math.max(n.windowHeight,n.boundingBox.height));j=c.append("svg:rect").attr("class","background").attr("width",Math.max(n.windowWidth,n.boundingBox.width)).attr("height",Math.max(n.windowHeight,n.boundingBox.height));g||(c.on("mousemove",function(){if(v.state==
UIState.Connecting)c.select(".vvvv-link.current-link").attr("x2",function(){return d3.event.pageX+(d3.select(this).attr("x1")<d3.event.pageX?-1:1)}).attr("y2",function(){return d3.event.pageY+(d3.select(this).attr("y1")<d3.event.pageY?-1:1)});else if(v.state==UIState.Moving){var a=d3.event.pageX-e,b=d3.event.pageY-d;c.selectAll(".vvvv-node.selected").attr("transform",function(c){return"translate("+(c.x+a)+","+(c.y+b)+")"});for(var g=0;g<k.length;g++){var h=k[g];c.selectAll(".vvvv-link line").filter(function(a){return a.fromPin.node.id==
h.id}).attr("x1",function(b){return b.fromPin.x+b.fromPin.node.x+a}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+b});c.selectAll(".vvvv-link line").filter(function(a){return a.toPin.node.id==h.id}).attr("x2",function(b){return b.toPin.x+b.toPin.node.x+a}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+b})}}else v.state==UIState.AreaSelecting&&(t=d3.event.pageX,y=d3.event.pageY,c.select(".selection-area").attr("transform","translate("+Math.min(w,t)+", "+Math.min(m,y)+")").attr("width",
Math.abs(t-w)).attr("height",Math.abs(y-m)),f(),c.selectAll(".vvvv-node").each(function(a){for(var b=[a.x,a.x+a.getWidth()],c=[a.y,a.y+a.getHeight()],d=!1,e=0;2>e;e++)for(var f=0;2>f;f++)b[e]>=Math.min(w,t)&&(b[e]<=Math.max(w,t)&&c[f]>=Math.min(m,y)&&c[f]<=Math.max(m,y))&&(d=!0);d&&(d3.select(this).attr("class","vvvv-node selected"),k.push(a))}))}).on("contextmenu",function(){v.state==UIState.Connecting&&(c.select(".vvvv-link.current-link").remove(),v.state=UIState.Idle);d3.event.stopPropagation();
d3.event.preventDefault();return!1}).on("mouseup",function(){if(v.state==UIState.Moving){v.state=UIState.Idle;for(var a=d3.event.pageX-e,f=d3.event.pageY-d,g="<PATCH>",h=0;h<k.length;h++)var j=k[h],g=g+("<NODE componentmode='Node' id='"+j.id+"'><BOUNDS type='Node' left='"+15*(a+j.x)+"' top='"+15*(f+j.y)+"' width='"+j.width+"' height='"+j.height+"'/></NODE>");b.update(n,g+"</PATCH>")}v.state==UIState.AreaSelecting&&(c.select(".selection-area").remove(),v.state=UIState.Idle)}).on("dblclick",function(){function a(){g.empty();
for(var b=f.find("#node_filter").val().toLowerCase(),c=VVVV.NodeNames.concat(_(VVVV.ShaderCodeResources).map(function(a,b){return b.replace("%VVVV%/effects/","")})),c=_(_(c).filter(function(a){return 0<=VVVV.Helpers.translateOperators(a).toLowerCase().indexOf(b)})).sortBy(function(a){return a.toLowerCase().indexOf(b)}),d=0;d<c.length;d++)g.append($("<option>"+c[d]+"</option>"));g.find("option").first().attr("selected",!0)}function c(){var a=f.find("#node_filter").val(),g=f.find("#new_node option:selected").val(),
h="";if(!g&&(a.match(/\.fx$/)||a.match(/\.v4p$/)))g=a;if(g){var j;(j=g.match(/^(.*\/([^\.]+))(\.vvvvjs)?\.fx$/))?(g=j[2]+" (EX9.Effect)",h=j[1]+".fx"):(j=g.match("([^.]+)(.vvvvjs)?.fx$"))?(g=j[1]+" (EX9.Effect)",h="%VVVV%/effects/"+j[1]+".fx"):g.match("[^/].v4p$")&&(h=g=a);r++;g="<PATCH>"+("<NODE componentmode='Hidden' id='"+r+"' nodename='"+g+"' systemname='"+g+"' "+(""!=h?"filename='"+h+"'":"")+">");g+="<BOUNDS type='Node' left='"+15*d+"' top='"+15*e+"' width='100' height='100'/>"}else r++,g="<PATCH>"+
("<NODE componentmode='Hidden' id='"+r+"' nodename='IOBox (String)' systemname='IOBox (String)'>"),g+="<BOUNDS type='Node' left='"+15*d+"' top='"+15*e+"' width='100' height='100'/>",g+="<PIN pinname='Input String' values='|"+a+"|'/>";b.update(n,g+"</NODE>");f.remove()}$("#node_selection",v.window.document).remove();var d=d3.event.pageX,e=d3.event.pageY,f=$('<div id="node_selection"><input type="text" id="node_filter"/></div>'),g=$('<select id="new_node" size="8">');f.append(g);f.css("left",d);f.css("top",
e);$("body",v.window.document).append(f);f.find("input").bind("paste",function(a){a.stopPropagation()});f.find("#node_filter").get(0).focus();a();f.find("#node_filter").keyup(function(b){if(13==b.which)c();else{if(40==b.which)return g.find("option:selected").first().next().attr("selected",!0),!1;if(38==b.which)return g.find("option:selected").first().prev().attr("selected",!0),!1;a()}});f.find("#new_node").click(c)}).on("mousedown",function(){v.state==UIState.Idle&&(v.state=UIState.AreaSelecting,
w=t=d3.event.pageX+1,m=y=d3.event.pageY+1,c.append("svg:rect").attr("class","selection-area").attr("stroke","#000").attr("stroke-dasharray","2,2").attr("stroke-width",1).attr("fill","rgba(0,0,0,0)").attr("transform","translate("+w+", "+m+")").attr("width",0).attr("height",0),f())}),j.on("click",function(){v.state=UIState.Idle;$(".resettable",v.window.document).remove();$("#node_selection",v.window.document).remove();f();q=void 0}),j=function(a){s=a.shiftKey},$(v.window.document).keydown(j),$(v.window.document).keyup(j),
$(v.window.document).keydown(function(a){if(46==a.which&&0<k.length){var d="<PATCH>";for(a=0;a<k.length;a++){var e=k[a],d=d+("<NODE id='"+k[a].id+"' deleteme='pronto'/>");_(e.inputPins).each(function(a){_(a.links).each(function(a){d+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"})});_(e.outputPins).each(function(a){_(a.links).each(function(a){d+="<LINK deleteme='pronto' srcnodeid='"+
a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"})})}d+="</PATCH>";b.update(n,d);k=[]}else{if((115==a.which||83==a.which)&&a.ctrlKey)return b.save(n.nodename,n.toXML()),a.preventDefault(),!1;if(73==a.which&&a.ctrlKey)return b.inspector?b.inspector.win.focus():b.openInspector("."),a.preventDefault(),!1;if(65==a.which&&a.ctrlKey)return f(),c.selectAll(".vvvv-node").each(function(a){k.push(a);d3.select(this).attr("class","vvvv-node selected")}),
a.preventDefault(),!1}}),$(v.window).resize(function(){n.windowWidth=$(this).width();n.windowHeight=$(this).height();n.boundingBox.width=Math.max(n.windowWidth,n.boundingBox.width);n.boundingBox.height=Math.max(n.windowHeight,n.boundingBox.height);n.afterUpdate()}));v.drawComplete();n.afterUpdate=function(){v.drawComplete();b.inspector&&window.setTimeout(b.inspector.update,100)};n.afterEvaluate=function(){h.filter(function(a){return a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel}).each(function(a){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,
a)})}},1E3);this.close=function(){this.window.close()};this.drawComplete=function(){h&&h.remove();j&&j.remove();!g&&(n.windowWidth!=$(v.window).width()||n.windowHeight!=$(v.window).height())&&v.window.resizeTo(n.windowWidth,n.windowHeight);c.attr("width",Math.max(n.windowWidth,n.boundingBox.width)).attr("height",Math.max(n.windowHeight,n.boundingBox.height));c.selectAll(".background").attr("width",Math.max(n.windowWidth,n.boundingBox.width)).attr("height",Math.max(n.windowHeight,n.boundingBox.height));
var a=c.append("svg:g").attr("class","link-group");h=c.selectAll("g.vvvv-node").data(n.nodeList).enter().append("svg:g").attr("class",function(a){var b="vvvv-node";a.isIOBox&&(b+=" vvvv-iobox");0<=k.indexOf(a)&&(b+=" selected");return b}).attr("id",function(a){return"vvvv-node-"+a.id}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"});h.append("svg:rect").attr("class","vvvv-node-background").attr("height",function(a){return a.getHeight()}).attr("width",function(a){return a.getWidth()}).attr("fill",
function(a){return a.isComment()?"rgba(0,0,0,0)":a.not_implemented?"rgba(255,0,0,1)":"#cdcdcd"});h.append("svg:rect").attr("class","vvvv-node-pinbar").attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});h.append("svg:rect").attr("class","vvvv-node-pinbar").attr("y",function(a){return a.isIOBox?a.getHeight()-2:a.getHeight()-4}).attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?
"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});h.append("svg:g").attr("class","descriptive-name-bg");h.append("svg:text").text(function(a){return a.invisiblePins["Descriptive Name"]?a.invisiblePins["Descriptive Name"].getValue(0):null}).attr("class","vvvv-node-descriptive-name").attr("shape-rendering","crispEdges").attr("dy",function(a){return a.getHeight()+12}).attr("dx",2).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","white");h.selectAll("g.descriptive-name-bg").append("svg:rect").attr("fill",
function(a){return void 0==a.invisiblePins["Descriptive Name"]||""==a.invisiblePins["Descriptive Name"].getValue(0)?"rgba(0,0,0,0)":"rgba(0,0,0,1)"}).attr("y",function(a){return a.getHeight()}).attr("width",5).attr("height",14);h.each(function(a){if(a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,a);for(var b=a.IOBoxRows(),c=a.IOBoxInputPin().getSliceCount(),d=this,e=0;e<b;e++)(function(e){var f=d3.select(d).append("svg:rect").attr("width",
a.getWidth()+2).attr("height",a.getHeight()/b-4).attr("y",12*e+2).attr("fill","rgba(0,0,0,0)");if(!g)f.on("contextmenu",function(a){if(void 0!=a.IOBoxInputPin().getValue(0)&&!a.IOBoxInputPin().isConnected()){$(".resettable",v.window.document).remove();var d=$("<input type='text'/>");$("body",v.window.document).append(d);d.css("position","absolute");d.css("left",$(this).offset().left);d.css("top",$(this).offset().top+2);d.css("width",a.getWidth());d.css("height",a.getHeight()/b-4);VVVV.PinTypes[a.IOBoxInputPin().typeName].openInputBox(v.window,
d,a.IOBoxInputPin(),e%c)}d3.event.stopPropagation();d3.event.preventDefault();return!1})})(e)}else d3.select(this).append("svg:text").text(function(a){return a.label()}).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(a,b){return 12*b+12}).attr("dx",4).attr("font-size",10).attr("font-family","Lucida Sans Unicode")});l=h.selectAll("g.vvvv-input-pin").data(function(a){return a.isSubpatch?_(a.inputPins).sortBy(function(a){return a.slavePin?a.slavePin.node.x:1}).map(function(a){return a}):
_(a.inputPins).map(function(a){return a})}).enter().append("svg:g").attr("class","vvvv-input-pin").attr("transform",function(a,b){pinOffset=0;1<_(a.node.inputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.inputPins).size()-1));a.y=0;a.x=b*pinOffset;return"translate("+a.x+", 0)"});l.append("svg:rect").attr("width",4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(a,b){c.selectAll("#vvvv-node-"+a.node.id+" g.vvvv-input-pin").filter(function(a,
c){return c==b}).each(function(){d3.select(this).append("svg:rect").attr("class","vvvv-input-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);d3.select(this).append("svg:text").text(function(a){return 1<a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(a){c.selectAll("#vvvv-node-"+
a.node.id+" g.vvvv-input-pin text").remove();c.selectAll("#vvvv-node-"+a.node.id+" g.vvvv-input-pin rect.vvvv-input-pin-highlight").remove()});p=h.selectAll("g.vvvv-output-pin").data(function(a){return _(a.outputPins).map(function(a){return a})}).enter().append("svg:g").attr("class","vvvv-output-pin").attr("transform",function(a,b){pinOffset=0;1<_(a.node.outputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.outputPins).size()-1));a.y=a.node.getHeight()-4;a.x=b*pinOffset;return"translate("+
a.x+", "+a.y+")"});p.append("svg:rect").attr("width",4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(a,b){c.selectAll("#vvvv-node-"+a.node.id+" g.vvvv-output-pin").filter(function(a,c){return c==b}).each(function(){d3.select(this).append("svg:rect").attr("class","vvvv-output-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);d3.select(this).append("svg:text").text(function(a){return 1<
a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(a){c.selectAll("#vvvv-node-"+a.node.id+" g.vvvv-output-pin text").remove();c.selectAll("#vvvv-node-"+a.node.id+" g.vvvv-output-pin rect.vvvv-output-pin-highlight").remove()});j=a.selectAll("g.vvvv-link").data(n.linkList).enter().append("svg:g").attr("class","vvvv-link");
j.append("svg:line").attr("stroke","rgba(0, 0, 0, 0)").attr("stroke-width",4).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});j.append("svg:line").attr("stroke","#000").attr("stroke-width",1).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+
a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});$(".descriptive-name-bg rect",v.window.document).each(function(){$(this,v.window.document).attr("width",$(this,v.window.document).parent().next().get(0).getBBox().width+4)});g||(c.selectAll("g.vvvv-input-pin").on("contextmenu",function(a){if(VVVV.PinTypes[a.typeName].openInputBox&&void 0!=a.getValue(0)){$(".resettable",v.window.document).remove();var b=
$("<input type='text'/>");$("body",v.window.document).append(b);b.css("position","absolute");b.css("left",$(this).offset().left);b.css("top",$(this).offset().top-3);b.css("width",50);b.css("height",14);VVVV.PinTypes[a.typeName].openInputBox(v,b,a,0)}d3.event.stopPropagation();d3.event.preventDefault();return!1}),c.selectAll("g.vvvv-input-pin, g.vvvv-output-pin").on("click",function(a){if(v.state!=UIState.Connecting){q=a;v.state=UIState.Connecting;c.append("svg:line").attr("class","vvvv-link current-link resettable").attr("stroke",
"#000").attr("stroke-width",1).attr("x1",a.x+a.node.x+2+0.5).attr("y1",a.y+a.node.y+2+0.5).attr("x2",a.x+a.node.x+2+0.5).attr("y2",a.y+a.node.y+2+0.5);var d=q.direction==PinDirection.Output?"input":"output",e=q.node.getUpstreamNodes();c.selectAll("g.vvvv-"+d+"-pin").filter(function(a){return a.typeName!=q.typeName&&("Node"!=q.typeName||VVVV.PinTypes[a.typeName].primitive&&("Node"!=a.typeName||VVVV.PinTypes[q.typeName].primitive))||0<=e.indexOf(a.node)||a.node==q.node?!1:!0}).append("svg:rect").attr("class",
"vvvv-connection-highlight resettable").attr("width",4).attr("height",3).attr("fill","rgba(0,0,0,1)").attr("y",function(a){return a.direction==PinDirection.Input?-3:3})}else{q.direction==PinDirection.Input?(d=a,a=q):d=q;if(d.typeName==a.typeName&&d.direction!=a.direction||"Node"==d.typeName&&!VVVV.PinTypes[a.typeName].primitive||"Node"==a.typeName&&!VVVV.PinTypes[d.typeName].primitive){var f="<PATCH>";_(a.links).each(function(a){f+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+
a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"});f+="<LINK createme='pronto' srcnodeid='"+d.node.id+"' srcpinname='"+d.pinname+"' dstnodeid='"+a.node.id+"' dstpinname='"+a.pinname+"'/>";f+="</PATCH>";b.update(n,f);c.select(".vvvv-link.current-link").remove();c.select(".vvvv-connection-highlight").remove();v.state=UIState.Idle}n.afterUpdate()}d3.event.stopPropagation()}).on("mousedown",function(){d3.event.stopPropagation()}),c.selectAll("g.vvvv-link").on("contextmenu",
function(a){b.update(n,"<PATCH><LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/></PATCH>");d3.event.preventDefault()}),h.on("mousedown",function(a){$(".resettable",v.window.document).remove();v.state=UIState.Moving;0>k.indexOf(a)&&(s||f(),d3.select(this).attr("class","vvvv-node selected"),k.push(a));e=d3.event.pageX;d=d3.event.pageY;b.inspector&&b.inspector.setNode(a);d3.event.preventDefault();
d3.event.stopPropagation();return!1}).on("contextmenu",function(a){a.isSubpatch?b.openPatch(a):a.openUIWindow&&a.openUIWindow();d3.event.preventDefault();d3.event.stopPropagation();return!1}))}};
VVVV.Editors.BrowserEditor.Inspector=function(a){function b(){d=void 0;$(c.win.document).find("#pins, #values").empty();$(c.win.document).find("#pins").append('<div class="row heading">Configuration</div>');$(c.win.document).find("#values").append('<div class="row heading"></div>');_(e.invisiblePins).each(function(a){g(a)});$(c.win.document).find("#pins").append('<div class="row heading">Input Pins</div>');$(c.win.document).find("#values").append('<div class="row heading"></div>');_(e.inputPins).each(function(a){g(a)});
$(c.win.document).find("#pins").append('<div class="row heading">Output Pins</div>');$(c.win.document).find("#values").append('<div class="row heading"></div>');_(e.outputPins).each(function(a){g(a)})}function g(a){var b=$('<a class="row pin" href="#">'+a.pinname+"</a>");$(c.win.document).find("#pins").append(b);b.click(function(b){$(c.win.document).find("a.pin.active").removeClass("active");$(this).addClass("active");VVVV.PinTypes[a.typeName].openInputBox&&f(a);b.preventDefault();return!1});VVVV.PinTypes[a.typeName].openInputBox&&
a.direction!=PinDirection.Output&&!a.isConnected()&&void 0!=a.getValue(0)?(b=$('<div class="row value"><div style="height:100%">'+a.getValue(0)+"</div></div>"),b.find("div").click(function(){VVVV.PinTypes[a.typeName].openInputBox(c.win,$(this),a,0)})):b=$('<div class="row value readonlyvalue"><div style="height:100%">'+a.getValue(0)+"</div></div>");"Color"==a.typeName&&b.find("div").css("background-color","rgba("+_(a.getValue(0).split(",")).map(function(a){return parseInt(255*a)}).join(",")+")");
$(c.win.document).find("#values").append(b)}function f(a){var b=d!=a;d=a;var e=a.getSliceCount(),f=$('<div class="row heading"><input type="text" value="'+e+'"/ size="3"/> Slices</div>');a.direction!=PinDirection.Input&&f.find("input").attr("disabled",!0);var g=$(c.win.document).find("#values .row").first();0<g.length?g.replaceWith(f):$(c.win.document).find("#values").append(f);f.find("input").change(function(a){for(var b=Math.max(1,parseInt($(this).val())),c=d.getSliceCount();c<b;c++)d.setValue(c,
VVVV.PinTypes[d.typeName].defaultValue());d.setSliceCount(b);d.node.parentPatch.afterUpdate();a.preventDefault();return!1});for(f=f=0;f<e;f++)if(g=$(c.win.document).find("#values .row").eq(f+1),b||!g.children().first().hasClass("pininputbox")){if(VVVV.PinTypes[a.typeName].openInputBox&&a.direction!=PinDirection.Output&&!a.isConnected()&&void 0!=a.getValue(0)){var k=$('<div class="row value"><div style="height:100%">'+a.getValue(f)+"</div></div>");(function(b){k.find("div").click(function(){VVVV.PinTypes[a.typeName].openInputBox(c.win,
$(this),a,b)})})(f)}else k=$('<div class="row value readonlyvalue"><div style="height:100%">'+a.getValue(f)+"</div></div>");0<g.length?g.replaceWith(k):$(c.win.document).find("#values").append(k);"Color"==a.typeName&&k.find("div").css("background-color","rgba("+_(a.getValue(f).split(",")).map(function(a){return parseInt(255*a)}).join(",")+")")}f++;for(g=$(c.win.document).find("#values .row");f<g.length;f++)g.eq(f).remove()}this.win=window.open(a+"/inspektor.html","inspektor","location=no, width=250, height=600, toolbar=no");
var e,d;insw=this.win;var c=this;this.update=function(){e&&(d?f(d):b())};this.setNode=function(a){e=a;b()};this.close=function(){this.win.close()}};
VVVV.Editors.BrowserEditor.Interface=function(){function a(){return"Are you sure you want to leave? Unsaved changes in your patches will be lost."}var b=[],g={};this.inspector=void 0;this.enable=function(e,d){d=d||{};this.addPatch(e);this.openPatch(e,d.selector);if(!d.selector){var c=this;$(window).bind("beforeunload",a);$(window).unload(function(){c.disable()});this.openInspector(VVVV.Root);b[0].window?d&&d.success&&d.success():d&&d.error&&d.error()}};this.openInspector=function(a){if(!this.inspector){this.inspector=
new VVVV.Editors.BrowserEditor.Inspector(a);var b=this;$(this.inspector.win).bind("beforeunload",function(){console.log("closing inspektor");b.inspector=void 0})}};var f=[];this.addPatch=function(a){for(var b=a.id,c=a;void 0!=(c=c.parentPatch);)b+="-"+c.id;if(!(0<=f.indexOf(b))){f.push(b);a.editor=this;b=VVVV.Helpers.prepareFilePath(a.nodename,a.parentPatch);void 0==g[b]&&(g[b]=[]);g[b].push(a);a=a.getSubPatches();for(b=0;b<a.length;b++)this.addPatch(a[b])}};this.removePatch=function(a){for(var b=
a.getSubPatches(),c=0;c<b.length;c++)this.removePatch(b[c]);b=VVVV.Helpers.prepareFilePath(a.nodename,a.parentPatch);g[b].splice(g[b].indexOf(a),1);0==g[b].length&&delete g[b];console.log(g)};this.openPatch=function(a,d){b.push(new VVVV.Editors.BrowserEditor.PatchWindow(a,this,d))};this.update=function(a,b){for(var c=VVVV.Helpers.prepareFilePath(a.nodename,a.parentPatch),f=g[c].length,l=0;l<f;l++)g[c][l].doLoad(b),g[c][l].afterUpdate()};this.disable=function(){for(var e=0;e<b.length;e++)b[e].close();
this.inspector&&this.inspector.close();$(window).unbind("beforeunload",a)};this.save=function(a,b){var c=$("<a>save</a>");$("body").append(c);c.attr("href","data:application/octet-stream;charset=utf-8,"+encodeURIComponent(b));c.attr("download",a);c[0].click();c.remove()};this.sendUndo=function(){}};VVVV.VVVViewer=function(a,b){(new VVVV.Editors.BrowserEditor.Interface).enable(a,{selector:b})};VVVV.Editors.edit=VVVV.Editors.BrowserEditor.Interface;VVVV.Themes=VVVV.Themes||{};
VVVV.Themes.Tron={scaleX:1.2,scaleY:1.8,categoryColors:{Value:"#78B4A8",Animation:"#51de3a","3d":"#78B4A8",Boolean:"#78B4A8",Complex:"#78B4A8","2d":"#78B4A8",Spreads:"#78B4A8",String:"#d54c70",EX9:"#d6bf00",Canvas:"#d6bf00",HTML5:"#d6bf00",Transform:"#ba4b36","default":"#AAAAAA"},chart:function(){},background:function(a){a.attr("fill","#666666")},node:function(a){a.attr("x",-1).attr("width",function(a){return a.getWidth()*VVVV.Themes.Tron.scaleX+2}).attr("rx",1).attr("ry",1).attr("stroke","rgba(127, 190, 183, 1.0)").attr("stroke-width",
1).attr("fill",function(a){return a.isComment()?"rgba(0,0,0,0)":a.not_implemented?"rgba(255,0,0,1)":"rgba(127, 190, 183, 0.6)"})},inputPinBar:function(a){a.attr("height",2).attr("fill","rgba(0,0,0,0)")},outputPinBar:function(a){a.attr("y",function(a){return a.getHeight()*VVVV.Theme.scaleY-2}).attr("height",2).attr("fill","rgba(0,0,0,0)")},descriptiveNameText:function(a){a.attr("shape-rendering","crispEdges").attr("dy",function(a){return a.getHeight()*VVVV.Theme.scaleY+12}).attr("dx",2).attr("font-size",
10).attr("font-family","Lucida Sans Unicode").attr("fill","white")},descriptiveNameBackground:function(a){a.attr("fill",function(a){return void 0==a.invisiblePins["Descriptive Name"]||""==a.invisiblePins["Descriptive Name"].getValue(0)?"rgba(0,0,0,0)":"rgba(0,0,0,1)"}).attr("y",function(a){return a.getHeight()*VVVV.Theme.scaleY}).attr("width",5).attr("height",14)},nodeLabel:function(a){a.attr("fill","white").attr("shape-rendering","crispEdges").attr("dy",function(a,g){return 18*g+19}).attr("dx",4).attr("font-size",
11).attr("font-family","Lucida Sans Unicode")},inputPin:function(a){a.attr("y",-2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},inputPinHover:function(a){a.attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-6)},inputPinValue:function(a){a.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},outputPin:function(a){a.attr("y",
2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},outputPinHover:function(a){a.attr("width",4).attr("height",4).attr("fill","rgba(1,1,1,1)").attr("y",6)},outputPinValue:function(a){a.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},connectablePin:function(a){a.attr("width",4).attr("height",3).attr("fill","rgba(1,1,1,1)").attr("y",
function(a){return a.direction==PinDirection.Input?-3:3})},link:function(a){a.append("svg:path").attr("stroke","rgba(0, 0, 0, 0)").attr("fill","rgba(0,0,0,0)").attr("stroke-width",4).attr("d",function(a){var g=(a.toPin.node.y-a.fromPin.node.y-a.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>g&&(g=30);return"M"+(a.fromPin.x+a.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(a.fromPin.y+a.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(a.fromPin.x+a.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(a.fromPin.y+
a.fromPin.node.y*VVVV.Theme.scaleY+4+g)+" "+(a.toPin.x+a.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(a.toPin.y+a.toPin.node.y*VVVV.Theme.scaleY-g)+" "+(a.toPin.x+a.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(a.toPin.y+a.toPin.node.y*VVVV.Theme.scaleY+0.5)});a.append("svg:path").attr("stroke","#FFF").attr("fill","rgba(0,0,0,0)").attr("stroke-width",0.5).attr("d",function(a){var g=(a.toPin.node.y-a.fromPin.node.y-a.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>g&&(g=30);return"M"+(a.fromPin.x+a.fromPin.node.x*
VVVV.Theme.scaleX+2+0.5)+","+(a.fromPin.y+a.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(a.fromPin.x+a.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(a.fromPin.y+a.fromPin.node.y*VVVV.Theme.scaleY+4+g)+" "+(a.toPin.x+a.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(a.toPin.y+a.toPin.node.y*VVVV.Theme.scaleY-g)+" "+(a.toPin.x+a.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(a.toPin.y+a.toPin.node.y*VVVV.Theme.scaleY+0.5)})},currentLink:function(a){a.attr("stroke","#FFF").attr("stroke-width",1)}};
VVVV.Theme=VVVV.Themes.Tron;
